import{u as n,d as v,y as A,H as d,k as p,b as W,j as E,I as H,J as O,v as V}from"./index-i7ah6HiS.js";import{L as F,W as T,u as z,S as R}from"./f_Bs0BMD_--lists.js";import{S as y}from"./f_B3qu8H4x-Stretcher.js";import{a as _,b as j,T as Q}from"./f_D7iT_LtI-TabBar.js";import{B as h}from"./f_BrRaAj1N-Button.js";/* empty css                 */import{h as K,M as Y}from"./f_D5I_A3xZ-ModelIcon.js";import{G as B,u as m}from"./f_BGABAZgR-Gallery.js";import{s as X,g as J}from"./f_C3ZnA0CX-aniFunction.js";import{S as x}from"./f_DyasSJuq-Selector.js";import{u as Z}from"./f_WeQR6bP8-useKey.js";import{U as ee,f as ne}from"./f_EATdZbkB-file2dataURL.js";import{u as te}from"./f_0M0jaU_a-useToggleState.js";import{C as ae}from"./f_DT8cWC2F-Check.js";import{c as U}from"./f_Ba8rLl13-createSvgIcon.js";import{B as $}from"./f_f2kTcK9s-Box.js";import{D as ie,a as oe}from"./f_D_th8P1f-DialogTitle.js";import"./f_BM_tZNm2-three.js";import"./f_BS5vLuGN-Close.js";import"./f_kN3iiJ7Y-CircularProgress.js";import"./f_opWlfgia-Popover.js";import"./f_PfIWZq16-GlowToggle.js";const ce=U(n("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),se=U(n("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"})),le=U(n("path",{d:"M5 20h14v-2H5zm0-10h4v6h6v-6h4l-7-7z"}));function re({icon:e="",subIcon:t="",title:o,subtitle:c="",onClick:a,...i}){return n(h,{variant:"outlined",className:"IconButton",onClick:a,startIcon:e&&n("div",{className:"IconButton-icons",children:[n("img",{className:"IconButton-mainIcon",src:e,alt:o,loading:"lazy"}),t&&n("img",{className:"IconButton-subIcon",src:t,alt:t,loading:"lazy"})]}),...i,children:n("div",{className:"IconButton-description",children:[c&&n("h5",{className:"IconButton-subtitle",children:c}),n("h3",{className:"IconButton-title",children:o})]})})}function I({icon:e,user:t,name:o,fullName:c=o,subtitle:a="",code:i,onClick:l}){const u=K(t)?`img/icon/${t}.png`:"",r=e?`img/aniIcon/${e}.png`:u;return n(re,{icon:r,subIcon:e&&u,title:o,subtitle:a,onClick:l,"data-code":i,"data-name":c})}function ue({icon:e,user:t,code:o,fullName:c,onClick:a}){return n(I,{icon:e,user:t,name:c,code:o,onClick:a})}function de({query:e,onSelect:t}){const[o,c]=v([]),[a,i]=v(!0);return A(()=>{i(!0),setTimeout(async()=>{const l=await X(e);c(l),i(!1)})},[e]),n("div",{className:"AniSearchResult",children:[n(y,{}),a?n(F,{}):n(B,{list:o,component:ue,onClick:t})]})}const me=[{label:"Home Screen",name:"home"},{label:"In Quest",name:"quest"},{label:"Weapon Specific",name:"weapon"},{label:"Generic Skills",name:"genericSkill"},{label:"Unique Skills",name:"uniqueSkill"},{label:"Unique Combo",name:"uniqueCombo"},{label:"Unique Force Strike",name:"uniqueFS"},{label:"Unique Victory",name:"uniqueVictory"},{label:"Other Unique",name:"uniqueOther"},{label:"Misc",name:"misc"}];function L({tabs:e,value:t,onChange:o}){return n(j,{variant:"scrollable",orientation:"vertical",className:"VerticalTabs",value:t,onChange:(a,i)=>o(i),children:e.map(({label:a,name:i})=>n(_,{label:a??i,value:i},i))})}const pe={minHeight:"3rem"};function k({name:e,code:t,onClick:o,fullName:c,...a}){return n(h,{className:"AniSelect-Btn",variant:"contained","data-code":t,"data-name":c??e,onClick:o,sx:pe,...a,children:e})}const he=["Male","Female"];function ge({value:e,onClick:t}){return n(x,{type:"text",options:he,value:e,onClick:t})}function fe({onSelect:e}){const{gender:t,setGender:o}=d(a=>a.advAni.home),c=m(a=>a["ani-home"]);return n("div",{className:"HomeAni",children:[n("h3",{className:"HomeAni-groupTitle",children:"Common Animation"}),n("div",{className:"AniSelect-simpleBtns",children:c.common.map(({name:a,code:i})=>n(k,{name:a,code:i,onClick:e,className:"AniSelect-Btn"},a))}),n("hr",{}),n("div",{className:"HomeAni-groupTitle",children:[n("h3",{children:"Gender Specific"}),n(ge,{value:t,onClick:o})]}),n("div",{className:"AniSelect-simpleBtns",children:c[t].map(({name:a,code:i})=>n(k,{name:a,code:i,fullName:`${t} ${a}`,onClick:e,className:"AniSelect-Btn"},a))})]})}function g({list:e,onClick:t}){return n(B,{list:e,component:k,onClick:t})}function ve({onSelect:e}){const t=m(o=>o["ani-quest"]);return n(g,{list:t,onClick:e})}const q=["Long","Close","Rapid"],Ae=q.map(e=>`img/appIcon/gun_${e}.png`);function Se({value:e,onClick:t}){return n(x,{type:"icon",options:q,icons:Ae,labels:q,value:e,onClick:t})}const ye=T.map(e=>`img/appIcon/weapon_${e}.png`);function C({value:e,onClick:t}){return n(x,{type:"icon",options:T,icons:ye,value:e,onClick:t})}const Ce={Long:"Long Range",Close:"Close Range",Rapid:"Rapid Fire"};function be({onSelect:e}){const{type:t,setType:o,gunMode:c,setGunMode:a}=d(s=>s.advAni.weapon),i=m(s=>s["ani-weapon"]),l=m(s=>s["ani-gun"]),u=i[t].map(s=>({...s,fullName:`${t} ${s.name}`})),r=l[c].map(s=>({...s,fullName:`${Ce[c]} Manacaster ${s.name}`}));return n("div",{className:"WeaponAni",children:[n(C,{value:t,onClick:o}),n(g,{list:u,onClick:e}),t==="Manacaster"&&n(p,{children:[n(Se,{value:c,onClick:a}),n(g,{list:r,onClick:e})]})]})}function Ne({onSelect:e}){const{type:t,setType:o}=d(i=>i.advAni.genericSkill),a=m(i=>i["ani-genericSkill"])[t].map(i=>({...i,fullName:`${t} ${i.name}`}));return n("div",{className:"GenericSkills",children:[n(C,{value:t,onClick:o}),n(g,{list:a,onClick:e})]})}function w({list:e,onClick:t}){return n(B,{list:e,component:I,onClick:t})}const ke=e=>({...e,fullName:`${e.name} Victory`}),qe=e=>({...e,fullName:`${e.name} ${e.subtitle||""} Combo`}),Be=e=>({...e,fullName:`${e.name} ${e.subtitle||""} Force Strike`}),xe=e=>({...e,fullName:e.subtitle?`${e.subtitle} ${e.name}`:e.name}),Ue={uniqueCombo:qe,uniqueFS:Be,uniqueVictory:ke,uniqueSkill:xe};function S({name:e,onSelect:t}){const o=`ani-${e}`,c=m(s=>s[o])??{},{setGroupWeaponType:a}=d(s=>s.advAni.groupByWeapon),i=s=>a(e,s),l=d(s=>s.advAni.groupByWeapon[e]);l??i(Object.keys(c)[0]);const u=Ue[e],r=u?c[l]?.map(u):c[l];return n("div",{className:"AniGroup",children:[n(C,{value:l,onClick:i}),n(w,{list:r,onClick:t},l)]})}function Me({onSelect:e}){const t=m(o=>o["ani-misc"]);return n(g,{list:t,onClick:e})}function $e({expanded:e,user:t,name:o,animations:c,onClick:a,onSelect:i}){return n(p,{children:[n("div",{className:`UniqueAniGroup ${e?"selected":""}`,"data-user":t,onClick:a,children:[n(Y,{modelId:t,alt:o}),n("h3",{children:o})]}),e&&n("div",{className:"UniqueAniGroup-details",children:n(g,{list:c,onClick:i})})]})}function Te({onSelect:e}){const t=m(r=>r["ani-uniqueOther"]),{type:o,setType:c,selected:a,setSelected:i}=d(r=>r.advAni.uniqueOther),l=t[o],u=r=>{const{user:s}=r.currentTarget.dataset;i(s===a?"":s)};return n(p,{children:n("div",{className:"OtherUniqueAni",children:[n(C,{value:o,onClick:c}),n("hr",{}),n("div",{className:"OtherUniqueAni-groups",children:l.map(r=>n($e,{expanded:a===r.user,...r,onClick:u,onSelect:e}))})]})})}const Ie={home:fe,quest:ve,weapon:be,genericSkill:Ne,uniqueSkill:e=>n(S,{...e,name:"uniqueSkill"}),uniqueVictory:e=>n(S,{...e,name:"uniqueVictory"}),uniqueFS:e=>n(S,{...e,name:"uniqueFS"}),uniqueCombo:e=>n(S,{...e,name:"uniqueCombo"}),uniqueOther:Te,misc:Me};function Le({onSelect:e}){const{category:t,setCategory:o}=d(a=>a.advAni),c=Ie[t]??y;return n("div",{className:"AniSelect-categories",children:[n(L,{tabs:me,value:t,onChange:o}),n("div",{className:"AniSelect-subCategory",children:n(c,{onSelect:e})})]})}function we(){const{source:e,setSource:t,sourceName:o,setSourceName:c}=d(r=>r.personalAni),{inputModel:a}=W(),i=(r,s)=>{c(s),t(r)},l=async()=>{const r=await a();r&&i(...r)};A(()=>{o||setTimeout(async()=>{const r=await E(e);r?.id&&c(r.name)})},[e]);const u=["b","w","e"].includes(e?.[0])?`img/icon/${e}.png`:`img/portrait/${e}.png`;return n("div",{className:"PersonalAni-source",children:[e&&n("img",{src:u,alt:e},e),n("div",{children:[n("h3",{children:o}),n(h,{variant:"outlined",onClick:l,children:"Change Source"})]})]})}function Ge({onSelect:e}){const t=!!indexedDB,{source:o}=d(i=>i.personalAni),[c,a]=v([]);return A(()=>{a([]),setTimeout(async()=>{if(!o)return;const l=(H(o)??(t?await J(o):[])).map(u=>({...u,user:void 0}));a(l)})},[o]),n(w,{list:c,onClick:e})}function Pe({onSelect:e}){return n("div",{className:"PersonalAnimation",children:[n(we,{}),n(Ge,{onSelect:e})]})}function De({onSelect:e}){const{category:t,setCategory:o}=d(i=>i.extraAni),c=m(i=>i["ani-extra"]),a=Object.keys(c).map(i=>({name:i}));return n("div",{className:"AniSelect-categories",children:[n(L,{tabs:a,value:t,onChange:o}),n("div",{className:"AniSelect-subCategory",children:n(g,{list:c[t],onClick:e})})]})}function We({initText:e,onChange:t=c=>{},...o}){const[c,a]=v(e),[i,l]=te(),u=s=>{const{value:f}=s.target;a(f),t(s)},r=s=>{s.keyCode===13&&l()};return A(()=>{a(e)},[e]),i?n(p,{children:[n(h,{title:"Save",onClick:l,children:n(ae,{})}),n("input",{value:c,onChange:u,onKeyUp:r,...o})]}):n(p,{children:[n(h,{title:"Edit",onClick:l,children:n(se,{})}),n("div",{...o,children:c})]})}function Ee({list:e,onSelect:t}){const o=a=>{const{value:i}=a.target,{uuid:l}=a.target.dataset,u=e.find(r=>r.uuid===l);u.name=i},c=a=>{const{uuid:i}=a.target.dataset,l=e.findIndex(u=>u.uuid===i);l!==-1&&e.splice(l,1)};return n("div",{className:"AnimationList",children:e?.map(a=>n(p,{children:[n(We,{initText:a.name,onChange:o,className:"AnimationList-aniName","data-uuid":a.uuid}),n(h,{"data-code":`ex:${a.uuid}`,"data-name":a.name,onClick:t,variant:"contained",title:"Select this animation",children:"Select"}),n(h,{"data-uuid":a.uuid,onClick:c,variant:"contained",title:"Delete this animation",children:n(ce,{})})]}))})}const He=e=>e&&new Promise(t=>{new O().load(e,t)});function Oe({onSelect:e}){const{userData:t}=V,[o,c]=Z();return A(()=>{const i=t.ani.addEventListener("change",c);return()=>t.ani.removeEventListener("change",i)}),n("div",{className:"UploadedAni",children:[n(ee,{title:"Upload fbx files containing animations applied on DL models",label:"Upload Animations",multiple:!0,mimeType:".fbx",onChange:async i=>{const l=Array.from(i),u=await Promise.all(l.map(ne)),s=(await Promise.all(u.map(He))).flatMap(f=>f.animations);t.ani.push(...s)}}),n(Ee,{list:t.ani,onSelect:e},o)]})}const N={root:{display:"flex",flexDirection:"column",overflowY:"hidden",minHeight:"90vh",minWidth:"20rem","& svg":{color:"rgba(16, 16, 16, 0.8)"}},title:{textAlign:"center",padding:"0.5rem 2rem",display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center",borderBottom:"1px solid rgba(16, 16, 16, 0.4)",boxShadow:"0 0.2rem 0.3rem rgba(16, 16, 16, 0.4)","& h2":{padding:"0.2rem 1rem"},"& Searchbox":{minWidth:"15rem"}},content:{padding:"0.5rem 1rem",overflowX:"hidden"}},Ve=[{name:"Adv"},{name:"Personal"},{name:"Extra"},{name:"Upload",icon:n(le,{}),label:""}],Fe={Adv:Le,Personal:Pe,Extra:De,Upload:Oe};function pn({onSelect:e=()=>{},onAfterSelect:t}){const{category:o,setCategory:c,getCurrentState:a}=d(),i=!!indexedDB,[l,u]=v(""),r=z(l,500),s=(M,b)=>c(b),f=M=>{const{code:b,name:P}=M.currentTarget.dataset,D=a();e(b,P,D),t?.()},G=Fe[o]??y;return n($,{className:"AniSelect",sx:N.root,children:[n($,{sx:N.title,children:[n(ie,{children:"Select an Animation"}),i&&n(R,{placeholder:"Search",query:l,onChange:u})]}),l?n(de,{query:r,onSelect:f}):n(p,{children:[n(Q,{value:o,onChange:s,tabs:Ve}),n(oe,{sx:N.content,children:[n(y,{}),n(G,{onSelect:f})]})]})]})}export{pn as default};
