const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/f_CfPBeZ0f-GLTFExporter.js","assets/f_D_ebBjzY-three.js"])))=>i.map(i=>d[i]);
import{D as Ii,A as xe,q as vl,y as Ae,u as m,t as hl,j as Be,h as _n,V as Ei,a as _e,v as z,W as Ai,X as gl,N as In,Y as ml,Z as bl,H as Vr,R as ye,k as ae,e as yl,d as ur,l as ki,L as Or,a0 as wl,S as Ri,T as vr,x as En,a1 as xl,a2 as Dl,a3 as Sl,a4 as Cl,a5 as _l,a6 as yr,_ as Tt,a7 as Il,a8 as Ti,a9 as El,b as Pt,aa as Pi,ab as oa,ac as Al,ad as kl,ae as Rl,af as Tl,ag as Pl}from"./index-CuGM8Slr.js";import{c as Me}from"./f_BrYV08db-createSvgIcon.js";import{M as Bi,F as mn,a as Bl,b as Ml,P as Nl,O as Ol,T as Ll,c as Fl,d as zl,e as Gl,f as Hl,D as Wl,S as ql,g as Ul,I as $l,h as cr,i as Vl,A as Bt,C as Mt}from"./f_F6U9rQYf-BoneManager.js";import{L as An}from"./f_R0Xt2zza-lists.js";import{I as hr,C as kn}from"./f_DMelSIFy-Close.js";import{B as Zr}from"./f_DEkqpKbM-Box.js";import{u as Mi,c as Zl}from"./f_Dkfb3t6U-styles.js";import{u as gr}from"./f_e6r3FaCW-useKey.js";import{B as fe}from"./f_CJtW2sU9-Button.js";import{A as $e,a as jl,b as Kl}from"./f_DRSkNm6C-Accordion.js";import{M as Yl,T as xt,u as Xl}from"./f_DIbzucII-Gallery.js";import"./f_CmtxPpDU-GlowToggle.js";import{M as Jl}from"./f_CNDKg5aq-filterConfig.js";import"./f_cTeFNPrY-Selector.js";import{g as Ql,c as es,E as rs,b as ts}from"./f_sGYYiujz-MeshMouthSelect.js";import"./f_DwPteHU2-index.js";import"./f_D6HhjixJ-index.js";import"./f_BKwzEz8l-index.js";/* empty css                 */import{M as Ni}from"./f_ZBbNXZyY-ModelIcon.js";import{u as ns}from"./f_CmIjODf5-useToggleState.js";import{z as as,a as is,g as os,u as ls,c as pt,s as Rn,d as et,e as ss,m as Oi,o as cs,H as Dt,O as le,P as la,_ as Li}from"./f_D3-mSQyf-CircularProgress.js";import{b as us,P as Tn,B as ds,S as fs}from"./f_DZS45vK9-SkipPrevious.js";import{T as ps}from"./f_DjvnGs9L-TabBar.js";import{c as Fi,T as vs,l as hs,o as zi,d as gs,r as ms,m as sa,u as bs,a as ys,M as ws}from"./f_CFnBaOhB-Popover.js";import{i as xs}from"./f_BZD76o0i-aniFunction.js";import"./f_D_ebBjzY-three.js";import"./f_BM1MwBZM-ColorButton.js";import"./f_DDS8Ks2N-DialogTitle.js";import"./f_Rr0ejrS1-FacePartSelector.js";import"./f_PPr3NxCr-index.js";function Ds(e,r,t){const n=r.getBoundingClientRect(),l=t&&t.getBoundingClientRect(),a=zi(r);let i;if(r.fakeTransform)i=r.fakeTransform;else{const f=a.getComputedStyle(r);i=f.getPropertyValue("-webkit-transform")||f.getPropertyValue("transform")}let o=0,s=0;if(i&&i!=="none"&&typeof i=="string"){const f=i.split("(")[1].split(")")[0].split(",");o=parseInt(f[4],10),s=parseInt(f[5],10)}return e==="left"?l?`translateX(${l.right+o-n.left}px)`:`translateX(${a.innerWidth+o-n.left}px)`:e==="right"?l?`translateX(-${n.right-l.left-o}px)`:`translateX(-${n.left+n.width-o}px)`:e==="up"?l?`translateY(${l.bottom+s-n.top}px)`:`translateY(${a.innerHeight+s-n.top}px)`:l?`translateY(-${n.top-l.top+n.height-s}px)`:`translateY(-${n.top+n.height-s}px)`}function Ss(e){return typeof e=="function"?e():e}function vt(e,r,t){const n=Ss(t),l=Ds(e,r,n);l&&(r.style.webkitTransform=l,r.style.transform=l)}const Cs=Ii(function(r,t){const n=Fi(),l={enter:n.transitions.easing.easeOut,exit:n.transitions.easing.sharp},a={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:i,appear:o=!0,children:s,container:f,direction:p="down",easing:c=l,in:d,onEnter:h,onEntered:v,onEntering:D,onExit:S,onExited:g,onExiting:w,style:C,timeout:I=a,TransitionComponent:k=vs,...R}=r,_=xe(null),M=as(hs(s),_,t),F=H=>ee=>{H&&(ee===void 0?H(_.current):H(_.current,ee))},G=F((H,ee)=>{vt(p,H,f),ms(H),h&&h(H,ee)}),O=F((H,ee)=>{const pe=sa({timeout:I,style:C,easing:c},{mode:"enter"});H.style.webkitTransition=n.transitions.create("-webkit-transform",{...pe}),H.style.transition=n.transitions.create("transform",{...pe}),H.style.webkitTransform="none",H.style.transform="none",D&&D(H,ee)}),W=F(v),T=F(w),$=F(H=>{const ee=sa({timeout:I,style:C,easing:c},{mode:"exit"});H.style.webkitTransition=n.transitions.create("-webkit-transform",ee),H.style.transition=n.transitions.create("transform",ee),vt(p,H,f),S&&S(H)}),J=F(H=>{H.style.webkitTransition="",H.style.transition="",g&&g(H)}),K=H=>{i&&i(_.current,H)},j=vl(()=>{_.current&&vt(p,_.current,f)},[p,f]);return Ae(()=>{if(d||p==="down"||p==="right")return;const H=gs(()=>{_.current&&vt(p,_.current,f)}),ee=zi(_.current);return ee.addEventListener("resize",H),()=>{H.clear(),ee.removeEventListener("resize",H)}},[p,d,f]),Ae(()=>{d||j()},[d,j]),m(k,{nodeRef:_,onEnter:G,onEntered:W,onEntering:O,onExit:$,onExited:J,onExiting:T,addEndListener:K,appear:o,in:d,timeout:I,...R,children:(H,{ownerState:ee,...pe})=>hl(s,{ref:M,style:{visibility:H==="exited"&&!d?"hidden":void 0,...C,...s.props.style},...pe})})});function _s(e){return is("MuiDrawer",e)}os("MuiDrawer",["root","docked","paper","anchorLeft","anchorRight","anchorTop","anchorBottom","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const Gi=(e,r)=>{const{ownerState:t}=e;return[r.root,(t.variant==="permanent"||t.variant==="persistent")&&r.docked,r.modal]},Is=e=>{const{classes:r,anchor:t,variant:n}=e,l={root:["root",`anchor${et(t)}`],docked:[(n==="permanent"||n==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${et(t)}`,n!=="temporary"&&`paperAnchorDocked${et(t)}`]};return ss(l,_s,r)},Es=Rn(ws,{name:"MuiDrawer",slot:"Root",overridesResolver:Gi})(Oi(({theme:e})=>({zIndex:(e.vars||e).zIndex.drawer}))),ca=Rn("div",{shouldForwardProp:cs,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:Gi})({flex:"0 0 auto"}),As=Rn(ys,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.paper,r[`paperAnchor${et(t.anchor)}`],t.variant!=="temporary"&&r[`paperAnchorDocked${et(t.anchor)}`]]}})(Oi(({theme:e})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(e.vars||e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:({ownerState:r})=>r.anchor==="left"&&r.variant!=="temporary",style:{borderRight:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:r})=>r.anchor==="top"&&r.variant!=="temporary",style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:r})=>r.anchor==="right"&&r.variant!=="temporary",style:{borderLeft:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:r})=>r.anchor==="bottom"&&r.variant!=="temporary",style:{borderTop:`1px solid ${(e.vars||e).palette.divider}`}}]}))),Hi={left:"right",right:"left",top:"down",bottom:"up"};function ks(e){return["left","right"].includes(e)}function Rs({direction:e},r){return e==="rtl"&&ks(r)?Hi[r]:r}const Wi=Ii(function(r,t){const n=ls({props:r,name:"MuiDrawer"}),l=Fi(),a=bs(),i={enter:l.transitions.duration.enteringScreen,exit:l.transitions.duration.leavingScreen},{anchor:o="left",BackdropProps:s,children:f,className:p,elevation:c=16,hideBackdrop:d=!1,ModalProps:{BackdropProps:h,...v}={},onClose:D,open:S=!1,PaperProps:g={},SlideProps:w,TransitionComponent:C=Cs,transitionDuration:I=i,variant:k="temporary",...R}=n,_=xe(!1);Ae(()=>{_.current=!0},[]);const M=Rs({direction:a?"rtl":"ltr"},o),G={...n,anchor:o,elevation:c,open:S,variant:k,...R},O=Is(G),W=m(As,{elevation:k==="temporary"?c:0,square:!0,...g,className:pt(O.paper,g.className),ownerState:G,children:f});if(k==="permanent")return m(ca,{className:pt(O.root,O.docked,p),ownerState:G,ref:t,...R,children:W});const T=m(C,{in:S,direction:Hi[M],timeout:I,appear:_.current,...w,children:W});return k==="persistent"?m(ca,{className:pt(O.root,O.docked,p),ownerState:G,ref:t,...R,children:T}):m(Es,{BackdropProps:{...s,...h,transitionDuration:I},className:pt(O.root,O.modal,p),open:S,ownerState:G,onClose:D,hideBackdrop:d,ref:t,...R,...v,children:T})}),Ts=Me(m("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos"),Ps=Me(m("path",{d:"M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6m6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26"}),"Autorenew"),Bs=Me(m("path",{d:"m9.4 10.5 4.77-8.26C13.47 2.09 12.75 2 12 2c-2.4 0-4.6.85-6.32 2.25l3.66 6.35zM21.54 9c-.92-2.92-3.15-5.26-6-6.34L11.88 9zm.26 1h-7.49l.29.5 4.76 8.25C21 16.97 22 14.61 22 12c0-.69-.07-1.35-.2-2M8.54 12l-3.9-6.75C3.01 7.03 2 9.39 2 12c0 .69.07 1.35.2 2h7.49zm-6.08 3c.92 2.92 3.15 5.26 6 6.34L12.12 15zm11.27 0-3.9 6.76c.7.15 1.42.24 2.17.24 2.4 0 4.6-.85 6.32-2.25l-3.66-6.35z"}),"Camera"),Ms=Me([m("circle",{cx:"12",cy:"12",r:"3.2"},"0"),m("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")],"CameraAlt"),Ns=Me(m("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"}),"ContentCopy"),Mr=Me(m("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"}),"Download"),Nt=Me(m("circle",{cx:"12",cy:"12",r:"8"}),"FiberManualRecord"),Pn=Me(m("path",{d:"M11.5 9H13v6h-1.5zM9 9H6c-.6 0-1 .5-1 1v4c0 .5.4 1 1 1h3c.6 0 1-.5 1-1v-2H8.5v1.5h-2v-3H10V10c0-.5-.4-1-1-1m10 1.5V9h-4.5v6H16v-2h2v-1.5h-2v-1z"}),"Gif"),Os=Me(m("path",{d:"M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"}),"GitHub"),Ls=Me(m("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5M2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1m18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1M11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1m0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1M5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0z"}),"LightMode"),Fs=Me(m("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu"),zs=Me(m("path",{d:"M20 3H4c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h3l-1 1v2h12v-2l-1-1h3c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 13H4V5h16z"}),"Monitor"),qi=Me(m("path",{d:"M23 18V6c0-1.1-.9-2-2-2H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2M8.5 12.5l2.5 3.01L14.5 11l4.5 6H5z"}),"Panorama"),Gs=Me(m("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"People"),Hs=Me(m("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person"),Ws=Me(m("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8m-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91"}),"RestartAlt"),qs=Me(m("path",{d:"m3.5 18.49 6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z"}),"ShowChart"),Us=Me(m("path",{d:"M6 6h12v12H6z"}),"Stop"),$s=Me(m("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility"),Vs=Me(m("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff"),Zs='url("img/Rose-Petals.svg")',ua="17rem",js="#1f0000",bn={sidebar:{minWidth:ua},sidebarHeader:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:"1rem",position:"sticky",top:0,height:"2.75rem",backgroundColor:"#101010",zIndex:6},paper:{width:ua,backgroundColor:js,border:"none",backgroundImage:Zs,backgroundSize:"cover",backgroundPosition:"center",scrollbarWidth:"thin",scrollbarColor:"rgba(255, 255, 255, 0.8) rgba(0, 0, 0, 0.3)","&::-webkit-scrollbar":{width:"4px",backgroundColor:"rgba(255, 255, 255, 0.3)"},"&::-webkit-scrollbar-thumb":{width:"4px",backgroundColor:"rgba(255, 255, 255, 0.8)",borderRadius:"2px"},"& > .QuickAction":{position:"sticky",top:"2.75rem",zIndex:6,height:"2rem"},"& > .TabBar":{position:"sticky",top:"4.75rem",zIndex:6,marginBottom:"0.5rem"},"& > button":{backgroundColor:"rgba(16, 16, 16, 0.5)",minHeight:"2.5rem",borderRadius:"unset",padding:"0.5rem 1.5rem",justifyContent:"flex-start",gap:"1rem","& .btn-icon":{maxHeight:"1.5rem"}},"& > button:hover":{backgroundColor:"rgba(16, 16, 16, 0.8)"},"& .break":{minHeight:"0.5rem"},"& .break + .break":{minHeight:0},"& .bottom-space":{minHeight:"2rem"}}},Ks=m("a",{href:"https://ko-fi.com/L4L83VOAP",rel:"noreferrer",target:"_blank",children:m("img",{style:{height:"2rem"},src:"https://cdn.ko-fi.com/cdn/kofi5.png?v=2",alt:"Buy Me a Coffee"})}),Ys=m("a",{href:"https://github.com/dgk3593/dl-model",target:"_blank",children:m(Os,{style:{width:"2rem",margin:"0.5rem 1rem",color:"white"},titleAccess:"Source Code"})}),Xs=({onClick:e,color:r="#101010"})=>m(Zr,{position:"absolute",top:"2rem",right:0,children:m(hr,{className:"DockButton",sx:{color:r},onClick:e,title:"Send to Dock",size:"large",children:m(Ts,{})})});function Js(){const{mode:e,handleSelect:r,close:t}=Be(o=>o.sidebar.modal),n=Be(o=>o.dock.open),l=()=>{n(e,r),t()},a=Mi("(min-width:640px)"),i=Ei[e]??Zr;return m(Bi,{closeModal:t,open:!!e,children:[a&&m(Xs,{onClick:l}),m(_n,{fallback:m(An,{}),children:m(i,{onSelect:r,onAfterSelect:t})})]})}const{setLoadingMsg:da}=Be.getState(),Qs=(e,r,t)=>{const n=_e.getState().activeModel;n==null||n.animation.addChain(e);const l=In(e,r);n!=null&&n.userData&&(n.userData.aniSelectState=t,n.userData.chain?n.userData.chain.splice(0,1/0,...l):n.userData.chain=l)},ec=async(e,r)=>{da("Loading");const t=_e.getState().setActiveModel,n=_e.getState().activeModel,l=await z.loadDLModel(e);l.userData.name=r,l.material.code=(n==null?void 0:n.material.code)??"",l.outline.code=(n==null?void 0:n.outline.code)??"",Ai(l);const{parent:a,parentBone:i}=n??{},o=(n==null?void 0:n.type)==="adventurer"&&l.type==="adventurer";if(o)l.userData.chain=n.userData.chain,l.animation.addChain(n.animation.current.chainCode),n.attachment.list.forEach(s=>l.attach(s,s.parentBone));else if(n!=null&&n.animation.current.chainCode||!i){const s=gl(e);if(s){const{code:f,name:p}=s;l.animation.addChain(f),l.userData.chain=In(f,p)}}if(n==null||n.dispose(),i)a.attach(l,i);else{if(z.add(l),!o){const f=ml(e);z.camera.position.set(...f);const p=bl(e);z.controls.target.set(...p)}const s=l.type==="adventurer"?"Adv":"Personal";Vr.getState().setCategory(s)}t(l),da("")},rc=(e,r)=>{const t=_e.getState().activeModel;!(t!=null&&t.face)||e===void 0||e===null||(t.face[`${r}BaseIdx`]=e)},tc=(e,r)=>{const t=_e.getState().activeModel;!e||!(t!=null&&t.face)||(t.face[`${r}Texture`]=e)},yt={model:ec,animation:Qs,face:rc,faceTexture:tc},nc=m("img",{className:"btn-icon",src:"img/appIcon/weapon.png",alt:"Add Weapon"});function ac({openModal:e}){const{activeModel:r}=_e(),[t,n]=gr(),l=xe(()=>{}),a=r==null?void 0:r.bones.list.includes("jWeaponR"),i=r==null?void 0:r.attachment.jWeaponL,o=r==null?void 0:r.attachment.jWeaponR,s=()=>e("weapon",yt.weapon);return Ae(()=>{l.current();const f=r==null?void 0:r.addEventListener("AttachmentChanged",n);return l.current=()=>r==null?void 0:r.removeEventListener("AttachmentChanged",f),l.current},[r]),a?m(ae,{children:[m(fe,{variant:"contained","data-mode":"weapon",onClick:s,startIcon:nc,children:"Add Weapon"}),m(ye.Fragment,{children:[i==null?void 0:i.map(f=>m(mn,{target:f,label:"Left Weapon"},f.uniqueId)),o==null?void 0:o.map(f=>m(mn,{target:f,label:"Right Weapon"},f.uniqueId))]},t)]}):m(ae,{})}function ic({handleClick:e}){const{activeModel:r}=_e(),t=r==null?void 0:r.face;return t?m(ae,{children:[m(fe,{variant:"contained","data-mode":"face",onClick:e,startIcon:m(Bl,{}),children:"Facial Expression"}),t.type==="uv"&&m(fe,{variant:"contained","data-mode":"faceTexture",onClick:e,startIcon:m(Ml,{}),children:"Face Texture"})]}):m(ae,{})}function Ui({label:e,handleSelect:r}){const t=Be(i=>i.sidebar.modal.open),{setIndex:n}=yl(),l=i=>{i.stopPropagation();const{index:o}=i.currentTarget.dataset;o!==void 0&&n(0,o),t("model",r)},a=Zl.map((i,o)=>{const{label:s,icon:f}=i;return m(fe,{title:s,"data-index":o,onClick:l,children:m("img",{src:f,alt:s})})});return m($e,{className:"ModelSelect",defaultOpen:!0,disableGutters:!0,children:[m(fe,{variant:"contained",onClick:l,children:e}),m("div",{className:"ModelSelect-groups",children:a})]})}function oc(){const{activeModel:e}=_e(),r=e==null?void 0:e.outline;if(!r)return m(ae,{});const[t,n]=gr(),l=()=>{const{code:i}=r;e.attachment.traverse(o=>{o.outline.code=i})};return m($e,{disableGutters:!0,className:"SettingGroup",children:[m(ae,{children:[m("div",{className:"title",children:[m(Nl,{}),"Outline"]}),m(fe,{onClick:i=>{i.stopPropagation(),r.enabled=!r.enabled,l(),n()},title:"Toggle Outline",variant:"contained",children:"Toggle"})]}),m(Ol,{target:e},t)]})}function lc(){const{activeModel:e}=_e(),{material:r}=e,[t,n]=gr(),l=()=>{const{code:i}=r;e.attachment.traverse(o=>{o.material.code=i})};return m($e,{disableGutters:!0,className:"SettingGroup",children:[m(ae,{children:[m("div",{className:"title",children:[m(Ll,{}),"Material"]}),m(fe,{onClick:i=>{i.stopPropagation(),r.code="",l(),n()},title:"Reset to default",variant:"contained",children:"Reset"})]}),m(Fl,{target:e},t)]})}const sc=e=>{const{setCategory:r,loadState:t}=Vr.getState();_e.getState().setActiveModel(e),r(e.type==="adventurer"?"Adv":"Personal"),t(e.userData.aniSelectState)};function $i(){var o;const{activeModel:e}=_e(),r=e==null?void 0:e.id,[t,n]=ur((o=e==null?void 0:e.userData)==null?void 0:o.name),l=Be(s=>s.sidebar.modal.open),a=()=>l("target",sc);Ae(()=>{var s;n((s=e==null?void 0:e.userData)==null?void 0:s.name),!(t||!e)&&ki(r).then(f=>{f&&(n(f.name),e.userData.name=f.name)})},[e]);const i=t??r??"None";return m("div",{className:"ModelSettings-target",children:["Current",m(fe,{onClick:a,title:"Click to change",children:[m(Ni,{modelId:r,alt:i}),m("span",{className:"name",children:i})]})]})}const fa={change:"Change Model",select:"Select Model"};function cc(){const{activeModel:e}=_e(),{loadState:r}=Vr(),t=Be(s=>s.sidebar.modal.open),{toggle:n,setTarget:l}=Or(),a=s=>{const{mode:f}=s.currentTarget.dataset;t(f,yt[f])},i=()=>{r(e==null?void 0:e.userData.aniSelectState),t("animation",yt.animation)},o=()=>{l(e),n()};return m(ae,{children:[m($i,{}),m(Ui,{label:e?fa.change:fa.select,handleSelect:yt.model}),m("span",{className:"break"}),e&&m(ae,{children:[m(zl,{target:e},e.uniqueId),(e==null?void 0:e.parts)&&m(ae,{children:[m(Gl,{target:e},e.uniqueId),m("span",{className:"break"})]}),(e==null?void 0:e.face)&&m(ic,{handleClick:a}),m("span",{className:"break"}),m(fe,{variant:"contained","data-mode":"attachment",onClick:a,startIcon:m(Hl,{}),children:"Manage Attachments"}),m(ac,{openModal:t}),m("span",{className:"break"}),m(fe,{variant:"contained","data-mode":"animation",onClick:i,startIcon:m(Wl,{}),children:"Select Animation"}),m(fe,{variant:"contained",onClick:o,startIcon:m(ql,{}),title:"Create Animation Chain",children:"Animation Chain"}),m("span",{className:"break"}),m(oc,{}),m(lc,{}),m(Ul,{target:e})]})]})}const{setLoadingMsg:pa}=Be.getState(),uc=async(e,r)=>{pa("Loading");const t=await z.loadDLModel(e);t.userData.name=r,Ai(t),z.add(t),pa("")};function dc(){const[e,r]=gr();return Ae(()=>{const n=z.model.addEventListener("change",r);return()=>{z.model.removeEventListener("change",n)}},[]),m(ae,{children:[m(Ui,{label:"Add Model",handleSelect:uc}),m("span",{className:"break"}),m(fe,{variant:"contained",onClick:()=>{z.loadedModel.forEach(({animation:n})=>{n.stop(),n.play()})},startIcon:m(Ws,{}),children:"Restart All Animation"}),m("span",{className:"break"}),m(ye.Fragment,{children:z.model.map(n=>m("div",{children:m(mn,{target:n})},n.uniqueId))},e)]})}const fc=[{title:"Single Model",value:"single",icon:m(Hs,{})},{title:"Multiple Model",value:"multi",icon:m(Gs,{})}],pc={single:cc,multi:dc},vc={ModeSelect:{backgroundColor:"#101010",color:"#eee",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",gap:"2rem",marginBottom:"0.3rem",cursor:"default",position:"sticky",top:"7.75rem",zIndex:"6"}};function hc(){const{manageMode:e,setManageMode:r}=Be(n=>n.sidebar),t=pc[e]??ye.Fragment;return m(ae,{children:[m(Zr,{className:"ModeSelect",sx:vc.ModeSelect,children:["Mode",m($l,{tabs:fc,className:"ModeSelect-tabs",value:e,onChange:r})]}),m(t,{})]})}const gc=Object.keys(wl).map(e=>({value:e,label:e})),mc=[{propName:"pixelRatio",label:"Pixel Ratio",type:"slider",title:"Pixel Ratio, used to increase image quality on high DPI screens",min:.1,max:window.devicePixelRatio,step:.1},{propName:"toneMapping",label:"Tone Mapping",type:"select",options:gc}];function bc(){const[e,r]=gr(),t=a=>{a.stopPropagation(),z.setViewport(),z.pixelRatio=1,z.toneMapping="No Mapping",setTimeout(()=>{r()},200)},n=()=>{const{viewport:{width:a,height:i}}=z;z.setViewport(a,i)};Ae(()=>{const a=()=>setTimeout(()=>{r()},200);return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]);const l=[{propName:"width",label:"Width",type:"number",min:0,max:window.innerWidth,step:32,onChange:n},{propName:"height",label:"Height",type:"number",min:0,max:window.innerHeight,step:32,onChange:n}];return m($e,{disableGutters:!0,className:"SettingGroup DisplayControl",children:[m(ae,{children:[m("div",{className:"title",children:[m(zs,{}),"Display"]}),m(fe,{onClick:t,title:"Reset display settings",variant:"contained",children:"Reset"})]}),m(ye.Fragment,{children:[m(cr,{target:z.viewport,propList:l}),m(cr,{target:z,propList:mc})]},e)]})}const yc=[{propName:"autoRotate",label:"Enabled",type:"boolean"},{propName:"autoRotateSpeed",label:"Speed",type:"slider",min:-10,max:10,step:1}];function wc(){const{controls:e}=z,[r,t]=gr();return m($e,{className:"SettingGroup",children:[m(ae,{children:[m("div",{className:"title",children:[m(Vl,{}),"Auto Rotate"]}),m(fe,{onClick:l=>{l.stopPropagation(),e.autoRotate=!1,e.autoRotateSpeed=2,t()},title:"Reset Auto Rotate Settings",variant:"contained",children:"Reset"})]}),m(cr,{target:e,propList:yc},r)]})}function Vi({children:e,onClick:r,options:t,title:n}){const[l,a]=ur(null),i=f=>{f.stopPropagation(),a(f.currentTarget)},o=()=>a(null),s=f=>{f.stopPropagation();const{value:p}=f.currentTarget.dataset;r(p),o()};return m(ae,{children:[m(fe,{onClick:i,title:n,variant:"contained",children:e}),m(Yl,{anchorEl:l,open:!!l,onClose:o,children:t.map(({value:f,label:p})=>m(Jl,{"data-value":f,onClick:s,children:p??f},f))})]})}const Zi={DirectionalLight:[{propName:"visible",label:"Enabled",type:"boolean"},{propName:"showHelper",label:"Show Helper",type:"boolean"},{propName:"intensity",label:"Intensity",type:"slider",min:0,max:1,step:.05},{propName:"colorCode",label:"Color",type:"color"},{propName:"position",label:"Position",type:"vector",step:.05}],AmbientLight:[{propName:"visible",label:"Enabled",type:"boolean"},{propName:"intensity",label:"Intensity",type:"slider",min:0,max:1,step:.05},{propName:"colorCode",label:"Color",type:"color"}],PointLight:[{propName:"visible",label:"Enabled",type:"boolean"},{propName:"showHelper",label:"Show Helper",type:"boolean"},{propName:"intensity",label:"Intensity",type:"slider",min:0,max:1,step:.05},{propName:"colorCode",label:"Color",type:"color"},{propName:"decay",label:"Dacay",type:"slider",min:1,max:2,step:.05},{propName:"position",label:"Position",type:"vector",step:.05}]};function xc({target:e}){const{type:r,name:t}=e,l=m(hr,{title:"Remove",className:"closeButton",onClick:i=>{i.stopPropagation(),e.remove()},children:m(kn,{})}),a=Zi[r];return r==="DirectionalLight"&&(a.find(i=>i.propName==="position").onChange=()=>{var i,o;return(o=(i=e.helper)==null?void 0:i.update)==null?void 0:o.call(i)}),m($e,{disableGutters:!0,className:"LightController",children:[m(ae,{children:[t,l]}),m(ae,{children:m(cr,{target:e,propList:a})})]})}const Dc=Object.keys(Zi).map(e=>{const r=e.replace("Light","");return{label:r,value:r.toLowerCase()}});function Sc(){const[e,r]=gr(),t=z.light.list;return Ae(()=>{const l=t.addEventListener("change",r);return()=>t.removeEventListener("change",l)},[]),m($e,{disableGutters:!0,className:"LightControl SettingGroup with-subgroup",children:[m(ae,{children:[m("div",{className:"title",children:[m(Ls,{}),"Light"]}),m(Vi,{title:"Add Light",onClick:l=>z.light.add(l),options:Dc,children:m(Bt,{})})]}),m(ye.Fragment,{children:t.length?t.map((l,a)=>m(xc,{target:l},`${e+a}`)):"Click + to add light"},e)]})}function nt(e){"@babel/helpers - typeof";return nt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},nt(e)}function Cc(e,r){if(nt(e)!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,r);if(nt(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function _c(e){var r=Cc(e,"string");return nt(r)=="symbol"?r:r+""}function Ic(e,r,t){return(r=_c(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function va(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),t.push.apply(t,n)}return t}function ha(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?va(Object(t),!0).forEach(function(n){Ic(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):va(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Ye(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var ga=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),ma=function(){return Math.random().toString(36).substring(7).split("").join(".")},ba={INIT:"@@redux/INIT"+ma(),REPLACE:"@@redux/REPLACE"+ma()};function Ec(e){if(typeof e!="object"||e===null)return!1;for(var r=e;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r}function ji(e,r,t){var n;if(typeof r=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Ye(0));if(typeof r=="function"&&typeof t>"u"&&(t=r,r=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Ye(1));return t(ji)(e,r)}if(typeof e!="function")throw new Error(Ye(2));var l=e,a=r,i=[],o=i,s=!1;function f(){o===i&&(o=i.slice())}function p(){if(s)throw new Error(Ye(3));return a}function c(D){if(typeof D!="function")throw new Error(Ye(4));if(s)throw new Error(Ye(5));var S=!0;return f(),o.push(D),function(){if(S){if(s)throw new Error(Ye(6));S=!1,f();var w=o.indexOf(D);o.splice(w,1),i=null}}}function d(D){if(!Ec(D))throw new Error(Ye(7));if(typeof D.type>"u")throw new Error(Ye(8));if(s)throw new Error(Ye(9));try{s=!0,a=l(a,D)}finally{s=!1}for(var S=i=o,g=0;g<S.length;g++){var w=S[g];w()}return D}function h(D){if(typeof D!="function")throw new Error(Ye(10));l=D,d({type:ba.REPLACE})}function v(){var D,S=c;return D={subscribe:function(w){if(typeof w!="object"||w===null)throw new Error(Ye(11));function C(){w.next&&w.next(p())}C();var I=S(C);return{unsubscribe:I}}},D[ga]=function(){return this},D}return d({type:ba.INIT}),n={dispatch:d,subscribe:c,getState:p,replaceReducer:h},n[ga]=v,n}function ya(e,r){return function(){return r(e.apply(this,arguments))}}function wa(e,r){if(typeof e=="function")return ya(e,r);if(typeof e!="object"||e===null)throw new Error(Ye(16));var t={};for(var n in e){var l=e[n];typeof l=="function"&&(t[n]=ya(l,r))}return t}function Ki(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.length===0?function(n){return n}:r.length===1?r[0]:r.reduce(function(n,l){return function(){return n(l.apply(void 0,arguments))}})}function Ac(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(n){return function(){var l=n.apply(void 0,arguments),a=function(){throw new Error(Ye(15))},i={getState:l.getState,dispatch:function(){return a.apply(void 0,arguments)}},o=r.map(function(s){return s(i)});return a=Ki.apply(void 0,o)(l.dispatch),ha(ha({},l),{},{dispatch:a})}}}var Yi=ye.createContext(null);function kc(e){e()}var Xi=kc,Rc=function(r){return Xi=r},Tc=function(){return Xi};function Pc(){var e=Tc(),r=null,t=null;return{clear:function(){r=null,t=null},notify:function(){e(function(){for(var l=r;l;)l.callback(),l=l.next})},get:function(){for(var l=[],a=r;a;)l.push(a),a=a.next;return l},subscribe:function(l){var a=!0,i=t={callback:l,next:null,prev:t};return i.prev?i.prev.next=i:r=i,function(){!a||r===null||(a=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:r=i.next)}}}}var xa={notify:function(){},get:function(){return[]}};function Ji(e,r){var t,n=xa;function l(c){return s(),n.subscribe(c)}function a(){n.notify()}function i(){p.onStateChange&&p.onStateChange()}function o(){return!!t}function s(){t||(t=r?r.addNestedSub(i):e.subscribe(i),n=Pc())}function f(){t&&(t(),t=void 0,n.clear(),n=xa)}var p={addNestedSub:l,notifyNestedSubs:a,handleChangeWrapper:i,isSubscribed:o,trySubscribe:s,tryUnsubscribe:f,getListeners:function(){return n}};return p}var Qi=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?Ri:Ae;function Bc(e){var r=e.store,t=e.context,n=e.children,l=vr(function(){var o=Ji(r);return{store:r,subscription:o}},[r]),a=vr(function(){return r.getState()},[r]);Qi(function(){var o=l.subscription;return o.onStateChange=o.notifyNestedSubs,o.trySubscribe(),a!==r.getState()&&o.notifyNestedSubs(),function(){o.tryUnsubscribe(),o.onStateChange=null}},[l,a]);var i=t||Yi;return ye.createElement(i.Provider,{value:l},n)}var qt={exports:{}},Se={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Da;function Mc(){if(Da)return Se;Da=1;var e=60103,r=60106,t=60107,n=60108,l=60114,a=60109,i=60110,o=60112,s=60113,f=60120,p=60115,c=60116,d=60121,h=60122,v=60117,D=60129,S=60131;if(typeof Symbol=="function"&&Symbol.for){var g=Symbol.for;e=g("react.element"),r=g("react.portal"),t=g("react.fragment"),n=g("react.strict_mode"),l=g("react.profiler"),a=g("react.provider"),i=g("react.context"),o=g("react.forward_ref"),s=g("react.suspense"),f=g("react.suspense_list"),p=g("react.memo"),c=g("react.lazy"),d=g("react.block"),h=g("react.server.block"),v=g("react.fundamental"),D=g("react.debug_trace_mode"),S=g("react.legacy_hidden")}function w(T){if(typeof T=="object"&&T!==null){var $=T.$$typeof;switch($){case e:switch(T=T.type,T){case t:case l:case n:case s:case f:return T;default:switch(T=T&&T.$$typeof,T){case i:case o:case c:case p:case a:return T;default:return $}}case r:return $}}}var C=a,I=e,k=o,R=t,_=c,M=p,F=r,G=l,O=n,W=s;return Se.ContextConsumer=i,Se.ContextProvider=C,Se.Element=I,Se.ForwardRef=k,Se.Fragment=R,Se.Lazy=_,Se.Memo=M,Se.Portal=F,Se.Profiler=G,Se.StrictMode=O,Se.Suspense=W,Se.isAsyncMode=function(){return!1},Se.isConcurrentMode=function(){return!1},Se.isContextConsumer=function(T){return w(T)===i},Se.isContextProvider=function(T){return w(T)===a},Se.isElement=function(T){return typeof T=="object"&&T!==null&&T.$$typeof===e},Se.isForwardRef=function(T){return w(T)===o},Se.isFragment=function(T){return w(T)===t},Se.isLazy=function(T){return w(T)===c},Se.isMemo=function(T){return w(T)===p},Se.isPortal=function(T){return w(T)===r},Se.isProfiler=function(T){return w(T)===l},Se.isStrictMode=function(T){return w(T)===n},Se.isSuspense=function(T){return w(T)===s},Se.isValidElementType=function(T){return typeof T=="string"||typeof T=="function"||T===t||T===l||T===D||T===n||T===s||T===f||T===S||typeof T=="object"&&T!==null&&(T.$$typeof===c||T.$$typeof===p||T.$$typeof===a||T.$$typeof===i||T.$$typeof===o||T.$$typeof===v||T.$$typeof===d||T[0]===h)},Se.typeOf=w,Se}var Sa;function Nc(){return Sa||(Sa=1,qt.exports=Mc()),qt.exports}var Oc=Nc(),Lc=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],Fc=["reactReduxForwardedRef"],zc=[],Gc=[null,null];function Hc(e,r){var t=e[1];return[r.payload,t+1]}function Ca(e,r,t){Qi(function(){return e.apply(void 0,r)},t)}function Wc(e,r,t,n,l,a,i){e.current=n,r.current=l,t.current=!1,a.current&&(a.current=null,i())}function qc(e,r,t,n,l,a,i,o,s,f){if(e){var p=!1,c=null,d=function(){if(!p){var D=r.getState(),S,g;try{S=n(D,l.current)}catch(w){g=w,c=w}g||(c=null),S===a.current?i.current||s():(a.current=S,o.current=S,i.current=!0,f({type:"STORE_UPDATED",payload:{error:g}}))}};t.onStateChange=d,t.trySubscribe(),d();var h=function(){if(p=!0,t.tryUnsubscribe(),t.onStateChange=null,c)throw c};return h}}var Uc=function(){return[null,0]};function $c(e,r){r===void 0&&(r={});var t=r,n=t.getDisplayName,l=n===void 0?function(C){return"ConnectAdvanced("+C+")"}:n,a=t.methodName,i=a===void 0?"connectAdvanced":a,o=t.renderCountProp,s=o===void 0?void 0:o,f=t.shouldHandleStateChanges,p=f===void 0?!0:f,c=t.storeKey,d=c===void 0?"store":c;t.withRef;var h=t.forwardRef,v=h===void 0?!1:h,D=t.context,S=D===void 0?Yi:D,g=Dt(t,Lc),w=S;return function(I){var k=I.displayName||I.name||"Component",R=l(k),_=le({},g,{getDisplayName:l,methodName:i,renderCountProp:s,shouldHandleStateChanges:p,storeKey:d,displayName:R,wrappedComponentName:k,WrappedComponent:I}),M=g.pure;function F($){return e($.dispatch,_)}var G=M?vr:function($){return $()};function O($){var J=vr(function(){var Le=$.reactReduxForwardedRef,dr=Dt($,Fc);return[$.context,Le,dr]},[$]),K=J[0],j=J[1],H=J[2],ee=vr(function(){return K&&K.Consumer&&Oc.isContextConsumer(ye.createElement(K.Consumer,null))?K:w},[K,w]),pe=En(ee),Ie=!!$.store&&!!$.store.getState&&!!$.store.dispatch;pe&&pe.store;var de=Ie?$.store:pe.store,De=vr(function(){return F(de)},[de]),Ce=vr(function(){if(!p)return Gc;var Le=Ji(de,Ie?null:pe.subscription),dr=Le.notifyNestedSubs.bind(Le);return[Le,dr]},[de,Ie,pe]),he=Ce[0],ce=Ce[1],be=vr(function(){return Ie?pe:le({},pe,{subscription:he})},[Ie,pe,he]),se=xl(Hc,zc,Uc),ne=se[0],ke=ne[0],Ne=se[1];if(ke&&ke.error)throw ke.error;var ie=xe(),Ee=xe(H),He=xe(),We=xe(!1),Te=G(function(){return He.current&&H===Ee.current?He.current:De(de.getState(),H)},[de,ke,H]);Ca(Wc,[Ee,ie,We,H,Te,He,ce]),Ca(qc,[p,de,he,De,Ee,ie,We,He,ce,Ne],[de,he,De]);var we=vr(function(){return ye.createElement(I,le({},Te,{ref:j}))},[j,I,Te]),ue=vr(function(){return p?ye.createElement(ee.Provider,{value:be},we):we},[ee,we,be]);return ue}var W=M?ye.memo(O):O;if(W.WrappedComponent=I,W.displayName=O.displayName=R,v){var T=ye.forwardRef(function(J,K){return ye.createElement(W,le({},J,{reactReduxForwardedRef:K}))});return T.displayName=R,T.WrappedComponent=I,la(T,I)}return la(W,I)}}function _a(e,r){return e===r?e!==0||r!==0||1/e===1/r:e!==e&&r!==r}function Ut(e,r){if(_a(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var t=Object.keys(e),n=Object.keys(r);if(t.length!==n.length)return!1;for(var l=0;l<t.length;l++)if(!Object.prototype.hasOwnProperty.call(r,t[l])||!_a(e[t[l]],r[t[l]]))return!1;return!0}function Vc(e,r){var t={},n=function(i){var o=e[i];typeof o=="function"&&(t[i]=function(){return r(o.apply(void 0,arguments))})};for(var l in e)n(l);return t}function Bn(e){return function(t,n){var l=e(t,n);function a(){return l}return a.dependsOnOwnProps=!1,a}}function Ia(e){return e.dependsOnOwnProps!==null&&e.dependsOnOwnProps!==void 0?!!e.dependsOnOwnProps:e.length!==1}function eo(e,r){return function(n,l){l.displayName;var a=function(o,s){return a.dependsOnOwnProps?a.mapToProps(o,s):a.mapToProps(o)};return a.dependsOnOwnProps=!0,a.mapToProps=function(o,s){a.mapToProps=e,a.dependsOnOwnProps=Ia(e);var f=a(o,s);return typeof f=="function"&&(a.mapToProps=f,a.dependsOnOwnProps=Ia(f),f=a(o,s)),f},a}}function Zc(e){return typeof e=="function"?eo(e):void 0}function jc(e){return e?void 0:Bn(function(r){return{dispatch:r}})}function Kc(e){return e&&typeof e=="object"?Bn(function(r){return Vc(e,r)}):void 0}const Yc=[Zc,jc,Kc];function Xc(e){return typeof e=="function"?eo(e):void 0}function Jc(e){return e?void 0:Bn(function(){return{}})}const Qc=[Xc,Jc];function eu(e,r,t){return le({},t,e,r)}function ru(e){return function(t,n){n.displayName;var l=n.pure,a=n.areMergedPropsEqual,i=!1,o;return function(f,p,c){var d=e(f,p,c);return i?(!l||!a(d,o))&&(o=d):(i=!0,o=d),o}}}function tu(e){return typeof e=="function"?ru(e):void 0}function nu(e){return e?void 0:function(){return eu}}const au=[tu,nu];var iu=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function ou(e,r,t,n){return function(a,i){return t(e(a,i),r(n,i),i)}}function lu(e,r,t,n,l){var a=l.areStatesEqual,i=l.areOwnPropsEqual,o=l.areStatePropsEqual,s=!1,f,p,c,d,h;function v(C,I){return f=C,p=I,c=e(f,p),d=r(n,p),h=t(c,d,p),s=!0,h}function D(){return c=e(f,p),r.dependsOnOwnProps&&(d=r(n,p)),h=t(c,d,p),h}function S(){return e.dependsOnOwnProps&&(c=e(f,p)),r.dependsOnOwnProps&&(d=r(n,p)),h=t(c,d,p),h}function g(){var C=e(f,p),I=!o(C,c);return c=C,I&&(h=t(c,d,p)),h}function w(C,I){var k=!i(I,p),R=!a(C,f,I,p);return f=C,p=I,k&&R?D():k?S():R?g():h}return function(I,k){return s?w(I,k):v(I,k)}}function su(e,r){var t=r.initMapStateToProps,n=r.initMapDispatchToProps,l=r.initMergeProps,a=Dt(r,iu),i=t(e,a),o=n(e,a),s=l(e,a),f=a.pure?lu:ou;return f(i,o,s,e,a)}var cu=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function $t(e,r,t){for(var n=r.length-1;n>=0;n--){var l=r[n](e);if(l)return l}return function(a,i){throw new Error("Invalid value of type "+typeof e+" for "+t+" argument when connecting component "+i.wrappedComponentName+".")}}function uu(e,r){return e===r}function du(e){var r=e===void 0?{}:e,t=r.connectHOC,n=t===void 0?$c:t,l=r.mapStateToPropsFactories,a=l===void 0?Qc:l,i=r.mapDispatchToPropsFactories,o=i===void 0?Yc:i,s=r.mergePropsFactories,f=s===void 0?au:s,p=r.selectorFactory,c=p===void 0?su:p;return function(h,v,D,S){S===void 0&&(S={});var g=S,w=g.pure,C=w===void 0?!0:w,I=g.areStatesEqual,k=I===void 0?uu:I,R=g.areOwnPropsEqual,_=R===void 0?Ut:R,M=g.areStatePropsEqual,F=M===void 0?Ut:M,G=g.areMergedPropsEqual,O=G===void 0?Ut:G,W=Dt(g,cu),T=$t(h,a,"mapStateToProps"),$=$t(v,o,"mapDispatchToProps"),J=$t(D,f,"mergeProps");return n(c,le({methodName:"connect",getDisplayName:function(j){return"Connect("+j+")"},shouldHandleStateChanges:!!h,initMapStateToProps:T,initMapDispatchToProps:$,initMergeProps:J,pure:C,areStatesEqual:k,areOwnPropsEqual:_,areStatePropsEqual:F,areMergedPropsEqual:O},W))}}const ro=du();Rc(Dl);function fu(e,r){if(e.length!==r.length)return!1;for(var t=0;t<e.length;t++)if(e[t]!==r[t])return!1;return!0}function to(e,r){var t=ur(function(){return{inputs:r,result:e()}})[0],n=xe(!0),l=xe(t),a=n.current||!!(r&&l.current.inputs&&fu(r,l.current.inputs)),i=a?l.current:{inputs:r,result:e()};return Ae(function(){n.current=!1,l.current=i},[i]),i.result}function pu(e,r){return to(function(){return e},r)}var me=to,te=pu,vu="Invariant failed";function hu(e,r){throw new Error(vu)}var sr=function(r){var t=r.top,n=r.right,l=r.bottom,a=r.left,i=n-a,o=l-t,s={top:t,right:n,bottom:l,left:a,width:i,height:o,x:a,y:t,center:{x:(n+a)/2,y:(l+t)/2}};return s},Mn=function(r,t){return{top:r.top-t.top,left:r.left-t.left,bottom:r.bottom+t.bottom,right:r.right+t.right}},Ea=function(r,t){return{top:r.top+t.top,left:r.left+t.left,bottom:r.bottom-t.bottom,right:r.right-t.right}},gu=function(r,t){return{top:r.top+t.y,left:r.left+t.x,bottom:r.bottom+t.y,right:r.right+t.x}},Vt={top:0,right:0,bottom:0,left:0},Nn=function(r){var t=r.borderBox,n=r.margin,l=n===void 0?Vt:n,a=r.border,i=a===void 0?Vt:a,o=r.padding,s=o===void 0?Vt:o,f=sr(Mn(t,l)),p=sr(Ea(t,i)),c=sr(Ea(p,s));return{marginBox:f,borderBox:sr(t),paddingBox:p,contentBox:c,margin:l,border:i,padding:s}},tr=function(r){var t=r.slice(0,-2),n=r.slice(-2);if(n!=="px")return 0;var l=Number(t);return isNaN(l)&&hu(),l},mu=function(){return{x:window.pageXOffset,y:window.pageYOffset}},St=function(r,t){var n=r.borderBox,l=r.border,a=r.margin,i=r.padding,o=gu(n,t);return Nn({borderBox:o,border:l,margin:a,padding:i})},Ct=function(r,t){return t===void 0&&(t=mu()),St(r,t)},no=function(r,t){var n={top:tr(t.marginTop),right:tr(t.marginRight),bottom:tr(t.marginBottom),left:tr(t.marginLeft)},l={top:tr(t.paddingTop),right:tr(t.paddingRight),bottom:tr(t.paddingBottom),left:tr(t.paddingLeft)},a={top:tr(t.borderTopWidth),right:tr(t.borderRightWidth),bottom:tr(t.borderBottomWidth),left:tr(t.borderLeftWidth)};return Nn({borderBox:r,margin:n,padding:l,border:a})},ao=function(r){var t=r.getBoundingClientRect(),n=window.getComputedStyle(r);return no(t,n)},Aa=Number.isNaN||function(r){return typeof r=="number"&&r!==r};function bu(e,r){return!!(e===r||Aa(e)&&Aa(r))}function yu(e,r){if(e.length!==r.length)return!1;for(var t=0;t<e.length;t++)if(!bu(e[t],r[t]))return!1;return!0}function ze(e,r){r===void 0&&(r=yu);var t,n=[],l,a=!1;function i(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return a&&t===this&&r(o,n)||(l=e.apply(this,o),a=!0,t=this,n=o),l}return i}var at=function(r){var t=[],n=null,l=function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];t=o,!n&&(n=requestAnimationFrame(function(){n=null,r.apply(void 0,t)}))};return l.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},l};function io(e,r){}io.bind(null,"warn");io.bind(null,"error");function Sr(){}function wu(e,r){return le({},e,{},r)}function ar(e,r,t){var n=r.map(function(l){var a=wu(t,l.options);return e.addEventListener(l.eventName,l.fn,a),function(){e.removeEventListener(l.eventName,l.fn,a)}});return function(){n.forEach(function(a){a()})}}var xu="Invariant failed";function _t(e){this.message=e}_t.prototype.toString=function(){return this.message};function Z(e,r){throw new _t(xu)}var Du=function(e){Li(r,e);function r(){for(var n,l=arguments.length,a=new Array(l),i=0;i<l;i++)a[i]=arguments[i];return n=e.call.apply(e,[this].concat(a))||this,n.callbacks=null,n.unbind=Sr,n.onWindowError=function(o){var s=n.getCallbacks();s.isDragging()&&s.tryAbort();var f=o.error;f instanceof _t&&o.preventDefault()},n.getCallbacks=function(){if(!n.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return n.callbacks},n.setCallbacks=function(o){n.callbacks=o},n}var t=r.prototype;return t.componentDidMount=function(){this.unbind=ar(window,[{eventName:"error",fn:this.onWindowError}])},t.componentDidCatch=function(l){if(l instanceof _t){this.setState({});return}throw l},t.componentWillUnmount=function(){this.unbind()},t.render=function(){return this.props.children(this.setCallbacks)},r}(ye.Component),Su=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,It=function(r){return r+1},Cu=function(r){return`
  You have lifted an item in position `+It(r.source.index)+`
`},oo=function(r,t){var n=r.droppableId===t.droppableId,l=It(r.index),a=It(t.index);return n?`
      You have moved the item from position `+l+`
      to position `+a+`
    `:`
    You have moved the item from position `+l+`
    in list `+r.droppableId+`
    to list `+t.droppableId+`
    in position `+a+`
  `},lo=function(r,t,n){var l=t.droppableId===n.droppableId;return l?`
      The item `+r+`
      has been combined with `+n.draggableId:`
      The item `+r+`
      in list `+t.droppableId+`
      has been combined with `+n.draggableId+`
      in list `+n.droppableId+`
    `},_u=function(r){var t=r.destination;if(t)return oo(r.source,t);var n=r.combine;return n?lo(r.draggableId,r.source,n):"You are over an area that cannot be dropped on"},ka=function(r){return`
  The item has returned to its starting position
  of `+It(r.index)+`
`},Iu=function(r){if(r.reason==="CANCEL")return`
      Movement cancelled.
      `+ka(r.source)+`
    `;var t=r.destination,n=r.combine;return t?`
      You have dropped the item.
      `+oo(r.source,t)+`
    `:n?`
      You have dropped the item.
      `+lo(r.draggableId,r.source,n)+`
    `:`
    The item has been dropped while not over a drop area.
    `+ka(r.source)+`
  `},wt={dragHandleUsageInstructions:Su,onDragStart:Cu,onDragUpdate:_u,onDragEnd:Iu},Ge={x:0,y:0},Ue=function(r,t){return{x:r.x+t.x,y:r.y+t.y}},Xe=function(r,t){return{x:r.x-t.x,y:r.y-t.y}},Cr=function(r,t){return r.x===t.x&&r.y===t.y},jr=function(r){return{x:r.x!==0?-r.x:0,y:r.y!==0?-r.y:0}},Nr=function(r,t,n){var l;return n===void 0&&(n=0),l={},l[r]=t,l[r==="x"?"y":"x"]=n,l},it=function(r,t){return Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))},Ra=function(r,t){return Math.min.apply(Math,t.map(function(n){return it(r,n)}))},so=function(r){return function(t){return{x:r(t.x),y:r(t.y)}}},Eu=function(e,r){var t=sr({top:Math.max(r.top,e.top),right:Math.min(r.right,e.right),bottom:Math.min(r.bottom,e.bottom),left:Math.max(r.left,e.left)});return t.width<=0||t.height<=0?null:t},ct=function(r,t){return{top:r.top+t.y,left:r.left+t.x,bottom:r.bottom+t.y,right:r.right+t.x}},Ta=function(r){return[{x:r.left,y:r.top},{x:r.right,y:r.top},{x:r.left,y:r.bottom},{x:r.right,y:r.bottom}]},Au={top:0,right:0,bottom:0,left:0},ku=function(r,t){return t?ct(r,t.scroll.diff.displacement):r},Ru=function(r,t,n){if(n&&n.increasedBy){var l;return le({},r,(l={},l[t.end]=r[t.end]+n.increasedBy[t.line],l))}return r},Tu=function(r,t){return t&&t.shouldClipSubject?Eu(t.pageMarginBox,r):sr(r)},qr=function(e){var r=e.page,t=e.withPlaceholder,n=e.axis,l=e.frame,a=ku(r.marginBox,l),i=Ru(a,n,t),o=Tu(i,l);return{page:r,withPlaceholder:t,active:o}},On=function(e,r){e.frame||Z();var t=e.frame,n=Xe(r,t.scroll.initial),l=jr(n),a=le({},t,{scroll:{initial:t.scroll.initial,current:r,diff:{value:n,displacement:l},max:t.scroll.max}}),i=qr({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:a}),o=le({},e,{frame:a,subject:i});return o};function Et(e){return Object.values?Object.values(e):Object.keys(e).map(function(r){return e[r]})}function Ln(e,r){if(e.findIndex)return e.findIndex(r);for(var t=0;t<e.length;t++)if(r(e[t]))return t;return-1}function Er(e,r){if(e.find)return e.find(r);var t=Ln(e,r);if(t!==-1)return e[t]}function co(e){return Array.prototype.slice.call(e)}var uo=ze(function(e){return e.reduce(function(r,t){return r[t.descriptor.id]=t,r},{})}),fo=ze(function(e){return e.reduce(function(r,t){return r[t.descriptor.id]=t,r},{})}),Ot=ze(function(e){return Et(e)}),Pu=ze(function(e){return Et(e)}),Kr=ze(function(e,r){var t=Pu(r).filter(function(n){return e===n.descriptor.droppableId}).sort(function(n,l){return n.descriptor.index-l.descriptor.index});return t});function Fn(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function Lt(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var Ft=ze(function(e,r){return r.filter(function(t){return t.descriptor.id!==e.descriptor.id})}),Bu=function(e){var r=e.isMovingForward,t=e.draggable,n=e.destination,l=e.insideDestination,a=e.previousImpact;if(!n.isCombineEnabled)return null;var i=Fn(a);if(!i)return null;function o(D){var S={type:"COMBINE",combine:{draggableId:D,droppableId:n.descriptor.id}};return le({},a,{at:S})}var s=a.displaced.all,f=s.length?s[0]:null;if(r)return f?o(f):null;var p=Ft(t,l);if(!f){if(!p.length)return null;var c=p[p.length-1];return o(c.descriptor.id)}var d=Ln(p,function(D){return D.descriptor.id===f});d===-1&&Z();var h=d-1;if(h<0)return null;var v=p[h];return o(v.descriptor.id)},Yr=function(e,r){return e.descriptor.droppableId===r.descriptor.id},po={point:Ge,value:0},ot={invisible:{},visible:{},all:[]},Mu={displaced:ot,displacedBy:po,at:null},ir=function(e,r){return function(t){return e<=t&&t<=r}},vo=function(e){var r=ir(e.top,e.bottom),t=ir(e.left,e.right);return function(n){var l=r(n.top)&&r(n.bottom)&&t(n.left)&&t(n.right);if(l)return!0;var a=r(n.top)||r(n.bottom),i=t(n.left)||t(n.right),o=a&&i;if(o)return!0;var s=n.top<e.top&&n.bottom>e.bottom,f=n.left<e.left&&n.right>e.right,p=s&&f;if(p)return!0;var c=s&&i||f&&a;return c}},Nu=function(e){var r=ir(e.top,e.bottom),t=ir(e.left,e.right);return function(n){var l=r(n.top)&&r(n.bottom)&&t(n.left)&&t(n.right);return l}},zn={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},ho={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},Ou=function(e){return function(r){var t=ir(r.top,r.bottom),n=ir(r.left,r.right);return function(l){return e===zn?t(l.top)&&t(l.bottom):n(l.left)&&n(l.right)}}},Lu=function(r,t){var n=t.frame?t.frame.scroll.diff.displacement:Ge;return ct(r,n)},Fu=function(r,t,n){return t.subject.active?n(t.subject.active)(r):!1},zu=function(r,t,n){return n(t)(r)},Gn=function(r){var t=r.target,n=r.destination,l=r.viewport,a=r.withDroppableDisplacement,i=r.isVisibleThroughFrameFn,o=a?Lu(t,n):t;return Fu(o,n,i)&&zu(o,l,i)},Gu=function(r){return Gn(le({},r,{isVisibleThroughFrameFn:vo}))},go=function(r){return Gn(le({},r,{isVisibleThroughFrameFn:Nu}))},Hu=function(r){return Gn(le({},r,{isVisibleThroughFrameFn:Ou(r.destination.axis)}))},Wu=function(r,t,n){if(typeof n=="boolean")return n;if(!t)return!0;var l=t.invisible,a=t.visible;if(l[r])return!1;var i=a[r];return i?i.shouldAnimate:!0};function qu(e,r){var t=e.page.marginBox,n={top:r.point.y,right:0,bottom:0,left:r.point.x};return sr(Mn(t,n))}function lt(e){var r=e.afterDragging,t=e.destination,n=e.displacedBy,l=e.viewport,a=e.forceShouldAnimate,i=e.last;return r.reduce(function(s,f){var p=qu(f,n),c=f.descriptor.id;s.all.push(c);var d=Gu({target:p,destination:t,viewport:l,withDroppableDisplacement:!0});if(!d)return s.invisible[f.descriptor.id]=!0,s;var h=Wu(c,i,a),v={draggableId:c,shouldAnimate:h};return s.visible[c]=v,s},{all:[],visible:{},invisible:{}})}function Uu(e,r){if(!e.length)return 0;var t=e[e.length-1].descriptor.index;return r.inHomeList?t:t+1}function Pa(e){var r=e.insideDestination,t=e.inHomeList,n=e.displacedBy,l=e.destination,a=Uu(r,{inHomeList:t});return{displaced:ot,displacedBy:n,at:{type:"REORDER",destination:{droppableId:l.descriptor.id,index:a}}}}function At(e){var r=e.draggable,t=e.insideDestination,n=e.destination,l=e.viewport,a=e.displacedBy,i=e.last,o=e.index,s=e.forceShouldAnimate,f=Yr(r,n);if(o==null)return Pa({insideDestination:t,inHomeList:f,displacedBy:a,destination:n});var p=Er(t,function(D){return D.descriptor.index===o});if(!p)return Pa({insideDestination:t,inHomeList:f,displacedBy:a,destination:n});var c=Ft(r,t),d=t.indexOf(p),h=c.slice(d),v=lt({afterDragging:h,destination:n,displacedBy:a,last:i,viewport:l.frame,forceShouldAnimate:s});return{displaced:v,displacedBy:a,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:o}}}}function Ir(e,r){return!!r.effected[e]}var $u=function(e){var r=e.isMovingForward,t=e.destination,n=e.draggables,l=e.combine,a=e.afterCritical;if(!t.isCombineEnabled)return null;var i=l.draggableId,o=n[i],s=o.descriptor.index,f=Ir(i,a);return f?r?s:s-1:r?s+1:s},Vu=function(e){var r=e.isMovingForward,t=e.isInHomeList,n=e.insideDestination,l=e.location;if(!n.length)return null;var a=l.index,i=r?a+1:a-1,o=n[0].descriptor.index,s=n[n.length-1].descriptor.index,f=t?s:s+1;return i<o||i>f?null:i},Zu=function(e){var r=e.isMovingForward,t=e.isInHomeList,n=e.draggable,l=e.draggables,a=e.destination,i=e.insideDestination,o=e.previousImpact,s=e.viewport,f=e.afterCritical,p=o.at;if(p||Z(),p.type==="REORDER"){var c=Vu({isMovingForward:r,isInHomeList:t,location:p.destination,insideDestination:i});return c==null?null:At({draggable:n,insideDestination:i,destination:a,viewport:s,last:o.displaced,displacedBy:o.displacedBy,index:c})}var d=$u({isMovingForward:r,destination:a,displaced:o.displaced,draggables:l,combine:p.combine,afterCritical:f});return d==null?null:At({draggable:n,insideDestination:i,destination:a,viewport:s,last:o.displaced,displacedBy:o.displacedBy,index:d})},ju=function(e){var r=e.displaced,t=e.afterCritical,n=e.combineWith,l=e.displacedBy,a=!!(r.visible[n]||r.invisible[n]);return Ir(n,t)?a?Ge:jr(l.point):a?l.point:Ge},Ku=function(e){var r=e.afterCritical,t=e.impact,n=e.draggables,l=Lt(t);l||Z();var a=l.draggableId,i=n[a].page.borderBox.center,o=ju({displaced:t.displaced,afterCritical:r,combineWith:a,displacedBy:t.displacedBy});return Ue(i,o)},mo=function(r,t){return t.margin[r.start]+t.borderBox[r.size]/2},Yu=function(r,t){return t.margin[r.end]+t.borderBox[r.size]/2},Hn=function(r,t,n){return t[r.crossAxisStart]+n.margin[r.crossAxisStart]+n.borderBox[r.crossAxisSize]/2},Ba=function(r){var t=r.axis,n=r.moveRelativeTo,l=r.isMoving;return Nr(t.line,n.marginBox[t.end]+mo(t,l),Hn(t,n.marginBox,l))},Ma=function(r){var t=r.axis,n=r.moveRelativeTo,l=r.isMoving;return Nr(t.line,n.marginBox[t.start]-Yu(t,l),Hn(t,n.marginBox,l))},Xu=function(r){var t=r.axis,n=r.moveInto,l=r.isMoving;return Nr(t.line,n.contentBox[t.start]+mo(t,l),Hn(t,n.contentBox,l))},Ju=function(e){var r=e.impact,t=e.draggable,n=e.draggables,l=e.droppable,a=e.afterCritical,i=Kr(l.descriptor.id,n),o=t.page,s=l.axis;if(!i.length)return Xu({axis:s,moveInto:l.page,isMoving:o});var f=r.displaced,p=r.displacedBy,c=f.all[0];if(c){var d=n[c];if(Ir(c,a))return Ma({axis:s,moveRelativeTo:d.page,isMoving:o});var h=St(d.page,p.point);return Ma({axis:s,moveRelativeTo:h,isMoving:o})}var v=i[i.length-1];if(v.descriptor.id===t.descriptor.id)return o.borderBox.center;if(Ir(v.descriptor.id,a)){var D=St(v.page,jr(a.displacedBy.point));return Ba({axis:s,moveRelativeTo:D,isMoving:o})}return Ba({axis:s,moveRelativeTo:v.page,isMoving:o})},yn=function(e,r){var t=e.frame;return t?Ue(r,t.scroll.diff.displacement):r},Qu=function(r){var t=r.impact,n=r.draggable,l=r.droppable,a=r.draggables,i=r.afterCritical,o=n.page.borderBox.center,s=t.at;return!l||!s?o:s.type==="REORDER"?Ju({impact:t,draggable:n,draggables:a,droppable:l,afterCritical:i}):Ku({impact:t,draggables:a,afterCritical:i})},zt=function(e){var r=Qu(e),t=e.droppable,n=t?yn(t,r):r;return n},bo=function(e,r){var t=Xe(r,e.scroll.initial),n=jr(t),l=sr({top:r.y,bottom:r.y+e.frame.height,left:r.x,right:r.x+e.frame.width}),a={frame:l,scroll:{initial:e.scroll.initial,max:e.scroll.max,current:r,diff:{value:t,displacement:n}}};return a};function Na(e,r){return e.map(function(t){return r[t]})}function ed(e,r){for(var t=0;t<r.length;t++){var n=r[t].visible[e];if(n)return n}return null}var rd=function(e){var r=e.impact,t=e.viewport,n=e.destination,l=e.draggables,a=e.maxScrollChange,i=bo(t,Ue(t.scroll.current,a)),o=n.frame?On(n,Ue(n.frame.scroll.current,a)):n,s=r.displaced,f=lt({afterDragging:Na(s.all,l),destination:n,displacedBy:r.displacedBy,viewport:i.frame,last:s,forceShouldAnimate:!1}),p=lt({afterDragging:Na(s.all,l),destination:o,displacedBy:r.displacedBy,viewport:t.frame,last:s,forceShouldAnimate:!1}),c={},d={},h=[s,f,p];s.all.forEach(function(D){var S=ed(D,h);if(S){d[D]=S;return}c[D]=!0});var v=le({},r,{displaced:{all:s.all,invisible:c,visible:d}});return v},td=function(e,r){return Ue(e.scroll.diff.displacement,r)},Wn=function(e){var r=e.pageBorderBoxCenter,t=e.draggable,n=e.viewport,l=td(n,r),a=Xe(l,t.page.borderBox.center);return Ue(t.client.borderBox.center,a)},yo=function(e){var r=e.draggable,t=e.destination,n=e.newPageBorderBoxCenter,l=e.viewport,a=e.withDroppableDisplacement,i=e.onlyOnMainAxis,o=i===void 0?!1:i,s=Xe(n,r.page.borderBox.center),f=ct(r.page.borderBox,s),p={target:f,destination:t,withDroppableDisplacement:a,viewport:l};return o?Hu(p):go(p)},nd=function(e){var r=e.isMovingForward,t=e.draggable,n=e.destination,l=e.draggables,a=e.previousImpact,i=e.viewport,o=e.previousPageBorderBoxCenter,s=e.previousClientSelection,f=e.afterCritical;if(!n.isEnabled)return null;var p=Kr(n.descriptor.id,l),c=Yr(t,n),d=Bu({isMovingForward:r,draggable:t,destination:n,insideDestination:p,previousImpact:a})||Zu({isMovingForward:r,isInHomeList:c,draggable:t,draggables:l,destination:n,insideDestination:p,previousImpact:a,viewport:i,afterCritical:f});if(!d)return null;var h=zt({impact:d,draggable:t,droppable:n,draggables:l,afterCritical:f}),v=yo({draggable:t,destination:n,newPageBorderBoxCenter:h,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(v){var D=Wn({pageBorderBoxCenter:h,draggable:t,viewport:i});return{clientSelection:D,impact:d,scrollJumpRequest:null}}var S=Xe(h,o),g=rd({impact:d,viewport:i,destination:n,draggables:l,maxScrollChange:S});return{clientSelection:s,impact:g,scrollJumpRequest:S}},je=function(r){var t=r.subject.active;return t||Z(),t},ad=function(e){var r=e.isMovingForward,t=e.pageBorderBoxCenter,n=e.source,l=e.droppables,a=e.viewport,i=n.subject.active;if(!i)return null;var o=n.axis,s=ir(i[o.start],i[o.end]),f=Ot(l).filter(function(c){return c!==n}).filter(function(c){return c.isEnabled}).filter(function(c){return!!c.subject.active}).filter(function(c){return vo(a.frame)(je(c))}).filter(function(c){var d=je(c);return r?i[o.crossAxisEnd]<d[o.crossAxisEnd]:d[o.crossAxisStart]<i[o.crossAxisStart]}).filter(function(c){var d=je(c),h=ir(d[o.start],d[o.end]);return s(d[o.start])||s(d[o.end])||h(i[o.start])||h(i[o.end])}).sort(function(c,d){var h=je(c)[o.crossAxisStart],v=je(d)[o.crossAxisStart];return r?h-v:v-h}).filter(function(c,d,h){return je(c)[o.crossAxisStart]===je(h[0])[o.crossAxisStart]});if(!f.length)return null;if(f.length===1)return f[0];var p=f.filter(function(c){var d=ir(je(c)[o.start],je(c)[o.end]);return d(t[o.line])});return p.length===1?p[0]:p.length>1?p.sort(function(c,d){return je(c)[o.start]-je(d)[o.start]})[0]:f.sort(function(c,d){var h=Ra(t,Ta(je(c))),v=Ra(t,Ta(je(d)));return h!==v?h-v:je(c)[o.start]-je(d)[o.start]})[0]},Oa=function(r,t){var n=r.page.borderBox.center;return Ir(r.descriptor.id,t)?Xe(n,t.displacedBy.point):n},id=function(r,t){var n=r.page.borderBox;return Ir(r.descriptor.id,t)?ct(n,jr(t.displacedBy.point)):n},od=function(e){var r=e.pageBorderBoxCenter,t=e.viewport,n=e.destination,l=e.insideDestination,a=e.afterCritical,i=l.filter(function(o){return go({target:id(o,a),destination:n,viewport:t.frame,withDroppableDisplacement:!0})}).sort(function(o,s){var f=it(r,yn(n,Oa(o,a))),p=it(r,yn(n,Oa(s,a)));return f<p?-1:p<f?1:o.descriptor.index-s.descriptor.index});return i[0]||null},ut=ze(function(r,t){var n=t[r.line];return{value:n,point:Nr(r.line,n)}}),ld=function(r,t,n){var l=r.axis;if(r.descriptor.mode==="virtual")return Nr(l.line,t[l.line]);var a=r.subject.page.contentBox[l.size],i=Kr(r.descriptor.id,n),o=i.reduce(function(p,c){return p+c.client.marginBox[l.size]},0),s=o+t[l.line],f=s-a;return f<=0?null:Nr(l.line,f)},wo=function(r,t){return le({},r,{scroll:le({},r.scroll,{max:t})})},xo=function(r,t,n){var l=r.frame;Yr(t,r)&&Z(),r.subject.withPlaceholder&&Z();var a=ut(r.axis,t.displaceBy).point,i=ld(r,a,n),o={placeholderSize:a,increasedBy:i,oldFrameMaxScroll:r.frame?r.frame.scroll.max:null};if(!l){var s=qr({page:r.subject.page,withPlaceholder:o,axis:r.axis,frame:r.frame});return le({},r,{subject:s})}var f=i?Ue(l.scroll.max,i):l.scroll.max,p=wo(l,f),c=qr({page:r.subject.page,withPlaceholder:o,axis:r.axis,frame:p});return le({},r,{subject:c,frame:p})},sd=function(r){var t=r.subject.withPlaceholder;t||Z();var n=r.frame;if(!n){var l=qr({page:r.subject.page,axis:r.axis,frame:null,withPlaceholder:null});return le({},r,{subject:l})}var a=t.oldFrameMaxScroll;a||Z();var i=wo(n,a),o=qr({page:r.subject.page,axis:r.axis,frame:i,withPlaceholder:null});return le({},r,{subject:o,frame:i})},cd=function(e){var r=e.previousPageBorderBoxCenter,t=e.moveRelativeTo,n=e.insideDestination,l=e.draggable,a=e.draggables,i=e.destination,o=e.viewport,s=e.afterCritical;if(!t){if(n.length)return null;var f={displaced:ot,displacedBy:po,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:0}}},p=zt({impact:f,draggable:l,droppable:i,draggables:a,afterCritical:s}),c=Yr(l,i)?i:xo(i,l,a),d=yo({draggable:l,destination:c,newPageBorderBoxCenter:p,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return d?f:null}var h=r[i.axis.line]<=t.page.borderBox.center[i.axis.line],v=function(){var S=t.descriptor.index;return t.descriptor.id===l.descriptor.id||h?S:S+1}(),D=ut(i.axis,l.displaceBy);return At({draggable:l,insideDestination:n,destination:i,viewport:o,displacedBy:D,last:ot,index:v})},ud=function(e){var r=e.isMovingForward,t=e.previousPageBorderBoxCenter,n=e.draggable,l=e.isOver,a=e.draggables,i=e.droppables,o=e.viewport,s=e.afterCritical,f=ad({isMovingForward:r,pageBorderBoxCenter:t,source:l,droppables:i,viewport:o});if(!f)return null;var p=Kr(f.descriptor.id,a),c=od({pageBorderBoxCenter:t,viewport:o,destination:f,insideDestination:p,afterCritical:s}),d=cd({previousPageBorderBoxCenter:t,destination:f,draggable:n,draggables:a,moveRelativeTo:c,insideDestination:p,viewport:o,afterCritical:s});if(!d)return null;var h=zt({impact:d,draggable:n,droppable:f,draggables:a,afterCritical:s}),v=Wn({pageBorderBoxCenter:h,draggable:n,viewport:o});return{clientSelection:v,impact:d,scrollJumpRequest:null}},Je=function(e){var r=e.at;return r?r.type==="REORDER"?r.destination.droppableId:r.combine.droppableId:null},dd=function(r,t){var n=Je(r);return n?t[n]:null},fd=function(e){var r=e.state,t=e.type,n=dd(r.impact,r.dimensions.droppables),l=!!n,a=r.dimensions.droppables[r.critical.droppable.id],i=n||a,o=i.axis.direction,s=o==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||o==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(s&&!l)return null;var f=t==="MOVE_DOWN"||t==="MOVE_RIGHT",p=r.dimensions.draggables[r.critical.draggable.id],c=r.current.page.borderBoxCenter,d=r.dimensions,h=d.draggables,v=d.droppables;return s?nd({isMovingForward:f,previousPageBorderBoxCenter:c,draggable:p,destination:i,draggables:h,viewport:r.viewport,previousClientSelection:r.current.client.selection,previousImpact:r.impact,afterCritical:r.afterCritical}):ud({isMovingForward:f,previousPageBorderBoxCenter:c,draggable:p,isOver:i,draggables:h,droppables:v,viewport:r.viewport,afterCritical:r.afterCritical})};function Br(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function Do(e){var r=ir(e.top,e.bottom),t=ir(e.left,e.right);return function(l){return r(l.y)&&t(l.x)}}function pd(e,r){return e.left<r.right&&e.right>r.left&&e.top<r.bottom&&e.bottom>r.top}function vd(e){var r=e.pageBorderBox,t=e.draggable,n=e.candidates,l=t.page.borderBox.center,a=n.map(function(i){var o=i.axis,s=Nr(i.axis.line,r.center[o.line],i.page.borderBox.center[o.crossAxisLine]);return{id:i.descriptor.id,distance:it(l,s)}}).sort(function(i,o){return o.distance-i.distance});return a[0]?a[0].id:null}function hd(e){var r=e.pageBorderBox,t=e.draggable,n=e.droppables,l=Ot(n).filter(function(a){if(!a.isEnabled)return!1;var i=a.subject.active;if(!i||!pd(r,i))return!1;if(Do(i)(r.center))return!0;var o=a.axis,s=i.center[o.crossAxisLine],f=r[o.crossAxisStart],p=r[o.crossAxisEnd],c=ir(i[o.crossAxisStart],i[o.crossAxisEnd]),d=c(f),h=c(p);return!d&&!h?!0:d?f<s:p>s});return l.length?l.length===1?l[0].descriptor.id:vd({pageBorderBox:r,draggable:t,candidates:l}):null}var So=function(r,t){return sr(ct(r,t))},gd=function(e,r){var t=e.frame;return t?So(r,t.scroll.diff.value):r};function Co(e){var r=e.displaced,t=e.id;return!!(r.visible[t]||r.invisible[t])}function md(e){var r=e.draggable,t=e.closest,n=e.inHomeList;return t?n&&t.descriptor.index>r.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var bd=function(e){var r=e.pageBorderBoxWithDroppableScroll,t=e.draggable,n=e.destination,l=e.insideDestination,a=e.last,i=e.viewport,o=e.afterCritical,s=n.axis,f=ut(n.axis,t.displaceBy),p=f.value,c=r[s.start],d=r[s.end],h=Ft(t,l),v=Er(h,function(S){var g=S.descriptor.id,w=S.page.borderBox.center[s.line],C=Ir(g,o),I=Co({displaced:a,id:g});return C?I?d<=w:c<w-p:I?d<=w+p:c<w}),D=md({draggable:t,closest:v,inHomeList:Yr(t,n)});return At({draggable:t,insideDestination:l,destination:n,viewport:i,last:a,displacedBy:f,index:D})},yd=4,wd=function(e){var r=e.draggable,t=e.pageBorderBoxWithDroppableScroll,n=e.previousImpact,l=e.destination,a=e.insideDestination,i=e.afterCritical;if(!l.isCombineEnabled)return null;var o=l.axis,s=ut(l.axis,r.displaceBy),f=s.value,p=t[o.start],c=t[o.end],d=Ft(r,a),h=Er(d,function(D){var S=D.descriptor.id,g=D.page.borderBox,w=g[o.size],C=w/yd,I=Ir(S,i),k=Co({displaced:n.displaced,id:S});return I?k?c>g[o.start]+C&&c<g[o.end]-C:p>g[o.start]-f+C&&p<g[o.end]-f-C:k?c>g[o.start]+f+C&&c<g[o.end]+f-C:p>g[o.start]+C&&p<g[o.end]-C});if(!h)return null;var v={displacedBy:s,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:h.descriptor.id,droppableId:l.descriptor.id}}};return v},_o=function(e){var r=e.pageOffset,t=e.draggable,n=e.draggables,l=e.droppables,a=e.previousImpact,i=e.viewport,o=e.afterCritical,s=So(t.page.borderBox,r),f=hd({pageBorderBox:s,draggable:t,droppables:l});if(!f)return Mu;var p=l[f],c=Kr(p.descriptor.id,n),d=gd(p,s);return wd({pageBorderBoxWithDroppableScroll:d,draggable:t,previousImpact:a,destination:p,insideDestination:c,afterCritical:o})||bd({pageBorderBoxWithDroppableScroll:d,draggable:t,destination:p,insideDestination:c,last:a.displaced,viewport:i,afterCritical:o})},qn=function(e,r){var t;return le({},e,(t={},t[r.descriptor.id]=r,t))},xd=function(r){var t=r.previousImpact,n=r.impact,l=r.droppables,a=Je(t),i=Je(n);if(!a||a===i)return l;var o=l[a];if(!o.subject.withPlaceholder)return l;var s=sd(o);return qn(l,s)},Dd=function(e){var r=e.draggable,t=e.draggables,n=e.droppables,l=e.previousImpact,a=e.impact,i=xd({previousImpact:l,impact:a,droppables:n}),o=Je(a);if(!o)return i;var s=n[o];if(Yr(r,s)||s.subject.withPlaceholder)return i;var f=xo(s,r,t);return qn(i,f)},rt=function(e){var r=e.state,t=e.clientSelection,n=e.dimensions,l=e.viewport,a=e.impact,i=e.scrollJumpRequest,o=l||r.viewport,s=n||r.dimensions,f=t||r.current.client.selection,p=Xe(f,r.initial.client.selection),c={offset:p,selection:f,borderBoxCenter:Ue(r.initial.client.borderBoxCenter,p)},d={selection:Ue(c.selection,o.scroll.current),borderBoxCenter:Ue(c.borderBoxCenter,o.scroll.current),offset:Ue(c.offset,o.scroll.diff.value)},h={client:c,page:d};if(r.phase==="COLLECTING")return le({phase:"COLLECTING"},r,{dimensions:s,viewport:o,current:h});var v=s.draggables[r.critical.draggable.id],D=a||_o({pageOffset:d.offset,draggable:v,draggables:s.draggables,droppables:s.droppables,previousImpact:r.impact,viewport:o,afterCritical:r.afterCritical}),S=Dd({draggable:v,impact:D,previousImpact:r.impact,draggables:s.draggables,droppables:s.droppables}),g=le({},r,{current:h,dimensions:{draggables:s.draggables,droppables:S},impact:D,viewport:o,scrollJumpRequest:i||null,forceShouldAnimate:i?!1:null});return g};function Sd(e,r){return e.map(function(t){return r[t]})}var Io=function(e){var r=e.impact,t=e.viewport,n=e.draggables,l=e.destination,a=e.forceShouldAnimate,i=r.displaced,o=Sd(i.all,n),s=lt({afterDragging:o,destination:l,displacedBy:r.displacedBy,viewport:t.frame,forceShouldAnimate:a,last:i});return le({},r,{displaced:s})},Eo=function(e){var r=e.impact,t=e.draggable,n=e.droppable,l=e.draggables,a=e.viewport,i=e.afterCritical,o=zt({impact:r,draggable:t,draggables:l,droppable:n,afterCritical:i});return Wn({pageBorderBoxCenter:o,draggable:t,viewport:a})},Ao=function(e){var r=e.state,t=e.dimensions,n=e.viewport;r.movementMode!=="SNAP"&&Z();var l=r.impact,a=n||r.viewport,i=t||r.dimensions,o=i.draggables,s=i.droppables,f=o[r.critical.draggable.id],p=Je(l);p||Z();var c=s[p],d=Io({impact:l,viewport:a,destination:c,draggables:o}),h=Eo({impact:d,draggable:f,droppable:c,draggables:o,viewport:a,afterCritical:r.afterCritical});return rt({impact:d,clientSelection:h,state:r,dimensions:i,viewport:a})},Cd=function(e){return{index:e.index,droppableId:e.droppableId}},ko=function(e){var r=e.draggable,t=e.home,n=e.draggables,l=e.viewport,a=ut(t.axis,r.displaceBy),i=Kr(t.descriptor.id,n),o=i.indexOf(r);o===-1&&Z();var s=i.slice(o+1),f=s.reduce(function(h,v){return h[v.descriptor.id]=!0,h},{}),p={inVirtualList:t.descriptor.mode==="virtual",displacedBy:a,effected:f},c=lt({afterDragging:s,destination:t,displacedBy:a,last:null,viewport:l.frame,forceShouldAnimate:!1}),d={displaced:c,displacedBy:a,at:{type:"REORDER",destination:Cd(r.descriptor)}};return{impact:d,afterCritical:p}},_d=function(e,r){return{draggables:e.draggables,droppables:qn(e.droppables,r)}},Id=function(e){var r=e.draggable,t=e.offset,n=e.initialWindowScroll,l=St(r.client,t),a=Ct(l,n),i=le({},r,{placeholder:le({},r.placeholder,{client:l}),client:l,page:a});return i},Ed=function(e){var r=e.frame;return r||Z(),r},Ad=function(e){var r=e.additions,t=e.updatedDroppables,n=e.viewport,l=n.scroll.diff.value;return r.map(function(a){var i=a.descriptor.droppableId,o=t[i],s=Ed(o),f=s.scroll.diff.value,p=Ue(l,f),c=Id({draggable:a,offset:p,initialWindowScroll:n.scroll.initial});return c})},kd=function(e){var r=e.state,t=e.published,n=t.modified.map(function(C){var I=r.dimensions.droppables[C.droppableId],k=On(I,C.scroll);return k}),l=le({},r.dimensions.droppables,{},uo(n)),a=fo(Ad({additions:t.additions,updatedDroppables:l,viewport:r.viewport})),i=le({},r.dimensions.draggables,{},a);t.removals.forEach(function(C){delete i[C]});var o={droppables:l,draggables:i},s=Je(r.impact),f=s?o.droppables[s]:null,p=o.draggables[r.critical.draggable.id],c=o.droppables[r.critical.droppable.id],d=ko({draggable:p,home:c,draggables:i,viewport:r.viewport}),h=d.impact,v=d.afterCritical,D=f&&f.isCombineEnabled?r.impact:h,S=_o({pageOffset:r.current.page.offset,draggable:o.draggables[r.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:D,viewport:r.viewport,afterCritical:v}),g=le({phase:"DRAGGING"},r,{phase:"DRAGGING",impact:S,onLiftImpact:h,dimensions:o,afterCritical:v,forceShouldAnimate:!1});if(r.phase==="COLLECTING")return g;var w=le({phase:"DROP_PENDING"},g,{phase:"DROP_PENDING",reason:r.reason,isWaiting:!1});return w},wn=function(r){return r.movementMode==="SNAP"},Zt=function(r,t,n){var l=_d(r.dimensions,t);return!wn(r)||n?rt({state:r,dimensions:l}):Ao({state:r,dimensions:l})};function jt(e){return e.isDragging&&e.movementMode==="SNAP"?le({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var La={phase:"IDLE",completed:null,shouldFlush:!1},Rd=function(e,r){if(e===void 0&&(e=La),r.type==="FLUSH")return le({},La,{shouldFlush:!0});if(r.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&Z();var t=r.payload,n=t.critical,l=t.clientSelection,a=t.viewport,i=t.dimensions,o=t.movementMode,s=i.draggables[n.draggable.id],f=i.droppables[n.droppable.id],p={selection:l,borderBoxCenter:s.client.borderBox.center,offset:Ge},c={client:p,page:{selection:Ue(p.selection,a.scroll.initial),borderBoxCenter:Ue(p.selection,a.scroll.initial),offset:Ue(p.selection,a.scroll.diff.value)}},d=Ot(i.droppables).every(function(Ne){return!Ne.isFixedOnPage}),h=ko({draggable:s,home:f,draggables:i.draggables,viewport:a}),v=h.impact,D=h.afterCritical,S={phase:"DRAGGING",isDragging:!0,critical:n,movementMode:o,dimensions:i,initial:c,current:c,isWindowScrollAllowed:d,impact:v,afterCritical:D,onLiftImpact:v,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null};return S}if(r.type==="COLLECTION_STARTING"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&Z();var g=le({phase:"COLLECTING"},e,{phase:"COLLECTING"});return g}if(r.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||Z(),kd({state:e,published:r.payload});if(r.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Br(e)||Z();var w=r.payload.client;return Cr(w,e.current.client.selection)?e:rt({state:e,clientSelection:w,impact:wn(e)?e.impact:null})}if(r.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return jt(e);Br(e)||Z();var C=r.payload,I=C.id,k=C.newScroll,R=e.dimensions.droppables[I];if(!R)return e;var _=On(R,k);return Zt(e,_,!1)}if(r.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Br(e)||Z();var M=r.payload,F=M.id,G=M.isEnabled,O=e.dimensions.droppables[F];O||Z(),O.isEnabled===G&&Z();var W=le({},O,{isEnabled:G});return Zt(e,W,!0)}if(r.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Br(e)||Z();var T=r.payload,$=T.id,J=T.isCombineEnabled,K=e.dimensions.droppables[$];K||Z(),K.isCombineEnabled===J&&Z();var j=le({},K,{isCombineEnabled:J});return Zt(e,j,!0)}if(r.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Br(e)||Z(),e.isWindowScrollAllowed||Z();var H=r.payload.newScroll;if(Cr(e.viewport.scroll.current,H))return jt(e);var ee=bo(e.viewport,H);return wn(e)?Ao({state:e,viewport:ee}):rt({state:e,viewport:ee})}if(r.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Br(e))return e;var pe=r.payload.maxScroll;if(Cr(pe,e.viewport.scroll.max))return e;var Ie=le({},e.viewport,{scroll:le({},e.viewport.scroll,{max:pe})});return le({phase:"DRAGGING"},e,{viewport:Ie})}if(r.type==="MOVE_UP"||r.type==="MOVE_DOWN"||r.type==="MOVE_LEFT"||r.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&Z();var de=fd({state:e,type:r.type});return de?rt({state:e,impact:de.impact,clientSelection:de.clientSelection,scrollJumpRequest:de.scrollJumpRequest}):e}if(r.type==="DROP_PENDING"){var De=r.payload.reason;e.phase!=="COLLECTING"&&Z();var Ce=le({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:De});return Ce}if(r.type==="DROP_ANIMATE"){var he=r.payload,ce=he.completed,be=he.dropDuration,se=he.newHomeClientOffset;e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||Z();var ne={phase:"DROP_ANIMATING",completed:ce,dropDuration:be,newHomeClientOffset:se,dimensions:e.dimensions};return ne}if(r.type==="DROP_COMPLETE"){var ke=r.payload.completed;return{phase:"IDLE",completed:ke,shouldFlush:!1}}return e},Td=function(r){return{type:"BEFORE_INITIAL_CAPTURE",payload:r}},Pd=function(r){return{type:"LIFT",payload:r}},Bd=function(r){return{type:"INITIAL_PUBLISH",payload:r}},Md=function(r){return{type:"PUBLISH_WHILE_DRAGGING",payload:r}},Nd=function(){return{type:"COLLECTION_STARTING",payload:null}},Od=function(r){return{type:"UPDATE_DROPPABLE_SCROLL",payload:r}},Ld=function(r){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:r}},Fd=function(r){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:r}},Ro=function(r){return{type:"MOVE",payload:r}},zd=function(r){return{type:"MOVE_BY_WINDOW_SCROLL",payload:r}},Gd=function(r){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:r}},Hd=function(){return{type:"MOVE_UP",payload:null}},Wd=function(){return{type:"MOVE_DOWN",payload:null}},qd=function(){return{type:"MOVE_RIGHT",payload:null}},Ud=function(){return{type:"MOVE_LEFT",payload:null}},Un=function(){return{type:"FLUSH",payload:null}},$d=function(r){return{type:"DROP_ANIMATE",payload:r}},$n=function(r){return{type:"DROP_COMPLETE",payload:r}},To=function(r){return{type:"DROP",payload:r}},Vd=function(r){return{type:"DROP_PENDING",payload:r}},Po=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},Zd=function(e){return function(r){var t=r.getState,n=r.dispatch;return function(l){return function(a){if(a.type!=="LIFT"){l(a);return}var i=a.payload,o=i.id,s=i.clientSelection,f=i.movementMode,p=t();p.phase==="DROP_ANIMATING"&&n($n({completed:p.completed})),t().phase!=="IDLE"&&Z(),n(Un()),n(Td({draggableId:o,movementMode:f}));var c={shouldPublishImmediately:f==="SNAP"},d={draggableId:o,scrollOptions:c},h=e.startPublishing(d),v=h.critical,D=h.dimensions,S=h.viewport;n(Bd({critical:v,dimensions:D,clientSelection:s,movementMode:f,viewport:S}))}}}},jd=function(e){return function(){return function(r){return function(t){t.type==="INITIAL_PUBLISH"&&e.dragging(),t.type==="DROP_ANIMATE"&&e.dropping(t.payload.completed.result.reason),(t.type==="FLUSH"||t.type==="DROP_COMPLETE")&&e.resting(),r(t)}}}},Vn={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},st={opacity:{drop:0,combining:.7},scale:{drop:.75}},Zn={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},kr=Zn.outOfTheWay+"s "+Vn.outOfTheWay,tt={fluid:"opacity "+kr,snap:"transform "+kr+", opacity "+kr,drop:function(r){var t=r+"s "+Vn.drop;return"transform "+t+", opacity "+t},outOfTheWay:"transform "+kr,placeholder:"height "+kr+", width "+kr+", margin "+kr},Fa=function(r){return Cr(r,Ge)?null:"translate("+r.x+"px, "+r.y+"px)"},xn={moveTo:Fa,drop:function(r,t){var n=Fa(r);return n?t?n+" scale("+st.scale.drop+")":n:null}},Dn=Zn.minDropTime,Bo=Zn.maxDropTime,Kd=Bo-Dn,za=1500,Yd=.6,Xd=function(e){var r=e.current,t=e.destination,n=e.reason,l=it(r,t);if(l<=0)return Dn;if(l>=za)return Bo;var a=l/za,i=Dn+Kd*a,o=n==="CANCEL"?i*Yd:i;return Number(o.toFixed(2))},Jd=function(e){var r=e.impact,t=e.draggable,n=e.dimensions,l=e.viewport,a=e.afterCritical,i=n.draggables,o=n.droppables,s=Je(r),f=s?o[s]:null,p=o[t.descriptor.droppableId],c=Eo({impact:r,draggable:t,draggables:i,afterCritical:a,droppable:f||p,viewport:l}),d=Xe(c,t.client.borderBox.center);return d},Qd=function(e){var r=e.draggables,t=e.reason,n=e.lastImpact,l=e.home,a=e.viewport,i=e.onLiftImpact;if(!n.at||t!=="DROP"){var o=Io({draggables:r,impact:i,destination:l,viewport:a,forceShouldAnimate:!0});return{impact:o,didDropInsideDroppable:!1}}if(n.at.type==="REORDER")return{impact:n,didDropInsideDroppable:!0};var s=le({},n,{displaced:ot});return{impact:s,didDropInsideDroppable:!0}},ef=function(e){var r=e.getState,t=e.dispatch;return function(n){return function(l){if(l.type!=="DROP"){n(l);return}var a=r(),i=l.payload.reason;if(a.phase==="COLLECTING"){t(Vd({reason:i}));return}if(a.phase!=="IDLE"){var o=a.phase==="DROP_PENDING"&&a.isWaiting;o&&Z(),a.phase==="DRAGGING"||a.phase==="DROP_PENDING"||Z();var s=a.critical,f=a.dimensions,p=f.draggables[a.critical.draggable.id],c=Qd({reason:i,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),d=c.impact,h=c.didDropInsideDroppable,v=h?Fn(d):null,D=h?Lt(d):null,S={index:s.draggable.index,droppableId:s.droppable.id},g={draggableId:p.descriptor.id,type:p.descriptor.type,source:S,reason:i,mode:a.movementMode,destination:v,combine:D},w=Jd({impact:d,draggable:p,dimensions:f,viewport:a.viewport,afterCritical:a.afterCritical}),C={critical:a.critical,afterCritical:a.afterCritical,result:g,impact:d},I=!Cr(a.current.client.offset,w)||!!g.combine;if(!I){t($n({completed:C}));return}var k=Xd({current:a.current.client.offset,destination:w,reason:i}),R={newHomeClientOffset:w,dropDuration:k,completed:C};t($d(R))}}}},Mo=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function rf(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(t){t.target!==window&&t.target!==window.document||e()}}}function tf(e){var r=e.onWindowScroll;function t(){r(Mo())}var n=at(t),l=rf(n),a=Sr;function i(){return a!==Sr}function o(){i()&&Z(),a=ar(window,[l])}function s(){i()||Z(),n.cancel(),a(),a=Sr}return{start:o,stop:s,isActive:i}}var nf=function(r){return r.type==="DROP_COMPLETE"||r.type==="DROP_ANIMATE"||r.type==="FLUSH"},af=function(e){var r=tf({onWindowScroll:function(n){e.dispatch(zd({newScroll:n}))}});return function(t){return function(n){!r.isActive()&&n.type==="INITIAL_PUBLISH"&&r.start(),r.isActive()&&nf(n)&&r.stop(),t(n)}}},of=function(e){var r=!1,t=!1,n=setTimeout(function(){t=!0}),l=function(i){r||t||(r=!0,e(i),clearTimeout(n))};return l.wasCalled=function(){return r},l},lf=function(){var e=[],r=function(a){var i=Ln(e,function(f){return f.timerId===a});i===-1&&Z();var o=e.splice(i,1),s=o[0];s.callback()},t=function(a){var i=setTimeout(function(){return r(i)}),o={timerId:i,callback:a};e.push(o)},n=function(){if(e.length){var a=[].concat(e);e.length=0,a.forEach(function(i){clearTimeout(i.timerId),i.callback()})}};return{add:t,flush:n}},sf=function(r,t){return r==null&&t==null?!0:r==null||t==null?!1:r.droppableId===t.droppableId&&r.index===t.index},cf=function(r,t){return r==null&&t==null?!0:r==null||t==null?!1:r.draggableId===t.draggableId&&r.droppableId===t.droppableId},uf=function(r,t){if(r===t)return!0;var n=r.draggable.id===t.draggable.id&&r.draggable.droppableId===t.draggable.droppableId&&r.draggable.type===t.draggable.type&&r.draggable.index===t.draggable.index,l=r.droppable.id===t.droppable.id&&r.droppable.type===t.droppable.type;return n&&l},Xr=function(r,t){t()},ht=function(r,t){return{draggableId:r.draggable.id,type:r.droppable.type,source:{droppableId:r.droppable.id,index:r.draggable.index},mode:t}},Kt=function(r,t,n,l){if(!r){n(l(t));return}var a=of(n),i={announce:a};r(t,i),a.wasCalled()||n(l(t))},df=function(e,r){var t=lf(),n=null,l=function(d,h){n&&Z(),Xr("onBeforeCapture",function(){var v=e().onBeforeCapture;if(v){var D={draggableId:d,mode:h};v(D)}})},a=function(d,h){n&&Z(),Xr("onBeforeDragStart",function(){var v=e().onBeforeDragStart;v&&v(ht(d,h))})},i=function(d,h){n&&Z();var v=ht(d,h);n={mode:h,lastCritical:d,lastLocation:v.source,lastCombine:null},t.add(function(){Xr("onDragStart",function(){return Kt(e().onDragStart,v,r,wt.onDragStart)})})},o=function(d,h){var v=Fn(h),D=Lt(h);n||Z();var S=!uf(d,n.lastCritical);S&&(n.lastCritical=d);var g=!sf(n.lastLocation,v);g&&(n.lastLocation=v);var w=!cf(n.lastCombine,D);if(w&&(n.lastCombine=D),!(!S&&!g&&!w)){var C=le({},ht(d,n.mode),{combine:D,destination:v});t.add(function(){Xr("onDragUpdate",function(){return Kt(e().onDragUpdate,C,r,wt.onDragUpdate)})})}},s=function(){n||Z(),t.flush()},f=function(d){n||Z(),n=null,Xr("onDragEnd",function(){return Kt(e().onDragEnd,d,r,wt.onDragEnd)})},p=function(){if(n){var d=le({},ht(n.lastCritical,n.mode),{combine:null,destination:null,reason:"CANCEL"});f(d)}};return{beforeCapture:l,beforeStart:a,start:i,update:o,flush:s,drop:f,abort:p}},ff=function(e,r){var t=df(e,r);return function(n){return function(l){return function(a){if(a.type==="BEFORE_INITIAL_CAPTURE"){t.beforeCapture(a.payload.draggableId,a.payload.movementMode);return}if(a.type==="INITIAL_PUBLISH"){var i=a.payload.critical;t.beforeStart(i,a.payload.movementMode),l(a),t.start(i,a.payload.movementMode);return}if(a.type==="DROP_COMPLETE"){var o=a.payload.completed.result;t.flush(),l(a),t.drop(o);return}if(l(a),a.type==="FLUSH"){t.abort();return}var s=n.getState();s.phase==="DRAGGING"&&t.update(s.critical,s.impact)}}}},pf=function(e){return function(r){return function(t){if(t.type!=="DROP_ANIMATION_FINISHED"){r(t);return}var n=e.getState();n.phase!=="DROP_ANIMATING"&&Z(),e.dispatch($n({completed:n.completed}))}}},vf=function(e){var r=null,t=null;function n(){t&&(cancelAnimationFrame(t),t=null),r&&(r(),r=null)}return function(l){return function(a){if((a.type==="FLUSH"||a.type==="DROP_COMPLETE"||a.type==="DROP_ANIMATION_FINISHED")&&n(),l(a),a.type==="DROP_ANIMATE"){var i={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var s=e.getState();s.phase==="DROP_ANIMATING"&&e.dispatch(Po())}};t=requestAnimationFrame(function(){t=null,r=ar(window,[i])})}}}},hf=function(e){return function(){return function(r){return function(t){(t.type==="DROP_COMPLETE"||t.type==="FLUSH"||t.type==="DROP_ANIMATE")&&e.stopPublishing(),r(t)}}}},gf=function(e){var r=!1;return function(){return function(t){return function(n){if(n.type==="INITIAL_PUBLISH"){r=!0,e.tryRecordFocus(n.payload.critical.draggable.id),t(n),e.tryRestoreFocusRecorded();return}if(t(n),!!r){if(n.type==="FLUSH"){r=!1,e.tryRestoreFocusRecorded();return}if(n.type==="DROP_COMPLETE"){r=!1;var l=n.payload.completed.result;l.combine&&e.tryShiftRecord(l.draggableId,l.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}},mf=function(r){return r.type==="DROP_COMPLETE"||r.type==="DROP_ANIMATE"||r.type==="FLUSH"},bf=function(e){return function(r){return function(t){return function(n){if(mf(n)){e.stop(),t(n);return}if(n.type==="INITIAL_PUBLISH"){t(n);var l=r.getState();l.phase!=="DRAGGING"&&Z(),e.start(l);return}t(n),e.scroll(r.getState())}}}},yf=function(e){return function(r){return function(t){if(r(t),t.type==="PUBLISH_WHILE_DRAGGING"){var n=e.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||e.dispatch(To({reason:n.reason})))}}}},wf=Ki,xf=function(e){var r=e.dimensionMarshal,t=e.focusMarshal,n=e.styleMarshal,l=e.getResponders,a=e.announce,i=e.autoScroller;return ji(Rd,wf(Ac(jd(n),hf(r),Zd(r),ef,pf,vf,yf,bf(i),af,gf(t),ff(l,a))))},Yt=function(){return{additions:{},removals:{},modified:{}}};function Df(e){var r=e.registry,t=e.callbacks,n=Yt(),l=null,a=function(){l||(t.collectionStarting(),l=requestAnimationFrame(function(){l=null;var p=n,c=p.additions,d=p.removals,h=p.modified,v=Object.keys(c).map(function(g){return r.draggable.getById(g).getDimension(Ge)}).sort(function(g,w){return g.descriptor.index-w.descriptor.index}),D=Object.keys(h).map(function(g){var w=r.droppable.getById(g),C=w.callbacks.getScrollWhileDragging();return{droppableId:g,scroll:C}}),S={additions:v,removals:Object.keys(d),modified:D};n=Yt(),t.publish(S)}))},i=function(p){var c=p.descriptor.id;n.additions[c]=p,n.modified[p.descriptor.droppableId]=!0,n.removals[c]&&delete n.removals[c],a()},o=function(p){var c=p.descriptor;n.removals[c.id]=!0,n.modified[c.droppableId]=!0,n.additions[c.id]&&delete n.additions[c.id],a()},s=function(){l&&(cancelAnimationFrame(l),l=null,n=Yt())};return{add:i,remove:o,stop:s}}var No=function(e){var r=e.scrollHeight,t=e.scrollWidth,n=e.height,l=e.width,a=Xe({x:t,y:r},{x:l,y:n}),i={x:Math.max(0,a.x),y:Math.max(0,a.y)};return i},Oo=function(){var e=document.documentElement;return e||Z(),e},Lo=function(){var e=Oo(),r=No({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight});return r},Sf=function(){var e=Mo(),r=Lo(),t=e.y,n=e.x,l=Oo(),a=l.clientWidth,i=l.clientHeight,o=n+a,s=t+i,f=sr({top:t,left:n,right:o,bottom:s}),p={frame:f,scroll:{initial:e,current:e,max:r,diff:{value:Ge,displacement:Ge}}};return p},Cf=function(e){var r=e.critical,t=e.scrollOptions,n=e.registry,l=Sf(),a=l.scroll.current,i=r.droppable,o=n.droppable.getAllByType(i.type).map(function(c){return c.callbacks.getDimensionAndWatchScroll(a,t)}),s=n.draggable.getAllByType(r.draggable.type).map(function(c){return c.getDimension(a)}),f={draggables:fo(s),droppables:uo(o)},p={dimensions:f,critical:r,viewport:l};return p};function Ga(e,r,t){if(t.descriptor.id===r.id||t.descriptor.type!==r.type)return!1;var n=e.droppable.getById(t.descriptor.droppableId);return n.descriptor.mode==="virtual"}var _f=function(e,r){var t=null,n=Df({callbacks:{publish:r.publishWhileDragging,collectionStarting:r.collectionStarting},registry:e}),l=function(h,v){e.droppable.exists(h)||Z(),t&&r.updateDroppableIsEnabled({id:h,isEnabled:v})},a=function(h,v){t&&(e.droppable.exists(h)||Z(),r.updateDroppableIsCombineEnabled({id:h,isCombineEnabled:v}))},i=function(h,v){t&&(e.droppable.exists(h)||Z(),r.updateDroppableScroll({id:h,newScroll:v}))},o=function(h,v){t&&e.droppable.getById(h).callbacks.scroll(v)},s=function(){if(t){n.stop();var h=t.critical.droppable;e.droppable.getAllByType(h.type).forEach(function(v){return v.callbacks.dragStopped()}),t.unsubscribe(),t=null}},f=function(h){t||Z();var v=t.critical.draggable;h.type==="ADDITION"&&Ga(e,v,h.value)&&n.add(h.value),h.type==="REMOVAL"&&Ga(e,v,h.value)&&n.remove(h.value)},p=function(h){t&&Z();var v=e.draggable.getById(h.draggableId),D=e.droppable.getById(v.descriptor.droppableId),S={draggable:v.descriptor,droppable:D.descriptor},g=e.subscribe(f);return t={critical:S,unsubscribe:g},Cf({critical:S,registry:e,scrollOptions:h.scrollOptions})},c={updateDroppableIsEnabled:l,updateDroppableIsCombineEnabled:a,scrollDroppable:o,updateDroppableScroll:i,startPublishing:p,stopPublishing:s};return c},Fo=function(e,r){return e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===r?!1:e.completed.result.reason==="DROP"},If=function(e){window.scrollBy(e.x,e.y)},Ef=ze(function(e){return Ot(e).filter(function(r){return!(!r.isEnabled||!r.frame)})}),Af=function(r,t){var n=Er(Ef(t),function(l){return l.frame||Z(),Do(l.frame.pageMarginBox)(r)});return n},kf=function(e){var r=e.center,t=e.destination,n=e.droppables;if(t){var l=n[t];return l.frame?l:null}var a=Af(r,n);return a},_r={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(r){return Math.pow(r,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},Rf=function(e,r){var t=e[r.size]*_r.startFromPercentage,n=e[r.size]*_r.maxScrollAtPercentage,l={startScrollingFrom:t,maxScrollValueAt:n};return l},zo=function(e){var r=e.startOfRange,t=e.endOfRange,n=e.current,l=t-r;if(l===0)return 0;var a=n-r,i=a/l;return i},jn=1,Tf=function(e,r){if(e>r.startScrollingFrom)return 0;if(e<=r.maxScrollValueAt)return _r.maxPixelScroll;if(e===r.startScrollingFrom)return jn;var t=zo({startOfRange:r.maxScrollValueAt,endOfRange:r.startScrollingFrom,current:e}),n=1-t,l=_r.maxPixelScroll*_r.ease(n);return Math.ceil(l)},Ha=_r.durationDampening.accelerateAt,Wa=_r.durationDampening.stopDampeningAt,Pf=function(e,r){var t=r,n=Wa,l=Date.now(),a=l-t;if(a>=Wa)return e;if(a<Ha)return jn;var i=zo({startOfRange:Ha,endOfRange:n,current:a}),o=e*_r.ease(i);return Math.ceil(o)},qa=function(e){var r=e.distanceToEdge,t=e.thresholds,n=e.dragStartTime,l=e.shouldUseTimeDampening,a=Tf(r,t);return a===0?0:l?Math.max(Pf(a,n),jn):a},Ua=function(e){var r=e.container,t=e.distanceToEdges,n=e.dragStartTime,l=e.axis,a=e.shouldUseTimeDampening,i=Rf(r,l),o=t[l.end]<t[l.start];return o?qa({distanceToEdge:t[l.end],thresholds:i,dragStartTime:n,shouldUseTimeDampening:a}):-1*qa({distanceToEdge:t[l.start],thresholds:i,dragStartTime:n,shouldUseTimeDampening:a})},Bf=function(e){var r=e.container,t=e.subject,n=e.proposedScroll,l=t.height>r.height,a=t.width>r.width;return!a&&!l?n:a&&l?null:{x:a?0:n.x,y:l?0:n.y}},Mf=so(function(e){return e===0?0:e}),Go=function(e){var r=e.dragStartTime,t=e.container,n=e.subject,l=e.center,a=e.shouldUseTimeDampening,i={top:l.y-t.top,right:t.right-l.x,bottom:t.bottom-l.y,left:l.x-t.left},o=Ua({container:t,distanceToEdges:i,dragStartTime:r,axis:zn,shouldUseTimeDampening:a}),s=Ua({container:t,distanceToEdges:i,dragStartTime:r,axis:ho,shouldUseTimeDampening:a}),f=Mf({x:s,y:o});if(Cr(f,Ge))return null;var p=Bf({container:t,subject:n,proposedScroll:f});return p?Cr(p,Ge)?null:p:null},Nf=so(function(e){return e===0?0:e>0?1:-1}),Kn=function(){var e=function(t,n){return t<0?t:t>n?t-n:0};return function(r){var t=r.current,n=r.max,l=r.change,a=Ue(t,l),i={x:e(a.x,n.x),y:e(a.y,n.y)};return Cr(i,Ge)?null:i}}(),Ho=function(r){var t=r.max,n=r.current,l=r.change,a={x:Math.max(n.x,t.x),y:Math.max(n.y,t.y)},i=Nf(l),o=Kn({max:a,current:n,change:i});return!o||i.x!==0&&o.x===0||i.y!==0&&o.y===0},Yn=function(r,t){return Ho({current:r.scroll.current,max:r.scroll.max,change:t})},Of=function(r,t){if(!Yn(r,t))return null;var n=r.scroll.max,l=r.scroll.current;return Kn({current:l,max:n,change:t})},Xn=function(r,t){var n=r.frame;return n?Ho({current:n.scroll.current,max:n.scroll.max,change:t}):!1},Lf=function(r,t){var n=r.frame;return!n||!Xn(r,t)?null:Kn({current:n.scroll.current,max:n.scroll.max,change:t})},Ff=function(e){var r=e.viewport,t=e.subject,n=e.center,l=e.dragStartTime,a=e.shouldUseTimeDampening,i=Go({dragStartTime:l,container:r.frame,subject:t,center:n,shouldUseTimeDampening:a});return i&&Yn(r,i)?i:null},zf=function(e){var r=e.droppable,t=e.subject,n=e.center,l=e.dragStartTime,a=e.shouldUseTimeDampening,i=r.frame;if(!i)return null;var o=Go({dragStartTime:l,container:i.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:a});return o&&Xn(r,o)?o:null},$a=function(e){var r=e.state,t=e.dragStartTime,n=e.shouldUseTimeDampening,l=e.scrollWindow,a=e.scrollDroppable,i=r.current.page.borderBoxCenter,o=r.dimensions.draggables[r.critical.draggable.id],s=o.page.marginBox;if(r.isWindowScrollAllowed){var f=r.viewport,p=Ff({dragStartTime:t,viewport:f,subject:s,center:i,shouldUseTimeDampening:n});if(p){l(p);return}}var c=kf({center:i,destination:Je(r.impact),droppables:r.dimensions.droppables});if(c){var d=zf({dragStartTime:t,droppable:c,subject:s,center:i,shouldUseTimeDampening:n});d&&a(c.descriptor.id,d)}},Gf=function(e){var r=e.scrollWindow,t=e.scrollDroppable,n=at(r),l=at(t),a=null,i=function(p){a||Z();var c=a,d=c.shouldUseTimeDampening,h=c.dragStartTime;$a({state:p,scrollWindow:n,scrollDroppable:l,dragStartTime:h,shouldUseTimeDampening:d})},o=function(p){a&&Z();var c=Date.now(),d=!1,h=function(){d=!0};$a({state:p,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:h,scrollDroppable:h}),a={dragStartTime:c,shouldUseTimeDampening:d},d&&i(p)},s=function(){a&&(n.cancel(),l.cancel(),a=null)};return{start:o,stop:s,scroll:i}},Hf=function(e){var r=e.move,t=e.scrollDroppable,n=e.scrollWindow,l=function(f,p){var c=Ue(f.current.client.selection,p);r({client:c})},a=function(f,p){if(!Xn(f,p))return p;var c=Lf(f,p);if(!c)return t(f.descriptor.id,p),null;var d=Xe(p,c);t(f.descriptor.id,d);var h=Xe(p,d);return h},i=function(f,p,c){if(!f||!Yn(p,c))return c;var d=Of(p,c);if(!d)return n(c),null;var h=Xe(c,d);n(h);var v=Xe(c,h);return v},o=function(f){var p=f.scrollJumpRequest;if(p){var c=Je(f.impact);c||Z();var d=a(f.dimensions.droppables[c],p);if(d){var h=f.viewport,v=i(f.isWindowScrollAllowed,h,d);v&&l(f,v)}}};return o},Wf=function(e){var r=e.scrollDroppable,t=e.scrollWindow,n=e.move,l=Gf({scrollWindow:t,scrollDroppable:r}),a=Hf({move:n,scrollWindow:t,scrollDroppable:r}),i=function(f){if(f.phase==="DRAGGING"){if(f.movementMode==="FLUID"){l.scroll(f);return}f.scrollJumpRequest&&a(f)}},o={scroll:i,start:l.start,stop:l.stop};return o},Ur="data-rbd",$r=function(){var e=Ur+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),Sn=function(){var e=Ur+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),qf=function(){var e=Ur+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Va={contextId:Ur+"-scroll-container-context-id"},Uf=function(r){return function(t){return"["+t+'="'+r+'"]'}},Jr=function(r,t){return r.map(function(n){var l=n.styles[t];return l?n.selector+" { "+l+" }":""}).join(" ")},$f="pointer-events: none;",Vf=function(e){var r=Uf(e),t=function(){var o=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:r($r.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:o,dragging:$f,dropAnimating:o}}}(),n=function(){var o=`
      transition: `+tt.outOfTheWay+`;
    `;return{selector:r(Sn.contextId),styles:{dragging:o,dropAnimating:o,userCancel:o}}}(),l={selector:r(qf.contextId),styles:{always:"overflow-anchor: none;"}},a={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},i=[n,t,l,a];return{always:Jr(i,"always"),resting:Jr(i,"resting"),dragging:Jr(i,"dragging"),dropAnimating:Jr(i,"dropAnimating"),userCancel:Jr(i,"userCancel")}},Qe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?Ri:Ae,Xt=function(){var r=document.querySelector("head");return r||Z(),r},Za=function(r){var t=document.createElement("style");return r&&t.setAttribute("nonce",r),t.type="text/css",t};function Zf(e,r){var t=me(function(){return Vf(e)},[e]),n=xe(null),l=xe(null),a=te(ze(function(c){var d=l.current;d||Z(),d.textContent=c}),[]),i=te(function(c){var d=n.current;d||Z(),d.textContent=c},[]);Qe(function(){!n.current&&!l.current||Z();var c=Za(r),d=Za(r);return n.current=c,l.current=d,c.setAttribute(Ur+"-always",e),d.setAttribute(Ur+"-dynamic",e),Xt().appendChild(c),Xt().appendChild(d),i(t.always),a(t.resting),function(){var h=function(D){var S=D.current;S||Z(),Xt().removeChild(S),D.current=null};h(n),h(l)}},[r,i,a,t.always,t.resting,e]);var o=te(function(){return a(t.dragging)},[a,t.dragging]),s=te(function(c){if(c==="DROP"){a(t.dropAnimating);return}a(t.userCancel)},[a,t.dropAnimating,t.userCancel]),f=te(function(){l.current&&a(t.resting)},[a,t.resting]),p=me(function(){return{dragging:o,dropping:s,resting:f}},[o,s,f]);return p}var Wo=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function Gt(e){return e instanceof Wo(e).HTMLElement}function jf(e,r){var t="["+$r.contextId+'="'+e+'"]',n=co(document.querySelectorAll(t));if(!n.length)return null;var l=Er(n,function(a){return a.getAttribute($r.draggableId)===r});return!l||!Gt(l)?null:l}function Kf(e){var r=xe({}),t=xe(null),n=xe(null),l=xe(!1),a=te(function(d,h){var v={id:d,focus:h};return r.current[d]=v,function(){var S=r.current,g=S[d];g!==v&&delete S[d]}},[]),i=te(function(d){var h=jf(e,d);h&&h!==document.activeElement&&h.focus()},[e]),o=te(function(d,h){t.current===d&&(t.current=h)},[]),s=te(function(){n.current||l.current&&(n.current=requestAnimationFrame(function(){n.current=null;var d=t.current;d&&i(d)}))},[i]),f=te(function(d){t.current=null;var h=document.activeElement;h&&h.getAttribute($r.draggableId)===d&&(t.current=d)},[]);Qe(function(){return l.current=!0,function(){l.current=!1;var d=n.current;d&&cancelAnimationFrame(d)}},[]);var p=me(function(){return{register:a,tryRecordFocus:f,tryRestoreFocusRecorded:s,tryShiftRecord:o}},[a,f,s,o]);return p}function Yf(){var e={draggables:{},droppables:{}},r=[];function t(c){return r.push(c),function(){var h=r.indexOf(c);h!==-1&&r.splice(h,1)}}function n(c){r.length&&r.forEach(function(d){return d(c)})}function l(c){return e.draggables[c]||null}function a(c){var d=l(c);return d||Z(),d}var i={register:function(d){e.draggables[d.descriptor.id]=d,n({type:"ADDITION",value:d})},update:function(d,h){var v=e.draggables[h.descriptor.id];v&&v.uniqueId===d.uniqueId&&(delete e.draggables[h.descriptor.id],e.draggables[d.descriptor.id]=d)},unregister:function(d){var h=d.descriptor.id,v=l(h);v&&d.uniqueId===v.uniqueId&&(delete e.draggables[h],n({type:"REMOVAL",value:d}))},getById:a,findById:l,exists:function(d){return!!l(d)},getAllByType:function(d){return Et(e.draggables).filter(function(h){return h.descriptor.type===d})}};function o(c){return e.droppables[c]||null}function s(c){var d=o(c);return d||Z(),d}var f={register:function(d){e.droppables[d.descriptor.id]=d},unregister:function(d){var h=o(d.descriptor.id);h&&d.uniqueId===h.uniqueId&&delete e.droppables[d.descriptor.id]},getById:s,findById:o,exists:function(d){return!!o(d)},getAllByType:function(d){return Et(e.droppables).filter(function(h){return h.descriptor.type===d})}};function p(){e.draggables={},e.droppables={},r.length=0}return{draggable:i,droppable:f,subscribe:t,clean:p}}function Xf(){var e=me(Yf,[]);return Ae(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}var Jn=ye.createContext(null),kt=function(){var e=document.body;return e||Z(),e},Jf={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},Qf=function(r){return"rbd-announcement-"+r};function ep(e){var r=me(function(){return Qf(e)},[e]),t=xe(null);Ae(function(){var a=document.createElement("div");return t.current=a,a.id=r,a.setAttribute("aria-live","assertive"),a.setAttribute("aria-atomic","true"),le(a.style,Jf),kt().appendChild(a),function(){setTimeout(function(){var s=kt();s.contains(a)&&s.removeChild(a),a===t.current&&(t.current=null)})}},[r]);var n=te(function(l){var a=t.current;if(a){a.textContent=l;return}},[]);return n}var rp=0,tp={separator:"::"};function Qn(e,r){return r===void 0&&(r=tp),me(function(){return""+e+r.separator+rp++},[r.separator,e])}function np(e){var r=e.contextId,t=e.uniqueId;return"rbd-hidden-text-"+r+"-"+t}function ap(e){var r=e.contextId,t=e.text,n=Qn("hidden-text",{separator:"-"}),l=me(function(){return np({contextId:r,uniqueId:n})},[n,r]);return Ae(function(){var i=document.createElement("div");return i.id=l,i.textContent=t,i.style.display="none",kt().appendChild(i),function(){var s=kt();s.contains(i)&&s.removeChild(i)}},[l,t]),l}var Ht=ye.createContext(null);function qo(e){var r=xe(e);return Ae(function(){r.current=e}),r}function ip(){var e=null;function r(){return!!e}function t(i){return i===e}function n(i){e&&Z();var o={abandon:i};return e=o,o}function l(){e||Z(),e=null}function a(){e&&(e.abandon(),l())}return{isClaimed:r,isActive:t,claim:n,release:l,tryAbandon:a}}var op=9,lp=13,ea=27,Uo=32,sp=33,cp=34,up=35,dp=36,fp=37,pp=38,vp=39,hp=40,gt,gp=(gt={},gt[lp]=!0,gt[op]=!0,gt),$o=function(e){gp[e.keyCode]&&e.preventDefault()},Wt=function(){var e="visibilitychange";if(typeof document>"u")return e;var r=[e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],t=Er(r,function(n){return"on"+n in document});return t||e}(),Vo=0,ja=5;function mp(e,r){return Math.abs(r.x-e.x)>=ja||Math.abs(r.y-e.y)>=ja}var Ka={type:"IDLE"};function bp(e){var r=e.cancel,t=e.completed,n=e.getPhase,l=e.setPhase;return[{eventName:"mousemove",fn:function(i){var o=i.button,s=i.clientX,f=i.clientY;if(o===Vo){var p={x:s,y:f},c=n();if(c.type==="DRAGGING"){i.preventDefault(),c.actions.move(p);return}c.type!=="PENDING"&&Z();var d=c.point;if(mp(d,p)){i.preventDefault();var h=c.actions.fluidLift(p);l({type:"DRAGGING",actions:h})}}}},{eventName:"mouseup",fn:function(i){var o=n();if(o.type!=="DRAGGING"){r();return}i.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:function(i){n().type==="DRAGGING"&&i.preventDefault(),r()}},{eventName:"keydown",fn:function(i){var o=n();if(o.type==="PENDING"){r();return}if(i.keyCode===ea){i.preventDefault(),r();return}$o(i)}},{eventName:"resize",fn:r},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){n().type==="PENDING"&&r()}},{eventName:"webkitmouseforcedown",fn:function(i){var o=n();if(o.type==="IDLE"&&Z(),o.actions.shouldRespectForcePress()){r();return}i.preventDefault()}},{eventName:Wt,fn:r}]}function yp(e){var r=xe(Ka),t=xe(Sr),n=me(function(){return{eventName:"mousedown",fn:function(c){if(!c.defaultPrevented&&c.button===Vo&&!(c.ctrlKey||c.metaKey||c.shiftKey||c.altKey)){var d=e.findClosestDraggableId(c);if(d){var h=e.tryGetLock(d,i,{sourceEvent:c});if(h){c.preventDefault();var v={x:c.clientX,y:c.clientY};t.current(),f(h,v)}}}}}},[e]),l=me(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(c){if(!c.defaultPrevented){var d=e.findClosestDraggableId(c);if(d){var h=e.findOptionsForDraggable(d);h&&(h.shouldRespectForcePress||e.canGetLock(d)&&c.preventDefault())}}}}},[e]),a=te(function(){var c={passive:!1,capture:!0};t.current=ar(window,[l,n],c)},[l,n]),i=te(function(){var p=r.current;p.type!=="IDLE"&&(r.current=Ka,t.current(),a())},[a]),o=te(function(){var p=r.current;i(),p.type==="DRAGGING"&&p.actions.cancel({shouldBlockNextClick:!0}),p.type==="PENDING"&&p.actions.abort()},[i]),s=te(function(){var c={capture:!0,passive:!1},d=bp({cancel:o,completed:i,getPhase:function(){return r.current},setPhase:function(v){r.current=v}});t.current=ar(window,d,c)},[o,i]),f=te(function(c,d){r.current.type!=="IDLE"&&Z(),r.current={type:"PENDING",point:d,actions:c},s()},[s]);Qe(function(){return a(),function(){t.current()}},[a])}var Gr;function wp(){}var xp=(Gr={},Gr[cp]=!0,Gr[sp]=!0,Gr[dp]=!0,Gr[up]=!0,Gr);function Dp(e,r){function t(){r(),e.cancel()}function n(){r(),e.drop()}return[{eventName:"keydown",fn:function(a){if(a.keyCode===ea){a.preventDefault(),t();return}if(a.keyCode===Uo){a.preventDefault(),n();return}if(a.keyCode===hp){a.preventDefault(),e.moveDown();return}if(a.keyCode===pp){a.preventDefault(),e.moveUp();return}if(a.keyCode===vp){a.preventDefault(),e.moveRight();return}if(a.keyCode===fp){a.preventDefault(),e.moveLeft();return}if(xp[a.keyCode]){a.preventDefault();return}$o(a)}},{eventName:"mousedown",fn:t},{eventName:"mouseup",fn:t},{eventName:"click",fn:t},{eventName:"touchstart",fn:t},{eventName:"resize",fn:t},{eventName:"wheel",fn:t,options:{passive:!0}},{eventName:Wt,fn:t}]}function Sp(e){var r=xe(wp),t=me(function(){return{eventName:"keydown",fn:function(a){if(a.defaultPrevented||a.keyCode!==Uo)return;var i=e.findClosestDraggableId(a);if(!i)return;var o=e.tryGetLock(i,p,{sourceEvent:a});if(!o)return;a.preventDefault();var s=!0,f=o.snapLift();r.current();function p(){s||Z(),s=!1,r.current(),n()}r.current=ar(window,Dp(f,p),{capture:!0,passive:!1})}}},[e]),n=te(function(){var a={passive:!1,capture:!0};r.current=ar(window,[t],a)},[t]);Qe(function(){return n(),function(){r.current()}},[n])}var Jt={type:"IDLE"},Cp=120,_p=.15;function Ip(e){var r=e.cancel,t=e.getPhase;return[{eventName:"orientationchange",fn:r},{eventName:"resize",fn:r},{eventName:"contextmenu",fn:function(l){l.preventDefault()}},{eventName:"keydown",fn:function(l){if(t().type!=="DRAGGING"){r();return}l.keyCode===ea&&l.preventDefault(),r()}},{eventName:Wt,fn:r}]}function Ep(e){var r=e.cancel,t=e.completed,n=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(a){var i=n();if(i.type!=="DRAGGING"){r();return}i.hasMoved=!0;var o=a.touches[0],s=o.clientX,f=o.clientY,p={x:s,y:f};a.preventDefault(),i.actions.move(p)}},{eventName:"touchend",fn:function(a){var i=n();if(i.type!=="DRAGGING"){r();return}a.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:function(a){if(n().type!=="DRAGGING"){r();return}a.preventDefault(),r()}},{eventName:"touchforcechange",fn:function(a){var i=n();i.type==="IDLE"&&Z();var o=a.touches[0];if(o){var s=o.force>=_p;if(s){var f=i.actions.shouldRespectForcePress();if(i.type==="PENDING"){f&&r();return}if(f){if(i.hasMoved){a.preventDefault();return}r();return}a.preventDefault()}}}},{eventName:Wt,fn:r}]}function Ap(e){var r=xe(Jt),t=xe(Sr),n=te(function(){return r.current},[]),l=te(function(h){r.current=h},[]),a=me(function(){return{eventName:"touchstart",fn:function(h){if(!h.defaultPrevented){var v=e.findClosestDraggableId(h);if(v){var D=e.tryGetLock(v,o,{sourceEvent:h});if(D){var S=h.touches[0],g=S.clientX,w=S.clientY,C={x:g,y:w};t.current(),c(D,C)}}}}}},[e]),i=te(function(){var h={capture:!0,passive:!1};t.current=ar(window,[a],h)},[a]),o=te(function(){var d=r.current;d.type!=="IDLE"&&(d.type==="PENDING"&&clearTimeout(d.longPressTimerId),l(Jt),t.current(),i())},[i,l]),s=te(function(){var d=r.current;o(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[o]),f=te(function(){var h={capture:!0,passive:!1},v={cancel:s,completed:o,getPhase:n},D=ar(window,Ep(v),h),S=ar(window,Ip(v),h);t.current=function(){D(),S()}},[s,n,o]),p=te(function(){var h=n();h.type!=="PENDING"&&Z();var v=h.actions.fluidLift(h.point);l({type:"DRAGGING",actions:v,hasMoved:!1})},[n,l]),c=te(function(h,v){n().type!=="IDLE"&&Z();var D=setTimeout(p,Cp);l({type:"PENDING",point:v,actions:h,longPressTimerId:D}),f()},[f,n,l,p]);Qe(function(){return i(),function(){t.current();var v=n();v.type==="PENDING"&&(clearTimeout(v.longPressTimerId),l(Jt))}},[n,i,l]),Qe(function(){var h=ar(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return h},[])}var kp={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function Zo(e,r){if(r==null)return!1;var t=!!kp[r.tagName.toLowerCase()];if(t)return!0;var n=r.getAttribute("contenteditable");return n==="true"||n===""?!0:r===e?!1:Zo(e,r.parentElement)}function Rp(e,r){var t=r.target;return Gt(t)?Zo(e,t):!1}var Tp=function(e){return sr(e.getBoundingClientRect()).center};function Pp(e){return e instanceof Wo(e).Element}var Bp=function(){var e="matches";if(typeof document>"u")return e;var r=[e,"msMatchesSelector","webkitMatchesSelector"],t=Er(r,function(n){return n in Element.prototype});return t||e}();function jo(e,r){return e==null?null:e[Bp](r)?e:jo(e.parentElement,r)}function Mp(e,r){return e.closest?e.closest(r):jo(e,r)}function Np(e){return"["+$r.contextId+'="'+e+'"]'}function Op(e,r){var t=r.target;if(!Pp(t))return null;var n=Np(e),l=Mp(t,n);return!l||!Gt(l)?null:l}function Lp(e,r){var t=Op(e,r);return t?t.getAttribute($r.draggableId):null}function Fp(e,r){var t="["+Sn.contextId+'="'+e+'"]',n=co(document.querySelectorAll(t)),l=Er(n,function(a){return a.getAttribute(Sn.id)===r});return!l||!Gt(l)?null:l}function zp(e){e.preventDefault()}function mt(e){var r=e.expected,t=e.phase,n=e.isLockActive;return e.shouldWarn,!(!n()||r!==t)}function Ko(e){var r=e.lockAPI,t=e.store,n=e.registry,l=e.draggableId;if(r.isClaimed())return!1;var a=n.draggable.findById(l);return!(!a||!a.options.isEnabled||!Fo(t.getState(),l))}function Gp(e){var r=e.lockAPI,t=e.contextId,n=e.store,l=e.registry,a=e.draggableId,i=e.forceSensorStop,o=e.sourceEvent,s=Ko({lockAPI:r,store:n,registry:l,draggableId:a});if(!s)return null;var f=l.draggable.getById(a),p=Fp(t,f.descriptor.id);if(!p||o&&!f.options.canDragInteractiveElements&&Rp(p,o))return null;var c=r.claim(i||Sr),d="PRE_DRAG";function h(){return f.options.shouldRespectForcePress}function v(){return r.isActive(c)}function D(R,_){mt({expected:R,phase:d,isLockActive:v,shouldWarn:!0})&&n.dispatch(_())}var S=D.bind(null,"DRAGGING");function g(R){function _(){r.release(),d="COMPLETED"}d!=="PRE_DRAG"&&(_(),d!=="PRE_DRAG"&&Z()),n.dispatch(Pd(R.liftActionArgs)),d="DRAGGING";function M(F,G){if(G===void 0&&(G={shouldBlockNextClick:!1}),R.cleanup(),G.shouldBlockNextClick){var O=ar(window,[{eventName:"click",fn:zp,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(O)}_(),n.dispatch(To({reason:F}))}return le({isActive:function(){return mt({expected:"DRAGGING",phase:d,isLockActive:v,shouldWarn:!1})},shouldRespectForcePress:h,drop:function(G){return M("DROP",G)},cancel:function(G){return M("CANCEL",G)}},R.actions)}function w(R){var _=at(function(F){S(function(){return Ro({client:F})})}),M=g({liftActionArgs:{id:a,clientSelection:R,movementMode:"FLUID"},cleanup:function(){return _.cancel()},actions:{move:_}});return le({},M,{move:_})}function C(){var R={moveUp:function(){return S(Hd)},moveRight:function(){return S(qd)},moveDown:function(){return S(Wd)},moveLeft:function(){return S(Ud)}};return g({liftActionArgs:{id:a,clientSelection:Tp(p),movementMode:"SNAP"},cleanup:Sr,actions:R})}function I(){var R=mt({expected:"PRE_DRAG",phase:d,isLockActive:v,shouldWarn:!0});R&&r.release()}var k={isActive:function(){return mt({expected:"PRE_DRAG",phase:d,isLockActive:v,shouldWarn:!1})},shouldRespectForcePress:h,fluidLift:w,snapLift:C,abort:I};return k}var Hp=[yp,Sp,Ap];function Wp(e){var r=e.contextId,t=e.store,n=e.registry,l=e.customSensors,a=e.enableDefaultSensors,i=[].concat(a?Hp:[],l||[]),o=ur(function(){return ip()})[0],s=te(function(w,C){w.isDragging&&!C.isDragging&&o.tryAbandon()},[o]);Qe(function(){var w=t.getState(),C=t.subscribe(function(){var I=t.getState();s(w,I),w=I});return C},[o,t,s]),Qe(function(){return o.tryAbandon},[o.tryAbandon]);for(var f=te(function(g){return Ko({lockAPI:o,registry:n,store:t,draggableId:g})},[o,n,t]),p=te(function(g,w,C){return Gp({lockAPI:o,registry:n,contextId:r,store:t,draggableId:g,forceSensorStop:w,sourceEvent:C&&C.sourceEvent?C.sourceEvent:null})},[r,o,n,t]),c=te(function(g){return Lp(r,g)},[r]),d=te(function(g){var w=n.draggable.findById(g);return w?w.options:null},[n.draggable]),h=te(function(){o.isClaimed()&&(o.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(Un()))},[o,t]),v=te(o.isClaimed,[o]),D=me(function(){return{canGetLock:f,tryGetLock:p,findClosestDraggableId:c,findOptionsForDraggable:d,tryReleaseLock:h,isLockClaimed:v}},[f,p,c,d,h,v]),S=0;S<i.length;S++)i[S](D)}var qp=function(r){return{onBeforeCapture:r.onBeforeCapture,onBeforeDragStart:r.onBeforeDragStart,onDragStart:r.onDragStart,onDragEnd:r.onDragEnd,onDragUpdate:r.onDragUpdate}};function Qr(e){return e.current||Z(),e.current}function Up(e){var r=e.contextId,t=e.setCallbacks,n=e.sensors,l=e.nonce,a=e.dragHandleUsageInstructions,i=xe(null),o=qo(e),s=te(function(){return qp(o.current)},[o]),f=ep(r),p=ap({contextId:r,text:a}),c=Zf(r,l),d=te(function(F){Qr(i).dispatch(F)},[]),h=me(function(){return wa({publishWhileDragging:Md,updateDroppableScroll:Od,updateDroppableIsEnabled:Ld,updateDroppableIsCombineEnabled:Fd,collectionStarting:Nd},d)},[d]),v=Xf(),D=me(function(){return _f(v,h)},[v,h]),S=me(function(){return Wf(le({scrollWindow:If,scrollDroppable:D.scrollDroppable},wa({move:Ro},d)))},[D.scrollDroppable,d]),g=Kf(r),w=me(function(){return xf({announce:f,autoScroller:S,dimensionMarshal:D,focusMarshal:g,getResponders:s,styleMarshal:c})},[f,S,D,g,s,c]);i.current=w;var C=te(function(){var F=Qr(i),G=F.getState();G.phase!=="IDLE"&&F.dispatch(Un())},[]),I=te(function(){var F=Qr(i).getState();return F.isDragging||F.phase==="DROP_ANIMATING"},[]),k=me(function(){return{isDragging:I,tryAbort:C}},[I,C]);t(k);var R=te(function(F){return Fo(Qr(i).getState(),F)},[]),_=te(function(){return Br(Qr(i).getState())},[]),M=me(function(){return{marshal:D,focus:g,contextId:r,canLift:R,isMovementAllowed:_,dragHandleUsageInstructionsId:p,registry:v}},[r,D,p,g,R,_,v]);return Wp({contextId:r,store:w,registry:v,customSensors:n,enableDefaultSensors:e.enableDefaultSensors!==!1}),Ae(function(){return C},[C]),ye.createElement(Ht.Provider,{value:M},ye.createElement(Bc,{context:Jn,store:w},e.children))}var $p=0;function Vp(){return me(function(){return""+$p++},[])}function Yo(e){var r=Vp(),t=e.dragHandleUsageInstructions||wt.dragHandleUsageInstructions;return ye.createElement(Du,null,function(n){return ye.createElement(Up,{nonce:e.nonce,contextId:r,setCallbacks:n,dragHandleUsageInstructions:t,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var Xo=function(r){return function(t){return r===t}},Zp=Xo("scroll"),jp=Xo("auto"),Ya=function(r,t){return t(r.overflowX)||t(r.overflowY)},Kp=function(r){var t=window.getComputedStyle(r),n={overflowX:t.overflowX,overflowY:t.overflowY};return Ya(n,Zp)||Ya(n,jp)},Yp=function(){return!1},Xp=function e(r){return r==null?null:r===document.body?Yp()?r:null:r===document.documentElement?null:Kp(r)?r:e(r.parentElement)},Cn=function(e){return{x:e.scrollLeft,y:e.scrollTop}},Jp=function e(r){if(!r)return!1;var t=window.getComputedStyle(r);return t.position==="fixed"?!0:e(r.parentElement)},Qp=function(e){var r=Xp(e),t=Jp(e);return{closestScrollable:r,isFixedOnPage:t}},ev=function(e){var r=e.descriptor,t=e.isEnabled,n=e.isCombineEnabled,l=e.isFixedOnPage,a=e.direction,i=e.client,o=e.page,s=e.closest,f=function(){if(!s)return null;var h=s.scrollSize,v=s.client,D=No({scrollHeight:h.scrollHeight,scrollWidth:h.scrollWidth,height:v.paddingBox.height,width:v.paddingBox.width});return{pageMarginBox:s.page.marginBox,frameClient:v,scrollSize:h,shouldClipSubject:s.shouldClipSubject,scroll:{initial:s.scroll,current:s.scroll,max:D,diff:{value:Ge,displacement:Ge}}}}(),p=a==="vertical"?zn:ho,c=qr({page:o,withPlaceholder:null,axis:p,frame:f}),d={descriptor:r,isCombineEnabled:n,isFixedOnPage:l,axis:p,isEnabled:t,client:i,page:o,frame:f,subject:c};return d},rv=function(r,t){var n=ao(r);if(!t||r!==t)return n;var l=n.paddingBox.top-t.scrollTop,a=n.paddingBox.left-t.scrollLeft,i=l+t.scrollHeight,o=a+t.scrollWidth,s={top:l,right:o,bottom:i,left:a},f=Mn(s,n.border),p=Nn({borderBox:f,margin:n.margin,border:n.border,padding:n.padding});return p},tv=function(e){var r=e.ref,t=e.descriptor,n=e.env,l=e.windowScroll,a=e.direction,i=e.isDropDisabled,o=e.isCombineEnabled,s=e.shouldClipSubject,f=n.closestScrollable,p=rv(r,f),c=Ct(p,l),d=function(){if(!f)return null;var v=ao(f),D={scrollHeight:f.scrollHeight,scrollWidth:f.scrollWidth};return{client:v,page:Ct(v,l),scroll:Cn(f),scrollSize:D,shouldClipSubject:s}}(),h=ev({descriptor:t,isEnabled:!i,isCombineEnabled:o,isFixedOnPage:n.isFixedOnPage,direction:a,client:p,page:c,closest:d});return h},nv={passive:!1},av={passive:!0},Xa=function(e){return e.shouldPublishImmediately?nv:av};function Rt(e){var r=En(e);return r||Z(),r}var bt=function(r){return r&&r.env.closestScrollable||null};function iv(e){var r=xe(null),t=Rt(Ht),n=Qn("droppable"),l=t.registry,a=t.marshal,i=qo(e),o=me(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),s=xe(o),f=me(function(){return ze(function(I,k){r.current||Z();var R={x:I,y:k};a.updateDroppableScroll(o.id,R)})},[o.id,a]),p=te(function(){var I=r.current;return!I||!I.env.closestScrollable?Ge:Cn(I.env.closestScrollable)},[]),c=te(function(){var I=p();f(I.x,I.y)},[p,f]),d=me(function(){return at(c)},[c]),h=te(function(){var I=r.current,k=bt(I);I&&k||Z();var R=I.scrollOptions;if(R.shouldPublishImmediately){c();return}d()},[d,c]),v=te(function(I,k){r.current&&Z();var R=i.current,_=R.getDroppableRef();_||Z();var M=Qp(_),F={ref:_,descriptor:o,env:M,scrollOptions:k};r.current=F;var G=tv({ref:_,descriptor:o,env:M,windowScroll:I,direction:R.direction,isDropDisabled:R.isDropDisabled,isCombineEnabled:R.isCombineEnabled,shouldClipSubject:!R.ignoreContainerClipping}),O=M.closestScrollable;return O&&(O.setAttribute(Va.contextId,t.contextId),O.addEventListener("scroll",h,Xa(F.scrollOptions))),G},[t.contextId,o,h,i]),D=te(function(){var I=r.current,k=bt(I);return I&&k||Z(),Cn(k)},[]),S=te(function(){var I=r.current;I||Z();var k=bt(I);r.current=null,k&&(d.cancel(),k.removeAttribute(Va.contextId),k.removeEventListener("scroll",h,Xa(I.scrollOptions)))},[h,d]),g=te(function(I){var k=r.current;k||Z();var R=bt(k);R||Z(),R.scrollTop+=I.y,R.scrollLeft+=I.x},[]),w=me(function(){return{getDimensionAndWatchScroll:v,getScrollWhileDragging:D,dragStopped:S,scroll:g}},[S,v,D,g]),C=me(function(){return{uniqueId:n,descriptor:o,callbacks:w}},[w,o,n]);Qe(function(){return s.current=C.descriptor,l.droppable.register(C),function(){r.current&&S(),l.droppable.unregister(C)}},[w,o,S,C,a,l.droppable]),Qe(function(){r.current&&a.updateDroppableIsEnabled(s.current.id,!e.isDropDisabled)},[e.isDropDisabled,a]),Qe(function(){r.current&&a.updateDroppableIsCombineEnabled(s.current.id,e.isCombineEnabled)},[e.isCombineEnabled,a])}function Qt(){}var Ja={width:0,height:0,margin:Au},ov=function(r){var t=r.isAnimatingOpenOnMount,n=r.placeholder,l=r.animate;return t||l==="close"?Ja:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}},lv=function(r){var t=r.isAnimatingOpenOnMount,n=r.placeholder,l=r.animate,a=ov({isAnimatingOpenOnMount:t,placeholder:n,animate:l});return{display:n.display,boxSizing:"border-box",width:a.width,height:a.height,marginTop:a.margin.top,marginRight:a.margin.right,marginBottom:a.margin.bottom,marginLeft:a.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:l!=="none"?tt.placeholder:null}};function sv(e){var r=xe(null),t=te(function(){r.current&&(clearTimeout(r.current),r.current=null)},[]),n=e.animate,l=e.onTransitionEnd,a=e.onClose,i=e.contextId,o=ur(e.animate==="open"),s=o[0],f=o[1];Ae(function(){return s?n!=="open"?(t(),f(!1),Qt):r.current?Qt:(r.current=setTimeout(function(){r.current=null,f(!1)}),t):Qt},[n,s,t]);var p=te(function(d){d.propertyName==="height"&&(l(),n==="close"&&a())},[n,a,l]),c=lv({isAnimatingOpenOnMount:s,animate:e.animate,placeholder:e.placeholder});return ye.createElement(e.placeholder.tagName,{style:c,"data-rbd-placeholder-context-id":i,onTransitionEnd:p,ref:e.innerRef})}var cv=ye.memo(sv),ra=ye.createContext(null),uv=function(e){Li(r,e);function r(){for(var n,l=arguments.length,a=new Array(l),i=0;i<l;i++)a[i]=arguments[i];return n=e.call.apply(e,[this].concat(a))||this,n.state={isVisible:!!n.props.on,data:n.props.on,animate:n.props.shouldAnimate&&n.props.on?"open":"none"},n.onClose=function(){n.state.animate==="close"&&n.setState({isVisible:!1})},n}r.getDerivedStateFromProps=function(l,a){return l.shouldAnimate?l.on?{isVisible:!0,data:l.on,animate:"open"}:a.isVisible?{isVisible:!0,data:a.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!l.on,data:l.on,animate:"none"}};var t=r.prototype;return t.render=function(){if(!this.state.isVisible)return null;var l={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(l)},r}(ye.PureComponent),Qa={dragging:5e3,dropAnimating:4500},dv=function(r,t){return t?tt.drop(t.duration):r?tt.snap:tt.fluid},fv=function(r,t){return r?t?st.opacity.drop:st.opacity.combining:null},pv=function(r){return r.forceShouldAnimate!=null?r.forceShouldAnimate:r.mode==="SNAP"};function vv(e){var r=e.dimension,t=r.client,n=e.offset,l=e.combineWith,a=e.dropping,i=!!l,o=pv(e),s=!!a,f=s?xn.drop(n,i):xn.moveTo(n),p={position:"fixed",top:t.marginBox.top,left:t.marginBox.left,boxSizing:"border-box",width:t.borderBox.width,height:t.borderBox.height,transition:dv(o,a),transform:f,opacity:fv(i,s),zIndex:s?Qa.dropAnimating:Qa.dragging,pointerEvents:"none"};return p}function hv(e){return{transform:xn.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}function gv(e){return e.type==="DRAGGING"?vv(e):hv(e)}function mv(e,r,t){t===void 0&&(t=Ge);var n=window.getComputedStyle(r),l=r.getBoundingClientRect(),a=no(l,n),i=Ct(a,t),o={client:a,tagName:r.tagName.toLowerCase(),display:n.display},s={x:a.marginBox.width,y:a.marginBox.height},f={descriptor:e,placeholder:o,displaceBy:s,client:a,page:i};return f}function bv(e){var r=Qn("draggable"),t=e.descriptor,n=e.registry,l=e.getDraggableRef,a=e.canDragInteractiveElements,i=e.shouldRespectForcePress,o=e.isEnabled,s=me(function(){return{canDragInteractiveElements:a,shouldRespectForcePress:i,isEnabled:o}},[a,o,i]),f=te(function(h){var v=l();return v||Z(),mv(t,v,h)},[t,l]),p=me(function(){return{uniqueId:r,descriptor:t,options:s,getDimension:f}},[t,f,s,r]),c=xe(p),d=xe(!0);Qe(function(){return n.draggable.register(c.current),function(){return n.draggable.unregister(c.current)}},[n.draggable]),Qe(function(){if(d.current){d.current=!1;return}var h=c.current;c.current=p,n.draggable.update(p,h)},[p,n.draggable])}function yv(e){e.preventDefault()}function wv(e){var r=xe(null),t=te(function(F){r.current=F},[]),n=te(function(){return r.current},[]),l=Rt(Ht),a=l.contextId,i=l.dragHandleUsageInstructionsId,o=l.registry,s=Rt(ra),f=s.type,p=s.droppableId,c=me(function(){return{id:e.draggableId,index:e.index,type:f,droppableId:p}},[e.draggableId,e.index,f,p]),d=e.children,h=e.draggableId,v=e.isEnabled,D=e.shouldRespectForcePress,S=e.canDragInteractiveElements,g=e.isClone,w=e.mapped,C=e.dropAnimationFinished;if(!g){var I=me(function(){return{descriptor:c,registry:o,getDraggableRef:n,canDragInteractiveElements:S,shouldRespectForcePress:D,isEnabled:v}},[c,o,n,S,D,v]);bv(I)}var k=me(function(){return v?{tabIndex:0,role:"button","aria-describedby":i,"data-rbd-drag-handle-draggable-id":h,"data-rbd-drag-handle-context-id":a,draggable:!1,onDragStart:yv}:null},[a,i,h,v]),R=te(function(F){w.type==="DRAGGING"&&w.dropping&&F.propertyName==="transform"&&C()},[C,w]),_=me(function(){var F=gv(w),G=w.type==="DRAGGING"&&w.dropping?R:null,O={innerRef:t,draggableProps:{"data-rbd-draggable-context-id":a,"data-rbd-draggable-id":h,style:F,onTransitionEnd:G},dragHandleProps:k};return O},[a,k,h,w,R,t]),M=me(function(){return{draggableId:c.id,type:c.type,source:{index:c.index,droppableId:c.droppableId}}},[c.droppableId,c.id,c.index,c.type]);return d(_,w.snapshot,M)}var Jo=function(e,r){return e===r},Qo=function(e){var r=e.combine,t=e.destination;return t?t.droppableId:r?r.droppableId:null},xv=function(r){return r.combine?r.combine.draggableId:null},Dv=function(r){return r.at&&r.at.type==="COMBINE"?r.at.combine.draggableId:null};function Sv(){var e=ze(function(l,a){return{x:l,y:a}}),r=ze(function(l,a,i,o,s){return{isDragging:!0,isClone:a,isDropAnimating:!!s,dropAnimation:s,mode:l,draggingOver:i,combineWith:o,combineTargetFor:null}}),t=ze(function(l,a,i,o,s,f,p){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:s,combineWith:f,mode:a,offset:l,dimension:i,forceShouldAnimate:p,snapshot:r(a,o,s,f,null)}}}),n=function(a,i){if(a.isDragging){if(a.critical.draggable.id!==i.draggableId)return null;var o=a.current.client.offset,s=a.dimensions.draggables[i.draggableId],f=Je(a.impact),p=Dv(a.impact),c=a.forceShouldAnimate;return t(e(o.x,o.y),a.movementMode,s,i.isClone,f,p,c)}if(a.phase==="DROP_ANIMATING"){var d=a.completed;if(d.result.draggableId!==i.draggableId)return null;var h=i.isClone,v=a.dimensions.draggables[i.draggableId],D=d.result,S=D.mode,g=Qo(D),w=xv(D),C=a.dropDuration,I={duration:C,curve:Vn.drop,moveTo:a.newHomeClientOffset,opacity:w?st.opacity.drop:null,scale:w?st.scale.drop:null};return{mapped:{type:"DRAGGING",offset:a.newHomeClientOffset,dimension:v,dropping:I,draggingOver:g,combineWith:w,mode:S,forceShouldAnimate:null,snapshot:r(S,h,g,w,I)}}}return null};return n}function el(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var Cv={mapped:{type:"SECONDARY",offset:Ge,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:el(null)}};function _v(){var e=ze(function(i,o){return{x:i,y:o}}),r=ze(el),t=ze(function(i,o,s){return o===void 0&&(o=null),{mapped:{type:"SECONDARY",offset:i,combineTargetFor:o,shouldAnimateDisplacement:s,snapshot:r(o)}}}),n=function(o){return o?t(Ge,o,!0):null},l=function(o,s,f,p){var c=f.displaced.visible[o],d=!!(p.inVirtualList&&p.effected[o]),h=Lt(f),v=h&&h.draggableId===o?s:null;if(!c){if(!d)return n(v);if(f.displaced.invisible[o])return null;var D=jr(p.displacedBy.point),S=e(D.x,D.y);return t(S,v,!0)}if(d)return n(v);var g=f.displacedBy.point,w=e(g.x,g.y);return t(w,v,c.shouldAnimate)},a=function(o,s){if(o.isDragging)return o.critical.draggable.id===s.draggableId?null:l(s.draggableId,o.critical.draggable.id,o.impact,o.afterCritical);if(o.phase==="DROP_ANIMATING"){var f=o.completed;return f.result.draggableId===s.draggableId?null:l(s.draggableId,f.result.draggableId,f.impact,f.afterCritical)}return null};return a}var Iv=function(){var r=Sv(),t=_v(),n=function(a,i){return r(a,i)||t(a,i)||Cv};return n},Ev={dropAnimationFinished:Po},Av=ro(Iv,Ev,null,{context:Jn,pure:!0,areStatePropsEqual:Jo})(wv);function rl(e){var r=Rt(ra),t=r.isUsingCloneFor;return t===e.draggableId&&!e.isClone?null:ye.createElement(Av,e)}function tl(e){var r=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,t=!!e.disableInteractiveElementBlocking,n=!!e.shouldRespectForcePress;return ye.createElement(rl,le({},e,{isClone:!1,isEnabled:r,canDragInteractiveElements:t,shouldRespectForcePress:n}))}function kv(e){var r=En(Ht);r||Z();var t=r.contextId,n=r.isMovementAllowed,l=xe(null),a=xe(null),i=e.children,o=e.droppableId,s=e.type,f=e.mode,p=e.direction,c=e.ignoreContainerClipping,d=e.isDropDisabled,h=e.isCombineEnabled,v=e.snapshot,D=e.useClone,S=e.updateViewportMaxScroll,g=e.getContainerForClone,w=te(function(){return l.current},[]),C=te(function(O){l.current=O},[]);te(function(){return a.current},[]);var I=te(function(O){a.current=O},[]),k=te(function(){n()&&S({maxScroll:Lo()})},[n,S]);iv({droppableId:o,type:s,mode:f,direction:p,isDropDisabled:d,isCombineEnabled:h,ignoreContainerClipping:c,getDroppableRef:w});var R=ye.createElement(uv,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(O){var W=O.onClose,T=O.data,$=O.animate;return ye.createElement(cv,{placeholder:T,onClose:W,innerRef:I,animate:$,contextId:t,onTransitionEnd:k})}),_=me(function(){return{innerRef:C,placeholder:R,droppableProps:{"data-rbd-droppable-id":o,"data-rbd-droppable-context-id":t}}},[t,o,R,C]),M=D?D.dragging.draggableId:null,F=me(function(){return{droppableId:o,type:s,isUsingCloneFor:M}},[o,M,s]);function G(){if(!D)return null;var O=D.dragging,W=D.render,T=ye.createElement(rl,{draggableId:O.draggableId,index:O.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function($,J){return W($,J,O)});return ye.createPortal(T,g())}return ye.createElement(ra.Provider,{value:F},i(_,v),G())}var en=function(r,t){return r===t.droppable.type},ei=function(r,t){return t.draggables[r.draggable.id]},Rv=function(){var r={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t=le({},r,{shouldAnimatePlaceholder:!1}),n=ze(function(i){return{draggableId:i.id,type:i.type,source:{index:i.index,droppableId:i.droppableId}}}),l=ze(function(i,o,s,f,p,c){var d=p.descriptor.id,h=p.descriptor.droppableId===i;if(h){var v=c?{render:c,dragging:n(p.descriptor)}:null,D={isDraggingOver:s,draggingOverWith:s?d:null,draggingFromThisWith:d,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!1,snapshot:D,useClone:v}}if(!o)return t;if(!f)return r;var S={isDraggingOver:s,draggingOverWith:d,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!0,snapshot:S,useClone:null}}),a=function(o,s){var f=s.droppableId,p=s.type,c=!s.isDropDisabled,d=s.renderClone;if(o.isDragging){var h=o.critical;if(!en(p,h))return t;var v=ei(h,o.dimensions),D=Je(o.impact)===f;return l(f,c,D,D,v,d)}if(o.phase==="DROP_ANIMATING"){var S=o.completed;if(!en(p,S.critical))return t;var g=ei(S.critical,o.dimensions);return l(f,c,Qo(S.result)===f,Je(S.impact)===f,g,d)}if(o.phase==="IDLE"&&o.completed&&!o.shouldFlush){var w=o.completed;if(!en(p,w.critical))return t;var C=Je(w.impact)===f,I=!!(w.impact.at&&w.impact.at.type==="COMBINE"),k=w.critical.droppable.id===f;return C?I?r:t:k?r:t}return t};return a},Tv={updateViewportMaxScroll:Gd};function Pv(){return document.body||Z(),document.body}var Bv={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Pv},ta=ro(Rv,Tv,null,{context:Jn,pure:!0,areStatePropsEqual:Jo})(kv);ta.defaultProps=Bv;const Mv=[{value:1,label:"Dot"},{value:2,label:"Ellipse"},{value:3,label:"Line"},{value:4,label:"Square"}],Nv={bloom:[{propName:"enabled",label:"Enabled",type:"boolean"},{propName:"threshold",label:"Threshold",title:"Brightness threshold to start applying effect",type:"slider",min:0,max:1,step:.05},{propName:"strength",label:"Strength",title:"Strength of the effect",type:"slider",min:0,max:2,step:.05},{propName:"radius",label:"Radius",title:"Blur radius",type:"number",step:.5}],pixel:[{propName:"enabled",label:"Enabled",type:"boolean"},{propName:"size",label:"Pixel Size",type:"number",min:1,step:1}],afterimage:[{propName:"enabled",label:"Enabled",type:"boolean"},{propName:"damp",label:"Damp",type:"slider",min:.01,max:.99,step:.01}],smaa:[{propName:"enabled",label:"Enabled",type:"boolean"}],sobel:[{propName:"enabled",label:"Enabled",type:"boolean"}],halftone:[{propName:"enabled",label:"Enabled",type:"boolean"},{propName:"greyscale",label:"Grayscale",type:"boolean"},{propName:"radius",label:"Radius",type:"number",min:1,step:.2},{propName:"scatter",label:"Scatter",type:"slider",min:0,max:5,step:.1},{propName:"shape",label:"Shape",type:"select",options:Mv}],dotscreen:[{propName:"enabled",label:"Enabled",type:"boolean"},{propName:"scale",label:"Scale",type:"number",min:1,step:.5}],bokeh:[{propName:"enabled",label:"Enabled",type:"boolean"},{propName:"focus",label:"Focus",type:"number",step:.1},{propName:"aperture",label:"Aperture",type:"number",step:.01}]};function Ov({target:e,index:r}){const[t,n]=ns(e.open??!1),{type:l}=e,{name:a}=Sl[l],i=()=>{e.open=!t,n()},s=m(hr,{title:"Remove",className:"closeButton",onClick:c=>{c.stopPropagation(),e.remove()},children:m(kn,{})}),f=Nv[l],p=c=>m("div",{className:`EffectController ${t?"open":""}`,...c.draggableProps,ref:c.innerRef,children:[m("div",{className:"EffectController-summary",onClick:i,children:[t?m(jl,{}):m(Kl,{}),m("div",{className:"EffectController-name",...c.dragHandleProps,children:a}),s]}),t&&m("div",{className:"EffectController-details",children:m(cr,{target:e.params,propList:f})})]});return m(tl,{draggableId:e.id,index:r,children:p})}const Lv={propName:"enabled",label:"Enabled",type:"boolean"};function Fv(){const[e,r]=gr(),{passes:t}=z.postProcessing;Ae(()=>{const i=t.addEventListener("change",r);return()=>t.removeEventListener("change",i)},[]);const n=i=>void z.postProcessing.addPass(i),l=i=>{const{destination:o,source:s}=i;if(!o||o.index===s.index)return;const f=[...t],p=f.splice(s.index,1)[0];f.splice(o.index,0,p),z.postProcessing.updatePasses(f)},a=i=>m("div",{ref:i.innerRef,...i.droppableProps,children:[t.map((o,s)=>m(Ov,{index:s,target:o},o.id)),i.placeholder]});return m($e,{disableGutters:!0,className:"PostProcessingControl SettingGroup",children:[m(ae,{children:[m("div",{children:"Post-Processing"}),m(Vi,{onClick:n,options:Cl,title:"Add Pass",children:m(Bt,{})})]}),m(ye.Fragment,{children:[m(cr,{target:z.postProcessing,propList:[Lv]}),t.length?m(Yo,{onDragEnd:l,children:m(ta,{droppableId:"postprocessing",children:a})}):"Click + to add pass"]},e)]})}const zv=[{propName:"near",label:"Near",type:"number",min:.01,step:.01,onChange:()=>z.camera.updateProjectionMatrix()},{propName:"far",label:"Far",type:"number",min:.01,step:20,onChange:()=>z.camera.updateProjectionMatrix()},{propName:"fov",label:"FOV",type:"slider",title:"Field of View",min:5,max:175,step:5,onChange:()=>z.camera.updateProjectionMatrix()},{propName:"position",label:"Position",type:"vector",title:"Where the camera is",step:.1,onChange:()=>z.camera.updateProjectionMatrix()}],Gv=[{propName:"target",label:"Target",type:"vector",title:"Camera target, where the camera looks at",step:.1,onChange:()=>z.controls.update()}];function Hv(){const{camera:e}=z,[r,t]=gr();return m($e,{disableGutters:!0,className:"SettingGroup DisplayControl",children:[m(ae,{children:[m("div",{className:"title",children:[m(Ms,{}),"Camera"]}),m(fe,{onClick:l=>{l.stopPropagation(),["near","far","fov"].forEach(a=>e[a]=_l[a]),e.updateProjectionMatrix(),t()},title:"Reset camera settings",variant:"contained",children:"Reset"})]}),m(ae,{children:[m(cr,{target:e,propList:zv},r),m(cr,{target:z.controls,propList:Gv})]})]})}function Wv(){const e=Be(a=>a.sidebar.modal.open),{showTimeControl:r,toggleTimeControl:t,showFrameRate:n,toggleFrameRate:l}=Be();return m(ae,{children:[m(bc,{}),m(Hv,{}),m(wc,{}),m("span",{className:"break"}),m(fe,{variant:"contained",onClick:l,startIcon:m(qs,{}),children:n?"Hide Frame Rate":"Show Frame Rate"}),m(fe,{variant:"contained",onClick:t,startIcon:r?m(Vs,{}):m($s,{}),children:r?"Hide Time Control":"Show Time Control"}),m("span",{className:"break"}),m(fe,{variant:"contained",onClick:()=>e("background"),startIcon:m(qi,{}),children:"Background Settings"}),m(Sc,{}),m(Fv,{})]})}async function qv(e,r={}){const{GLTFExporter:t}=await Tt(async()=>{const{GLTFExporter:i}=await import("./f_CfPBeZ0f-GLTFExporter.js");return{GLTFExporter:i}},__vite__mapDeps([0,1])),l=await new t().parseAsync(e,r);return r.binary?new Blob([l]):new Blob([JSON.stringify(l)],{type:"application/json"})}async function Uv({binary:e=!1}){var s;const r=_e.getState().activeModel;if(!r)return;const{model:t}=r,n=e?"glb":"gltf",l=`${((s=r.userData)==null?void 0:s.name)??r.id}.${n}`,a=r.animation.current.chainName,i=r.animation.chain[a].clips??[],o=await qv(t,{binary:e,animations:i,onlyVisible:!0});yr.saveAs(o,l)}function $v(){const e=r=>{r.stopPropagation();const t=!!r.currentTarget.dataset.binary;Uv({binary:t})};return m($e,{className:"SettingGroup",children:[m(ae,{children:[m("div",{children:"glTF"}),m(fe,{onClick:e,title:"Download current model as glTF",variant:"contained",children:m(Mr,{})})]}),m(ae,{children:m("div",{children:[m(fe,{onClick:e,title:"Download current model as glTF",children:[m(Mr,{}),"glTF"]}),m(fe,{"data-binary":!0,onClick:e,title:"Download current model as glb (binary glTF)",children:[m(Mr,{}),"glb"]})]})})]})}const Vv=()=>{const{activeModel:{animation:e}}=_e.getState(),{record:r}=z;e.stop(),e.addCountedEventListener("ChainFinished",()=>r.stop()),e.play(),r.start()},Zv=[{propName:"fileName",label:"File Name",type:"string",fullWidth:!0},{propName:"appendDate",label:"Append Date",type:"boolean"},{propName:"frameRate",label:"Frame Rate",type:"slider",min:10,max:60,step:5}];function jv(){const[e,r]=ur(z.record.state),t=o=>{var f,p;const{action:s}=o.currentTarget.dataset;(p=(f=z.record)[s])==null||p.call(f),r(s==="stop"?"idle":z.record.state)},n=m(fe,{onClick:t,"data-action":e==="idle"?"start":"resume",title:e==="idle"?"Start recording":"Resume recording",children:m(Nt,{})}),l=m(fe,{onClick:t,"data-action":"pause",title:"Pause Recording",children:m(us,{})}),a=m(fe,{onClick:t,"data-action":"stop",title:"Finish Recording",children:m(Us,{})}),i={idle:n,recording:m(ae,{children:[l,a]}),paused:m(ae,{children:[n,a]})};return m(ae,{children:[m("div",{children:`Status: ${Il(e)}`}),m("div",{children:i[e]})]})}function Kv(){const{activeModel:e}=_e(),{record:r}=z;return r?m($e,{className:"SettingGroup",children:[m(ae,{children:[m("div",{children:"Record"}),m(fe,{onClick:n=>{n.stopPropagation();const{clipDuration:l}=e.animation.current;if(l===0||l===1/0){alert("Can't record");return}Vv()},title:"Record current animation",variant:"contained",children:m(Nt,{})})]}),m(ae,{children:[m(cr,{target:r.settings,propList:Zv}),m($e,{disableGutters:!0,className:"SettingGroup-extra",children:[m(ae,{children:"Manual Record"}),m(jv,{})]})]})]}):m(ae,{})}const Yv=[{propName:"fileName",label:"File Name",type:"string",fullWidth:!0},{propName:"noBackground",label:"Remove BG",type:"boolean"},{propName:"frameRate",label:"Frame Rate",type:"number",fullWidth:!0,min:1,max:120,step:10}],Xv=e=>{const[r,t]=e.split(","),n=r.split(";")[0].split(":")[1],l=window.atob(t),a=l.length,i=new Array(a).fill().map((s,f)=>l.charCodeAt(f)),o=new Uint8Array(i);return new Blob([o],{type:n})};function Jv(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var rn={exports:{}},tn={},ri;function Ar(){return ri||(ri=1,function(e){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function t(a,i){return Object.prototype.hasOwnProperty.call(a,i)}e.assign=function(a){for(var i=Array.prototype.slice.call(arguments,1);i.length;){var o=i.shift();if(o){if(typeof o!="object")throw new TypeError(o+"must be non-object");for(var s in o)t(o,s)&&(a[s]=o[s])}}return a},e.shrinkBuf=function(a,i){return a.length===i?a:a.subarray?a.subarray(0,i):(a.length=i,a)};var n={arraySet:function(a,i,o,s,f){if(i.subarray&&a.subarray){a.set(i.subarray(o,o+s),f);return}for(var p=0;p<s;p++)a[f+p]=i[o+p]},flattenChunks:function(a){var i,o,s,f,p,c;for(s=0,i=0,o=a.length;i<o;i++)s+=a[i].length;for(c=new Uint8Array(s),f=0,i=0,o=a.length;i<o;i++)p=a[i],c.set(p,f),f+=p.length;return c}},l={arraySet:function(a,i,o,s,f){for(var p=0;p<s;p++)a[f+p]=i[o+p]},flattenChunks:function(a){return[].concat.apply([],a)}};e.setTyped=function(a){a?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,n)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,l))},e.setTyped(r)}(tn)),tn}var Hr={},lr={},Rr={},ti;function Qv(){if(ti)return Rr;ti=1;var e=Ar(),r=4,t=0,n=1,l=2;function a(x){for(var q=x.length;--q>=0;)x[q]=0}var i=0,o=1,s=2,f=3,p=258,c=29,d=256,h=d+1+c,v=30,D=19,S=2*h+1,g=15,w=16,C=7,I=256,k=16,R=17,_=18,M=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],F=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],G=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],W=512,T=new Array((h+2)*2);a(T);var $=new Array(v*2);a($);var J=new Array(W);a(J);var K=new Array(p-f+1);a(K);var j=new Array(c);a(j);var H=new Array(v);a(H);function ee(x,q,V,Q,A){this.static_tree=x,this.extra_bits=q,this.extra_base=V,this.elems=Q,this.max_length=A,this.has_stree=x&&x.length}var pe,Ie,de;function De(x,q){this.dyn_tree=x,this.max_code=0,this.stat_desc=q}function Ce(x){return x<256?J[x]:J[256+(x>>>7)]}function he(x,q){x.pending_buf[x.pending++]=q&255,x.pending_buf[x.pending++]=q>>>8&255}function ce(x,q,V){x.bi_valid>w-V?(x.bi_buf|=q<<x.bi_valid&65535,he(x,x.bi_buf),x.bi_buf=q>>w-x.bi_valid,x.bi_valid+=V-w):(x.bi_buf|=q<<x.bi_valid&65535,x.bi_valid+=V)}function be(x,q,V){ce(x,V[q*2],V[q*2+1])}function se(x,q){var V=0;do V|=x&1,x>>>=1,V<<=1;while(--q>0);return V>>>1}function ne(x){x.bi_valid===16?(he(x,x.bi_buf),x.bi_buf=0,x.bi_valid=0):x.bi_valid>=8&&(x.pending_buf[x.pending++]=x.bi_buf&255,x.bi_buf>>=8,x.bi_valid-=8)}function ke(x,q){var V=q.dyn_tree,Q=q.max_code,A=q.stat_desc.static_tree,L=q.stat_desc.has_stree,b=q.stat_desc.extra_bits,U=q.stat_desc.extra_base,oe=q.stat_desc.max_length,u,B,N,y,E,P,re=0;for(y=0;y<=g;y++)x.bl_count[y]=0;for(V[x.heap[x.heap_max]*2+1]=0,u=x.heap_max+1;u<S;u++)B=x.heap[u],y=V[V[B*2+1]*2+1]+1,y>oe&&(y=oe,re++),V[B*2+1]=y,!(B>Q)&&(x.bl_count[y]++,E=0,B>=U&&(E=b[B-U]),P=V[B*2],x.opt_len+=P*(y+E),L&&(x.static_len+=P*(A[B*2+1]+E)));if(re!==0){do{for(y=oe-1;x.bl_count[y]===0;)y--;x.bl_count[y]--,x.bl_count[y+1]+=2,x.bl_count[oe]--,re-=2}while(re>0);for(y=oe;y!==0;y--)for(B=x.bl_count[y];B!==0;)N=x.heap[--u],!(N>Q)&&(V[N*2+1]!==y&&(x.opt_len+=(y-V[N*2+1])*V[N*2],V[N*2+1]=y),B--)}}function Ne(x,q,V){var Q=new Array(g+1),A=0,L,b;for(L=1;L<=g;L++)Q[L]=A=A+V[L-1]<<1;for(b=0;b<=q;b++){var U=x[b*2+1];U!==0&&(x[b*2]=se(Q[U]++,U))}}function ie(){var x,q,V,Q,A,L=new Array(g+1);for(V=0,Q=0;Q<c-1;Q++)for(j[Q]=V,x=0;x<1<<M[Q];x++)K[V++]=Q;for(K[V-1]=Q,A=0,Q=0;Q<16;Q++)for(H[Q]=A,x=0;x<1<<F[Q];x++)J[A++]=Q;for(A>>=7;Q<v;Q++)for(H[Q]=A<<7,x=0;x<1<<F[Q]-7;x++)J[256+A++]=Q;for(q=0;q<=g;q++)L[q]=0;for(x=0;x<=143;)T[x*2+1]=8,x++,L[8]++;for(;x<=255;)T[x*2+1]=9,x++,L[9]++;for(;x<=279;)T[x*2+1]=7,x++,L[7]++;for(;x<=287;)T[x*2+1]=8,x++,L[8]++;for(Ne(T,h+1,L),x=0;x<v;x++)$[x*2+1]=5,$[x*2]=se(x,5);pe=new ee(T,M,d+1,h,g),Ie=new ee($,F,0,v,g),de=new ee(new Array(0),G,0,D,C)}function Ee(x){var q;for(q=0;q<h;q++)x.dyn_ltree[q*2]=0;for(q=0;q<v;q++)x.dyn_dtree[q*2]=0;for(q=0;q<D;q++)x.bl_tree[q*2]=0;x.dyn_ltree[I*2]=1,x.opt_len=x.static_len=0,x.last_lit=x.matches=0}function He(x){x.bi_valid>8?he(x,x.bi_buf):x.bi_valid>0&&(x.pending_buf[x.pending++]=x.bi_buf),x.bi_buf=0,x.bi_valid=0}function We(x,q,V,Q){He(x),he(x,V),he(x,~V),e.arraySet(x.pending_buf,x.window,q,V,x.pending),x.pending+=V}function Te(x,q,V,Q){var A=q*2,L=V*2;return x[A]<x[L]||x[A]===x[L]&&Q[q]<=Q[V]}function we(x,q,V){for(var Q=x.heap[V],A=V<<1;A<=x.heap_len&&(A<x.heap_len&&Te(q,x.heap[A+1],x.heap[A],x.depth)&&A++,!Te(q,Q,x.heap[A],x.depth));)x.heap[V]=x.heap[A],V=A,A<<=1;x.heap[V]=Q}function ue(x,q,V){var Q,A,L=0,b,U;if(x.last_lit!==0)do Q=x.pending_buf[x.d_buf+L*2]<<8|x.pending_buf[x.d_buf+L*2+1],A=x.pending_buf[x.l_buf+L],L++,Q===0?be(x,A,q):(b=K[A],be(x,b+d+1,q),U=M[b],U!==0&&(A-=j[b],ce(x,A,U)),Q--,b=Ce(Q),be(x,b,V),U=F[b],U!==0&&(Q-=H[b],ce(x,Q,U)));while(L<x.last_lit);be(x,I,q)}function Le(x,q){var V=q.dyn_tree,Q=q.stat_desc.static_tree,A=q.stat_desc.has_stree,L=q.stat_desc.elems,b,U,oe=-1,u;for(x.heap_len=0,x.heap_max=S,b=0;b<L;b++)V[b*2]!==0?(x.heap[++x.heap_len]=oe=b,x.depth[b]=0):V[b*2+1]=0;for(;x.heap_len<2;)u=x.heap[++x.heap_len]=oe<2?++oe:0,V[u*2]=1,x.depth[u]=0,x.opt_len--,A&&(x.static_len-=Q[u*2+1]);for(q.max_code=oe,b=x.heap_len>>1;b>=1;b--)we(x,V,b);u=L;do b=x.heap[1],x.heap[1]=x.heap[x.heap_len--],we(x,V,1),U=x.heap[1],x.heap[--x.heap_max]=b,x.heap[--x.heap_max]=U,V[u*2]=V[b*2]+V[U*2],x.depth[u]=(x.depth[b]>=x.depth[U]?x.depth[b]:x.depth[U])+1,V[b*2+1]=V[U*2+1]=u,x.heap[1]=u++,we(x,V,1);while(x.heap_len>=2);x.heap[--x.heap_max]=x.heap[1],ke(x,q),Ne(V,oe,x.bl_count)}function dr(x,q,V){var Q,A=-1,L,b=q[0*2+1],U=0,oe=7,u=4;for(b===0&&(oe=138,u=3),q[(V+1)*2+1]=65535,Q=0;Q<=V;Q++)L=b,b=q[(Q+1)*2+1],!(++U<oe&&L===b)&&(U<u?x.bl_tree[L*2]+=U:L!==0?(L!==A&&x.bl_tree[L*2]++,x.bl_tree[k*2]++):U<=10?x.bl_tree[R*2]++:x.bl_tree[_*2]++,U=0,A=L,b===0?(oe=138,u=3):L===b?(oe=6,u=3):(oe=7,u=4))}function wr(x,q,V){var Q,A=-1,L,b=q[0*2+1],U=0,oe=7,u=4;for(b===0&&(oe=138,u=3),Q=0;Q<=V;Q++)if(L=b,b=q[(Q+1)*2+1],!(++U<oe&&L===b)){if(U<u)do be(x,L,x.bl_tree);while(--U!==0);else L!==0?(L!==A&&(be(x,L,x.bl_tree),U--),be(x,k,x.bl_tree),ce(x,U-3,2)):U<=10?(be(x,R,x.bl_tree),ce(x,U-3,3)):(be(x,_,x.bl_tree),ce(x,U-11,7));U=0,A=L,b===0?(oe=138,u=3):L===b?(oe=6,u=3):(oe=7,u=4)}}function er(x){var q;for(dr(x,x.dyn_ltree,x.l_desc.max_code),dr(x,x.dyn_dtree,x.d_desc.max_code),Le(x,x.bl_desc),q=D-1;q>=3&&x.bl_tree[O[q]*2+1]===0;q--);return x.opt_len+=3*(q+1)+5+5+4,q}function Lr(x,q,V,Q){var A;for(ce(x,q-257,5),ce(x,V-1,5),ce(x,Q-4,4),A=0;A<Q;A++)ce(x,x.bl_tree[O[A]*2+1],3);wr(x,x.dyn_ltree,q-1),wr(x,x.dyn_dtree,V-1)}function xr(x){var q=4093624447,V;for(V=0;V<=31;V++,q>>>=1)if(q&1&&x.dyn_ltree[V*2]!==0)return t;if(x.dyn_ltree[9*2]!==0||x.dyn_ltree[10*2]!==0||x.dyn_ltree[13*2]!==0)return n;for(V=32;V<d;V++)if(x.dyn_ltree[V*2]!==0)return n;return t}var or=!1;function Fr(x){or||(ie(),or=!0),x.l_desc=new De(x.dyn_ltree,pe),x.d_desc=new De(x.dyn_dtree,Ie),x.bl_desc=new De(x.bl_tree,de),x.bi_buf=0,x.bi_valid=0,Ee(x)}function Dr(x,q,V,Q){ce(x,(i<<1)+(Q?1:0),3),We(x,q,V)}function Ve(x){ce(x,o<<1,3),be(x,I,T),ne(x)}function fr(x,q,V,Q){var A,L,b=0;x.level>0?(x.strm.data_type===l&&(x.strm.data_type=xr(x)),Le(x,x.l_desc),Le(x,x.d_desc),b=er(x),A=x.opt_len+3+7>>>3,L=x.static_len+3+7>>>3,L<=A&&(A=L)):A=L=V+5,V+4<=A&&q!==-1?Dr(x,q,V,Q):x.strategy===r||L===A?(ce(x,(o<<1)+(Q?1:0),3),ue(x,T,$)):(ce(x,(s<<1)+(Q?1:0),3),Lr(x,x.l_desc.max_code+1,x.d_desc.max_code+1,b+1),ue(x,x.dyn_ltree,x.dyn_dtree)),Ee(x),Q&&He(x)}function zr(x,q,V){return x.pending_buf[x.d_buf+x.last_lit*2]=q>>>8&255,x.pending_buf[x.d_buf+x.last_lit*2+1]=q&255,x.pending_buf[x.l_buf+x.last_lit]=V&255,x.last_lit++,q===0?x.dyn_ltree[V*2]++:(x.matches++,q--,x.dyn_ltree[(K[V]+d+1)*2]++,x.dyn_dtree[Ce(q)*2]++),x.last_lit===x.lit_bufsize-1}return Rr._tr_init=Fr,Rr._tr_stored_block=Dr,Rr._tr_flush_block=fr,Rr._tr_tally=zr,Rr._tr_align=Ve,Rr}var nn,ni;function nl(){if(ni)return nn;ni=1;function e(r,t,n,l){for(var a=r&65535|0,i=r>>>16&65535|0,o=0;n!==0;){o=n>2e3?2e3:n,n-=o;do a=a+t[l++]|0,i=i+a|0;while(--o);a%=65521,i%=65521}return a|i<<16|0}return nn=e,nn}var an,ai;function al(){if(ai)return an;ai=1;function e(){for(var n,l=[],a=0;a<256;a++){n=a;for(var i=0;i<8;i++)n=n&1?3988292384^n>>>1:n>>>1;l[a]=n}return l}var r=e();function t(n,l,a,i){var o=r,s=i+a;n^=-1;for(var f=i;f<s;f++)n=n>>>8^o[(n^l[f])&255];return n^-1}return an=t,an}var on,ii;function na(){return ii||(ii=1,on={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),on}var oi;function eh(){if(oi)return lr;oi=1;var e=Ar(),r=Qv(),t=nl(),n=al(),l=na(),a=0,i=1,o=3,s=4,f=5,p=0,c=1,d=-2,h=-3,v=-5,D=-1,S=1,g=2,w=3,C=4,I=0,k=2,R=8,_=9,M=15,F=8,G=29,O=256,W=O+1+G,T=30,$=19,J=2*W+1,K=15,j=3,H=258,ee=H+j+1,pe=32,Ie=42,de=69,De=73,Ce=91,he=103,ce=113,be=666,se=1,ne=2,ke=3,Ne=4,ie=3;function Ee(u,B){return u.msg=l[B],B}function He(u){return(u<<1)-(u>4?9:0)}function We(u){for(var B=u.length;--B>=0;)u[B]=0}function Te(u){var B=u.state,N=B.pending;N>u.avail_out&&(N=u.avail_out),N!==0&&(e.arraySet(u.output,B.pending_buf,B.pending_out,N,u.next_out),u.next_out+=N,B.pending_out+=N,u.total_out+=N,u.avail_out-=N,B.pending-=N,B.pending===0&&(B.pending_out=0))}function we(u,B){r._tr_flush_block(u,u.block_start>=0?u.block_start:-1,u.strstart-u.block_start,B),u.block_start=u.strstart,Te(u.strm)}function ue(u,B){u.pending_buf[u.pending++]=B}function Le(u,B){u.pending_buf[u.pending++]=B>>>8&255,u.pending_buf[u.pending++]=B&255}function dr(u,B,N,y){var E=u.avail_in;return E>y&&(E=y),E===0?0:(u.avail_in-=E,e.arraySet(B,u.input,u.next_in,E,N),u.state.wrap===1?u.adler=t(u.adler,B,E,N):u.state.wrap===2&&(u.adler=n(u.adler,B,E,N)),u.next_in+=E,u.total_in+=E,E)}function wr(u,B){var N=u.max_chain_length,y=u.strstart,E,P,re=u.prev_length,Y=u.nice_match,X=u.strstart>u.w_size-ee?u.strstart-(u.w_size-ee):0,ve=u.window,mr=u.w_mask,Re=u.prev,ge=u.strstart+H,Oe=ve[y+re-1],Ze=ve[y+re];u.prev_length>=u.good_match&&(N>>=2),Y>u.lookahead&&(Y=u.lookahead);do if(E=B,!(ve[E+re]!==Ze||ve[E+re-1]!==Oe||ve[E]!==ve[y]||ve[++E]!==ve[y+1])){y+=2,E++;do;while(ve[++y]===ve[++E]&&ve[++y]===ve[++E]&&ve[++y]===ve[++E]&&ve[++y]===ve[++E]&&ve[++y]===ve[++E]&&ve[++y]===ve[++E]&&ve[++y]===ve[++E]&&ve[++y]===ve[++E]&&y<ge);if(P=H-(ge-y),y=ge-H,P>re){if(u.match_start=B,re=P,P>=Y)break;Oe=ve[y+re-1],Ze=ve[y+re]}}while((B=Re[B&mr])>X&&--N!==0);return re<=u.lookahead?re:u.lookahead}function er(u){var B=u.w_size,N,y,E,P,re;do{if(P=u.window_size-u.lookahead-u.strstart,u.strstart>=B+(B-ee)){e.arraySet(u.window,u.window,B,B,0),u.match_start-=B,u.strstart-=B,u.block_start-=B,y=u.hash_size,N=y;do E=u.head[--N],u.head[N]=E>=B?E-B:0;while(--y);y=B,N=y;do E=u.prev[--N],u.prev[N]=E>=B?E-B:0;while(--y);P+=B}if(u.strm.avail_in===0)break;if(y=dr(u.strm,u.window,u.strstart+u.lookahead,P),u.lookahead+=y,u.lookahead+u.insert>=j)for(re=u.strstart-u.insert,u.ins_h=u.window[re],u.ins_h=(u.ins_h<<u.hash_shift^u.window[re+1])&u.hash_mask;u.insert&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[re+j-1])&u.hash_mask,u.prev[re&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=re,re++,u.insert--,!(u.lookahead+u.insert<j)););}while(u.lookahead<ee&&u.strm.avail_in!==0)}function Lr(u,B){var N=65535;for(N>u.pending_buf_size-5&&(N=u.pending_buf_size-5);;){if(u.lookahead<=1){if(er(u),u.lookahead===0&&B===a)return se;if(u.lookahead===0)break}u.strstart+=u.lookahead,u.lookahead=0;var y=u.block_start+N;if((u.strstart===0||u.strstart>=y)&&(u.lookahead=u.strstart-y,u.strstart=y,we(u,!1),u.strm.avail_out===0)||u.strstart-u.block_start>=u.w_size-ee&&(we(u,!1),u.strm.avail_out===0))return se}return u.insert=0,B===s?(we(u,!0),u.strm.avail_out===0?ke:Ne):(u.strstart>u.block_start&&(we(u,!1),u.strm.avail_out===0),se)}function xr(u,B){for(var N,y;;){if(u.lookahead<ee){if(er(u),u.lookahead<ee&&B===a)return se;if(u.lookahead===0)break}if(N=0,u.lookahead>=j&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+j-1])&u.hash_mask,N=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart),N!==0&&u.strstart-N<=u.w_size-ee&&(u.match_length=wr(u,N)),u.match_length>=j)if(y=r._tr_tally(u,u.strstart-u.match_start,u.match_length-j),u.lookahead-=u.match_length,u.match_length<=u.max_lazy_match&&u.lookahead>=j){u.match_length--;do u.strstart++,u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+j-1])&u.hash_mask,N=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart;while(--u.match_length!==0);u.strstart++}else u.strstart+=u.match_length,u.match_length=0,u.ins_h=u.window[u.strstart],u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+1])&u.hash_mask;else y=r._tr_tally(u,0,u.window[u.strstart]),u.lookahead--,u.strstart++;if(y&&(we(u,!1),u.strm.avail_out===0))return se}return u.insert=u.strstart<j-1?u.strstart:j-1,B===s?(we(u,!0),u.strm.avail_out===0?ke:Ne):u.last_lit&&(we(u,!1),u.strm.avail_out===0)?se:ne}function or(u,B){for(var N,y,E;;){if(u.lookahead<ee){if(er(u),u.lookahead<ee&&B===a)return se;if(u.lookahead===0)break}if(N=0,u.lookahead>=j&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+j-1])&u.hash_mask,N=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart),u.prev_length=u.match_length,u.prev_match=u.match_start,u.match_length=j-1,N!==0&&u.prev_length<u.max_lazy_match&&u.strstart-N<=u.w_size-ee&&(u.match_length=wr(u,N),u.match_length<=5&&(u.strategy===S||u.match_length===j&&u.strstart-u.match_start>4096)&&(u.match_length=j-1)),u.prev_length>=j&&u.match_length<=u.prev_length){E=u.strstart+u.lookahead-j,y=r._tr_tally(u,u.strstart-1-u.prev_match,u.prev_length-j),u.lookahead-=u.prev_length-1,u.prev_length-=2;do++u.strstart<=E&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+j-1])&u.hash_mask,N=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart);while(--u.prev_length!==0);if(u.match_available=0,u.match_length=j-1,u.strstart++,y&&(we(u,!1),u.strm.avail_out===0))return se}else if(u.match_available){if(y=r._tr_tally(u,0,u.window[u.strstart-1]),y&&we(u,!1),u.strstart++,u.lookahead--,u.strm.avail_out===0)return se}else u.match_available=1,u.strstart++,u.lookahead--}return u.match_available&&(y=r._tr_tally(u,0,u.window[u.strstart-1]),u.match_available=0),u.insert=u.strstart<j-1?u.strstart:j-1,B===s?(we(u,!0),u.strm.avail_out===0?ke:Ne):u.last_lit&&(we(u,!1),u.strm.avail_out===0)?se:ne}function Fr(u,B){for(var N,y,E,P,re=u.window;;){if(u.lookahead<=H){if(er(u),u.lookahead<=H&&B===a)return se;if(u.lookahead===0)break}if(u.match_length=0,u.lookahead>=j&&u.strstart>0&&(E=u.strstart-1,y=re[E],y===re[++E]&&y===re[++E]&&y===re[++E])){P=u.strstart+H;do;while(y===re[++E]&&y===re[++E]&&y===re[++E]&&y===re[++E]&&y===re[++E]&&y===re[++E]&&y===re[++E]&&y===re[++E]&&E<P);u.match_length=H-(P-E),u.match_length>u.lookahead&&(u.match_length=u.lookahead)}if(u.match_length>=j?(N=r._tr_tally(u,1,u.match_length-j),u.lookahead-=u.match_length,u.strstart+=u.match_length,u.match_length=0):(N=r._tr_tally(u,0,u.window[u.strstart]),u.lookahead--,u.strstart++),N&&(we(u,!1),u.strm.avail_out===0))return se}return u.insert=0,B===s?(we(u,!0),u.strm.avail_out===0?ke:Ne):u.last_lit&&(we(u,!1),u.strm.avail_out===0)?se:ne}function Dr(u,B){for(var N;;){if(u.lookahead===0&&(er(u),u.lookahead===0)){if(B===a)return se;break}if(u.match_length=0,N=r._tr_tally(u,0,u.window[u.strstart]),u.lookahead--,u.strstart++,N&&(we(u,!1),u.strm.avail_out===0))return se}return u.insert=0,B===s?(we(u,!0),u.strm.avail_out===0?ke:Ne):u.last_lit&&(we(u,!1),u.strm.avail_out===0)?se:ne}function Ve(u,B,N,y,E){this.good_length=u,this.max_lazy=B,this.nice_length=N,this.max_chain=y,this.func=E}var fr;fr=[new Ve(0,0,0,0,Lr),new Ve(4,4,8,4,xr),new Ve(4,5,16,8,xr),new Ve(4,6,32,32,xr),new Ve(4,4,16,16,or),new Ve(8,16,32,32,or),new Ve(8,16,128,128,or),new Ve(8,32,128,256,or),new Ve(32,128,258,1024,or),new Ve(32,258,258,4096,or)];function zr(u){u.window_size=2*u.w_size,We(u.head),u.max_lazy_match=fr[u.level].max_lazy,u.good_match=fr[u.level].good_length,u.nice_match=fr[u.level].nice_length,u.max_chain_length=fr[u.level].max_chain,u.strstart=0,u.block_start=0,u.lookahead=0,u.insert=0,u.match_length=u.prev_length=j-1,u.match_available=0,u.ins_h=0}function x(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=R,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new e.Buf16(J*2),this.dyn_dtree=new e.Buf16((2*T+1)*2),this.bl_tree=new e.Buf16((2*$+1)*2),We(this.dyn_ltree),We(this.dyn_dtree),We(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new e.Buf16(K+1),this.heap=new e.Buf16(2*W+1),We(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new e.Buf16(2*W+1),We(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function q(u){var B;return!u||!u.state?Ee(u,d):(u.total_in=u.total_out=0,u.data_type=k,B=u.state,B.pending=0,B.pending_out=0,B.wrap<0&&(B.wrap=-B.wrap),B.status=B.wrap?Ie:ce,u.adler=B.wrap===2?0:1,B.last_flush=a,r._tr_init(B),p)}function V(u){var B=q(u);return B===p&&zr(u.state),B}function Q(u,B){return!u||!u.state||u.state.wrap!==2?d:(u.state.gzhead=B,p)}function A(u,B,N,y,E,P){if(!u)return d;var re=1;if(B===D&&(B=6),y<0?(re=0,y=-y):y>15&&(re=2,y-=16),E<1||E>_||N!==R||y<8||y>15||B<0||B>9||P<0||P>C)return Ee(u,d);y===8&&(y=9);var Y=new x;return u.state=Y,Y.strm=u,Y.wrap=re,Y.gzhead=null,Y.w_bits=y,Y.w_size=1<<Y.w_bits,Y.w_mask=Y.w_size-1,Y.hash_bits=E+7,Y.hash_size=1<<Y.hash_bits,Y.hash_mask=Y.hash_size-1,Y.hash_shift=~~((Y.hash_bits+j-1)/j),Y.window=new e.Buf8(Y.w_size*2),Y.head=new e.Buf16(Y.hash_size),Y.prev=new e.Buf16(Y.w_size),Y.lit_bufsize=1<<E+6,Y.pending_buf_size=Y.lit_bufsize*4,Y.pending_buf=new e.Buf8(Y.pending_buf_size),Y.d_buf=1*Y.lit_bufsize,Y.l_buf=3*Y.lit_bufsize,Y.level=B,Y.strategy=P,Y.method=N,V(u)}function L(u,B){return A(u,B,R,M,F,I)}function b(u,B){var N,y,E,P;if(!u||!u.state||B>f||B<0)return u?Ee(u,d):d;if(y=u.state,!u.output||!u.input&&u.avail_in!==0||y.status===be&&B!==s)return Ee(u,u.avail_out===0?v:d);if(y.strm=u,N=y.last_flush,y.last_flush=B,y.status===Ie)if(y.wrap===2)u.adler=0,ue(y,31),ue(y,139),ue(y,8),y.gzhead?(ue(y,(y.gzhead.text?1:0)+(y.gzhead.hcrc?2:0)+(y.gzhead.extra?4:0)+(y.gzhead.name?8:0)+(y.gzhead.comment?16:0)),ue(y,y.gzhead.time&255),ue(y,y.gzhead.time>>8&255),ue(y,y.gzhead.time>>16&255),ue(y,y.gzhead.time>>24&255),ue(y,y.level===9?2:y.strategy>=g||y.level<2?4:0),ue(y,y.gzhead.os&255),y.gzhead.extra&&y.gzhead.extra.length&&(ue(y,y.gzhead.extra.length&255),ue(y,y.gzhead.extra.length>>8&255)),y.gzhead.hcrc&&(u.adler=n(u.adler,y.pending_buf,y.pending,0)),y.gzindex=0,y.status=de):(ue(y,0),ue(y,0),ue(y,0),ue(y,0),ue(y,0),ue(y,y.level===9?2:y.strategy>=g||y.level<2?4:0),ue(y,ie),y.status=ce);else{var re=R+(y.w_bits-8<<4)<<8,Y=-1;y.strategy>=g||y.level<2?Y=0:y.level<6?Y=1:y.level===6?Y=2:Y=3,re|=Y<<6,y.strstart!==0&&(re|=pe),re+=31-re%31,y.status=ce,Le(y,re),y.strstart!==0&&(Le(y,u.adler>>>16),Le(y,u.adler&65535)),u.adler=1}if(y.status===de)if(y.gzhead.extra){for(E=y.pending;y.gzindex<(y.gzhead.extra.length&65535)&&!(y.pending===y.pending_buf_size&&(y.gzhead.hcrc&&y.pending>E&&(u.adler=n(u.adler,y.pending_buf,y.pending-E,E)),Te(u),E=y.pending,y.pending===y.pending_buf_size));)ue(y,y.gzhead.extra[y.gzindex]&255),y.gzindex++;y.gzhead.hcrc&&y.pending>E&&(u.adler=n(u.adler,y.pending_buf,y.pending-E,E)),y.gzindex===y.gzhead.extra.length&&(y.gzindex=0,y.status=De)}else y.status=De;if(y.status===De)if(y.gzhead.name){E=y.pending;do{if(y.pending===y.pending_buf_size&&(y.gzhead.hcrc&&y.pending>E&&(u.adler=n(u.adler,y.pending_buf,y.pending-E,E)),Te(u),E=y.pending,y.pending===y.pending_buf_size)){P=1;break}y.gzindex<y.gzhead.name.length?P=y.gzhead.name.charCodeAt(y.gzindex++)&255:P=0,ue(y,P)}while(P!==0);y.gzhead.hcrc&&y.pending>E&&(u.adler=n(u.adler,y.pending_buf,y.pending-E,E)),P===0&&(y.gzindex=0,y.status=Ce)}else y.status=Ce;if(y.status===Ce)if(y.gzhead.comment){E=y.pending;do{if(y.pending===y.pending_buf_size&&(y.gzhead.hcrc&&y.pending>E&&(u.adler=n(u.adler,y.pending_buf,y.pending-E,E)),Te(u),E=y.pending,y.pending===y.pending_buf_size)){P=1;break}y.gzindex<y.gzhead.comment.length?P=y.gzhead.comment.charCodeAt(y.gzindex++)&255:P=0,ue(y,P)}while(P!==0);y.gzhead.hcrc&&y.pending>E&&(u.adler=n(u.adler,y.pending_buf,y.pending-E,E)),P===0&&(y.status=he)}else y.status=he;if(y.status===he&&(y.gzhead.hcrc?(y.pending+2>y.pending_buf_size&&Te(u),y.pending+2<=y.pending_buf_size&&(ue(y,u.adler&255),ue(y,u.adler>>8&255),u.adler=0,y.status=ce)):y.status=ce),y.pending!==0){if(Te(u),u.avail_out===0)return y.last_flush=-1,p}else if(u.avail_in===0&&He(B)<=He(N)&&B!==s)return Ee(u,v);if(y.status===be&&u.avail_in!==0)return Ee(u,v);if(u.avail_in!==0||y.lookahead!==0||B!==a&&y.status!==be){var X=y.strategy===g?Dr(y,B):y.strategy===w?Fr(y,B):fr[y.level].func(y,B);if((X===ke||X===Ne)&&(y.status=be),X===se||X===ke)return u.avail_out===0&&(y.last_flush=-1),p;if(X===ne&&(B===i?r._tr_align(y):B!==f&&(r._tr_stored_block(y,0,0,!1),B===o&&(We(y.head),y.lookahead===0&&(y.strstart=0,y.block_start=0,y.insert=0))),Te(u),u.avail_out===0))return y.last_flush=-1,p}return B!==s?p:y.wrap<=0?c:(y.wrap===2?(ue(y,u.adler&255),ue(y,u.adler>>8&255),ue(y,u.adler>>16&255),ue(y,u.adler>>24&255),ue(y,u.total_in&255),ue(y,u.total_in>>8&255),ue(y,u.total_in>>16&255),ue(y,u.total_in>>24&255)):(Le(y,u.adler>>>16),Le(y,u.adler&65535)),Te(u),y.wrap>0&&(y.wrap=-y.wrap),y.pending!==0?p:c)}function U(u){var B;return!u||!u.state?d:(B=u.state.status,B!==Ie&&B!==de&&B!==De&&B!==Ce&&B!==he&&B!==ce&&B!==be?Ee(u,d):(u.state=null,B===ce?Ee(u,h):p))}function oe(u,B){var N=B.length,y,E,P,re,Y,X,ve,mr;if(!u||!u.state||(y=u.state,re=y.wrap,re===2||re===1&&y.status!==Ie||y.lookahead))return d;for(re===1&&(u.adler=t(u.adler,B,N,0)),y.wrap=0,N>=y.w_size&&(re===0&&(We(y.head),y.strstart=0,y.block_start=0,y.insert=0),mr=new e.Buf8(y.w_size),e.arraySet(mr,B,N-y.w_size,y.w_size,0),B=mr,N=y.w_size),Y=u.avail_in,X=u.next_in,ve=u.input,u.avail_in=N,u.next_in=0,u.input=B,er(y);y.lookahead>=j;){E=y.strstart,P=y.lookahead-(j-1);do y.ins_h=(y.ins_h<<y.hash_shift^y.window[E+j-1])&y.hash_mask,y.prev[E&y.w_mask]=y.head[y.ins_h],y.head[y.ins_h]=E,E++;while(--P);y.strstart=E,y.lookahead=j-1,er(y)}return y.strstart+=y.lookahead,y.block_start=y.strstart,y.insert=y.lookahead,y.lookahead=0,y.match_length=y.prev_length=j-1,y.match_available=0,u.next_in=X,u.input=ve,u.avail_in=Y,y.wrap=re,p}return lr.deflateInit=L,lr.deflateInit2=A,lr.deflateReset=V,lr.deflateResetKeep=q,lr.deflateSetHeader=Q,lr.deflate=b,lr.deflateEnd=U,lr.deflateSetDictionary=oe,lr.deflateInfo="pako deflate (from Nodeca project)",lr}var Tr={},li;function il(){if(li)return Tr;li=1;var e=Ar(),r=!0,t=!0;try{String.fromCharCode.apply(null,[0])}catch{r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{t=!1}for(var n=new e.Buf8(256),l=0;l<256;l++)n[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;n[254]=n[254]=1,Tr.string2buf=function(i){var o,s,f,p,c,d=i.length,h=0;for(p=0;p<d;p++)s=i.charCodeAt(p),(s&64512)===55296&&p+1<d&&(f=i.charCodeAt(p+1),(f&64512)===56320&&(s=65536+(s-55296<<10)+(f-56320),p++)),h+=s<128?1:s<2048?2:s<65536?3:4;for(o=new e.Buf8(h),c=0,p=0;c<h;p++)s=i.charCodeAt(p),(s&64512)===55296&&p+1<d&&(f=i.charCodeAt(p+1),(f&64512)===56320&&(s=65536+(s-55296<<10)+(f-56320),p++)),s<128?o[c++]=s:s<2048?(o[c++]=192|s>>>6,o[c++]=128|s&63):s<65536?(o[c++]=224|s>>>12,o[c++]=128|s>>>6&63,o[c++]=128|s&63):(o[c++]=240|s>>>18,o[c++]=128|s>>>12&63,o[c++]=128|s>>>6&63,o[c++]=128|s&63);return o};function a(i,o){if(o<65534&&(i.subarray&&t||!i.subarray&&r))return String.fromCharCode.apply(null,e.shrinkBuf(i,o));for(var s="",f=0;f<o;f++)s+=String.fromCharCode(i[f]);return s}return Tr.buf2binstring=function(i){return a(i,i.length)},Tr.binstring2buf=function(i){for(var o=new e.Buf8(i.length),s=0,f=o.length;s<f;s++)o[s]=i.charCodeAt(s);return o},Tr.buf2string=function(i,o){var s,f,p,c,d=o||i.length,h=new Array(d*2);for(f=0,s=0;s<d;){if(p=i[s++],p<128){h[f++]=p;continue}if(c=n[p],c>4){h[f++]=65533,s+=c-1;continue}for(p&=c===2?31:c===3?15:7;c>1&&s<d;)p=p<<6|i[s++]&63,c--;if(c>1){h[f++]=65533;continue}p<65536?h[f++]=p:(p-=65536,h[f++]=55296|p>>10&1023,h[f++]=56320|p&1023)}return a(h,f)},Tr.utf8border=function(i,o){var s;for(o=o||i.length,o>i.length&&(o=i.length),s=o-1;s>=0&&(i[s]&192)===128;)s--;return s<0||s===0?o:s+n[i[s]]>o?s:o},Tr}var ln,si;function ol(){if(si)return ln;si=1;function e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return ln=e,ln}var ci;function rh(){if(ci)return Hr;ci=1;var e=eh(),r=Ar(),t=il(),n=na(),l=ol(),a=Object.prototype.toString,i=0,o=4,s=0,f=1,p=2,c=-1,d=0,h=8;function v(w){if(!(this instanceof v))return new v(w);this.options=r.assign({level:c,method:h,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},w||{});var C=this.options;C.raw&&C.windowBits>0?C.windowBits=-C.windowBits:C.gzip&&C.windowBits>0&&C.windowBits<16&&(C.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var I=e.deflateInit2(this.strm,C.level,C.method,C.windowBits,C.memLevel,C.strategy);if(I!==s)throw new Error(n[I]);if(C.header&&e.deflateSetHeader(this.strm,C.header),C.dictionary){var k;if(typeof C.dictionary=="string"?k=t.string2buf(C.dictionary):a.call(C.dictionary)==="[object ArrayBuffer]"?k=new Uint8Array(C.dictionary):k=C.dictionary,I=e.deflateSetDictionary(this.strm,k),I!==s)throw new Error(n[I]);this._dict_set=!0}}v.prototype.push=function(w,C){var I=this.strm,k=this.options.chunkSize,R,_;if(this.ended)return!1;_=C===~~C?C:C===!0?o:i,typeof w=="string"?I.input=t.string2buf(w):a.call(w)==="[object ArrayBuffer]"?I.input=new Uint8Array(w):I.input=w,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new r.Buf8(k),I.next_out=0,I.avail_out=k),R=e.deflate(I,_),R!==f&&R!==s)return this.onEnd(R),this.ended=!0,!1;(I.avail_out===0||I.avail_in===0&&(_===o||_===p))&&(this.options.to==="string"?this.onData(t.buf2binstring(r.shrinkBuf(I.output,I.next_out))):this.onData(r.shrinkBuf(I.output,I.next_out)))}while((I.avail_in>0||I.avail_out===0)&&R!==f);return _===o?(R=e.deflateEnd(this.strm),this.onEnd(R),this.ended=!0,R===s):(_===p&&(this.onEnd(s),I.avail_out=0),!0)},v.prototype.onData=function(w){this.chunks.push(w)},v.prototype.onEnd=function(w){w===s&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg};function D(w,C){var I=new v(C);if(I.push(w,!0),I.err)throw I.msg||n[I.err];return I.result}function S(w,C){return C=C||{},C.raw=!0,D(w,C)}function g(w,C){return C=C||{},C.gzip=!0,D(w,C)}return Hr.Deflate=v,Hr.deflate=D,Hr.deflateRaw=S,Hr.gzip=g,Hr}var Wr={},nr={},sn,ui;function th(){if(ui)return sn;ui=1;var e=30,r=12;return sn=function(n,l){var a,i,o,s,f,p,c,d,h,v,D,S,g,w,C,I,k,R,_,M,F,G,O,W,T;a=n.state,i=n.next_in,W=n.input,o=i+(n.avail_in-5),s=n.next_out,T=n.output,f=s-(l-n.avail_out),p=s+(n.avail_out-257),c=a.dmax,d=a.wsize,h=a.whave,v=a.wnext,D=a.window,S=a.hold,g=a.bits,w=a.lencode,C=a.distcode,I=(1<<a.lenbits)-1,k=(1<<a.distbits)-1;e:do{g<15&&(S+=W[i++]<<g,g+=8,S+=W[i++]<<g,g+=8),R=w[S&I];r:for(;;){if(_=R>>>24,S>>>=_,g-=_,_=R>>>16&255,_===0)T[s++]=R&65535;else if(_&16){M=R&65535,_&=15,_&&(g<_&&(S+=W[i++]<<g,g+=8),M+=S&(1<<_)-1,S>>>=_,g-=_),g<15&&(S+=W[i++]<<g,g+=8,S+=W[i++]<<g,g+=8),R=C[S&k];t:for(;;){if(_=R>>>24,S>>>=_,g-=_,_=R>>>16&255,_&16){if(F=R&65535,_&=15,g<_&&(S+=W[i++]<<g,g+=8,g<_&&(S+=W[i++]<<g,g+=8)),F+=S&(1<<_)-1,F>c){n.msg="invalid distance too far back",a.mode=e;break e}if(S>>>=_,g-=_,_=s-f,F>_){if(_=F-_,_>h&&a.sane){n.msg="invalid distance too far back",a.mode=e;break e}if(G=0,O=D,v===0){if(G+=d-_,_<M){M-=_;do T[s++]=D[G++];while(--_);G=s-F,O=T}}else if(v<_){if(G+=d+v-_,_-=v,_<M){M-=_;do T[s++]=D[G++];while(--_);if(G=0,v<M){_=v,M-=_;do T[s++]=D[G++];while(--_);G=s-F,O=T}}}else if(G+=v-_,_<M){M-=_;do T[s++]=D[G++];while(--_);G=s-F,O=T}for(;M>2;)T[s++]=O[G++],T[s++]=O[G++],T[s++]=O[G++],M-=3;M&&(T[s++]=O[G++],M>1&&(T[s++]=O[G++]))}else{G=s-F;do T[s++]=T[G++],T[s++]=T[G++],T[s++]=T[G++],M-=3;while(M>2);M&&(T[s++]=T[G++],M>1&&(T[s++]=T[G++]))}}else if((_&64)===0){R=C[(R&65535)+(S&(1<<_)-1)];continue t}else{n.msg="invalid distance code",a.mode=e;break e}break}}else if((_&64)===0){R=w[(R&65535)+(S&(1<<_)-1)];continue r}else if(_&32){a.mode=r;break e}else{n.msg="invalid literal/length code",a.mode=e;break e}break}}while(i<o&&s<p);M=g>>3,i-=M,g-=M<<3,S&=(1<<g)-1,n.next_in=i,n.next_out=s,n.avail_in=i<o?5+(o-i):5-(i-o),n.avail_out=s<p?257+(p-s):257-(s-p),a.hold=S,a.bits=g},sn}var cn,di;function nh(){if(di)return cn;di=1;var e=Ar(),r=15,t=852,n=592,l=0,a=1,i=2,o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return cn=function(d,h,v,D,S,g,w,C){var I=C.bits,k=0,R=0,_=0,M=0,F=0,G=0,O=0,W=0,T=0,$=0,J,K,j,H,ee,pe=null,Ie=0,de,De=new e.Buf16(r+1),Ce=new e.Buf16(r+1),he=null,ce=0,be,se,ne;for(k=0;k<=r;k++)De[k]=0;for(R=0;R<D;R++)De[h[v+R]]++;for(F=I,M=r;M>=1&&De[M]===0;M--);if(F>M&&(F=M),M===0)return S[g++]=1<<24|64<<16|0,S[g++]=1<<24|64<<16|0,C.bits=1,0;for(_=1;_<M&&De[_]===0;_++);for(F<_&&(F=_),W=1,k=1;k<=r;k++)if(W<<=1,W-=De[k],W<0)return-1;if(W>0&&(d===l||M!==1))return-1;for(Ce[1]=0,k=1;k<r;k++)Ce[k+1]=Ce[k]+De[k];for(R=0;R<D;R++)h[v+R]!==0&&(w[Ce[h[v+R]]++]=R);if(d===l?(pe=he=w,de=19):d===a?(pe=o,Ie-=257,he=s,ce-=257,de=256):(pe=f,he=p,de=-1),$=0,R=0,k=_,ee=g,G=F,O=0,j=-1,T=1<<F,H=T-1,d===a&&T>t||d===i&&T>n)return 1;for(;;){be=k-O,w[R]<de?(se=0,ne=w[R]):w[R]>de?(se=he[ce+w[R]],ne=pe[Ie+w[R]]):(se=96,ne=0),J=1<<k-O,K=1<<G,_=K;do K-=J,S[ee+($>>O)+K]=be<<24|se<<16|ne|0;while(K!==0);for(J=1<<k-1;$&J;)J>>=1;if(J!==0?($&=J-1,$+=J):$=0,R++,--De[k]===0){if(k===M)break;k=h[v+w[R]]}if(k>F&&($&H)!==j){for(O===0&&(O=F),ee+=_,G=k-O,W=1<<G;G+O<M&&(W-=De[G+O],!(W<=0));)G++,W<<=1;if(T+=1<<G,d===a&&T>t||d===i&&T>n)return 1;j=$&H,S[j]=F<<24|G<<16|ee-g|0}}return $!==0&&(S[ee+$]=k-O<<24|64<<16|0),C.bits=F,0},cn}var fi;function ah(){if(fi)return nr;fi=1;var e=Ar(),r=nl(),t=al(),n=th(),l=nh(),a=0,i=1,o=2,s=4,f=5,p=6,c=0,d=1,h=2,v=-2,D=-3,S=-4,g=-5,w=8,C=1,I=2,k=3,R=4,_=5,M=6,F=7,G=8,O=9,W=10,T=11,$=12,J=13,K=14,j=15,H=16,ee=17,pe=18,Ie=19,de=20,De=21,Ce=22,he=23,ce=24,be=25,se=26,ne=27,ke=28,Ne=29,ie=30,Ee=31,He=32,We=852,Te=592,we=15,ue=we;function Le(A){return(A>>>24&255)+(A>>>8&65280)+((A&65280)<<8)+((A&255)<<24)}function dr(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function wr(A){var L;return!A||!A.state?v:(L=A.state,A.total_in=A.total_out=L.total=0,A.msg="",L.wrap&&(A.adler=L.wrap&1),L.mode=C,L.last=0,L.havedict=0,L.dmax=32768,L.head=null,L.hold=0,L.bits=0,L.lencode=L.lendyn=new e.Buf32(We),L.distcode=L.distdyn=new e.Buf32(Te),L.sane=1,L.back=-1,c)}function er(A){var L;return!A||!A.state?v:(L=A.state,L.wsize=0,L.whave=0,L.wnext=0,wr(A))}function Lr(A,L){var b,U;return!A||!A.state||(U=A.state,L<0?(b=0,L=-L):(b=(L>>4)+1,L<48&&(L&=15)),L&&(L<8||L>15))?v:(U.window!==null&&U.wbits!==L&&(U.window=null),U.wrap=b,U.wbits=L,er(A))}function xr(A,L){var b,U;return A?(U=new dr,A.state=U,U.window=null,b=Lr(A,L),b!==c&&(A.state=null),b):v}function or(A){return xr(A,ue)}var Fr=!0,Dr,Ve;function fr(A){if(Fr){var L;for(Dr=new e.Buf32(512),Ve=new e.Buf32(32),L=0;L<144;)A.lens[L++]=8;for(;L<256;)A.lens[L++]=9;for(;L<280;)A.lens[L++]=7;for(;L<288;)A.lens[L++]=8;for(l(i,A.lens,0,288,Dr,0,A.work,{bits:9}),L=0;L<32;)A.lens[L++]=5;l(o,A.lens,0,32,Ve,0,A.work,{bits:5}),Fr=!1}A.lencode=Dr,A.lenbits=9,A.distcode=Ve,A.distbits=5}function zr(A,L,b,U){var oe,u=A.state;return u.window===null&&(u.wsize=1<<u.wbits,u.wnext=0,u.whave=0,u.window=new e.Buf8(u.wsize)),U>=u.wsize?(e.arraySet(u.window,L,b-u.wsize,u.wsize,0),u.wnext=0,u.whave=u.wsize):(oe=u.wsize-u.wnext,oe>U&&(oe=U),e.arraySet(u.window,L,b-U,oe,u.wnext),U-=oe,U?(e.arraySet(u.window,L,b-U,U,0),u.wnext=U,u.whave=u.wsize):(u.wnext+=oe,u.wnext===u.wsize&&(u.wnext=0),u.whave<u.wsize&&(u.whave+=oe))),0}function x(A,L){var b,U,oe,u,B,N,y,E,P,re,Y,X,ve,mr,Re=0,ge,Oe,Ze,Ke,dt,ft,Pe,rr,qe=new e.Buf8(4),br,pr,ia=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!A||!A.state||!A.output||!A.input&&A.avail_in!==0)return v;b=A.state,b.mode===$&&(b.mode=J),B=A.next_out,oe=A.output,y=A.avail_out,u=A.next_in,U=A.input,N=A.avail_in,E=b.hold,P=b.bits,re=N,Y=y,rr=c;e:for(;;)switch(b.mode){case C:if(b.wrap===0){b.mode=J;break}for(;P<16;){if(N===0)break e;N--,E+=U[u++]<<P,P+=8}if(b.wrap&2&&E===35615){b.check=0,qe[0]=E&255,qe[1]=E>>>8&255,b.check=t(b.check,qe,2,0),E=0,P=0,b.mode=I;break}if(b.flags=0,b.head&&(b.head.done=!1),!(b.wrap&1)||(((E&255)<<8)+(E>>8))%31){A.msg="incorrect header check",b.mode=ie;break}if((E&15)!==w){A.msg="unknown compression method",b.mode=ie;break}if(E>>>=4,P-=4,Pe=(E&15)+8,b.wbits===0)b.wbits=Pe;else if(Pe>b.wbits){A.msg="invalid window size",b.mode=ie;break}b.dmax=1<<Pe,A.adler=b.check=1,b.mode=E&512?W:$,E=0,P=0;break;case I:for(;P<16;){if(N===0)break e;N--,E+=U[u++]<<P,P+=8}if(b.flags=E,(b.flags&255)!==w){A.msg="unknown compression method",b.mode=ie;break}if(b.flags&57344){A.msg="unknown header flags set",b.mode=ie;break}b.head&&(b.head.text=E>>8&1),b.flags&512&&(qe[0]=E&255,qe[1]=E>>>8&255,b.check=t(b.check,qe,2,0)),E=0,P=0,b.mode=k;case k:for(;P<32;){if(N===0)break e;N--,E+=U[u++]<<P,P+=8}b.head&&(b.head.time=E),b.flags&512&&(qe[0]=E&255,qe[1]=E>>>8&255,qe[2]=E>>>16&255,qe[3]=E>>>24&255,b.check=t(b.check,qe,4,0)),E=0,P=0,b.mode=R;case R:for(;P<16;){if(N===0)break e;N--,E+=U[u++]<<P,P+=8}b.head&&(b.head.xflags=E&255,b.head.os=E>>8),b.flags&512&&(qe[0]=E&255,qe[1]=E>>>8&255,b.check=t(b.check,qe,2,0)),E=0,P=0,b.mode=_;case _:if(b.flags&1024){for(;P<16;){if(N===0)break e;N--,E+=U[u++]<<P,P+=8}b.length=E,b.head&&(b.head.extra_len=E),b.flags&512&&(qe[0]=E&255,qe[1]=E>>>8&255,b.check=t(b.check,qe,2,0)),E=0,P=0}else b.head&&(b.head.extra=null);b.mode=M;case M:if(b.flags&1024&&(X=b.length,X>N&&(X=N),X&&(b.head&&(Pe=b.head.extra_len-b.length,b.head.extra||(b.head.extra=new Array(b.head.extra_len)),e.arraySet(b.head.extra,U,u,X,Pe)),b.flags&512&&(b.check=t(b.check,U,X,u)),N-=X,u+=X,b.length-=X),b.length))break e;b.length=0,b.mode=F;case F:if(b.flags&2048){if(N===0)break e;X=0;do Pe=U[u+X++],b.head&&Pe&&b.length<65536&&(b.head.name+=String.fromCharCode(Pe));while(Pe&&X<N);if(b.flags&512&&(b.check=t(b.check,U,X,u)),N-=X,u+=X,Pe)break e}else b.head&&(b.head.name=null);b.length=0,b.mode=G;case G:if(b.flags&4096){if(N===0)break e;X=0;do Pe=U[u+X++],b.head&&Pe&&b.length<65536&&(b.head.comment+=String.fromCharCode(Pe));while(Pe&&X<N);if(b.flags&512&&(b.check=t(b.check,U,X,u)),N-=X,u+=X,Pe)break e}else b.head&&(b.head.comment=null);b.mode=O;case O:if(b.flags&512){for(;P<16;){if(N===0)break e;N--,E+=U[u++]<<P,P+=8}if(E!==(b.check&65535)){A.msg="header crc mismatch",b.mode=ie;break}E=0,P=0}b.head&&(b.head.hcrc=b.flags>>9&1,b.head.done=!0),A.adler=b.check=0,b.mode=$;break;case W:for(;P<32;){if(N===0)break e;N--,E+=U[u++]<<P,P+=8}A.adler=b.check=Le(E),E=0,P=0,b.mode=T;case T:if(b.havedict===0)return A.next_out=B,A.avail_out=y,A.next_in=u,A.avail_in=N,b.hold=E,b.bits=P,h;A.adler=b.check=1,b.mode=$;case $:if(L===f||L===p)break e;case J:if(b.last){E>>>=P&7,P-=P&7,b.mode=ne;break}for(;P<3;){if(N===0)break e;N--,E+=U[u++]<<P,P+=8}switch(b.last=E&1,E>>>=1,P-=1,E&3){case 0:b.mode=K;break;case 1:if(fr(b),b.mode=de,L===p){E>>>=2,P-=2;break e}break;case 2:b.mode=ee;break;case 3:A.msg="invalid block type",b.mode=ie}E>>>=2,P-=2;break;case K:for(E>>>=P&7,P-=P&7;P<32;){if(N===0)break e;N--,E+=U[u++]<<P,P+=8}if((E&65535)!==(E>>>16^65535)){A.msg="invalid stored block lengths",b.mode=ie;break}if(b.length=E&65535,E=0,P=0,b.mode=j,L===p)break e;case j:b.mode=H;case H:if(X=b.length,X){if(X>N&&(X=N),X>y&&(X=y),X===0)break e;e.arraySet(oe,U,u,X,B),N-=X,u+=X,y-=X,B+=X,b.length-=X;break}b.mode=$;break;case ee:for(;P<14;){if(N===0)break e;N--,E+=U[u++]<<P,P+=8}if(b.nlen=(E&31)+257,E>>>=5,P-=5,b.ndist=(E&31)+1,E>>>=5,P-=5,b.ncode=(E&15)+4,E>>>=4,P-=4,b.nlen>286||b.ndist>30){A.msg="too many length or distance symbols",b.mode=ie;break}b.have=0,b.mode=pe;case pe:for(;b.have<b.ncode;){for(;P<3;){if(N===0)break e;N--,E+=U[u++]<<P,P+=8}b.lens[ia[b.have++]]=E&7,E>>>=3,P-=3}for(;b.have<19;)b.lens[ia[b.have++]]=0;if(b.lencode=b.lendyn,b.lenbits=7,br={bits:b.lenbits},rr=l(a,b.lens,0,19,b.lencode,0,b.work,br),b.lenbits=br.bits,rr){A.msg="invalid code lengths set",b.mode=ie;break}b.have=0,b.mode=Ie;case Ie:for(;b.have<b.nlen+b.ndist;){for(;Re=b.lencode[E&(1<<b.lenbits)-1],ge=Re>>>24,Oe=Re>>>16&255,Ze=Re&65535,!(ge<=P);){if(N===0)break e;N--,E+=U[u++]<<P,P+=8}if(Ze<16)E>>>=ge,P-=ge,b.lens[b.have++]=Ze;else{if(Ze===16){for(pr=ge+2;P<pr;){if(N===0)break e;N--,E+=U[u++]<<P,P+=8}if(E>>>=ge,P-=ge,b.have===0){A.msg="invalid bit length repeat",b.mode=ie;break}Pe=b.lens[b.have-1],X=3+(E&3),E>>>=2,P-=2}else if(Ze===17){for(pr=ge+3;P<pr;){if(N===0)break e;N--,E+=U[u++]<<P,P+=8}E>>>=ge,P-=ge,Pe=0,X=3+(E&7),E>>>=3,P-=3}else{for(pr=ge+7;P<pr;){if(N===0)break e;N--,E+=U[u++]<<P,P+=8}E>>>=ge,P-=ge,Pe=0,X=11+(E&127),E>>>=7,P-=7}if(b.have+X>b.nlen+b.ndist){A.msg="invalid bit length repeat",b.mode=ie;break}for(;X--;)b.lens[b.have++]=Pe}}if(b.mode===ie)break;if(b.lens[256]===0){A.msg="invalid code -- missing end-of-block",b.mode=ie;break}if(b.lenbits=9,br={bits:b.lenbits},rr=l(i,b.lens,0,b.nlen,b.lencode,0,b.work,br),b.lenbits=br.bits,rr){A.msg="invalid literal/lengths set",b.mode=ie;break}if(b.distbits=6,b.distcode=b.distdyn,br={bits:b.distbits},rr=l(o,b.lens,b.nlen,b.ndist,b.distcode,0,b.work,br),b.distbits=br.bits,rr){A.msg="invalid distances set",b.mode=ie;break}if(b.mode=de,L===p)break e;case de:b.mode=De;case De:if(N>=6&&y>=258){A.next_out=B,A.avail_out=y,A.next_in=u,A.avail_in=N,b.hold=E,b.bits=P,n(A,Y),B=A.next_out,oe=A.output,y=A.avail_out,u=A.next_in,U=A.input,N=A.avail_in,E=b.hold,P=b.bits,b.mode===$&&(b.back=-1);break}for(b.back=0;Re=b.lencode[E&(1<<b.lenbits)-1],ge=Re>>>24,Oe=Re>>>16&255,Ze=Re&65535,!(ge<=P);){if(N===0)break e;N--,E+=U[u++]<<P,P+=8}if(Oe&&(Oe&240)===0){for(Ke=ge,dt=Oe,ft=Ze;Re=b.lencode[ft+((E&(1<<Ke+dt)-1)>>Ke)],ge=Re>>>24,Oe=Re>>>16&255,Ze=Re&65535,!(Ke+ge<=P);){if(N===0)break e;N--,E+=U[u++]<<P,P+=8}E>>>=Ke,P-=Ke,b.back+=Ke}if(E>>>=ge,P-=ge,b.back+=ge,b.length=Ze,Oe===0){b.mode=se;break}if(Oe&32){b.back=-1,b.mode=$;break}if(Oe&64){A.msg="invalid literal/length code",b.mode=ie;break}b.extra=Oe&15,b.mode=Ce;case Ce:if(b.extra){for(pr=b.extra;P<pr;){if(N===0)break e;N--,E+=U[u++]<<P,P+=8}b.length+=E&(1<<b.extra)-1,E>>>=b.extra,P-=b.extra,b.back+=b.extra}b.was=b.length,b.mode=he;case he:for(;Re=b.distcode[E&(1<<b.distbits)-1],ge=Re>>>24,Oe=Re>>>16&255,Ze=Re&65535,!(ge<=P);){if(N===0)break e;N--,E+=U[u++]<<P,P+=8}if((Oe&240)===0){for(Ke=ge,dt=Oe,ft=Ze;Re=b.distcode[ft+((E&(1<<Ke+dt)-1)>>Ke)],ge=Re>>>24,Oe=Re>>>16&255,Ze=Re&65535,!(Ke+ge<=P);){if(N===0)break e;N--,E+=U[u++]<<P,P+=8}E>>>=Ke,P-=Ke,b.back+=Ke}if(E>>>=ge,P-=ge,b.back+=ge,Oe&64){A.msg="invalid distance code",b.mode=ie;break}b.offset=Ze,b.extra=Oe&15,b.mode=ce;case ce:if(b.extra){for(pr=b.extra;P<pr;){if(N===0)break e;N--,E+=U[u++]<<P,P+=8}b.offset+=E&(1<<b.extra)-1,E>>>=b.extra,P-=b.extra,b.back+=b.extra}if(b.offset>b.dmax){A.msg="invalid distance too far back",b.mode=ie;break}b.mode=be;case be:if(y===0)break e;if(X=Y-y,b.offset>X){if(X=b.offset-X,X>b.whave&&b.sane){A.msg="invalid distance too far back",b.mode=ie;break}X>b.wnext?(X-=b.wnext,ve=b.wsize-X):ve=b.wnext-X,X>b.length&&(X=b.length),mr=b.window}else mr=oe,ve=B-b.offset,X=b.length;X>y&&(X=y),y-=X,b.length-=X;do oe[B++]=mr[ve++];while(--X);b.length===0&&(b.mode=De);break;case se:if(y===0)break e;oe[B++]=b.length,y--,b.mode=De;break;case ne:if(b.wrap){for(;P<32;){if(N===0)break e;N--,E|=U[u++]<<P,P+=8}if(Y-=y,A.total_out+=Y,b.total+=Y,Y&&(A.adler=b.check=b.flags?t(b.check,oe,Y,B-Y):r(b.check,oe,Y,B-Y)),Y=y,(b.flags?E:Le(E))!==b.check){A.msg="incorrect data check",b.mode=ie;break}E=0,P=0}b.mode=ke;case ke:if(b.wrap&&b.flags){for(;P<32;){if(N===0)break e;N--,E+=U[u++]<<P,P+=8}if(E!==(b.total&4294967295)){A.msg="incorrect length check",b.mode=ie;break}E=0,P=0}b.mode=Ne;case Ne:rr=d;break e;case ie:rr=D;break e;case Ee:return S;case He:default:return v}return A.next_out=B,A.avail_out=y,A.next_in=u,A.avail_in=N,b.hold=E,b.bits=P,(b.wsize||Y!==A.avail_out&&b.mode<ie&&(b.mode<ne||L!==s))&&zr(A,A.output,A.next_out,Y-A.avail_out),re-=A.avail_in,Y-=A.avail_out,A.total_in+=re,A.total_out+=Y,b.total+=Y,b.wrap&&Y&&(A.adler=b.check=b.flags?t(b.check,oe,Y,A.next_out-Y):r(b.check,oe,Y,A.next_out-Y)),A.data_type=b.bits+(b.last?64:0)+(b.mode===$?128:0)+(b.mode===de||b.mode===j?256:0),(re===0&&Y===0||L===s)&&rr===c&&(rr=g),rr}function q(A){if(!A||!A.state)return v;var L=A.state;return L.window&&(L.window=null),A.state=null,c}function V(A,L){var b;return!A||!A.state||(b=A.state,(b.wrap&2)===0)?v:(b.head=L,L.done=!1,c)}function Q(A,L){var b=L.length,U,oe,u;return!A||!A.state||(U=A.state,U.wrap!==0&&U.mode!==T)?v:U.mode===T&&(oe=1,oe=r(oe,L,b,0),oe!==U.check)?D:(u=zr(A,L,b,b),u?(U.mode=Ee,S):(U.havedict=1,c))}return nr.inflateReset=er,nr.inflateReset2=Lr,nr.inflateResetKeep=wr,nr.inflateInit=or,nr.inflateInit2=xr,nr.inflate=x,nr.inflateEnd=q,nr.inflateGetHeader=V,nr.inflateSetDictionary=Q,nr.inflateInfo="pako inflate (from Nodeca project)",nr}var un,pi;function ll(){return pi||(pi=1,un={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),un}var dn,vi;function ih(){if(vi)return dn;vi=1;function e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return dn=e,dn}var hi;function oh(){if(hi)return Wr;hi=1;var e=ah(),r=Ar(),t=il(),n=ll(),l=na(),a=ol(),i=ih(),o=Object.prototype.toString;function s(c){if(!(this instanceof s))return new s(c);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},c||{});var d=this.options;d.raw&&d.windowBits>=0&&d.windowBits<16&&(d.windowBits=-d.windowBits,d.windowBits===0&&(d.windowBits=-15)),d.windowBits>=0&&d.windowBits<16&&!(c&&c.windowBits)&&(d.windowBits+=32),d.windowBits>15&&d.windowBits<48&&(d.windowBits&15)===0&&(d.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var h=e.inflateInit2(this.strm,d.windowBits);if(h!==n.Z_OK)throw new Error(l[h]);if(this.header=new i,e.inflateGetHeader(this.strm,this.header),d.dictionary&&(typeof d.dictionary=="string"?d.dictionary=t.string2buf(d.dictionary):o.call(d.dictionary)==="[object ArrayBuffer]"&&(d.dictionary=new Uint8Array(d.dictionary)),d.raw&&(h=e.inflateSetDictionary(this.strm,d.dictionary),h!==n.Z_OK)))throw new Error(l[h])}s.prototype.push=function(c,d){var h=this.strm,v=this.options.chunkSize,D=this.options.dictionary,S,g,w,C,I,k=!1;if(this.ended)return!1;g=d===~~d?d:d===!0?n.Z_FINISH:n.Z_NO_FLUSH,typeof c=="string"?h.input=t.binstring2buf(c):o.call(c)==="[object ArrayBuffer]"?h.input=new Uint8Array(c):h.input=c,h.next_in=0,h.avail_in=h.input.length;do{if(h.avail_out===0&&(h.output=new r.Buf8(v),h.next_out=0,h.avail_out=v),S=e.inflate(h,n.Z_NO_FLUSH),S===n.Z_NEED_DICT&&D&&(S=e.inflateSetDictionary(this.strm,D)),S===n.Z_BUF_ERROR&&k===!0&&(S=n.Z_OK,k=!1),S!==n.Z_STREAM_END&&S!==n.Z_OK)return this.onEnd(S),this.ended=!0,!1;h.next_out&&(h.avail_out===0||S===n.Z_STREAM_END||h.avail_in===0&&(g===n.Z_FINISH||g===n.Z_SYNC_FLUSH))&&(this.options.to==="string"?(w=t.utf8border(h.output,h.next_out),C=h.next_out-w,I=t.buf2string(h.output,w),h.next_out=C,h.avail_out=v-C,C&&r.arraySet(h.output,h.output,w,C,0),this.onData(I)):this.onData(r.shrinkBuf(h.output,h.next_out))),h.avail_in===0&&h.avail_out===0&&(k=!0)}while((h.avail_in>0||h.avail_out===0)&&S!==n.Z_STREAM_END);return S===n.Z_STREAM_END&&(g=n.Z_FINISH),g===n.Z_FINISH?(S=e.inflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===n.Z_OK):(g===n.Z_SYNC_FLUSH&&(this.onEnd(n.Z_OK),h.avail_out=0),!0)},s.prototype.onData=function(c){this.chunks.push(c)},s.prototype.onEnd=function(c){c===n.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=c,this.msg=this.strm.msg};function f(c,d){var h=new s(d);if(h.push(c,!0),h.err)throw h.msg||l[h.err];return h.result}function p(c,d){return d=d||{},d.raw=!0,f(c,d)}return Wr.Inflate=s,Wr.inflate=f,Wr.inflateRaw=p,Wr.ungzip=f,Wr}var fn,gi;function lh(){if(gi)return fn;gi=1;var e=Ar().assign,r=rh(),t=oh(),n=ll(),l={};return e(l,r,t,n),fn=l,fn}var mi;function sh(){return mi||(mi=1,function(e){(function(){var r={},t;e.exports=r,typeof Jv=="function"?t=lh():t=window.pako,function(n,l){n.toRGBA8=function(a){var i=a.width,o=a.height;if(a.tabs.acTL==null)return[n.toRGBA8.decodeImage(a.data,i,o,a).buffer];var s=[];a.frames[0].data==null&&(a.frames[0].data=a.data);for(var f,p=new Uint8Array(i*o*4),c=0;c<a.frames.length;c++){var d=a.frames[c],h=d.rect.x,v=d.rect.y,D=d.rect.width,S=d.rect.height,g=n.toRGBA8.decodeImage(d.data,D,S,a);if(c==0?f=g:d.blend==0?n._copyTile(g,D,S,f,i,o,h,v,0):d.blend==1&&n._copyTile(g,D,S,f,i,o,h,v,1),s.push(f.buffer),f=f.slice(0),d.dispose!=0){if(d.dispose==1)n._copyTile(p,D,S,f,i,o,h,v,0);else if(d.dispose==2){for(var w=c-1;a.frames[w].dispose==2;)w--;f=new Uint8Array(s[w]).slice(0)}}}return s},n.toRGBA8.decodeImage=function(a,i,o,s){var f=i*o,p=n.decode._getBPP(s),c=Math.ceil(i*p/8),d=new Uint8Array(f*4),h=new Uint32Array(d.buffer),v=s.ctype,D=s.depth,S=n._bin.readUshort;if(v==6){var g=f<<2;if(D==8)for(var w=0;w<g;w++)d[w]=a[w];if(D==16)for(var w=0;w<g;w++)d[w]=a[w<<1]}else if(v==2){var C=s.tabs.tRNS,I=-1,k=-1,R=-1;if(C&&(I=C[0],k=C[1],R=C[2]),D==8)for(var w=0;w<f;w++){var _=w<<2,M=w*3;d[_]=a[M],d[_+1]=a[M+1],d[_+2]=a[M+2],d[_+3]=255,I!=-1&&a[M]==I&&a[M+1]==k&&a[M+2]==R&&(d[_+3]=0)}if(D==16)for(var w=0;w<f;w++){var _=w<<2,M=w*6;d[_]=a[M],d[_+1]=a[M+2],d[_+2]=a[M+4],d[_+3]=255,I!=-1&&S(a,M)==I&&S(a,M+2)==k&&S(a,M+4)==R&&(d[_+3]=0)}}else if(v==3){var F=s.tabs.PLTE,G=s.tabs.tRNS,O=G?G.length:0;if(D==1)for(var W=0;W<o;W++)for(var T=W*c,$=W*i,w=0;w<i;w++){var _=$+w<<2,J=a[T+(w>>3)]>>7-((w&7)<<0)&1,K=3*J;d[_]=F[K],d[_+1]=F[K+1],d[_+2]=F[K+2],d[_+3]=J<O?G[J]:255}if(D==2)for(var W=0;W<o;W++)for(var T=W*c,$=W*i,w=0;w<i;w++){var _=$+w<<2,J=a[T+(w>>2)]>>6-((w&3)<<1)&3,K=3*J;d[_]=F[K],d[_+1]=F[K+1],d[_+2]=F[K+2],d[_+3]=J<O?G[J]:255}if(D==4)for(var W=0;W<o;W++)for(var T=W*c,$=W*i,w=0;w<i;w++){var _=$+w<<2,J=a[T+(w>>1)]>>4-((w&1)<<2)&15,K=3*J;d[_]=F[K],d[_+1]=F[K+1],d[_+2]=F[K+2],d[_+3]=J<O?G[J]:255}if(D==8)for(var w=0;w<f;w++){var _=w<<2,J=a[w],K=3*J;d[_]=F[K],d[_+1]=F[K+1],d[_+2]=F[K+2],d[_+3]=J<O?G[J]:255}}else if(v==4){if(D==8)for(var w=0;w<f;w++){var _=w<<2,j=w<<1,H=a[j];d[_]=H,d[_+1]=H,d[_+2]=H,d[_+3]=a[j+1]}if(D==16)for(var w=0;w<f;w++){var _=w<<2,j=w<<2,H=a[j];d[_]=H,d[_+1]=H,d[_+2]=H,d[_+3]=a[j+2]}}else if(v==0){var I=s.tabs.tRNS?s.tabs.tRNS:-1;if(D==1)for(var w=0;w<f;w++){var H=255*(a[w>>3]>>7-(w&7)&1),ee=H==I*255?0:255;h[w]=ee<<24|H<<16|H<<8|H}if(D==2)for(var w=0;w<f;w++){var H=85*(a[w>>2]>>6-((w&3)<<1)&3),ee=H==I*85?0:255;h[w]=ee<<24|H<<16|H<<8|H}if(D==4)for(var w=0;w<f;w++){var H=17*(a[w>>1]>>4-((w&1)<<2)&15),ee=H==I*17?0:255;h[w]=ee<<24|H<<16|H<<8|H}if(D==8)for(var w=0;w<f;w++){var H=a[w],ee=H==I?0:255;h[w]=ee<<24|H<<16|H<<8|H}if(D==16)for(var w=0;w<f;w++){var H=a[w<<1],ee=S(a,w<<1)==I?0:255;h[w]=ee<<24|H<<16|H<<8|H}}return d},n.decode=function(a){for(var i=new Uint8Array(a),o=8,s=n._bin,f=s.readUshort,p=s.readUint,c={tabs:{},frames:[]},d=new Uint8Array(i.length),h=0,v,D=0,S=[137,80,78,71,13,10,26,10],g=0;g<8;g++)if(i[g]!=S[g])throw"The input is not a PNG file!";for(;o<i.length;){var w=s.readUint(i,o);o+=4;var C=s.readASCII(i,o,4);if(o+=4,C=="IHDR")n.decode._IHDR(i,o,c);else if(C=="IDAT"){for(var g=0;g<w;g++)d[h+g]=i[o+g];h+=w}else if(C=="acTL")c.tabs[C]={num_frames:p(i,o),num_plays:p(i,o+4)},v=new Uint8Array(i.length);else if(C=="fcTL"){if(D!=0){var I=c.frames[c.frames.length-1];I.data=n.decode._decompress(c,v.slice(0,D),I.rect.width,I.rect.height),D=0}var k={x:p(i,o+12),y:p(i,o+16),width:p(i,o+4),height:p(i,o+8)},R=f(i,o+22);R=f(i,o+20)/(R==0?100:R);var _={rect:k,delay:Math.round(R*1e3),dispose:i[o+24],blend:i[o+25]};c.frames.push(_)}else if(C=="fdAT"){for(var g=0;g<w-4;g++)v[D+g]=i[o+g+4];D+=w-4}else if(C=="pHYs")c.tabs[C]=[s.readUint(i,o),s.readUint(i,o+4),i[o+8]];else if(C=="cHRM"){c.tabs[C]=[];for(var g=0;g<8;g++)c.tabs[C].push(s.readUint(i,o+g*4))}else if(C=="tEXt"){c.tabs[C]==null&&(c.tabs[C]={});var M=s.nextZero(i,o),F=s.readASCII(i,o,M-o),G=s.readASCII(i,M+1,o+w-M-1);c.tabs[C][F]=G}else if(C=="iTXt"){c.tabs[C]==null&&(c.tabs[C]={});var M=0,O=o;M=s.nextZero(i,O);var F=s.readASCII(i,O,M-O);O=M+1,i[O],i[O+1],O+=2,M=s.nextZero(i,O),s.readASCII(i,O,M-O),O=M+1,M=s.nextZero(i,O),s.readUTF8(i,O,M-O),O=M+1;var G=s.readUTF8(i,O,w-(O-o));c.tabs[C][F]=G}else if(C=="PLTE")c.tabs[C]=s.readBytes(i,o,w);else if(C=="hIST"){var W=c.tabs.PLTE.length/3;c.tabs[C]=[];for(var g=0;g<W;g++)c.tabs[C].push(f(i,o+g*2))}else if(C=="tRNS")c.ctype==3?c.tabs[C]=s.readBytes(i,o,w):c.ctype==0?c.tabs[C]=f(i,o):c.ctype==2&&(c.tabs[C]=[f(i,o),f(i,o+2),f(i,o+4)]);else if(C=="gAMA")c.tabs[C]=s.readUint(i,o)/1e5;else if(C=="sRGB")c.tabs[C]=i[o];else if(C=="bKGD")c.ctype==0||c.ctype==4?c.tabs[C]=[f(i,o)]:c.ctype==2||c.ctype==6?c.tabs[C]=[f(i,o),f(i,o+2),f(i,o+4)]:c.ctype==3&&(c.tabs[C]=i[o]);else if(C=="IEND"){if(D!=0){var I=c.frames[c.frames.length-1];I.data=n.decode._decompress(c,v.slice(0,D),I.rect.width,I.rect.height),D=0}c.data=n.decode._decompress(c,d,c.width,c.height);break}o+=w,s.readUint(i,o),o+=4}return delete c.compress,delete c.interlace,delete c.filter,c},n.decode._decompress=function(a,i,o,s){return a.compress==0&&(i=n.decode._inflate(i)),a.interlace==0?i=n.decode._filterZero(i,a,0,o,s):a.interlace==1&&(i=n.decode._readInterlace(i,a)),i},n.decode._inflate=function(a){return l.inflate(a)},n.decode._readInterlace=function(a,i){for(var o=i.width,s=i.height,f=n.decode._getBPP(i),p=f>>3,c=Math.ceil(o*f/8),d=new Uint8Array(s*c),h=0,v=[0,0,4,0,2,0,1],D=[0,4,0,2,0,1,0],S=[8,8,8,4,4,2,2],g=[8,8,4,4,2,2,1],w=0;w<7;){for(var C=S[w],I=g[w],k=0,R=0,_=v[w];_<s;)_+=C,R++;for(var M=D[w];M<o;)M+=I,k++;var F=Math.ceil(k*f/8);n.decode._filterZero(a,i,h,k,R);for(var G=0,O=v[w];O<s;){for(var W=D[w],T=h+G*F<<3;W<o;){if(f==1){var $=a[T>>3];$=$>>7-(T&7)&1,d[O*c+(W>>3)]|=$<<7-((W&3)<<0)}if(f==2){var $=a[T>>3];$=$>>6-(T&7)&3,d[O*c+(W>>2)]|=$<<6-((W&3)<<1)}if(f==4){var $=a[T>>3];$=$>>4-(T&7)&15,d[O*c+(W>>1)]|=$<<4-((W&1)<<2)}if(f>=8)for(var J=O*c+W*p,K=0;K<p;K++)d[J+K]=a[(T>>3)+K];T+=f,W+=I}G++,O+=C}k*R!=0&&(h+=R*(1+F)),w=w+1}return d},n.decode._getBPP=function(a){var i=[1,null,3,1,2,null,4][a.ctype];return i*a.depth},n.decode._filterZero=function(a,i,o,s,f){var p=n.decode._getBPP(i),c=Math.ceil(s*p/8),d=n.decode._paeth;p=Math.ceil(p/8);for(var h=0;h<f;h++){var v=o+h*c,D=v+h+1,S=a[D-1];if(S==0)for(var g=0;g<c;g++)a[v+g]=a[D+g];else if(S==1){for(var g=0;g<p;g++)a[v+g]=a[D+g];for(var g=p;g<c;g++)a[v+g]=a[D+g]+a[v+g-p]&255}else if(h==0){for(var g=0;g<p;g++)a[v+g]=a[D+g];if(S==2)for(var g=p;g<c;g++)a[v+g]=a[D+g]&255;if(S==3)for(var g=p;g<c;g++)a[v+g]=a[D+g]+(a[v+g-p]>>1)&255;if(S==4)for(var g=p;g<c;g++)a[v+g]=a[D+g]+d(a[v+g-p],0,0)&255}else{if(S==2)for(var g=0;g<c;g++)a[v+g]=a[D+g]+a[v+g-c]&255;if(S==3){for(var g=0;g<p;g++)a[v+g]=a[D+g]+(a[v+g-c]>>1)&255;for(var g=p;g<c;g++)a[v+g]=a[D+g]+(a[v+g-c]+a[v+g-p]>>1)&255}if(S==4){for(var g=0;g<p;g++)a[v+g]=a[D+g]+d(0,a[v+g-c],0)&255;for(var g=p;g<c;g++)a[v+g]=a[D+g]+d(a[v+g-p],a[v+g-c],a[v+g-p-c])&255}}}return a},n.decode._paeth=function(a,i,o){var s=a+i-o,f=Math.abs(s-a),p=Math.abs(s-i),c=Math.abs(s-o);return f<=p&&f<=c?a:p<=c?i:o},n.decode._IHDR=function(a,i,o){var s=n._bin;o.width=s.readUint(a,i),i+=4,o.height=s.readUint(a,i),i+=4,o.depth=a[i],i++,o.ctype=a[i],i++,o.compress=a[i],i++,o.filter=a[i],i++,o.interlace=a[i],i++},n._bin={nextZero:function(a,i){for(;a[i]!=0;)i++;return i},readUshort:function(a,i){return a[i]<<8|a[i+1]},writeUshort:function(a,i,o){a[i]=o>>8&255,a[i+1]=o&255},readUint:function(a,i){return a[i]*(256*256*256)+(a[i+1]<<16|a[i+2]<<8|a[i+3])},writeUint:function(a,i,o){a[i]=o>>24&255,a[i+1]=o>>16&255,a[i+2]=o>>8&255,a[i+3]=o&255},readASCII:function(a,i,o){for(var s="",f=0;f<o;f++)s+=String.fromCharCode(a[i+f]);return s},writeASCII:function(a,i,o){for(var s=0;s<o.length;s++)a[i+s]=o.charCodeAt(s)},readBytes:function(a,i,o){for(var s=[],f=0;f<o;f++)s.push(a[i+f]);return s},pad:function(a){return a.length<2?"0"+a:a},readUTF8:function(a,i,o){for(var s="",f,p=0;p<o;p++)s+="%"+n._bin.pad(a[i+p].toString(16));try{f=decodeURIComponent(s)}catch{return n._bin.readASCII(a,i,o)}return f}},n._copyTile=function(a,i,o,s,f,p,c,d,h){for(var v=Math.min(i,f),D=Math.min(o,p),S=0,g=0,w=0;w<D;w++)for(var C=0;C<v;C++)if(c>=0&&d>=0?(S=w*i+C<<2,g=(d+w)*f+c+C<<2):(S=(-d+w)*i-c+C<<2,g=w*f+C<<2),h==0)s[g]=a[S],s[g+1]=a[S+1],s[g+2]=a[S+2],s[g+3]=a[S+3];else if(h==1){var I=a[S+3]*.00392156862745098,k=a[S]*I,R=a[S+1]*I,_=a[S+2]*I,M=s[g+3]*(1/255),F=s[g]*M,G=s[g+1]*M,O=s[g+2]*M,W=1-I,T=I+M*W,$=T==0?0:1/T;s[g+3]=255*T,s[g+0]=(k+F*W)*$,s[g+1]=(R+G*W)*$,s[g+2]=(_+O*W)*$}else if(h==2){var I=a[S+3],k=a[S],R=a[S+1],_=a[S+2],M=s[g+3],F=s[g],G=s[g+1],O=s[g+2];I==M&&k==F&&R==G&&_==O?(s[g]=0,s[g+1]=0,s[g+2]=0,s[g+3]=0):(s[g]=k,s[g+1]=R,s[g+2]=_,s[g+3]=I)}else if(h==3){var I=a[S+3],k=a[S],R=a[S+1],_=a[S+2],M=s[g+3],F=s[g],G=s[g+1],O=s[g+2];if(I==M&&k==F&&R==G&&_==O)continue;if(I<220&&M>20)return!1}return!0},n.encode=function(a,i,o,s,f,p){s==null&&(s=0),p==null&&(p=!1);for(var c=new Uint8Array(a[0].byteLength*a.length+100),d=[137,80,78,71,13,10,26,10],h=0;h<8;h++)c[h]=d[h];var v=8,D=n._bin,S=n.crc.crc,g=D.writeUint,w=D.writeUshort,C=D.writeASCII,I=n.encode.compressPNG(a,i,o,s,p);g(c,v,13),v+=4,C(c,v,"IHDR"),v+=4,g(c,v,i),v+=4,g(c,v,o),v+=4,c[v]=I.depth,v++,c[v]=I.ctype,v++,c[v]=0,v++,c[v]=0,v++,c[v]=0,v++,g(c,v,S(c,v-17,17)),v+=4,g(c,v,1),v+=4,C(c,v,"sRGB"),v+=4,c[v]=1,v++,g(c,v,S(c,v-5,5)),v+=4;var k=a.length>1;if(k&&(g(c,v,8),v+=4,C(c,v,"acTL"),v+=4,g(c,v,a.length),v+=4,g(c,v,0),v+=4,g(c,v,S(c,v-12,12)),v+=4),I.ctype==3){var R=I.plte.length;g(c,v,R*3),v+=4,C(c,v,"PLTE"),v+=4;for(var h=0;h<R;h++){var _=h*3,M=I.plte[h],F=M&255,G=M>>8&255,O=M>>16&255;c[v+_+0]=F,c[v+_+1]=G,c[v+_+2]=O}if(v+=R*3,g(c,v,S(c,v-R*3-4,R*3+4)),v+=4,I.gotAlpha){g(c,v,R),v+=4,C(c,v,"tRNS"),v+=4;for(var h=0;h<R;h++)c[v+h]=I.plte[h]>>24&255;v+=R,g(c,v,S(c,v-R-4,R+4)),v+=4}}for(var W=0,T=0;T<I.frames.length;T++){var $=I.frames[T];k&&(g(c,v,26),v+=4,C(c,v,"fcTL"),v+=4,g(c,v,W++),v+=4,g(c,v,$.rect.width),v+=4,g(c,v,$.rect.height),v+=4,g(c,v,$.rect.x),v+=4,g(c,v,$.rect.y),v+=4,w(c,v,f[T]),v+=2,w(c,v,1e3),v+=2,c[v]=$.dispose,v++,c[v]=$.blend,v++,g(c,v,S(c,v-30,30)),v+=4);var J=$.cimg,R=J.length;g(c,v,R+(T==0?0:4)),v+=4;var K=v;C(c,v,T==0?"IDAT":"fdAT"),v+=4,T!=0&&(g(c,v,W++),v+=4);for(var h=0;h<R;h++)c[v+h]=J[h];v+=R,g(c,v,S(c,K,v-K)),v+=4}return g(c,v,0),v+=4,C(c,v,"IEND"),v+=4,g(c,v,S(c,v-4,4)),v+=4,c.buffer.slice(0,v)},n.encode.compressPNG=function(a,i,o,s,f){for(var p=n.encode.compress(a,i,o,s,!1,f),c=0;c<a.length;c++){var d=p.frames[c];d.rect.width;var h=d.rect.height,v=d.bpl,D=d.bpp,S=new Uint8Array(h*v+h);d.cimg=n.encode._filterZero(d.img,h,D,v,S)}return p},n.encode.compress=function(a,i,o,s,f,p){p==null&&(p=!1);for(var c=6,d=8,h=4,v=255,D=0;D<a.length;D++)for(var S=new Uint8Array(a[D]),g=S.length,w=0;w<g;w+=4)v&=S[w+3];var C=v!=255,I={},k=[];if(a.length!=0&&(I[0]=0,k.push(0),s!=0&&s--),s!=0){var R=n.quantize(a,s,f);a=R.bufs;for(var w=0;w<R.plte.length;w++){var _=R.plte[w].est.rgba;I[_]==null&&(I[_]=k.length,k.push(_))}}else for(var D=0;D<a.length;D++)for(var M=new Uint32Array(a[D]),g=M.length,w=0;w<g;w++){var _=M[w];if((w<i||_!=M[w-1]&&_!=M[w-i])&&I[_]==null&&(I[_]=k.length,k.push(_),k.length>=300))break}var F=C?f:!1,G=k.length;G<=256&&p==!1&&(G<=2?d=1:G<=4?d=2:G<=16?d=4:d=8,f&&(d=8),C=!0);for(var O=[],D=0;D<a.length;D++){var W=new Uint8Array(a[D]),T=new Uint32Array(W.buffer),$=0,J=0,K=i,j=o,H=0;if(D!=0&&!F){for(var ee=f||D==1||O[O.length-2].dispose==2?1:2,pe=0,Ie=1e9,de=0;de<ee;de++){for(var Ne=new Uint8Array(a[D-1-de]),De=new Uint32Array(a[D-1-de]),Ce=i,he=o,ce=-1,be=-1,se=0;se<o;se++)for(var ne=0;ne<i;ne++){var w=se*i+ne;T[w]!=De[w]&&(ne<Ce&&(Ce=ne),ne>ce&&(ce=ne),se<he&&(he=se),se>be&&(be=se))}var ke=ce==-1?1:(ce-Ce+1)*(be-he+1);ke<Ie&&(Ie=ke,pe=de,ce==-1?($=J=0,K=j=1):($=Ce,J=he,K=ce-Ce+1,j=be-he+1))}var Ne=new Uint8Array(a[D-1-pe]);pe==1&&(O[O.length-1].dispose=2);var ie=new Uint8Array(K*j*4);new Uint32Array(ie.buffer),n._copyTile(Ne,i,o,ie,K,j,-$,-J,0),n._copyTile(W,i,o,ie,K,j,-$,-J,3)?(n._copyTile(W,i,o,ie,K,j,-$,-J,2),H=1):(n._copyTile(W,i,o,ie,K,j,-$,-J,0),H=0),W=ie,T=new Uint32Array(W.buffer)}var Ee=4*K;if(G<=256&&p==!1){Ee=Math.ceil(d*K/8);for(var ie=new Uint8Array(Ee*j),se=0;se<j;se++){var w=se*Ee,He=se*K;if(d==8)for(var ne=0;ne<K;ne++)ie[w+ne]=I[T[He+ne]];else if(d==4)for(var ne=0;ne<K;ne++)ie[w+(ne>>1)]|=I[T[He+ne]]<<4-(ne&1)*4;else if(d==2)for(var ne=0;ne<K;ne++)ie[w+(ne>>2)]|=I[T[He+ne]]<<6-(ne&3)*2;else if(d==1)for(var ne=0;ne<K;ne++)ie[w+(ne>>3)]|=I[T[He+ne]]<<7-(ne&7)*1}W=ie,c=3,h=1}else if(C==!1&&a.length==1){for(var ie=new Uint8Array(K*j*3),We=K*j,w=0;w<We;w++){var Te=w*3,we=w*4;ie[Te]=W[we],ie[Te+1]=W[we+1],ie[Te+2]=W[we+2]}W=ie,c=2,h=3,Ee=3*K}O.push({rect:{x:$,y:J,width:K,height:j},img:W,bpl:Ee,bpp:h,blend:H,dispose:F?1:0})}return{ctype:c,depth:d,plte:k,gotAlpha:C,frames:O}},n.encode._filterZero=function(a,i,o,s,f){for(var p=[],c=0;c<5;c++)if(!(i*s>5e5&&(c==2||c==3||c==4))){for(var d=0;d<i;d++)n.encode._filterLine(f,a,d,s,o,c);if(p.push(l.deflate(f)),o==1)break}for(var h,v=1e9,D=0;D<p.length;D++)p[D].length<v&&(h=D,v=p[D].length);return p[h]},n.encode._filterLine=function(a,i,o,s,f,p){var c=o*s,d=c+o,h=n.decode._paeth;if(a[d]=p,d++,p==0)for(var v=0;v<s;v++)a[d+v]=i[c+v];else if(p==1){for(var v=0;v<f;v++)a[d+v]=i[c+v];for(var v=f;v<s;v++)a[d+v]=i[c+v]-i[c+v-f]+256&255}else if(o==0){for(var v=0;v<f;v++)a[d+v]=i[c+v];if(p==2)for(var v=f;v<s;v++)a[d+v]=i[c+v];if(p==3)for(var v=f;v<s;v++)a[d+v]=i[c+v]-(i[c+v-f]>>1)+256&255;if(p==4)for(var v=f;v<s;v++)a[d+v]=i[c+v]-h(i[c+v-f],0,0)+256&255}else{if(p==2)for(var v=0;v<s;v++)a[d+v]=i[c+v]+256-i[c+v-s]&255;if(p==3){for(var v=0;v<f;v++)a[d+v]=i[c+v]+256-(i[c+v-s]>>1)&255;for(var v=f;v<s;v++)a[d+v]=i[c+v]+256-(i[c+v-s]+i[c+v-f]>>1)&255}if(p==4){for(var v=0;v<f;v++)a[d+v]=i[c+v]+256-h(0,i[c+v-s],0)&255;for(var v=f;v<s;v++)a[d+v]=i[c+v]+256-h(i[c+v-f],i[c+v-s],i[c+v-f-s])&255}}},n.crc={table:function(){for(var a=new Uint32Array(256),i=0;i<256;i++){for(var o=i,s=0;s<8;s++)o&1?o=3988292384^o>>>1:o=o>>>1;a[i]=o}return a}(),update:function(a,i,o,s){for(var f=0;f<s;f++)a=n.crc.table[(a^i[o+f])&255]^a>>>8;return a},crc:function(a,i,o){return n.crc.update(4294967295,a,i,o)^4294967295}},n.quantize=function(a,i,o){for(var s=[],f=0,p=0;p<a.length;p++)s.push(n.encode.alphaMul(new Uint8Array(a[p]),o)),f+=a[p].byteLength;for(var c=new Uint8Array(f),d=new Uint32Array(c.buffer),h=0,p=0;p<s.length;p++){for(var v=s[p],D=v.length,S=0;S<D;S++)c[h+S]=v[S];h+=D}var g={i0:0,i1:c.length,bst:null,est:null,tdst:0,left:null,right:null};g.bst=n.quantize.stats(c,g.i0,g.i1),g.est=n.quantize.estats(g.bst);for(var w=[g];w.length<i;){for(var C=0,I=0,p=0;p<w.length;p++)w[p].est.L>C&&(C=w[p].est.L,I=p);if(C<.001)break;var k=w[I],R=n.quantize.splitPixels(c,d,k.i0,k.i1,k.est.e,k.est.eMq255),_={i0:k.i0,i1:R,bst:null,est:null,tdst:0,left:null,right:null};_.bst=n.quantize.stats(c,_.i0,_.i1),_.est=n.quantize.estats(_.bst);var M={i0:R,i1:k.i1,bst:null,est:null,tdst:0,left:null,right:null};M.bst={R:[],m:[],N:k.bst.N-_.bst.N};for(var p=0;p<16;p++)M.bst.R[p]=k.bst.R[p]-_.bst.R[p];for(var p=0;p<4;p++)M.bst.m[p]=k.bst.m[p]-_.bst.m[p];M.est=n.quantize.estats(M.bst),k.left=_,k.right=M,w[I]=_,w.push(M)}w.sort(function(ee,pe){return pe.bst.N-ee.bst.N});for(var F=0;F<s.length;F++){for(var G=n.quantize.planeDst,O=new Uint8Array(s[F].buffer),W=new Uint32Array(s[F].buffer),T=O.length,p=0;p<T;p+=4){for(var $=O[p]*.00392156862745098,J=O[p+1]*(1/255),K=O[p+2]*(1/255),j=O[p+3]*(1/255),H=g;H.left;)H=G(H.est,$,J,K,j)<=0?H.left:H.right;W[p>>2]=H.est.rgba}s[F]=W.buffer}return{bufs:s,plte:w}},n.quantize.getNearest=function(a,i,o,s,f){if(a.left==null)return a.tdst=n.quantize.dist(a.est.q,i,o,s,f),a;var p=n.quantize.planeDst(a.est,i,o,s,f),c=a.left,d=a.right;p>0&&(c=a.right,d=a.left);var h=n.quantize.getNearest(c,i,o,s,f);if(h.tdst<=p*p)return h;var v=n.quantize.getNearest(d,i,o,s,f);return v.tdst<h.tdst?v:h},n.quantize.planeDst=function(a,i,o,s,f){var p=a.e;return p[0]*i+p[1]*o+p[2]*s+p[3]*f-a.eMq},n.quantize.dist=function(a,i,o,s,f){var p=i-a[0],c=o-a[1],d=s-a[2],h=f-a[3];return p*p+c*c+d*d+h*h},n.quantize.splitPixels=function(a,i,o,s,f,p){var c=n.quantize.vecDot;for(s-=4;o<s;){for(;c(a,o,f)<=p;)o+=4;for(;c(a,s,f)>p;)s-=4;if(o>=s)break;var d=i[o>>2];i[o>>2]=i[s>>2],i[s>>2]=d,o+=4,s-=4}for(;c(a,o,f)>p;)o-=4;return o+4},n.quantize.vecDot=function(a,i,o){return a[i]*o[0]+a[i+1]*o[1]+a[i+2]*o[2]+a[i+3]*o[3]},n.quantize.stats=function(a,i,o){for(var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],f=[0,0,0,0],p=o-i>>2,c=i;c<o;c+=4){var d=a[c]*.00392156862745098,h=a[c+1]*(1/255),v=a[c+2]*(1/255),D=a[c+3]*(1/255);f[0]+=d,f[1]+=h,f[2]+=v,f[3]+=D,s[0]+=d*d,s[1]+=d*h,s[2]+=d*v,s[3]+=d*D,s[5]+=h*h,s[6]+=h*v,s[7]+=h*D,s[10]+=v*v,s[11]+=v*D,s[15]+=D*D}return s[4]=s[1],s[8]=s[2],s[12]=s[3],s[9]=s[6],s[13]=s[7],s[14]=s[11],{R:s,m:f,N:p}},n.quantize.estats=function(a){var i=a.R,o=a.m,s=a.N,f=o[0],p=o[1],c=o[2],d=o[3],h=s==0?0:1/s,v=[i[0]-f*f*h,i[1]-f*p*h,i[2]-f*c*h,i[3]-f*d*h,i[4]-p*f*h,i[5]-p*p*h,i[6]-p*c*h,i[7]-p*d*h,i[8]-c*f*h,i[9]-c*p*h,i[10]-c*c*h,i[11]-c*d*h,i[12]-d*f*h,i[13]-d*p*h,i[14]-d*c*h,i[15]-d*d*h],D=v,S=n.M4,g=[.5,.5,.5,.5],w=0,C=0;if(s!=0)for(var I=0;I<10&&(g=S.multVec(D,g),C=Math.sqrt(S.dot(g,g)),g=S.sml(1/C,g),!(Math.abs(C-w)<1e-9));I++)w=C;var k=[f*h,p*h,c*h,d*h],R=S.dot(S.sml(255,k),g),_=k[3]<.001?0:1/k[3];return{Cov:v,q:k,e:g,L:w,eMq255:R,eMq:S.dot(g,k),rgba:(Math.round(255*k[3])<<24|Math.round(255*k[2]*_)<<16|Math.round(255*k[1]*_)<<8|Math.round(255*k[0]*_)<<0)>>>0}},n.M4={multVec:function(a,i){return[a[0]*i[0]+a[1]*i[1]+a[2]*i[2]+a[3]*i[3],a[4]*i[0]+a[5]*i[1]+a[6]*i[2]+a[7]*i[3],a[8]*i[0]+a[9]*i[1]+a[10]*i[2]+a[11]*i[3],a[12]*i[0]+a[13]*i[1]+a[14]*i[2]+a[15]*i[3]]},dot:function(a,i){return a[0]*i[0]+a[1]*i[1]+a[2]*i[2]+a[3]*i[3]},sml:function(a,i){return[a*i[0],a*i[1],a*i[2],a*i[3]]}},n.encode.alphaMul=function(a,i){for(var o=new Uint8Array(a.length),s=a.length>>2,f=0;f<s;f++){var p=f<<2,c=a[p+3];i&&(c=c<128?0:255);var d=c*(1/255);o[p+0]=a[p+0]*d,o[p+1]=a[p+1]*d,o[p+2]=a[p+2]*d,o[p+3]=c}return o}}(r,t)})()}(rn)),rn.exports}var sl=sh();function ch(){const{setLoadingMsg:e}=Be(),{activeModel:r}=_e(),{screenshot:t}=z,n=async o=>{o.stopPropagation();const s=t.getFrame(),f=Xv(s);navigator.clipboard.write([new ClipboardItem({"image/png":f})])},l=()=>{if(!r){e("No model"),setTimeout(()=>e(""),2e3);return}e("Generating frames..."),setTimeout(async()=>{const o=t.getAllFrames(r);if(!o){e("Invalid animation..."),setTimeout(()=>e(""),2e3);return}e("Creating zip...");const s=t.settings.fileName||"frames",f=await Ti(o,s);e("Finished"),yr.saveAs(f,`${s}.zip`),setTimeout(()=>e(""),1e3)})},a=()=>{if(!r){e("No model"),setTimeout(()=>e(""),2e3);return}e("Generating frames..."),setTimeout(async()=>{const o=t.getAllFrames(r);if(!o){e("Invalid animation"),setTimeout(()=>e(""),2e3);return}e(`Creating gif from ${o.length} frames...`);const{frameRate:s}=t.settings,{makeGif:f}=await Tt(async()=>{const{makeGif:d}=await import("./f_DOqUXJZN-index.js");return{makeGif:d}},[]),p=await f({frames:o,width:z.viewport.width,height:z.viewport.height,delay:Math.ceil(1e3/s)});e("Finished");const c=r.userData.name??r.id??"ani";yr.saveAs(p,`${c}.gif`),setTimeout(()=>e(""),1e3)})},i=()=>{if(!r){e("No model"),setTimeout(()=>e(""),2e3);return}e("Generating frames..."),setTimeout(async()=>{const o=t.getAllFramesAsArrayBuffer(r);if(!o){e("Invalid animation"),setTimeout(()=>e(""),2e3);return}e(`Creating apng from ${o.length} frames...`);const{frameRate:s}=t.settings,f=Math.ceil(1e3/s),p=Array(o.length-1).fill(f),{width:c,height:d}=z.viewport,h=sl.encode(o,c,d,0,p),v=new Blob([h],{type:"image/apng"});e("Finished");const D=r.userData.name??r.id??"ani";yr.saveAs(v,`${D}.png`),setTimeout(()=>e(""),1e3)})};return m($e,{className:"SettingGroup",children:[m(ae,{children:[m("div",{children:"Screenshot/GIF/APNG"}),m(fe,{onClick:n,title:"Copy screenshot to clipboard",variant:"contained",children:m(Ns,{})})]}),m(ae,{children:[m(cr,{target:t.settings,propList:Yv}),m(fe,{onClick:l,title:"Get all frames as zip",startIcon:m(Mr,{}),children:"Get All Frames"}),m(fe,{title:"Create GIF of current animation",startIcon:m(Pn,{viewBox:"4 4 16 16"}),onClick:a,children:"Create GIF"}),m(fe,{onClick:i,title:"Create APNG of current animation",startIcon:m(Mr,{}),children:"Create APNG"})]})]})}const{setLoadingMsg:Fe}=Be.getState(),bi=e=>()=>{Fe("Generating frames..."),setTimeout(async()=>{const r=await e();Fe("Creating zip...");const t="frames",n=await Ti(r,t);Fe("Finished"),yr.saveAs(n,`${t}.zip`),setTimeout(()=>Fe(""),1e3)})},yi=e=>async()=>{Fe("Generating frames...");const{frameRate:r}=z.screenshot.settings;setTimeout(async()=>{const t=await e();Fe("Creating gif...");const{makeGif:n}=await Tt(async()=>{const{makeGif:a}=await import("./f_DOqUXJZN-index.js");return{makeGif:a}},[]),l=await n({frames:t,width:z.viewport.width,height:z.viewport.height,delay:Math.ceil(1e3/r)});Fe("Finished"),yr.saveAs(l,"spCapture.gif"),setTimeout(()=>Fe(""),1e3)})},cl=[{value:"rotate",label:"Rotate",frames:bi(wi),gif:yi(wi),clip:uh,preview:dh},{value:"speedDraw",label:"Speed Draw",frames:bi(xi),gif:yi(xi),clip:ph,preview:vh}];async function wi(){const{frameRate:e=30,duration:r=5}=z.userData.specialCapture??{};let t=z.scene.background;z.scene.background=null;const{sqrt:n,sin:l,cos:a,atan:i,PI:o}=Math;let{x:s,y:f,z:p}=z.camera.position;const{x:c,z:d}=z.controls.target,h=n((s-c)**2+(p-d)**2);if(h===0){Fe("Invalid camera settings"),setTimeout(()=>Fe(""),1e3);return}const v=r*e,D=2*o/v,S=p===d?o/4:i((s-c)/(p-d)),g=[];let w=S;for(let C=0;C<v;C++){z.update(1/e),s=c+h*l(w),p=d+h*a(w),z.camera.position.set(s,f,p),z.controls.update(),z.render();const I=z.canvas.toDataURL();g.push(I),w+=D}return z.scene.background=t,g}function uh(){Fe("Recording...");const{frameRate:e=30,duration:r=5}=z.userData.specialCapture??{},t=z.loop.paused,n=z.record.settings.frameRate;z.record.settings.frameRate=e;let l=0;const{sqrt:a,sin:i,cos:o,atan:s,PI:f}=Math;let{x:p,y:c,z:d}=z.camera.position;const{x:h,z:v}=z.controls.target,D=a((p-h)**2+(d-v)**2);if(D===0){Fe("Invalid camera settings"),setTimeout(()=>Fe(""),1e3);return}const S=2*f/r;let w=d===v?f/4:s((p-h)/(d-v));const C=z.addEventListener("timeUpdate",({dt:I})=>{l+=I,l>r&&(z.record.stop(),setTimeout(()=>Fe(""),1e3),z.removeEventListener("timeUpdate",C),t&&z.loop.pause(),z.record.settings.frameRate=n),p=h+D*i(w),d=v+D*o(w),z.camera.position.set(p,c,d),w+=S*I});t&&z.loop.resume(),z.record.start()}function dh(){const{duration:e=5}=z.userData.specialCapture??{},r=z.loop.paused;let t=0;const{sqrt:n,sin:l,cos:a,atan:i,PI:o}=Math;let{x:s,y:f,z:p}=z.camera.position;const{x:c,z:d}=z.controls.target,h=n((s-c)**2+(p-d)**2);if(h===0){Fe("Invalid camera settings"),setTimeout(()=>Fe(""),1e3);return}const v=2*o/e;let S=p===d?o/4:i((s-c)/(p-d));const g=z.addEventListener("timeUpdate",({dt:w})=>{t+=w,t>e&&(z.removeEventListener("timeUpdate",g),r&&z.loop.pause()),s=c+h*l(S),p=d+h*a(S),z.camera.position.set(s,f,p),S+=v*w});r&&z.loop.resume()}const fh=e=>{const{geometry:r}=e,{start:t,count:n}=r.groups.at(-1);return{geometry:r,count:t+n}},aa=e=>{const r=e.meshes.visible,t=e.attachment.list.flatMap(n=>n.meshes.visible);return[...r,...t].map(fh)};async function xi(){const e=_e.getState().activeModel,r=aa(e).sort((d,h)=>h.count-d.count),t=r.map(({count:d})=>d),n=t.map((d,h)=>t.slice(0,h+1).reduce((v,D)=>v+D,0));n.unshift(0);const l=n.at(-1),{frameRate:a=30,duration:i=5}=z.userData.specialCapture??{};let o=z.scene.background;z.scene.background=null;const s=i*a,f=[];let p=0,c=0;r.forEach(({geometry:d})=>d.drawRange.count=0);for(let d=0;d<=s;d++){e.update(1/a),c=Math.ceil(l*d/s),r[p].geometry.drawRange.count=c-n[p];const h=c-n[p+1];h>=0&&(r[p++].geometry.drawRange.count=1/0,p<r.length&&(r[p].geometry.drawRange.count=h)),z.render();const v=z.canvas.toDataURL();f.push(v)}return z.scene.background=o,f}function ph(){const e=_e.getState().activeModel;Fe("Recording...");const r=aa(e).sort((v,D)=>D.count-v.count),t=r.map(({count:v})=>v),n=t.map((v,D)=>t.slice(0,D+1).reduce((S,g)=>S+g,0));n.unshift(0);const l=n.at(-1),{frameRate:a=30,duration:i=5}=z.userData.specialCapture??{},o=z.loop.paused,s=z.record.settings.frameRate;z.record.settings.frameRate=a;let f=0,p=0;r.forEach(({geometry:v})=>v.drawRange.count=0);const{ceil:c,max:d}=Math,h=z.addEventListener("timeUpdate",({dt:v})=>{const D=c(l*v/i);p+=d(D,1),r[f].geometry.drawRange.count=p-n[f],p-n[f+1]>=0&&(r[f++].geometry.drawRange.count=1/0,f>=r.length&&(z.removeEventListener("timeUpdate",h),setTimeout(()=>{Fe(""),z.record.stop(),o&&z.loop.pause(),z.record.settings.frameRate=s},1e3)))});o&&z.loop.resume(),z.record.start()}function vh(){const e=_e.getState().activeModel,r=aa(e).sort((d,h)=>h.count-d.count),t=r.map(({count:d})=>d),n=t.map((d,h)=>t.slice(0,h+1).reduce((v,D)=>v+D,0));n.unshift(0);const l=n.at(-1),{duration:a=5}=z.userData.specialCapture??{},i=z.loop.paused;let o=0,s=0;r.forEach(({geometry:d})=>d.drawRange.count=0);const{ceil:f,max:p}=Math,c=z.addEventListener("timeUpdate",({dt:d})=>{const h=f(l*d/a);s+=p(h,1),r[o].geometry.drawRange.count=s-n[o],s-n[o+1]>=0&&(r[o++].geometry.drawRange.count=1/0,o>=r.length&&(z.removeEventListener("timeUpdate",c),setTimeout(()=>{i&&z.loop.pause()},1e3)))});i&&z.loop.resume()}const hh=[{propName:"program",label:"Program",type:"select",options:cl},{propName:"frameRate",label:"Frame Rate",type:"slider",min:10,max:60,step:10},{propName:"duration",label:"Duration (s)",type:"number",min:1,max:60,step:.5}];function gh(){const e=r=>{var l,a;const{type:t}=r.currentTarget.dataset,{program:n="rotate"}=z.userData.specialCapture??{};(a=(l=cl.find(i=>i.value===n))==null?void 0:l[t])==null||a.call(l)};return m($e,{className:"SpecialCapture SettingGroup",children:[m(ae,{children:m("div",{children:"Special Capture"})}),m(ae,{children:[m(cr,{target:z.userData.specialCapture,propList:hh}),m("div",{className:"SpecialCapture-actions",children:[m(fe,{"data-type":"preview",onClick:e,title:"Preview",startIcon:m(Tn,{}),children:"Preview"}),m(fe,{"data-type":"frames",onClick:e,title:"Get all frames as zip",startIcon:m(Mr,{}),children:"Get Frames"}),m(fe,{"data-type":"gif",onClick:e,title:"Download as GIF",startIcon:m(Pn,{}),children:"Get GIF"}),z.record&&m(fe,{"data-type":"clip",onClick:e,startIcon:m(Nt,{}),title:"Record Clip",children:"Get Clip"})]})]})]})}function mh(){return m(ae,{children:[m($i,{}),m("span",{className:"break"}),m(Kv,{}),m(ch,{}),m("span",{className:"break"}),m(gh,{}),m("span",{className:"break"}),m($v,{})]})}function bh(e,r){return new Promise(function(t,n){let l=new XMLHttpRequest;l.open(e,r),l.onload=function(){this.status>=200&&this.status<300?t(l.response):n({status:this.status,statusText:l.statusText})},l.onerror=function(){n({status:this.status,statusText:l.statusText})},l.send()})}const yh=e=>bh("GET",e),wh=async e=>{const r=`https://api.github.com/repos/dgk3593/dl-model/contents/public/fbx/${e}`,t=await yh(r);return JSON.parse(t).map(l=>l.name)},xh=async e=>await(await fetch(e)).arrayBuffer(),Dh=async e=>{const t=(await wh(e)).map(l=>{const a=`https://dgk3593.github.io/dl-model/fbx/${e}/${l}`,i=xh(a);return{name:l,data:i}}),n=await El(t);yr.saveAs(n,`${e}.zip`)},Sh=()=>{const{activeModel:e}=_e.getState(),{setLoadingMsg:r}=Be.getState(),{screenshot:t}=z;if(!e){r("No model"),setTimeout(()=>r(""),2e3);return}r("Generating frames..."),setTimeout(async()=>{const n=t.getAllFrames(e);if(!n){r("Invalid animation"),setTimeout(()=>r(""),2e3);return}r(`Creating gif from ${n.length} frames...`);const{frameRate:l}=t.settings,{makeGif:a}=await Tt(async()=>{const{makeGif:s}=await import("./f_DOqUXJZN-index.js");return{makeGif:s}},[]),i=await a({frames:n,width:z.viewport.width,height:z.viewport.height,delay:Math.ceil(1e3/l)});r("Finished");const o=e.userData.name??e.id??"ani";yr.saveAs(i,`${o}.gif`),setTimeout(()=>r(""),1e3)})},Ch=()=>{const{activeModel:e}=_e.getState(),{setLoadingMsg:r}=Be.getState(),{screenshot:t}=z;if(!e){r("No model"),setTimeout(()=>r(""),2e3);return}r("Generating frames..."),setTimeout(async()=>{const n=t.getAllFramesAsArrayBuffer(e);if(!n){r("Invalid animation"),setTimeout(()=>r(""),2e3);return}r(`Creating apng from ${n.length} frames...`);const{frameRate:l}=t.settings,a=Math.ceil(1e3/l),i=Array(n.length-1).fill(a),{width:o,height:s}=z.viewport,f=sl.encode(n,o,s,0,i),p=new Blob([f],{type:"image/apng"});r("Finished");const c=e.userData.name??e.id??"ani";yr.saveAs(p,`${c}.png`),setTimeout(()=>r(""),1e3)})};window.quickApng=Ch;function _h(){const{activeModel:e}=_e(),{record:r,screenshot:t}=z,n=Be(o=>o.sidebar.modal.open);return m("div",{className:"QuickAction",children:[m(hr,{title:"Change Background",onClick:()=>n("background"),children:m(qi,{})}),m(hr,{title:"Get Screenshot",onClick:o=>{o.stopPropagation(),t.downloadFrame()},children:m(Bs,{})}),m(hr,{title:"Create GIF",onClick:Sh,children:m(Pn,{fontSize:"large"})}),r&&m(hr,{title:"Record Current Animation",onClick:o=>{o.stopPropagation();const{clipDuration:s}=e.animation.current;if(s===0||s===1/0){alert("Can't record");return}const{animation:f}=e;f.stop(),f.addCountedEventListener("ChainFinished",()=>r.stop()),f.play(),r.start()},children:m(Nt,{})}),m(hr,{title:"Download Current Model",onClick:()=>Dh(e.id),children:m(Mr,{})})]})}const Ih=["Model","Scene","Export"].map(e=>({name:e})),Eh={Model:hc,Scene:Wv,Export:mh};function Ah(){const{tab:e,setTab:r}=Be(l=>l.sidebar.settings),t=(l,a)=>r(a),n=Eh[e];return m(ae,{children:[m(_h,{}),m(ps,{value:e,tabs:Ih,onChange:t}),m(n,{}),m("span",{className:"bottom-space"})]})}function kh(){var f;const{target:e,setTarget:r}=Or();if(!e)return null;const{inputTarget:t}=Pt(),{loadState:n}=Vr(),l=e==null?void 0:e.id,[a,i]=ur((f=e==null?void 0:e.userData)==null?void 0:f.name);Ae(()=>{var p;i((p=e==null?void 0:e.userData)==null?void 0:p.name),!(a||!e)&&ki(l).then(c=>{i(c.name),e.userData.name=c.name})},[e]);const o=a??l;return e&&m("div",{className:"ChainMaker-target",children:["Target",m(fe,{onClick:async()=>{var d;const p=await t();if(!p)return;const c=p[0];n((d=c.userData)==null?void 0:d.aniSelectState),r(c)},title:"Click to change",children:[m(Ni,{modelId:l,alt:o}),m("span",{className:"name",children:o})]})]})}function Rh({target:e}){var s;const{toggle:r}=Or(),{inputAni:t}=Pt(),{activeModel:n}=_e(),l=((s=e==null?void 0:e.userData)==null?void 0:s.chain)??[];return m("div",{className:"ChainMaker-header",children:[m("div",{className:"ChainMaker-title",children:[m(ds,{disabled:!e,children:[m(fe,{variant:"contained",title:"Play All",onClick:()=>{const f=Pi(l);e==null||e.animation.addChain(f)},children:m(Tn,{})}),m(fe,{variant:"contained",title:"Add",onClick:async()=>{var v;const f=await t();if(!f)return;const[p,c,d]=f,h=In(p,c);(v=e.userData)==null||v.chain.push(...h),e.userData.aniSelectState=d},children:m(Bt,{})})]}),"ChainMaker"]}),m(kh,{}),m(Mt,{onClick:()=>{var f;r(),Vr.getState().loadState((f=n==null?void 0:n.userData)==null?void 0:f.aniSelectState)},color:"white",title:"Close Chain Maker"})]})}function Th({ani:e}){const[r,t]=ur({timeScale:e.timeScale,reps:e.reps}),n=l=>{const{name:a,value:i}=l.target,o=a==="reps"?parseInt(i):parseFloat(i),s=isNaN(o)?1:o;e[a]=s,t(f=>({...f,[a]:s}))};return m("div",{className:"ChainAni-advanced",children:[m(xt,{onChange:n,label:"Speed",size:"small",margin:"dense",variant:"filled",inputProps:{type:"number",step:.25,name:"timeScale"},value:r.timeScale}),m(xt,{onChange:n,label:"Repetitions",size:"small",margin:"dense",variant:"filled",inputProps:{type:"number",name:"reps"},value:r.reps})]})}const Ph={type:"number",min:0,max:100,step:.25};function Di({value:e,label:r,onChange:t,index:n}){return m(xt,{className:"SetNumbers-number",onChange:a=>{const i=a.currentTarget.getAttribute("index"),o=parseFloat(a.currentTarget.value);t(o,i)},value:e,label:r,size:"small",margin:"dense",variant:"outlined",inputProps:{...Ph,index:n}})}const Bh=({value:e,onChange:r,reset:t})=>m("div",{className:"SetNumbers",children:[m(Di,{value:e[0],label:"Start (%)",onChange:r,index:"0"}),m(Di,{value:e[1],label:"End (%)",onChange:r,index:"1"}),m(hr,{onClick:t,title:"Reset",children:m(Ps,{})})]});function Mh({ani:e}){const[r,t]=ur(e.duration??[0,100]),n=o=>{t(o),e.duration=o};return m($e,{disableGutters:!0,className:"ChainAni-duration",children:[m(ae,{children:" Duration"}),m(ae,{children:[m(Bh,{value:r,onChange:(o,s)=>{const f=[...r];f[s]=o,n(f)},reset:()=>n([0,100])}),m("div",{className:"duration-slider",children:m(fs,{size:"small",value:r,onChange:(o,s)=>n(s)})})]})]})}const pn=1024,Pr=64;function Nh({index:e,part:r}){var I;const{activeModel:t}=_e(),n=(I=t==null?void 0:t.face)==null?void 0:I[`${r}List`];if(!n)return m(ae,{children:"N/A"});const l=t.userData[`${r}Uv`]??Ql(n);if(t.userData[`${r}Uv`]=l,!l[e-1])return m(ae,{children:"N/A"});const a=es(t.id),[i,o]=l[0].u,[s,f]=l[0].v,p=o-i,c=f-s,d=p*pn,h=c*pn,v=d/Pr,D=pn/v,S=h/v,g={width:Pr,height:S,position:"relative"},w={content:'""',position:"absolute",backgroundImage:`url(${a})`,backgroundSize:`${D}px ${D}px`,width:Pr,height:S};return m("div",{style:g,children:m(Zr,{sx:(({u:k,v:R})=>{const _=k[1]-k[0]!==p,M=k[0],F=R[0],G=M*D,O=F*D,W=_?(Pr-S)/2:0;return _?{width:S,height:Pr,"&::after":{...w,width:S,height:Pr,backgroundPosition:`left -${G}px bottom -${O}px`,transform:`rotate(90deg) translate(-${W}px, -${W}px)`,position:"absolute"}}:{width:Pr,height:S,position:"relative","&::after":{...w,backgroundPosition:`left -${G}px bottom -${O}px`}}})(l[e-1])})})}const Oh=({part:e,...r})=>e==="eye"?m(rs,{...r}):m(ts,{...r});function Si({part:e,index:r,...t}){var a;const{target:n}=Or(),l=n==null?void 0:n.face;switch(l==null?void 0:l.type){case"uv":return m("div",{...t,"data-part":e,children:r?m(Oh,{part:e,texture:l[`${e}Texture`],index:r}):m(ae,{children:"Set"})});case"meshes":return!((a=l==null?void 0:l[`${e}List`])!=null&&a.length)?m("div",{style:{cursor:"default"},children:"N/A"}):m("div",{...t,"data-part":e,children:r?m(Nh,{part:e,index:r}):m(ae,{children:"Set"})});default:return m(ae,{})}}const Lh={type:"number",min:0,max:100,step:1},Fh={marginTop:"0.2rem"};function zh({details:e,onUpdate:r,onRemove:t}){const{id:n,time:l,eyeIdx:a,mouthIdx:i}=e,[o,s]=ur(l),{inputEye:f,inputMouth:p}=Pt(),c=()=>t(n),d=v=>{const D=parseFloat(v.target.value);s(D);const S={...e,time:D};r(S)},h=async v=>{const{part:D}=v.currentTarget.dataset,S=D==="eye"?await f():await p();if(!S)return;const g=S[0]?S[0]:void 0,w={...e,[`${D}Idx`]:g};r(w)};return m(ae,{children:[m("div",{onClick:c,children:m(kn,{})}),m(xt,{onChange:d,inputProps:Lh,value:o,margin:"dense",size:"small",variant:"standard",sx:Fh}),m(Si,{part:"eye",index:a,"data-id":n,onClick:h}),m(Si,{part:"mouth",index:i,"data-id":n,onClick:h})]})}function Gh({ani:e}){const{target:r}=Or(),{aniAction:t}=e,n=[],l=[];t.forEach(d=>{const{time:h,["face.eyeIdx"]:v,["face.mouthIdx"]:D,...S}=d;(v||D)&&n.push({id:oa(),time:h,eyeIdx:v,mouthIdx:D}),Object.keys(S).length&&l.push({time:h,...S})});const[a,i]=ur(n),o=d=>{const h=d.map(({time:w})=>w),v=l.map(({time:w})=>w),g=[...new Set([...h,...v])].sort((w,C)=>w-C).map(w=>{const C=d.find(M=>M.time===w),{eyeIdx:I,mouthIdx:k}=C,_={...l.find(M=>M.time===w),time:w};return I&&(_["face.eyeIdx"]=I),k&&(_["face.mouthIdx"]=k),_});e.aniAction=g,i(d)},s=d=>{const{id:h}=d,v=a.map(D=>D.id===h?d:D);o(v)},f=d=>{const h=a.filter(v=>v.id!==d);i(h),o(h)},p=()=>i(d=>[...d,{id:oa()}]),c=a.map(d=>m(zh,{details:d,onUpdate:s,onRemove:f},d.id));return r.face&&m($e,{disableGutters:!0,className:"ChainAni-face",children:[m(ae,{children:"Facial Expression"}),m("div",{className:"ChainAniFace",children:[(a==null?void 0:a.length)>0&&m(ae,{children:[m("div",{}),m("div",{children:"Time (%)"}),m("div",{children:"Eye"}),m("div",{children:"Mouth"}),c]}),m("div",{onClick:p,children:m(Bt,{})})]})]})}const Hh=({onClick:e})=>m(hr,{onClick:e,title:"Play",children:m(Tn,{})});function Wh({target:e,ani:r,index:t}){const{chain:n}=e.userData,l=o=>{o.stopPropagation(),n.remove(r)},a=o=>{o.stopPropagation();const s=Pi([r]);e==null||e.animation.addChain(s)},i=o=>m($e,{className:"ChainAni",...o.draggableProps,ref:o.innerRef,children:[m(ae,{children:[m(Hh,{onClick:a}),m("div",{...o.dragHandleProps,className:"ChainAni-name",children:r.name}),m(Mt,{onClick:l,title:"Delete"})]}),m(ae,{children:[m(Th,{ani:r}),m(Mh,{ani:r}),m(Gh,{ani:r})]})]});return m(tl,{draggableId:r.id,index:t,children:i})}function qh({target:e}){var i;if(!((i=e==null?void 0:e.userData)!=null&&i.chain))return null;const[r,t]=gr(),n=e.userData.chain;return Ae(()=>{const o=n.addEventListener("change",t);return()=>n.removeEventListener("change",o)},[]),m(Yo,{onDragEnd:o=>{const{destination:s,source:f}=o;if(!s||s.index===f.index)return;const p=[...n],c=p.splice(f.index,1)[0];p.splice(s.index,0,c),n.length=0,n.push(...p)},children:m(ta,{droppableId:"chainList",children:o=>m("div",{ref:o.innerRef,...o.droppableProps,children:[n.map((s,f)=>m(Wh,{target:e,index:f,ani:s},s.id)),o.placeholder]},r)})})}function Uh(){const{activeModel:e}=_e(),{target:r,setTarget:t}=Or();return Ae(()=>{if(!r)return;const n=r.addEventListener("dispose",()=>t(e));return()=>r.removeEventListener("dispose",n)},[r]),Ae(()=>{r&&z.loadedModel.includes(r)||t(e)},[r,e]),m("div",{className:"ChainMaker",children:[m(Rh,{target:r}),m(qh,{target:r})]},r==null?void 0:r.uniqueId)}const $h={sx:bn.paper};function Vh({open:e}){const r=Be(l=>l.sidebar.toggle),t=Or(l=>l.open),n=m(Zr,{sx:bn.sidebarHeader,children:[Ys,Ks,m(Mt,{color:"white",onClick:r,title:"Close Sidebar"})]});return m(Wi,{className:"Sidebar",open:e,onClose:r,variant:"persistent",sx:bn.sidebar,PaperProps:$h,children:[n,t?m(Uh,{}):m(Ah,{}),m(Js,{})]})}const Ci="23rem",_i={dock:{width:Ci},Paper:{width:Ci,border:"unset",scrollbarWidth:"thin",scrollbarColor:"rgba(128, 0, 0, 0.8) rgba(255, 255, 255, 0.3)","&::-webkit-scrollbar":{width:"4px",backgroundColor:"rgba(128, 0, 0, 0.3)"},"&::-webkit-scrollbar-thumb":{width:"4px",backgroundColor:"rgba(128, 0, 0, 0.8)",borderRadius:"2px"}}};function Zh(){const{mode:e,handleSelect:r,close:t}=Be(l=>l.dock),n=Ei[e]??Zr;return e&&m(Wi,{className:"Dock",sx:_i.dock,open:!!e,variant:"persistent",anchor:"right",PaperProps:{sx:_i.Paper},children:[m(Mt,{onClick:t,title:"Close Dock"}),m(_n,{fallback:m(An,{}),children:m(n,{compact:!0,onSelect:r})})]})}function jh(){const{Component:e,props:r={},close:t,onClose:n}=Pt();return m(Bi,{open:!!e,closeModal:n??t,children:m(_n,{fallback:m(An,{}),children:m(e,{...r})})})}const ul=["chara-regular","chara-allies","chara-enemies","dragon-regular","dragon-special","weapon-regular","weapon-special","weapon-extra","boss-archdemon","boss-agito","boss-raid","boss-void","boss-others","model-unlisted"],dl=["ani-home","ani-quest","ani-weapon","ani-gun","ani-genericSkill","ani-uniqueSkill","ani-uniqueCombo","ani-uniqueFS","ani-uniqueVictory","ani-uniqueOther","ani-misc","ani-extra"],fl=["background-image","background-skybox","model-texture"],Kh=[...ul,...dl,...fl],Yh=Object.freeze(Object.defineProperty({__proto__:null,all:Kh,animation:dl,model:ul,others:fl},Symbol.toStringTag,{value:"Module"})),vn=e=>Al(Yh[e]??[]);function pl(e){return typeof e!="object"||e===null||Object.isFrozen(e)?e:(Object.keys(e).forEach(r=>{typeof e[r]=="object"&&(e[r]=pl(e[r]))}),Object.freeze(e))}const hn=Xl.getState().set,gn=!!indexedDB,Xh=async()=>{const e=vn("others"),r=vn("model"),t=vn("animation"),n=await e;hn(n);const l=await r;hn(l);const a=gn&&kl(l),i=await t;hn(i),gn&&xs(i),await Rl,await a,gn&&await Tl(),console.info("Data Load Complete"),window.appData=pl({model:l,animation:i,others:n})};function kg(){const e=Be(s=>s.sidebar),r=Be(s=>s.setLoadingMsg),t=Pl(),{activeModel:n,setActiveModel:l}=_e(),{setSource:a,setSourceName:i}=Vr(s=>s.personalAni),o=Mi("(min-width:640px)");return Ae(()=>{t&&r("Loading"),l(z.model[0]);const s=z.model.addEventListener("change",()=>{z.model.includes(n)||l(z.model[0])});return Xh(),window.addEventListener("unload",()=>indexedDB==null?void 0:indexedDB.deleteDatabase("model-viewer")),r(""),()=>z.model.removeEventListener("change",s)},[]),Ae(()=>{n&&(i(n==null?void 0:n.userData.name),a(n==null?void 0:n.id))},[n]),m(ae,{children:[m("button",{title:"Settings",className:"sidebar-toggle",onClick:e.toggle,children:m(Fs,{})}),m(jh,{}),m(Vh,{open:e.open}),o&&m(Zh,{})]})}export{kg as default};
