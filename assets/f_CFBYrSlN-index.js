import{u as e,k as a,y as u,j as x,g as v,v as y}from"./index-DpIalBXC.js";import{u as B}from"./f_CUIqv-MX-useKey.js";import{A as h}from"./f_DaxaRQE8-Accordion.js";/* empty css                 */import{M as C}from"./f_Ctp8qDfm-ModelIcon.js";import{B as D}from"./f_Bp-kZjNz-Button.js";import{C as T}from"./f_D-1wV3pv-Check.js";import{D as b,a as I}from"./f_80ntkcd2-DialogTitle.js";import{B as M}from"./f_DLSXRZEY-Box.js";import"./f_BX0KNnxF-three.js";import"./f_D32HeQ7v-useToggleState.js";import"./f_DyGFBxC_-createSvgIcon.js";import"./f_pl0ruI13-CircularProgress.js";function N({list:t,label:i,defaultOpen:o=!1,onSelect:l}){return e(h,{disableGutters:!0,defaultOpen:o,className:"BoneChildren",children:[e(a,{children:i}),e(a,{children:t.map(n=>e(p,{target:n,onSelect:l},n.uniqueId))})]})}function p({target:t,onSelect:i}){if(!t)return null;const[o,l]=B();u(()=>{const r=t.addEventListener("AttachmentChanged",l);return()=>t.removeEventListener("AttachmentChanged",r)},[]),u(()=>{t.userData.name||x(t.id).then(r=>{t.userData.name=r?.name,l()})},[]);const n=t.id,c=t?.userData.name,f=c??n,g=e(C,{modelId:n,alt:c??n,className:"ModelTree-icon"}),s=v(t.attachment.list.map(r=>r.parentBone)),d=e(a,{children:[g,e("div",{className:"target-name",children:f}),e(D,{title:"Select",variant:"contained",onClick:()=>i(t),children:e(T,{})})]});return s.length?e(h,{disableGutters:!0,className:"ModelTree",children:[d,e(a,{children:s.map(r=>e(N,{defaultOpen:s.length===1,label:r,onSelect:i,list:t.attachment[r]}))})]},o):e("div",{className:"ModelTree",children:d},o)}const m={root:{display:"flex",flexDirection:"column",overflowY:"hidden",minHeight:"20rem",minWidth:"20rem"},title:{textAlign:"center",padding:"0.5rem 2rem",display:"flex",alignItems:"center",justifyContent:"center",borderBottom:"1px solid rgba(16, 16, 16, 0.4)",boxShadow:"0 0.2rem 0.3rem rgba(16, 16, 16, 0.4)",minHeight:"4rem"},content:{padding:"2rem 1rem",display:"flex",flexDirection:"column",flexWrap:"wrap"}};function U({onSelect:t=console.log,onAfterSelect:i}){const o=y.model,l=n=>{t(n),i?.()};return e(M,{sx:m.root,className:"TargetPicker",children:[e(b,{sx:m.title,children:"Select Target"}),e(I,{sx:m.content,children:o.length?o.map(n=>e(p,{target:n,onSelect:l},n.uniqueId)):"No model"})]})}export{U as default};
