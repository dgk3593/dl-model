import{o as c}from"./888d32ea-jsxRuntime.module.js";import{i as N,j as S,k as X}from"./1c32777d-viewer.js";import{B as z}from"./fa2036ae-Box.js";import{B as C}from"./b44d1d10-Button.js";const O=t=>`${S}/${t}/${t}.png`,Y=[1,2,3,4,5,6,7,8,9],$=64,H=Y.map(t=>{if(t===1)return[-280,-170];const e=(t-2)%4,o=Math.floor(t/6),n=-(24+e*128),s=-(298+o*128);return[n,s]}),T=(t,e)=>{const[o,n]=H[e-1],[s,a]=N(t),r=s*128,u=a*128,h=o-r,i=n+u;return{x:h,y:i}},j=(t,e)=>{const{x:o,y:n}=T(t,e),s=n-$/2;return{x:o,y:s}};function k({texture:t,x:e,y:o,...n}){const a={backgroundImage:`url(${O(t)})`,backgroundSize:"512px 512px",backgroundPosition:`${e}px ${o}px`,width:$,height:$/2};return c("div",{style:a,...n})}function Q({texture:t,index:e,...o}){const{x:n,y:s}=T(t,e);return c(k,{texture:t,x:n,y:s,className:"EyeBox",...o})}function V({texture:t,index:e,...o}){const{x:n,y:s}=j(t,e);return c(k,{texture:t,x:n,y:s,className:"EyeBox",...o})}const E=t=>{let e=t[0],o=t[0];return t.forEach(n=>{e=n<e?n:e,o=n>o?n:o}),[e,o]},W=t=>t.map(e=>{const o=e.geometry.attributes.uv.array,n=o.filter((i,x)=>x%2===0),s=o.filter((i,x)=>x%2===1),[a,r]=E(n),[u,h]=E(s);return{u:[a,r],v:[u,h]}});const A=t=>`${S}/${t}/${X(t)}.png`,m=1024,d=160;function Z({id:t,uvList:e,onClick:o,part:n}){const s=A(t).replace(">",""),[a,r]=e[0].u,[u,h]=e[0].v,i=r-a,x=h-u,F=i*m,U=x*m,M=F/d,p=m/M,l=U/M,I={width:d,height:l,position:"relative",borderRadius:"0.5rem",overflow:"hidden"},b={content:'""',position:"absolute",backgroundImage:`url(${s})`,backgroundSize:`${p}px ${p}px`,width:d,height:l},R=({u:f,v:g})=>{const v=f[1]-f[0]!==i,_=f[0],D=g[0],y=_*p,B=D*p,P=v?(d-l)/2:0;return v?{width:l,height:d,"&::after":{...b,width:l,height:d,backgroundPosition:`left -${y}px bottom -${B}px`,transform:`rotate(90deg) translate(-${P}px, -${P}px)`,position:"absolute"}}:{width:d,height:l,position:"relative","&::after":{...b,backgroundPosition:`left -${y}px bottom -${B}px`}}};return c("div",{className:"MeshFaceButton",children:[e.map((f,g)=>c("div",{style:I,onClick:o,"data-index":g+1,"data-part":n,children:c(z,{sx:R(f)})})),c(C,{"data-part":n,"data-index":"0",onClick:o,variant:"outlined",children:"Remove"})]})}const q=([t,...e])=>`${t.toUpperCase()}${e.join("")}`;function w({target:t,onSelect:e,part:o}){var r;const n=(r=t==null?void 0:t.face)==null?void 0:r[`${o}List`];if(!n)return null;const s=t.userData[`${o}Uv`]??W(n);t.userData[`${o}Uv`]=s;const a=u=>{const{index:h,part:i}=u.currentTarget.dataset;e(parseInt(h),i)};return n&&c("div",{className:"MeshPartSelect",children:[c("h3",{children:["Select ",q(o)]}),c(Z,{id:t.id,uvList:s,onClick:a,part:o})]})}const tt=t=>c(w,{part:"eye",...t}),ot=t=>c(w,{part:"mouth",...t});export{Q as E,V as M,A as a,tt as b,ot as c,W as g,Y as i};
