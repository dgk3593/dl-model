const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/f_C_O-w4hE-GLTFExporter.js","assets/f_C6twonnQ-three.js"])))=>i.map(i=>d[i]);
import{D as Ii,A as De,q as vl,y as Ae,u as m,t as hl,i as Me,h as In,V as Ei,a as Ie,v as z,W as Ai,X as gl,L as En,Y as ml,Z as bl,H as Vr,R as we,k as ae,e as yl,d as ur,j as ki,K as Or,a0 as wl,S as Ri,T as vr,x as An,a1 as xl,a2 as Dl,a3 as Sl,a4 as Cl,a5 as _l,a6 as yr,_ as Tt,a7 as Il,a8 as Ti,a9 as El,b as Pt,aa as Pi,ab as la,ac as Al,ad as kl,ae as Rl,af as Tl,ag as Pl}from"./index-CXaJUJXq.js";import{c as Be}from"./f_lpwmES05-createSvgIcon.js";import{M as Mi,F as bn,a as Ml,b as Bl,P as Nl,O as Ol,T as Ll,c as Fl,d as zl,e as Gl,f as Hl,D as Wl,S as ql,g as Ul,I as $l,h as cr,i as Vl,A as Mt,C as Bt}from"./f_ClGmvMxc-BoneManager.js";import{L as kn}from"./f_CpqFXyN8-lists.js";import{I as hr,C as Rn}from"./f_CsyCjFz--Close.js";import{B as Zr}from"./f_D0xu9FBA-Box.js";import{u as Bi,c as Zl}from"./f_B5HHsiO4-styles.js";import{u as gr}from"./f_Ctmc4HAV-useKey.js";import{B as pe}from"./f_B8XQQiXl-Button.js";import{A as $e,a as jl,b as Kl}from"./f_D-Y0H06g-Accordion.js";import{M as Yl,T as xt,u as Xl}from"./f_TK_mYnYp-Gallery.js";import"./f_Bx1bFnIx-GlowToggle.js";import{M as Jl}from"./f_Bg1--fhg-filterConfig.js";import"./f_DjCiaqaA-Selector.js";import{g as Ql,c as es,E as rs,b as ts}from"./f_sFNV7Guu-MeshMouthSelect.js";import"./f_CvXzPusl-index.js";import"./f_Dos6WK6c-index.js";import"./f_BW0d0FCo-index.js";/* empty css                 */import{M as Ni}from"./f_BGw2mQy_-ModelIcon.js";import{u as ns}from"./f_DTx1KR5_-useToggleState.js";import{z as as,a as is,g as os,u as ls,c as qt,s as Tn,d as et,e as ss,m as Oi,n as cs,E as Dt,M as le,N as sa,_ as Li}from"./f_G16KzVUn-CircularProgress.js";import{b as us,P as Pn,B as ds,S as fs}from"./f_C3X2hrEh-SkipPrevious.js";import{T as ps}from"./f_BcVU3Wqt-TabBar.js";import{c as Fi,T as vs,l as hs,o as zi,d as gs,r as ms,m as ca,u as bs,n as ys,e as pt,M as ws,a as xs}from"./f_DNfq5VDW-Popover.js";import{i as Ds}from"./f_C5BY0W7F-aniFunction.js";import"./f_C6twonnQ-three.js";import"./f_EM25r9df-ColorButton.js";import"./f_Ywx_jfor-DialogTitle.js";import"./f_BW9pxQd9-FacePartSelector.js";import"./f_D1jkGt3C-index.js";function Ss(e,r,t){const n=r.getBoundingClientRect(),l=t&&t.getBoundingClientRect(),a=zi(r);let i;if(r.fakeTransform)i=r.fakeTransform;else{const f=a.getComputedStyle(r);i=f.getPropertyValue("-webkit-transform")||f.getPropertyValue("transform")}let o=0,s=0;if(i&&i!=="none"&&typeof i=="string"){const f=i.split("(")[1].split(")")[0].split(",");o=parseInt(f[4],10),s=parseInt(f[5],10)}return e==="left"?l?`translateX(${l.right+o-n.left}px)`:`translateX(${a.innerWidth+o-n.left}px)`:e==="right"?l?`translateX(-${n.right-l.left-o}px)`:`translateX(-${n.left+n.width-o}px)`:e==="up"?l?`translateY(${l.bottom+s-n.top}px)`:`translateY(${a.innerHeight+s-n.top}px)`:l?`translateY(-${n.top-l.top+n.height-s}px)`:`translateY(-${n.top+n.height-s}px)`}function Cs(e){return typeof e=="function"?e():e}function vt(e,r,t){const n=Cs(t),l=Ss(e,r,n);l&&(r.style.webkitTransform=l,r.style.transform=l)}const _s=Ii(function(r,t){const n=Fi(),l={enter:n.transitions.easing.easeOut,exit:n.transitions.easing.sharp},a={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:i,appear:o=!0,children:s,container:f,direction:p="down",easing:c=l,in:d,onEnter:h,onEntered:v,onEntering:D,onExit:S,onExited:g,onExiting:w,style:C,timeout:_=a,TransitionComponent:R=vs,...T}=r,I=De(null),B=as(hs(s),I,t),L=G=>ee=>{G&&(ee===void 0?G(I.current):G(I.current,ee))},H=L((G,ee)=>{vt(p,G,f),ms(G),h&&h(G,ee)}),F=L((G,ee)=>{const fe=ca({timeout:_,style:C,easing:c},{mode:"enter"});G.style.webkitTransition=n.transitions.create("-webkit-transform",{...fe}),G.style.transition=n.transitions.create("transform",{...fe}),G.style.webkitTransform="none",G.style.transform="none",D&&D(G,ee)}),q=L(v),k=L(w),W=L(G=>{const ee=ca({timeout:_,style:C,easing:c},{mode:"exit"});G.style.webkitTransition=n.transitions.create("-webkit-transform",ee),G.style.transition=n.transitions.create("transform",ee),vt(p,G,f),S&&S(G)}),X=L(G=>{G.style.webkitTransition="",G.style.transition="",g&&g(G)}),K=G=>{i&&i(I.current,G)},j=vl(()=>{I.current&&vt(p,I.current,f)},[p,f]);return Ae(()=>{if(d||p==="down"||p==="right")return;const G=gs(()=>{I.current&&vt(p,I.current,f)}),ee=zi(I.current);return ee.addEventListener("resize",G),()=>{G.clear(),ee.removeEventListener("resize",G)}},[p,d,f]),Ae(()=>{d||j()},[d,j]),m(R,{nodeRef:I,onEnter:H,onEntered:q,onEntering:F,onExit:W,onExited:X,onExiting:k,addEndListener:K,appear:o,in:d,timeout:_,...T,children:(G,{ownerState:ee,...fe})=>hl(s,{ref:B,style:{visibility:G==="exited"&&!d?"hidden":void 0,...C,...s.props.style},...fe})})});function Is(e){return is("MuiDrawer",e)}os("MuiDrawer",["root","docked","paper","anchorLeft","anchorRight","anchorTop","anchorBottom","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const Gi=(e,r)=>{const{ownerState:t}=e;return[r.root,(t.variant==="permanent"||t.variant==="persistent")&&r.docked,r.modal]},Es=e=>{const{classes:r,anchor:t,variant:n}=e,l={root:["root",`anchor${et(t)}`],docked:[(n==="permanent"||n==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${et(t)}`,n!=="temporary"&&`paperAnchorDocked${et(t)}`]};return ss(l,Is,r)},As=Tn(ws,{name:"MuiDrawer",slot:"Root",overridesResolver:Gi})(Oi(({theme:e})=>({zIndex:(e.vars||e).zIndex.drawer}))),ks=Tn("div",{shouldForwardProp:cs,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:Gi})({flex:"0 0 auto"}),Rs=Tn(xs,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.paper,r[`paperAnchor${et(t.anchor)}`],t.variant!=="temporary"&&r[`paperAnchorDocked${et(t.anchor)}`]]}})(Oi(({theme:e})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(e.vars||e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:({ownerState:r})=>r.anchor==="left"&&r.variant!=="temporary",style:{borderRight:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:r})=>r.anchor==="top"&&r.variant!=="temporary",style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:r})=>r.anchor==="right"&&r.variant!=="temporary",style:{borderLeft:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:r})=>r.anchor==="bottom"&&r.variant!=="temporary",style:{borderTop:`1px solid ${(e.vars||e).palette.divider}`}}]}))),Hi={left:"right",right:"left",top:"down",bottom:"up"};function Ts(e){return["left","right"].includes(e)}function Ps({direction:e},r){return e==="rtl"&&Ts(r)?Hi[r]:r}const Wi=Ii(function(r,t){const n=ls({props:r,name:"MuiDrawer"}),l=Fi(),a=bs(),i={enter:l.transitions.duration.enteringScreen,exit:l.transitions.duration.leavingScreen},{anchor:o="left",BackdropProps:s,children:f,className:p,elevation:c=16,hideBackdrop:d=!1,ModalProps:{BackdropProps:h,...v}={},onClose:D,open:S=!1,PaperProps:g={},SlideProps:w,TransitionComponent:C,transitionDuration:_=i,variant:R="temporary",slots:T={},slotProps:I={},...B}=n,L=De(!1);Ae(()=>{L.current=!0},[]);const H=Ps({direction:a?"rtl":"ltr"},o),q={...n,anchor:o,elevation:c,open:S,variant:R,...B},k=Es(q),W={slots:{transition:C,...T},slotProps:{paper:g,transition:w,...I,backdrop:ys(I.backdrop||{...s,...h},{transitionDuration:_})}},[X,K]=pt("root",{ref:t,elementType:As,className:qt(k.root,k.modal,p),shouldForwardComponentProp:!0,ownerState:q,externalForwardedProps:{...W,...B,...v},additionalProps:{open:S,onClose:D,hideBackdrop:d,slots:{backdrop:W.slots.backdrop},slotProps:{backdrop:W.slotProps.backdrop}}}),[j,G]=pt("paper",{elementType:Rs,shouldForwardComponentProp:!0,className:qt(k.paper,g.className),ownerState:q,externalForwardedProps:W,additionalProps:{elevation:R==="temporary"?c:0,square:!0,...R==="temporary"&&{role:"dialog","aria-modal":"true"}}}),[ee,fe]=pt("docked",{elementType:ks,ref:t,className:qt(k.root,k.docked,p),ownerState:q,externalForwardedProps:W,additionalProps:B}),[_e,ue]=pt("transition",{elementType:_s,ownerState:q,externalForwardedProps:W,additionalProps:{in:S,direction:Hi[H],timeout:_,appear:L.current}}),he=m(j,{...G,children:f});if(R==="permanent")return m(ee,{...fe,children:he});const Se=m(_e,{...ue,children:he});return R==="persistent"?m(ee,{...fe,children:Se}):m(X,{...K,children:Se})}),Ms=Be(m("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"})),Bs=Be(m("path",{d:"M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6m6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26"})),Ns=Be(m("path",{d:"m9.4 10.5 4.77-8.26C13.47 2.09 12.75 2 12 2c-2.4 0-4.6.85-6.32 2.25l3.66 6.35zM21.54 9c-.92-2.92-3.15-5.26-6-6.34L11.88 9zm.26 1h-7.49l.29.5 4.76 8.25C21 16.97 22 14.61 22 12c0-.69-.07-1.35-.2-2M8.54 12l-3.9-6.75C3.01 7.03 2 9.39 2 12c0 .69.07 1.35.2 2h7.49zm-6.08 3c.92 2.92 3.15 5.26 6 6.34L12.12 15zm11.27 0-3.9 6.76c.7.15 1.42.24 2.17.24 2.4 0 4.6-.85 6.32-2.25l-3.66-6.35z"})),Os=Be([m("circle",{cx:"12",cy:"12",r:"3.2"},"0"),m("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")]),Ls=Be(m("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"})),Br=Be(m("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"})),Nt=Be(m("circle",{cx:"12",cy:"12",r:"8"})),Mn=Be(m("path",{d:"M11.5 9H13v6h-1.5zM9 9H6c-.6 0-1 .5-1 1v4c0 .5.4 1 1 1h3c.6 0 1-.5 1-1v-2H8.5v1.5h-2v-3H10V10c0-.5-.4-1-1-1m10 1.5V9h-4.5v6H16v-2h2v-1.5h-2v-1z"})),Fs=Be(m("path",{d:"M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"})),zs=Be(m("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5M2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1m18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1M11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1m0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1M5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0z"})),Gs=Be(m("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"})),Hs=Be(m("path",{d:"M20 3H4c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h3l-1 1v2h12v-2l-1-1h3c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 13H4V5h16z"})),qi=Be(m("path",{d:"M23 18V6c0-1.1-.9-2-2-2H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2M8.5 12.5l2.5 3.01L14.5 11l4.5 6H5z"})),Ws=Be(m("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"})),qs=Be(m("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),Us=Be(m("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8m-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91"})),$s=Be(m("path",{d:"m3.5 18.49 6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z"})),Vs=Be(m("path",{d:"M6 6h12v12H6z"})),Zs=Be(m("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"})),js=Be(m("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"})),Ks='url("img/Rose-Petals.svg")',ua="17rem",Ys="#1f0000",yn={sidebar:{minWidth:ua},sidebarHeader:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:"1rem",position:"sticky",top:0,height:"2.75rem",backgroundColor:"#101010",zIndex:6},paper:{width:ua,backgroundColor:Ys,border:"none",backgroundImage:Ks,backgroundSize:"cover",backgroundPosition:"center",scrollbarWidth:"thin",scrollbarColor:"rgba(255, 255, 255, 0.8) rgba(0, 0, 0, 0.3)","&::-webkit-scrollbar":{width:"4px",backgroundColor:"rgba(255, 255, 255, 0.3)"},"&::-webkit-scrollbar-thumb":{width:"4px",backgroundColor:"rgba(255, 255, 255, 0.8)",borderRadius:"2px"},"& > .QuickAction":{position:"sticky",top:"2.75rem",zIndex:6,height:"2rem"},"& > .TabBar":{position:"sticky",top:"4.75rem",zIndex:6,marginBottom:"0.5rem"},"& > button":{backgroundColor:"rgba(16, 16, 16, 0.5)",minHeight:"2.5rem",borderRadius:"unset",padding:"0.5rem 1.5rem",justifyContent:"flex-start",gap:"1rem","& .btn-icon":{maxHeight:"1.5rem"}},"& > button:hover":{backgroundColor:"rgba(16, 16, 16, 0.8)"},"& .break":{minHeight:"0.5rem"},"& .break + .break":{minHeight:0},"& .bottom-space":{minHeight:"2rem"}}},Xs=m("a",{href:"https://ko-fi.com/L4L83VOAP",rel:"noreferrer",target:"_blank",children:m("img",{style:{height:"2rem"},src:"https://cdn.ko-fi.com/cdn/kofi5.png?v=2",alt:"Buy Me a Coffee"})}),Js=m("a",{href:"https://github.com/dgk3593/dl-model",target:"_blank",children:m(Fs,{style:{width:"2rem",margin:"0.5rem 1rem",color:"white"},titleAccess:"Source Code"})}),Qs=({onClick:e,color:r="#101010"})=>m(Zr,{position:"absolute",top:"2rem",right:0,children:m(hr,{className:"DockButton",sx:{color:r},onClick:e,title:"Send to Dock",size:"large",children:m(Ms,{})})});function ec(){const{mode:e,handleSelect:r,close:t}=Me(o=>o.sidebar.modal),n=Me(o=>o.dock.open),l=()=>{n(e,r),t()},a=Bi("(min-width:640px)"),i=Ei[e]??Zr;return m(Mi,{closeModal:t,open:!!e,children:[a&&m(Qs,{onClick:l}),m(In,{fallback:m(kn,{}),children:m(i,{onSelect:r,onAfterSelect:t})})]})}const{setLoadingMsg:da}=Me.getState(),rc=(e,r,t)=>{const n=Ie.getState().activeModel;n?.animation.addChain(e);const l=En(e,r);n?.userData&&(n.userData.aniSelectState=t,n.userData.chain?n.userData.chain.splice(0,1/0,...l):n.userData.chain=l)},tc=async(e,r)=>{da("Loading");const t=Ie.getState().setActiveModel,n=Ie.getState().activeModel,l=await z.loadDLModel(e);l.userData.name=r,l.material.code=n?.material.code??"",l.outline.code=n?.outline.code??"",Ai(l);const{parent:a,parentBone:i}=n??{},o=n?.type==="adventurer"&&l.type==="adventurer";if(o)l.userData.chain=n.userData.chain,l.animation.addChain(n.animation.current.chainCode),n.attachment.list.forEach(s=>l.attach(s,s.parentBone));else if(n?.animation.current.chainCode||!i){const s=gl(e);if(s){const{code:f,name:p}=s;l.animation.addChain(f),l.userData.chain=En(f,p)}}if(n?.dispose(),i)a.attach(l,i);else{if(z.add(l),!o){const f=ml(e);z.camera.position.set(...f);const p=bl(e);z.controls.target.set(...p)}const s=l.type==="adventurer"?"Adv":"Personal";Vr.getState().setCategory(s)}t(l),da("")},nc=(e,r)=>{const t=Ie.getState().activeModel;!t?.face||e===void 0||e===null||(t.face[`${r}BaseIdx`]=e)},ac=(e,r)=>{const t=Ie.getState().activeModel;!e||!t?.face||(t.face[`${r}Texture`]=e)},yt={model:tc,animation:rc,face:nc,faceTexture:ac},ic=m("img",{className:"btn-icon",src:"img/appIcon/weapon.png",alt:"Add Weapon"});function oc({openModal:e}){const{activeModel:r}=Ie(),[t,n]=gr(),l=De(()=>{}),a=r?.bones.list.includes("jWeaponR"),i=r?.attachment.jWeaponL,o=r?.attachment.jWeaponR,s=()=>e("weapon",yt.weapon);return Ae(()=>{l.current();const f=r?.addEventListener("AttachmentChanged",n);return l.current=()=>r?.removeEventListener("AttachmentChanged",f),l.current},[r]),a?m(ae,{children:[m(pe,{variant:"contained","data-mode":"weapon",onClick:s,startIcon:ic,children:"Add Weapon"}),m(we.Fragment,{children:[i?.map(f=>m(bn,{target:f,label:"Left Weapon"},f.uniqueId)),o?.map(f=>m(bn,{target:f,label:"Right Weapon"},f.uniqueId))]},t)]}):m(ae,{})}function lc({handleClick:e}){const{activeModel:r}=Ie(),t=r?.face;return t?m(ae,{children:[m(pe,{variant:"contained","data-mode":"face",onClick:e,startIcon:m(Ml,{}),children:"Facial Expression"}),t.type==="uv"&&m(pe,{variant:"contained","data-mode":"faceTexture",onClick:e,startIcon:m(Bl,{}),children:"Face Texture"})]}):m(ae,{})}function Ui({label:e,handleSelect:r}){const t=Me(i=>i.sidebar.modal.open),{setIndex:n}=yl(),l=i=>{i.stopPropagation();const{index:o}=i.currentTarget.dataset;o!==void 0&&n(0,o),t("model",r)},a=Zl.map((i,o)=>{const{label:s,icon:f}=i;return m(pe,{title:s,"data-index":o,onClick:l,children:m("img",{src:f,alt:s})})});return m($e,{className:"ModelSelect",defaultOpen:!0,disableGutters:!0,children:[m(pe,{variant:"contained",onClick:l,children:e}),m("div",{className:"ModelSelect-groups",children:a})]})}function sc(){const{activeModel:e}=Ie(),r=e?.outline;if(!r)return m(ae,{});const[t,n]=gr(),l=()=>{const{code:i}=r;e.attachment.traverse(o=>{o.outline.code=i})};return m($e,{disableGutters:!0,className:"SettingGroup",children:[m(ae,{children:[m("div",{className:"title",children:[m(Nl,{}),"Outline"]}),m(pe,{onClick:i=>{i.stopPropagation(),r.enabled=!r.enabled,l(),n()},title:"Toggle Outline",variant:"contained",children:"Toggle"})]}),m(Ol,{target:e},t)]})}function cc(){const{activeModel:e}=Ie(),{material:r}=e,[t,n]=gr(),l=()=>{const{code:i}=r;e.attachment.traverse(o=>{o.material.code=i})};return m($e,{disableGutters:!0,className:"SettingGroup",children:[m(ae,{children:[m("div",{className:"title",children:[m(Ll,{}),"Material"]}),m(pe,{onClick:i=>{i.stopPropagation(),r.code="",l(),n()},title:"Reset to default",variant:"contained",children:"Reset"})]}),m(Fl,{target:e},t)]})}const uc=e=>{const{setCategory:r,loadState:t}=Vr.getState();Ie.getState().setActiveModel(e),r(e.type==="adventurer"?"Adv":"Personal"),t(e.userData.aniSelectState)};function $i(){const{activeModel:e}=Ie(),r=e?.id,[t,n]=ur(e?.userData?.name),l=Me(o=>o.sidebar.modal.open),a=()=>l("target",uc);Ae(()=>{n(e?.userData?.name),!(t||!e)&&ki(r).then(o=>{o&&(n(o.name),e.userData.name=o.name)})},[e]);const i=t??r??"None";return m("div",{className:"ModelSettings-target",children:["Current",m(pe,{onClick:a,title:"Click to change",children:[m(Ni,{modelId:r,alt:i}),m("span",{className:"name",children:i})]})]})}const fa={change:"Change Model",select:"Select Model"};function dc(){const{activeModel:e}=Ie(),{loadState:r}=Vr(),t=Me(s=>s.sidebar.modal.open),{toggle:n,setTarget:l}=Or(),a=s=>{const{mode:f}=s.currentTarget.dataset;t(f,yt[f])},i=()=>{r(e?.userData.aniSelectState),t("animation",yt.animation)},o=()=>{l(e),n()};return m(ae,{children:[m($i,{}),m(Ui,{label:e?fa.change:fa.select,handleSelect:yt.model}),m("span",{className:"break"}),e&&m(ae,{children:[m(zl,{target:e},e.uniqueId),e?.parts&&m(ae,{children:[m(Gl,{target:e},e.uniqueId),m("span",{className:"break"})]}),e?.face&&m(lc,{handleClick:a}),m("span",{className:"break"}),m(pe,{variant:"contained","data-mode":"attachment",onClick:a,startIcon:m(Hl,{}),children:"Manage Attachments"}),m(oc,{openModal:t}),m("span",{className:"break"}),m(pe,{variant:"contained","data-mode":"animation",onClick:i,startIcon:m(Wl,{}),children:"Select Animation"}),m(pe,{variant:"contained",onClick:o,startIcon:m(ql,{}),title:"Create Animation Chain",children:"Animation Chain"}),m("span",{className:"break"}),m(sc,{}),m(cc,{}),m(Ul,{target:e})]})]})}const{setLoadingMsg:pa}=Me.getState(),fc=async(e,r)=>{pa("Loading");const t=await z.loadDLModel(e);t.userData.name=r,Ai(t),z.add(t),pa("")};function pc(){const[e,r]=gr();return Ae(()=>{const n=z.model.addEventListener("change",r);return()=>{z.model.removeEventListener("change",n)}},[]),m(ae,{children:[m(Ui,{label:"Add Model",handleSelect:fc}),m("span",{className:"break"}),m(pe,{variant:"contained",onClick:()=>{z.loadedModel.forEach(({animation:n})=>{n.stop(),n.play()})},startIcon:m(Us,{}),children:"Restart All Animation"}),m("span",{className:"break"}),m(we.Fragment,{children:z.model.map(n=>m("div",{children:m(bn,{target:n})},n.uniqueId))},e)]})}const vc=[{title:"Single Model",value:"single",icon:m(qs,{})},{title:"Multiple Model",value:"multi",icon:m(Ws,{})}],hc={single:dc,multi:pc},gc={ModeSelect:{backgroundColor:"#101010",color:"#eee",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",gap:"2rem",marginBottom:"0.3rem",cursor:"default",position:"sticky",top:"7.75rem",zIndex:"6"}};function mc(){const{manageMode:e,setManageMode:r}=Me(n=>n.sidebar),t=hc[e]??we.Fragment;return m(ae,{children:[m(Zr,{className:"ModeSelect",sx:gc.ModeSelect,children:["Mode",m($l,{tabs:vc,className:"ModeSelect-tabs",value:e,onChange:r})]}),m(t,{})]})}const bc=Object.keys(wl).map(e=>({value:e,label:e})),yc=[{propName:"pixelRatio",label:"Pixel Ratio",type:"slider",title:"Pixel Ratio, used to increase image quality on high DPI screens",min:.1,max:window.devicePixelRatio,step:.1},{propName:"toneMapping",label:"Tone Mapping",type:"select",options:bc}];function wc(){const[e,r]=gr(),t=a=>{a.stopPropagation(),z.setViewport(),z.pixelRatio=1,z.toneMapping="No Mapping",setTimeout(()=>{r()},200)},n=()=>{const{viewport:{width:a,height:i}}=z;z.setViewport(a,i)};Ae(()=>{const a=()=>setTimeout(()=>{r()},200);return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]);const l=[{propName:"width",label:"Width",type:"number",min:0,max:window.innerWidth,step:32,onChange:n},{propName:"height",label:"Height",type:"number",min:0,max:window.innerHeight,step:32,onChange:n}];return m($e,{disableGutters:!0,className:"SettingGroup DisplayControl",children:[m(ae,{children:[m("div",{className:"title",children:[m(Hs,{}),"Display"]}),m(pe,{onClick:t,title:"Reset display settings",variant:"contained",children:"Reset"})]}),m(we.Fragment,{children:[m(cr,{target:z.viewport,propList:l}),m(cr,{target:z,propList:yc})]},e)]})}const xc=[{propName:"autoRotate",label:"Enabled",type:"boolean"},{propName:"autoRotateSpeed",label:"Speed",type:"slider",min:-10,max:10,step:1}];function Dc(){const{controls:e}=z,[r,t]=gr();return m($e,{className:"SettingGroup",children:[m(ae,{children:[m("div",{className:"title",children:[m(Vl,{}),"Auto Rotate"]}),m(pe,{onClick:l=>{l.stopPropagation(),e.autoRotate=!1,e.autoRotateSpeed=2,t()},title:"Reset Auto Rotate Settings",variant:"contained",children:"Reset"})]}),m(cr,{target:e,propList:xc},r)]})}function Vi({children:e,onClick:r,options:t,title:n}){const[l,a]=ur(null),i=f=>{f.stopPropagation(),a(f.currentTarget)},o=()=>a(null),s=f=>{f.stopPropagation();const{value:p}=f.currentTarget.dataset;r(p),o()};return m(ae,{children:[m(pe,{onClick:i,title:n,variant:"contained",children:e}),m(Yl,{anchorEl:l,open:!!l,onClose:o,children:t.map(({value:f,label:p})=>m(Jl,{"data-value":f,onClick:s,children:p??f},f))})]})}const Zi={DirectionalLight:[{propName:"visible",label:"Enabled",type:"boolean"},{propName:"showHelper",label:"Show Helper",type:"boolean"},{propName:"intensity",label:"Intensity",type:"slider",min:0,max:1,step:.05},{propName:"colorCode",label:"Color",type:"color"},{propName:"position",label:"Position",type:"vector",step:.05}],AmbientLight:[{propName:"visible",label:"Enabled",type:"boolean"},{propName:"intensity",label:"Intensity",type:"slider",min:0,max:1,step:.05},{propName:"colorCode",label:"Color",type:"color"}],PointLight:[{propName:"visible",label:"Enabled",type:"boolean"},{propName:"showHelper",label:"Show Helper",type:"boolean"},{propName:"intensity",label:"Intensity",type:"slider",min:0,max:1,step:.05},{propName:"colorCode",label:"Color",type:"color"},{propName:"decay",label:"Dacay",type:"slider",min:1,max:2,step:.05},{propName:"position",label:"Position",type:"vector",step:.05}]};function Sc({target:e}){const{type:r,name:t}=e,l=m(hr,{title:"Remove",className:"closeButton",onClick:i=>{i.stopPropagation(),e.remove()},children:m(Rn,{})}),a=Zi[r];return r==="DirectionalLight"&&(a.find(i=>i.propName==="position").onChange=()=>e.helper?.update?.()),m($e,{disableGutters:!0,className:"LightController",children:[m(ae,{children:[t,l]}),m(ae,{children:m(cr,{target:e,propList:a})})]})}const Cc=Object.keys(Zi).map(e=>{const r=e.replace("Light","");return{label:r,value:r.toLowerCase()}});function _c(){const[e,r]=gr(),t=z.light.list;return Ae(()=>{const l=t.addEventListener("change",r);return()=>t.removeEventListener("change",l)},[]),m($e,{disableGutters:!0,className:"LightControl SettingGroup with-subgroup",children:[m(ae,{children:[m("div",{className:"title",children:[m(zs,{}),"Light"]}),m(Vi,{title:"Add Light",onClick:l=>z.light.add(l),options:Cc,children:m(Mt,{})})]}),m(we.Fragment,{children:t.length?t.map((l,a)=>m(Sc,{target:l},`${e+a}`)):"Click + to add light"},e)]})}function nt(e){"@babel/helpers - typeof";return nt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},nt(e)}function Ic(e,r){if(nt(e)!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,r);if(nt(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Ec(e){var r=Ic(e,"string");return nt(r)=="symbol"?r:r+""}function Ac(e,r,t){return(r=Ec(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function va(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),t.push.apply(t,n)}return t}function ha(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?va(Object(t),!0).forEach(function(n){Ac(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):va(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Ye(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var ga=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})(),ma=function(){return Math.random().toString(36).substring(7).split("").join(".")},ba={INIT:"@@redux/INIT"+ma(),REPLACE:"@@redux/REPLACE"+ma()};function kc(e){if(typeof e!="object"||e===null)return!1;for(var r=e;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r}function ji(e,r,t){var n;if(typeof r=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Ye(0));if(typeof r=="function"&&typeof t>"u"&&(t=r,r=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Ye(1));return t(ji)(e,r)}if(typeof e!="function")throw new Error(Ye(2));var l=e,a=r,i=[],o=i,s=!1;function f(){o===i&&(o=i.slice())}function p(){if(s)throw new Error(Ye(3));return a}function c(D){if(typeof D!="function")throw new Error(Ye(4));if(s)throw new Error(Ye(5));var S=!0;return f(),o.push(D),function(){if(S){if(s)throw new Error(Ye(6));S=!1,f();var w=o.indexOf(D);o.splice(w,1),i=null}}}function d(D){if(!kc(D))throw new Error(Ye(7));if(typeof D.type>"u")throw new Error(Ye(8));if(s)throw new Error(Ye(9));try{s=!0,a=l(a,D)}finally{s=!1}for(var S=i=o,g=0;g<S.length;g++){var w=S[g];w()}return D}function h(D){if(typeof D!="function")throw new Error(Ye(10));l=D,d({type:ba.REPLACE})}function v(){var D,S=c;return D={subscribe:function(w){if(typeof w!="object"||w===null)throw new Error(Ye(11));function C(){w.next&&w.next(p())}C();var _=S(C);return{unsubscribe:_}}},D[ga]=function(){return this},D}return d({type:ba.INIT}),n={dispatch:d,subscribe:c,getState:p,replaceReducer:h},n[ga]=v,n}function ya(e,r){return function(){return r(e.apply(this,arguments))}}function wa(e,r){if(typeof e=="function")return ya(e,r);if(typeof e!="object"||e===null)throw new Error(Ye(16));var t={};for(var n in e){var l=e[n];typeof l=="function"&&(t[n]=ya(l,r))}return t}function Ki(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.length===0?function(n){return n}:r.length===1?r[0]:r.reduce(function(n,l){return function(){return n(l.apply(void 0,arguments))}})}function Rc(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(n){return function(){var l=n.apply(void 0,arguments),a=function(){throw new Error(Ye(15))},i={getState:l.getState,dispatch:function(){return a.apply(void 0,arguments)}},o=r.map(function(s){return s(i)});return a=Ki.apply(void 0,o)(l.dispatch),ha(ha({},l),{},{dispatch:a})}}}var Yi=we.createContext(null);function Tc(e){e()}var Xi=Tc,Pc=function(r){return Xi=r},Mc=function(){return Xi};function Bc(){var e=Mc(),r=null,t=null;return{clear:function(){r=null,t=null},notify:function(){e(function(){for(var l=r;l;)l.callback(),l=l.next})},get:function(){for(var l=[],a=r;a;)l.push(a),a=a.next;return l},subscribe:function(l){var a=!0,i=t={callback:l,next:null,prev:t};return i.prev?i.prev.next=i:r=i,function(){!a||r===null||(a=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:r=i.next)}}}}var xa={notify:function(){},get:function(){return[]}};function Ji(e,r){var t,n=xa;function l(c){return s(),n.subscribe(c)}function a(){n.notify()}function i(){p.onStateChange&&p.onStateChange()}function o(){return!!t}function s(){t||(t=r?r.addNestedSub(i):e.subscribe(i),n=Bc())}function f(){t&&(t(),t=void 0,n.clear(),n=xa)}var p={addNestedSub:l,notifyNestedSubs:a,handleChangeWrapper:i,isSubscribed:o,trySubscribe:s,tryUnsubscribe:f,getListeners:function(){return n}};return p}var Qi=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?Ri:Ae;function Nc(e){var r=e.store,t=e.context,n=e.children,l=vr(function(){var o=Ji(r);return{store:r,subscription:o}},[r]),a=vr(function(){return r.getState()},[r]);Qi(function(){var o=l.subscription;return o.onStateChange=o.notifyNestedSubs,o.trySubscribe(),a!==r.getState()&&o.notifyNestedSubs(),function(){o.tryUnsubscribe(),o.onStateChange=null}},[l,a]);var i=t||Yi;return we.createElement(i.Provider,{value:l},n)}var Ut={exports:{}},Ce={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Da;function Oc(){if(Da)return Ce;Da=1;var e=60103,r=60106,t=60107,n=60108,l=60114,a=60109,i=60110,o=60112,s=60113,f=60120,p=60115,c=60116,d=60121,h=60122,v=60117,D=60129,S=60131;if(typeof Symbol=="function"&&Symbol.for){var g=Symbol.for;e=g("react.element"),r=g("react.portal"),t=g("react.fragment"),n=g("react.strict_mode"),l=g("react.profiler"),a=g("react.provider"),i=g("react.context"),o=g("react.forward_ref"),s=g("react.suspense"),f=g("react.suspense_list"),p=g("react.memo"),c=g("react.lazy"),d=g("react.block"),h=g("react.server.block"),v=g("react.fundamental"),D=g("react.debug_trace_mode"),S=g("react.legacy_hidden")}function w(k){if(typeof k=="object"&&k!==null){var W=k.$$typeof;switch(W){case e:switch(k=k.type,k){case t:case l:case n:case s:case f:return k;default:switch(k=k&&k.$$typeof,k){case i:case o:case c:case p:case a:return k;default:return W}}case r:return W}}}var C=a,_=e,R=o,T=t,I=c,B=p,L=r,H=l,F=n,q=s;return Ce.ContextConsumer=i,Ce.ContextProvider=C,Ce.Element=_,Ce.ForwardRef=R,Ce.Fragment=T,Ce.Lazy=I,Ce.Memo=B,Ce.Portal=L,Ce.Profiler=H,Ce.StrictMode=F,Ce.Suspense=q,Ce.isAsyncMode=function(){return!1},Ce.isConcurrentMode=function(){return!1},Ce.isContextConsumer=function(k){return w(k)===i},Ce.isContextProvider=function(k){return w(k)===a},Ce.isElement=function(k){return typeof k=="object"&&k!==null&&k.$$typeof===e},Ce.isForwardRef=function(k){return w(k)===o},Ce.isFragment=function(k){return w(k)===t},Ce.isLazy=function(k){return w(k)===c},Ce.isMemo=function(k){return w(k)===p},Ce.isPortal=function(k){return w(k)===r},Ce.isProfiler=function(k){return w(k)===l},Ce.isStrictMode=function(k){return w(k)===n},Ce.isSuspense=function(k){return w(k)===s},Ce.isValidElementType=function(k){return typeof k=="string"||typeof k=="function"||k===t||k===l||k===D||k===n||k===s||k===f||k===S||typeof k=="object"&&k!==null&&(k.$$typeof===c||k.$$typeof===p||k.$$typeof===a||k.$$typeof===i||k.$$typeof===o||k.$$typeof===v||k.$$typeof===d||k[0]===h)},Ce.typeOf=w,Ce}var Sa;function Lc(){return Sa||(Sa=1,Ut.exports=Oc()),Ut.exports}var Fc=Lc(),zc=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],Gc=["reactReduxForwardedRef"],Hc=[],Wc=[null,null];function qc(e,r){var t=e[1];return[r.payload,t+1]}function Ca(e,r,t){Qi(function(){return e.apply(void 0,r)},t)}function Uc(e,r,t,n,l,a,i){e.current=n,r.current=l,t.current=!1,a.current&&(a.current=null,i())}function $c(e,r,t,n,l,a,i,o,s,f){if(e){var p=!1,c=null,d=function(){if(!p){var D=r.getState(),S,g;try{S=n(D,l.current)}catch(w){g=w,c=w}g||(c=null),S===a.current?i.current||s():(a.current=S,o.current=S,i.current=!0,f({type:"STORE_UPDATED",payload:{error:g}}))}};t.onStateChange=d,t.trySubscribe(),d();var h=function(){if(p=!0,t.tryUnsubscribe(),t.onStateChange=null,c)throw c};return h}}var Vc=function(){return[null,0]};function Zc(e,r){r===void 0&&(r={});var t=r,n=t.getDisplayName,l=n===void 0?function(C){return"ConnectAdvanced("+C+")"}:n,a=t.methodName,i=a===void 0?"connectAdvanced":a,o=t.renderCountProp,s=o===void 0?void 0:o,f=t.shouldHandleStateChanges,p=f===void 0?!0:f,c=t.storeKey,d=c===void 0?"store":c;t.withRef;var h=t.forwardRef,v=h===void 0?!1:h,D=t.context,S=D===void 0?Yi:D,g=Dt(t,zc),w=S;return function(_){var R=_.displayName||_.name||"Component",T=l(R),I=le({},g,{getDisplayName:l,methodName:i,renderCountProp:s,shouldHandleStateChanges:p,storeKey:d,displayName:T,wrappedComponentName:R,WrappedComponent:_}),B=g.pure;function L(W){return e(W.dispatch,I)}var H=B?vr:function(W){return W()};function F(W){var X=vr(function(){var Le=W.reactReduxForwardedRef,dr=Dt(W,Gc);return[W.context,Le,dr]},[W]),K=X[0],j=X[1],G=X[2],ee=vr(function(){return K&&K.Consumer&&Fc.isContextConsumer(we.createElement(K.Consumer,null))?K:w},[K,w]),fe=An(ee),_e=!!W.store&&!!W.store.getState&&!!W.store.dispatch;fe&&fe.store;var ue=_e?W.store:fe.store,he=vr(function(){return L(ue)},[ue]),Se=vr(function(){if(!p)return Wc;var Le=Ji(ue,_e?null:fe.subscription),dr=Le.notifyNestedSubs.bind(Le);return[Le,dr]},[ue,_e,fe]),ge=Se[0],ce=Se[1],ye=vr(function(){return _e?fe:le({},fe,{subscription:ge})},[_e,fe,ge]),se=xl(qc,Hc,Vc),ne=se[0],ke=ne[0],Ne=se[1];if(ke&&ke.error)throw ke.error;var ie=De(),Ee=De(G),He=De(),We=De(!1),Te=H(function(){return He.current&&G===Ee.current?He.current:he(ue.getState(),G)},[ue,ke,G]);Ca(Uc,[Ee,ie,We,G,Te,He,ce]),Ca($c,[p,ue,ge,he,Ee,ie,We,He,ce,Ne],[ue,ge,he]);var xe=vr(function(){return we.createElement(_,le({},Te,{ref:j}))},[j,_,Te]),de=vr(function(){return p?we.createElement(ee.Provider,{value:ye},xe):xe},[ee,xe,ye]);return de}var q=B?we.memo(F):F;if(q.WrappedComponent=_,q.displayName=F.displayName=T,v){var k=we.forwardRef(function(X,K){return we.createElement(q,le({},X,{reactReduxForwardedRef:K}))});return k.displayName=T,k.WrappedComponent=_,sa(k,_)}return sa(q,_)}}function _a(e,r){return e===r?e!==0||r!==0||1/e===1/r:e!==e&&r!==r}function $t(e,r){if(_a(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var t=Object.keys(e),n=Object.keys(r);if(t.length!==n.length)return!1;for(var l=0;l<t.length;l++)if(!Object.prototype.hasOwnProperty.call(r,t[l])||!_a(e[t[l]],r[t[l]]))return!1;return!0}function jc(e,r){var t={},n=function(i){var o=e[i];typeof o=="function"&&(t[i]=function(){return r(o.apply(void 0,arguments))})};for(var l in e)n(l);return t}function Bn(e){return function(t,n){var l=e(t,n);function a(){return l}return a.dependsOnOwnProps=!1,a}}function Ia(e){return e.dependsOnOwnProps!==null&&e.dependsOnOwnProps!==void 0?!!e.dependsOnOwnProps:e.length!==1}function eo(e,r){return function(n,l){l.displayName;var a=function(o,s){return a.dependsOnOwnProps?a.mapToProps(o,s):a.mapToProps(o)};return a.dependsOnOwnProps=!0,a.mapToProps=function(o,s){a.mapToProps=e,a.dependsOnOwnProps=Ia(e);var f=a(o,s);return typeof f=="function"&&(a.mapToProps=f,a.dependsOnOwnProps=Ia(f),f=a(o,s)),f},a}}function Kc(e){return typeof e=="function"?eo(e):void 0}function Yc(e){return e?void 0:Bn(function(r){return{dispatch:r}})}function Xc(e){return e&&typeof e=="object"?Bn(function(r){return jc(e,r)}):void 0}const Jc=[Kc,Yc,Xc];function Qc(e){return typeof e=="function"?eo(e):void 0}function eu(e){return e?void 0:Bn(function(){return{}})}const ru=[Qc,eu];function tu(e,r,t){return le({},t,e,r)}function nu(e){return function(t,n){n.displayName;var l=n.pure,a=n.areMergedPropsEqual,i=!1,o;return function(f,p,c){var d=e(f,p,c);return i?(!l||!a(d,o))&&(o=d):(i=!0,o=d),o}}}function au(e){return typeof e=="function"?nu(e):void 0}function iu(e){return e?void 0:function(){return tu}}const ou=[au,iu];var lu=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function su(e,r,t,n){return function(a,i){return t(e(a,i),r(n,i),i)}}function cu(e,r,t,n,l){var a=l.areStatesEqual,i=l.areOwnPropsEqual,o=l.areStatePropsEqual,s=!1,f,p,c,d,h;function v(C,_){return f=C,p=_,c=e(f,p),d=r(n,p),h=t(c,d,p),s=!0,h}function D(){return c=e(f,p),r.dependsOnOwnProps&&(d=r(n,p)),h=t(c,d,p),h}function S(){return e.dependsOnOwnProps&&(c=e(f,p)),r.dependsOnOwnProps&&(d=r(n,p)),h=t(c,d,p),h}function g(){var C=e(f,p),_=!o(C,c);return c=C,_&&(h=t(c,d,p)),h}function w(C,_){var R=!i(_,p),T=!a(C,f,_,p);return f=C,p=_,R&&T?D():R?S():T?g():h}return function(_,R){return s?w(_,R):v(_,R)}}function uu(e,r){var t=r.initMapStateToProps,n=r.initMapDispatchToProps,l=r.initMergeProps,a=Dt(r,lu),i=t(e,a),o=n(e,a),s=l(e,a),f=a.pure?cu:su;return f(i,o,s,e,a)}var du=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function Vt(e,r,t){for(var n=r.length-1;n>=0;n--){var l=r[n](e);if(l)return l}return function(a,i){throw new Error("Invalid value of type "+typeof e+" for "+t+" argument when connecting component "+i.wrappedComponentName+".")}}function fu(e,r){return e===r}function pu(e){var r=e===void 0?{}:e,t=r.connectHOC,n=t===void 0?Zc:t,l=r.mapStateToPropsFactories,a=l===void 0?ru:l,i=r.mapDispatchToPropsFactories,o=i===void 0?Jc:i,s=r.mergePropsFactories,f=s===void 0?ou:s,p=r.selectorFactory,c=p===void 0?uu:p;return function(h,v,D,S){S===void 0&&(S={});var g=S,w=g.pure,C=w===void 0?!0:w,_=g.areStatesEqual,R=_===void 0?fu:_,T=g.areOwnPropsEqual,I=T===void 0?$t:T,B=g.areStatePropsEqual,L=B===void 0?$t:B,H=g.areMergedPropsEqual,F=H===void 0?$t:H,q=Dt(g,du),k=Vt(h,a,"mapStateToProps"),W=Vt(v,o,"mapDispatchToProps"),X=Vt(D,f,"mergeProps");return n(c,le({methodName:"connect",getDisplayName:function(j){return"Connect("+j+")"},shouldHandleStateChanges:!!h,initMapStateToProps:k,initMapDispatchToProps:W,initMergeProps:X,pure:C,areStatesEqual:R,areOwnPropsEqual:I,areStatePropsEqual:L,areMergedPropsEqual:F},q))}}const ro=pu();Pc(Dl);function vu(e,r){if(e.length!==r.length)return!1;for(var t=0;t<e.length;t++)if(e[t]!==r[t])return!1;return!0}function to(e,r){var t=ur(function(){return{inputs:r,result:e()}})[0],n=De(!0),l=De(t),a=n.current||!!(r&&l.current.inputs&&vu(r,l.current.inputs)),i=a?l.current:{inputs:r,result:e()};return Ae(function(){n.current=!1,l.current=i},[i]),i.result}function hu(e,r){return to(function(){return e},r)}var be=to,te=hu,gu="Invariant failed";function mu(e,r){throw new Error(gu)}var sr=function(r){var t=r.top,n=r.right,l=r.bottom,a=r.left,i=n-a,o=l-t,s={top:t,right:n,bottom:l,left:a,width:i,height:o,x:a,y:t,center:{x:(n+a)/2,y:(l+t)/2}};return s},Nn=function(r,t){return{top:r.top-t.top,left:r.left-t.left,bottom:r.bottom+t.bottom,right:r.right+t.right}},Ea=function(r,t){return{top:r.top+t.top,left:r.left+t.left,bottom:r.bottom-t.bottom,right:r.right-t.right}},bu=function(r,t){return{top:r.top+t.y,left:r.left+t.x,bottom:r.bottom+t.y,right:r.right+t.x}},Zt={top:0,right:0,bottom:0,left:0},On=function(r){var t=r.borderBox,n=r.margin,l=n===void 0?Zt:n,a=r.border,i=a===void 0?Zt:a,o=r.padding,s=o===void 0?Zt:o,f=sr(Nn(t,l)),p=sr(Ea(t,i)),c=sr(Ea(p,s));return{marginBox:f,borderBox:sr(t),paddingBox:p,contentBox:c,margin:l,border:i,padding:s}},tr=function(r){var t=r.slice(0,-2),n=r.slice(-2);if(n!=="px")return 0;var l=Number(t);return isNaN(l)&&mu(),l},yu=function(){return{x:window.pageXOffset,y:window.pageYOffset}},St=function(r,t){var n=r.borderBox,l=r.border,a=r.margin,i=r.padding,o=bu(n,t);return On({borderBox:o,border:l,margin:a,padding:i})},Ct=function(r,t){return t===void 0&&(t=yu()),St(r,t)},no=function(r,t){var n={top:tr(t.marginTop),right:tr(t.marginRight),bottom:tr(t.marginBottom),left:tr(t.marginLeft)},l={top:tr(t.paddingTop),right:tr(t.paddingRight),bottom:tr(t.paddingBottom),left:tr(t.paddingLeft)},a={top:tr(t.borderTopWidth),right:tr(t.borderRightWidth),bottom:tr(t.borderBottomWidth),left:tr(t.borderLeftWidth)};return On({borderBox:r,margin:n,padding:l,border:a})},ao=function(r){var t=r.getBoundingClientRect(),n=window.getComputedStyle(r);return no(t,n)},Aa=Number.isNaN||function(r){return typeof r=="number"&&r!==r};function wu(e,r){return!!(e===r||Aa(e)&&Aa(r))}function xu(e,r){if(e.length!==r.length)return!1;for(var t=0;t<e.length;t++)if(!wu(e[t],r[t]))return!1;return!0}function ze(e,r){r===void 0&&(r=xu);var t,n=[],l,a=!1;function i(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return a&&t===this&&r(o,n)||(l=e.apply(this,o),a=!0,t=this,n=o),l}return i}var at=function(r){var t=[],n=null,l=function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];t=o,!n&&(n=requestAnimationFrame(function(){n=null,r.apply(void 0,t)}))};return l.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},l};function io(e,r){}io.bind(null,"warn");io.bind(null,"error");function Sr(){}function Du(e,r){return le({},e,{},r)}function ar(e,r,t){var n=r.map(function(l){var a=Du(t,l.options);return e.addEventListener(l.eventName,l.fn,a),function(){e.removeEventListener(l.eventName,l.fn,a)}});return function(){n.forEach(function(a){a()})}}var Su="Invariant failed";function _t(e){this.message=e}_t.prototype.toString=function(){return this.message};function Z(e,r){throw new _t(Su)}var Cu=(function(e){Li(r,e);function r(){for(var n,l=arguments.length,a=new Array(l),i=0;i<l;i++)a[i]=arguments[i];return n=e.call.apply(e,[this].concat(a))||this,n.callbacks=null,n.unbind=Sr,n.onWindowError=function(o){var s=n.getCallbacks();s.isDragging()&&s.tryAbort();var f=o.error;f instanceof _t&&o.preventDefault()},n.getCallbacks=function(){if(!n.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return n.callbacks},n.setCallbacks=function(o){n.callbacks=o},n}var t=r.prototype;return t.componentDidMount=function(){this.unbind=ar(window,[{eventName:"error",fn:this.onWindowError}])},t.componentDidCatch=function(l){if(l instanceof _t){this.setState({});return}throw l},t.componentWillUnmount=function(){this.unbind()},t.render=function(){return this.props.children(this.setCallbacks)},r})(we.Component),_u=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,It=function(r){return r+1},Iu=function(r){return`
  You have lifted an item in position `+It(r.source.index)+`
`},oo=function(r,t){var n=r.droppableId===t.droppableId,l=It(r.index),a=It(t.index);return n?`
      You have moved the item from position `+l+`
      to position `+a+`
    `:`
    You have moved the item from position `+l+`
    in list `+r.droppableId+`
    to list `+t.droppableId+`
    in position `+a+`
  `},lo=function(r,t,n){var l=t.droppableId===n.droppableId;return l?`
      The item `+r+`
      has been combined with `+n.draggableId:`
      The item `+r+`
      in list `+t.droppableId+`
      has been combined with `+n.draggableId+`
      in list `+n.droppableId+`
    `},Eu=function(r){var t=r.destination;if(t)return oo(r.source,t);var n=r.combine;return n?lo(r.draggableId,r.source,n):"You are over an area that cannot be dropped on"},ka=function(r){return`
  The item has returned to its starting position
  of `+It(r.index)+`
`},Au=function(r){if(r.reason==="CANCEL")return`
      Movement cancelled.
      `+ka(r.source)+`
    `;var t=r.destination,n=r.combine;return t?`
      You have dropped the item.
      `+oo(r.source,t)+`
    `:n?`
      You have dropped the item.
      `+lo(r.draggableId,r.source,n)+`
    `:`
    The item has been dropped while not over a drop area.
    `+ka(r.source)+`
  `},wt={dragHandleUsageInstructions:_u,onDragStart:Iu,onDragUpdate:Eu,onDragEnd:Au},Ge={x:0,y:0},Ue=function(r,t){return{x:r.x+t.x,y:r.y+t.y}},Xe=function(r,t){return{x:r.x-t.x,y:r.y-t.y}},Cr=function(r,t){return r.x===t.x&&r.y===t.y},jr=function(r){return{x:r.x!==0?-r.x:0,y:r.y!==0?-r.y:0}},Nr=function(r,t,n){var l;return n===void 0&&(n=0),l={},l[r]=t,l[r==="x"?"y":"x"]=n,l},it=function(r,t){return Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))},Ra=function(r,t){return Math.min.apply(Math,t.map(function(n){return it(r,n)}))},so=function(r){return function(t){return{x:r(t.x),y:r(t.y)}}},ku=(function(e,r){var t=sr({top:Math.max(r.top,e.top),right:Math.min(r.right,e.right),bottom:Math.min(r.bottom,e.bottom),left:Math.max(r.left,e.left)});return t.width<=0||t.height<=0?null:t}),ct=function(r,t){return{top:r.top+t.y,left:r.left+t.x,bottom:r.bottom+t.y,right:r.right+t.x}},Ta=function(r){return[{x:r.left,y:r.top},{x:r.right,y:r.top},{x:r.left,y:r.bottom},{x:r.right,y:r.bottom}]},Ru={top:0,right:0,bottom:0,left:0},Tu=function(r,t){return t?ct(r,t.scroll.diff.displacement):r},Pu=function(r,t,n){if(n&&n.increasedBy){var l;return le({},r,(l={},l[t.end]=r[t.end]+n.increasedBy[t.line],l))}return r},Mu=function(r,t){return t&&t.shouldClipSubject?ku(t.pageMarginBox,r):sr(r)},qr=(function(e){var r=e.page,t=e.withPlaceholder,n=e.axis,l=e.frame,a=Tu(r.marginBox,l),i=Pu(a,n,t),o=Mu(i,l);return{page:r,withPlaceholder:t,active:o}}),Ln=(function(e,r){e.frame||Z();var t=e.frame,n=Xe(r,t.scroll.initial),l=jr(n),a=le({},t,{scroll:{initial:t.scroll.initial,current:r,diff:{value:n,displacement:l},max:t.scroll.max}}),i=qr({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:a}),o=le({},e,{frame:a,subject:i});return o});function Et(e){return Object.values?Object.values(e):Object.keys(e).map(function(r){return e[r]})}function Fn(e,r){if(e.findIndex)return e.findIndex(r);for(var t=0;t<e.length;t++)if(r(e[t]))return t;return-1}function Er(e,r){if(e.find)return e.find(r);var t=Fn(e,r);if(t!==-1)return e[t]}function co(e){return Array.prototype.slice.call(e)}var uo=ze(function(e){return e.reduce(function(r,t){return r[t.descriptor.id]=t,r},{})}),fo=ze(function(e){return e.reduce(function(r,t){return r[t.descriptor.id]=t,r},{})}),Ot=ze(function(e){return Et(e)}),Bu=ze(function(e){return Et(e)}),Kr=ze(function(e,r){var t=Bu(r).filter(function(n){return e===n.descriptor.droppableId}).sort(function(n,l){return n.descriptor.index-l.descriptor.index});return t});function zn(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function Lt(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var Ft=ze(function(e,r){return r.filter(function(t){return t.descriptor.id!==e.descriptor.id})}),Nu=(function(e){var r=e.isMovingForward,t=e.draggable,n=e.destination,l=e.insideDestination,a=e.previousImpact;if(!n.isCombineEnabled)return null;var i=zn(a);if(!i)return null;function o(D){var S={type:"COMBINE",combine:{draggableId:D,droppableId:n.descriptor.id}};return le({},a,{at:S})}var s=a.displaced.all,f=s.length?s[0]:null;if(r)return f?o(f):null;var p=Ft(t,l);if(!f){if(!p.length)return null;var c=p[p.length-1];return o(c.descriptor.id)}var d=Fn(p,function(D){return D.descriptor.id===f});d===-1&&Z();var h=d-1;if(h<0)return null;var v=p[h];return o(v.descriptor.id)}),Yr=(function(e,r){return e.descriptor.droppableId===r.descriptor.id}),po={point:Ge,value:0},ot={invisible:{},visible:{},all:[]},Ou={displaced:ot,displacedBy:po,at:null},ir=(function(e,r){return function(t){return e<=t&&t<=r}}),vo=(function(e){var r=ir(e.top,e.bottom),t=ir(e.left,e.right);return function(n){var l=r(n.top)&&r(n.bottom)&&t(n.left)&&t(n.right);if(l)return!0;var a=r(n.top)||r(n.bottom),i=t(n.left)||t(n.right),o=a&&i;if(o)return!0;var s=n.top<e.top&&n.bottom>e.bottom,f=n.left<e.left&&n.right>e.right,p=s&&f;if(p)return!0;var c=s&&i||f&&a;return c}}),Lu=(function(e){var r=ir(e.top,e.bottom),t=ir(e.left,e.right);return function(n){var l=r(n.top)&&r(n.bottom)&&t(n.left)&&t(n.right);return l}}),Gn={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},ho={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},Fu=(function(e){return function(r){var t=ir(r.top,r.bottom),n=ir(r.left,r.right);return function(l){return e===Gn?t(l.top)&&t(l.bottom):n(l.left)&&n(l.right)}}}),zu=function(r,t){var n=t.frame?t.frame.scroll.diff.displacement:Ge;return ct(r,n)},Gu=function(r,t,n){return t.subject.active?n(t.subject.active)(r):!1},Hu=function(r,t,n){return n(t)(r)},Hn=function(r){var t=r.target,n=r.destination,l=r.viewport,a=r.withDroppableDisplacement,i=r.isVisibleThroughFrameFn,o=a?zu(t,n):t;return Gu(o,n,i)&&Hu(o,l,i)},Wu=function(r){return Hn(le({},r,{isVisibleThroughFrameFn:vo}))},go=function(r){return Hn(le({},r,{isVisibleThroughFrameFn:Lu}))},qu=function(r){return Hn(le({},r,{isVisibleThroughFrameFn:Fu(r.destination.axis)}))},Uu=function(r,t,n){if(typeof n=="boolean")return n;if(!t)return!0;var l=t.invisible,a=t.visible;if(l[r])return!1;var i=a[r];return i?i.shouldAnimate:!0};function $u(e,r){var t=e.page.marginBox,n={top:r.point.y,right:0,bottom:0,left:r.point.x};return sr(Nn(t,n))}function lt(e){var r=e.afterDragging,t=e.destination,n=e.displacedBy,l=e.viewport,a=e.forceShouldAnimate,i=e.last;return r.reduce(function(s,f){var p=$u(f,n),c=f.descriptor.id;s.all.push(c);var d=Wu({target:p,destination:t,viewport:l,withDroppableDisplacement:!0});if(!d)return s.invisible[f.descriptor.id]=!0,s;var h=Uu(c,i,a),v={draggableId:c,shouldAnimate:h};return s.visible[c]=v,s},{all:[],visible:{},invisible:{}})}function Vu(e,r){if(!e.length)return 0;var t=e[e.length-1].descriptor.index;return r.inHomeList?t:t+1}function Pa(e){var r=e.insideDestination,t=e.inHomeList,n=e.displacedBy,l=e.destination,a=Vu(r,{inHomeList:t});return{displaced:ot,displacedBy:n,at:{type:"REORDER",destination:{droppableId:l.descriptor.id,index:a}}}}function At(e){var r=e.draggable,t=e.insideDestination,n=e.destination,l=e.viewport,a=e.displacedBy,i=e.last,o=e.index,s=e.forceShouldAnimate,f=Yr(r,n);if(o==null)return Pa({insideDestination:t,inHomeList:f,displacedBy:a,destination:n});var p=Er(t,function(D){return D.descriptor.index===o});if(!p)return Pa({insideDestination:t,inHomeList:f,displacedBy:a,destination:n});var c=Ft(r,t),d=t.indexOf(p),h=c.slice(d),v=lt({afterDragging:h,destination:n,displacedBy:a,last:i,viewport:l.frame,forceShouldAnimate:s});return{displaced:v,displacedBy:a,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:o}}}}function Ir(e,r){return!!r.effected[e]}var Zu=(function(e){var r=e.isMovingForward,t=e.destination,n=e.draggables,l=e.combine,a=e.afterCritical;if(!t.isCombineEnabled)return null;var i=l.draggableId,o=n[i],s=o.descriptor.index,f=Ir(i,a);return f?r?s:s-1:r?s+1:s}),ju=(function(e){var r=e.isMovingForward,t=e.isInHomeList,n=e.insideDestination,l=e.location;if(!n.length)return null;var a=l.index,i=r?a+1:a-1,o=n[0].descriptor.index,s=n[n.length-1].descriptor.index,f=t?s:s+1;return i<o||i>f?null:i}),Ku=(function(e){var r=e.isMovingForward,t=e.isInHomeList,n=e.draggable,l=e.draggables,a=e.destination,i=e.insideDestination,o=e.previousImpact,s=e.viewport,f=e.afterCritical,p=o.at;if(p||Z(),p.type==="REORDER"){var c=ju({isMovingForward:r,isInHomeList:t,location:p.destination,insideDestination:i});return c==null?null:At({draggable:n,insideDestination:i,destination:a,viewport:s,last:o.displaced,displacedBy:o.displacedBy,index:c})}var d=Zu({isMovingForward:r,destination:a,displaced:o.displaced,draggables:l,combine:p.combine,afterCritical:f});return d==null?null:At({draggable:n,insideDestination:i,destination:a,viewport:s,last:o.displaced,displacedBy:o.displacedBy,index:d})}),Yu=(function(e){var r=e.displaced,t=e.afterCritical,n=e.combineWith,l=e.displacedBy,a=!!(r.visible[n]||r.invisible[n]);return Ir(n,t)?a?Ge:jr(l.point):a?l.point:Ge}),Xu=(function(e){var r=e.afterCritical,t=e.impact,n=e.draggables,l=Lt(t);l||Z();var a=l.draggableId,i=n[a].page.borderBox.center,o=Yu({displaced:t.displaced,afterCritical:r,combineWith:a,displacedBy:t.displacedBy});return Ue(i,o)}),mo=function(r,t){return t.margin[r.start]+t.borderBox[r.size]/2},Ju=function(r,t){return t.margin[r.end]+t.borderBox[r.size]/2},Wn=function(r,t,n){return t[r.crossAxisStart]+n.margin[r.crossAxisStart]+n.borderBox[r.crossAxisSize]/2},Ma=function(r){var t=r.axis,n=r.moveRelativeTo,l=r.isMoving;return Nr(t.line,n.marginBox[t.end]+mo(t,l),Wn(t,n.marginBox,l))},Ba=function(r){var t=r.axis,n=r.moveRelativeTo,l=r.isMoving;return Nr(t.line,n.marginBox[t.start]-Ju(t,l),Wn(t,n.marginBox,l))},Qu=function(r){var t=r.axis,n=r.moveInto,l=r.isMoving;return Nr(t.line,n.contentBox[t.start]+mo(t,l),Wn(t,n.contentBox,l))},ed=(function(e){var r=e.impact,t=e.draggable,n=e.draggables,l=e.droppable,a=e.afterCritical,i=Kr(l.descriptor.id,n),o=t.page,s=l.axis;if(!i.length)return Qu({axis:s,moveInto:l.page,isMoving:o});var f=r.displaced,p=r.displacedBy,c=f.all[0];if(c){var d=n[c];if(Ir(c,a))return Ba({axis:s,moveRelativeTo:d.page,isMoving:o});var h=St(d.page,p.point);return Ba({axis:s,moveRelativeTo:h,isMoving:o})}var v=i[i.length-1];if(v.descriptor.id===t.descriptor.id)return o.borderBox.center;if(Ir(v.descriptor.id,a)){var D=St(v.page,jr(a.displacedBy.point));return Ma({axis:s,moveRelativeTo:D,isMoving:o})}return Ma({axis:s,moveRelativeTo:v.page,isMoving:o})}),wn=(function(e,r){var t=e.frame;return t?Ue(r,t.scroll.diff.displacement):r}),rd=function(r){var t=r.impact,n=r.draggable,l=r.droppable,a=r.draggables,i=r.afterCritical,o=n.page.borderBox.center,s=t.at;return!l||!s?o:s.type==="REORDER"?ed({impact:t,draggable:n,draggables:a,droppable:l,afterCritical:i}):Xu({impact:t,draggables:a,afterCritical:i})},zt=(function(e){var r=rd(e),t=e.droppable,n=t?wn(t,r):r;return n}),bo=(function(e,r){var t=Xe(r,e.scroll.initial),n=jr(t),l=sr({top:r.y,bottom:r.y+e.frame.height,left:r.x,right:r.x+e.frame.width}),a={frame:l,scroll:{initial:e.scroll.initial,max:e.scroll.max,current:r,diff:{value:t,displacement:n}}};return a});function Na(e,r){return e.map(function(t){return r[t]})}function td(e,r){for(var t=0;t<r.length;t++){var n=r[t].visible[e];if(n)return n}return null}var nd=(function(e){var r=e.impact,t=e.viewport,n=e.destination,l=e.draggables,a=e.maxScrollChange,i=bo(t,Ue(t.scroll.current,a)),o=n.frame?Ln(n,Ue(n.frame.scroll.current,a)):n,s=r.displaced,f=lt({afterDragging:Na(s.all,l),destination:n,displacedBy:r.displacedBy,viewport:i.frame,last:s,forceShouldAnimate:!1}),p=lt({afterDragging:Na(s.all,l),destination:o,displacedBy:r.displacedBy,viewport:t.frame,last:s,forceShouldAnimate:!1}),c={},d={},h=[s,f,p];s.all.forEach(function(D){var S=td(D,h);if(S){d[D]=S;return}c[D]=!0});var v=le({},r,{displaced:{all:s.all,invisible:c,visible:d}});return v}),ad=(function(e,r){return Ue(e.scroll.diff.displacement,r)}),qn=(function(e){var r=e.pageBorderBoxCenter,t=e.draggable,n=e.viewport,l=ad(n,r),a=Xe(l,t.page.borderBox.center);return Ue(t.client.borderBox.center,a)}),yo=(function(e){var r=e.draggable,t=e.destination,n=e.newPageBorderBoxCenter,l=e.viewport,a=e.withDroppableDisplacement,i=e.onlyOnMainAxis,o=i===void 0?!1:i,s=Xe(n,r.page.borderBox.center),f=ct(r.page.borderBox,s),p={target:f,destination:t,withDroppableDisplacement:a,viewport:l};return o?qu(p):go(p)}),id=(function(e){var r=e.isMovingForward,t=e.draggable,n=e.destination,l=e.draggables,a=e.previousImpact,i=e.viewport,o=e.previousPageBorderBoxCenter,s=e.previousClientSelection,f=e.afterCritical;if(!n.isEnabled)return null;var p=Kr(n.descriptor.id,l),c=Yr(t,n),d=Nu({isMovingForward:r,draggable:t,destination:n,insideDestination:p,previousImpact:a})||Ku({isMovingForward:r,isInHomeList:c,draggable:t,draggables:l,destination:n,insideDestination:p,previousImpact:a,viewport:i,afterCritical:f});if(!d)return null;var h=zt({impact:d,draggable:t,droppable:n,draggables:l,afterCritical:f}),v=yo({draggable:t,destination:n,newPageBorderBoxCenter:h,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(v){var D=qn({pageBorderBoxCenter:h,draggable:t,viewport:i});return{clientSelection:D,impact:d,scrollJumpRequest:null}}var S=Xe(h,o),g=nd({impact:d,viewport:i,destination:n,draggables:l,maxScrollChange:S});return{clientSelection:s,impact:g,scrollJumpRequest:S}}),je=function(r){var t=r.subject.active;return t||Z(),t},od=(function(e){var r=e.isMovingForward,t=e.pageBorderBoxCenter,n=e.source,l=e.droppables,a=e.viewport,i=n.subject.active;if(!i)return null;var o=n.axis,s=ir(i[o.start],i[o.end]),f=Ot(l).filter(function(c){return c!==n}).filter(function(c){return c.isEnabled}).filter(function(c){return!!c.subject.active}).filter(function(c){return vo(a.frame)(je(c))}).filter(function(c){var d=je(c);return r?i[o.crossAxisEnd]<d[o.crossAxisEnd]:d[o.crossAxisStart]<i[o.crossAxisStart]}).filter(function(c){var d=je(c),h=ir(d[o.start],d[o.end]);return s(d[o.start])||s(d[o.end])||h(i[o.start])||h(i[o.end])}).sort(function(c,d){var h=je(c)[o.crossAxisStart],v=je(d)[o.crossAxisStart];return r?h-v:v-h}).filter(function(c,d,h){return je(c)[o.crossAxisStart]===je(h[0])[o.crossAxisStart]});if(!f.length)return null;if(f.length===1)return f[0];var p=f.filter(function(c){var d=ir(je(c)[o.start],je(c)[o.end]);return d(t[o.line])});return p.length===1?p[0]:p.length>1?p.sort(function(c,d){return je(c)[o.start]-je(d)[o.start]})[0]:f.sort(function(c,d){var h=Ra(t,Ta(je(c))),v=Ra(t,Ta(je(d)));return h!==v?h-v:je(c)[o.start]-je(d)[o.start]})[0]}),Oa=function(r,t){var n=r.page.borderBox.center;return Ir(r.descriptor.id,t)?Xe(n,t.displacedBy.point):n},ld=function(r,t){var n=r.page.borderBox;return Ir(r.descriptor.id,t)?ct(n,jr(t.displacedBy.point)):n},sd=(function(e){var r=e.pageBorderBoxCenter,t=e.viewport,n=e.destination,l=e.insideDestination,a=e.afterCritical,i=l.filter(function(o){return go({target:ld(o,a),destination:n,viewport:t.frame,withDroppableDisplacement:!0})}).sort(function(o,s){var f=it(r,wn(n,Oa(o,a))),p=it(r,wn(n,Oa(s,a)));return f<p?-1:p<f?1:o.descriptor.index-s.descriptor.index});return i[0]||null}),ut=ze(function(r,t){var n=t[r.line];return{value:n,point:Nr(r.line,n)}}),cd=function(r,t,n){var l=r.axis;if(r.descriptor.mode==="virtual")return Nr(l.line,t[l.line]);var a=r.subject.page.contentBox[l.size],i=Kr(r.descriptor.id,n),o=i.reduce(function(p,c){return p+c.client.marginBox[l.size]},0),s=o+t[l.line],f=s-a;return f<=0?null:Nr(l.line,f)},wo=function(r,t){return le({},r,{scroll:le({},r.scroll,{max:t})})},xo=function(r,t,n){var l=r.frame;Yr(t,r)&&Z(),r.subject.withPlaceholder&&Z();var a=ut(r.axis,t.displaceBy).point,i=cd(r,a,n),o={placeholderSize:a,increasedBy:i,oldFrameMaxScroll:r.frame?r.frame.scroll.max:null};if(!l){var s=qr({page:r.subject.page,withPlaceholder:o,axis:r.axis,frame:r.frame});return le({},r,{subject:s})}var f=i?Ue(l.scroll.max,i):l.scroll.max,p=wo(l,f),c=qr({page:r.subject.page,withPlaceholder:o,axis:r.axis,frame:p});return le({},r,{subject:c,frame:p})},ud=function(r){var t=r.subject.withPlaceholder;t||Z();var n=r.frame;if(!n){var l=qr({page:r.subject.page,axis:r.axis,frame:null,withPlaceholder:null});return le({},r,{subject:l})}var a=t.oldFrameMaxScroll;a||Z();var i=wo(n,a),o=qr({page:r.subject.page,axis:r.axis,frame:i,withPlaceholder:null});return le({},r,{subject:o,frame:i})},dd=(function(e){var r=e.previousPageBorderBoxCenter,t=e.moveRelativeTo,n=e.insideDestination,l=e.draggable,a=e.draggables,i=e.destination,o=e.viewport,s=e.afterCritical;if(!t){if(n.length)return null;var f={displaced:ot,displacedBy:po,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:0}}},p=zt({impact:f,draggable:l,droppable:i,draggables:a,afterCritical:s}),c=Yr(l,i)?i:xo(i,l,a),d=yo({draggable:l,destination:c,newPageBorderBoxCenter:p,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return d?f:null}var h=r[i.axis.line]<=t.page.borderBox.center[i.axis.line],v=(function(){var S=t.descriptor.index;return t.descriptor.id===l.descriptor.id||h?S:S+1})(),D=ut(i.axis,l.displaceBy);return At({draggable:l,insideDestination:n,destination:i,viewport:o,displacedBy:D,last:ot,index:v})}),fd=(function(e){var r=e.isMovingForward,t=e.previousPageBorderBoxCenter,n=e.draggable,l=e.isOver,a=e.draggables,i=e.droppables,o=e.viewport,s=e.afterCritical,f=od({isMovingForward:r,pageBorderBoxCenter:t,source:l,droppables:i,viewport:o});if(!f)return null;var p=Kr(f.descriptor.id,a),c=sd({pageBorderBoxCenter:t,viewport:o,destination:f,insideDestination:p,afterCritical:s}),d=dd({previousPageBorderBoxCenter:t,destination:f,draggable:n,draggables:a,moveRelativeTo:c,insideDestination:p,viewport:o,afterCritical:s});if(!d)return null;var h=zt({impact:d,draggable:n,droppable:f,draggables:a,afterCritical:s}),v=qn({pageBorderBoxCenter:h,draggable:n,viewport:o});return{clientSelection:v,impact:d,scrollJumpRequest:null}}),Je=(function(e){var r=e.at;return r?r.type==="REORDER"?r.destination.droppableId:r.combine.droppableId:null}),pd=function(r,t){var n=Je(r);return n?t[n]:null},vd=(function(e){var r=e.state,t=e.type,n=pd(r.impact,r.dimensions.droppables),l=!!n,a=r.dimensions.droppables[r.critical.droppable.id],i=n||a,o=i.axis.direction,s=o==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||o==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(s&&!l)return null;var f=t==="MOVE_DOWN"||t==="MOVE_RIGHT",p=r.dimensions.draggables[r.critical.draggable.id],c=r.current.page.borderBoxCenter,d=r.dimensions,h=d.draggables,v=d.droppables;return s?id({isMovingForward:f,previousPageBorderBoxCenter:c,draggable:p,destination:i,draggables:h,viewport:r.viewport,previousClientSelection:r.current.client.selection,previousImpact:r.impact,afterCritical:r.afterCritical}):fd({isMovingForward:f,previousPageBorderBoxCenter:c,draggable:p,isOver:i,draggables:h,droppables:v,viewport:r.viewport,afterCritical:r.afterCritical})});function Mr(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function Do(e){var r=ir(e.top,e.bottom),t=ir(e.left,e.right);return function(l){return r(l.y)&&t(l.x)}}function hd(e,r){return e.left<r.right&&e.right>r.left&&e.top<r.bottom&&e.bottom>r.top}function gd(e){var r=e.pageBorderBox,t=e.draggable,n=e.candidates,l=t.page.borderBox.center,a=n.map(function(i){var o=i.axis,s=Nr(i.axis.line,r.center[o.line],i.page.borderBox.center[o.crossAxisLine]);return{id:i.descriptor.id,distance:it(l,s)}}).sort(function(i,o){return o.distance-i.distance});return a[0]?a[0].id:null}function md(e){var r=e.pageBorderBox,t=e.draggable,n=e.droppables,l=Ot(n).filter(function(a){if(!a.isEnabled)return!1;var i=a.subject.active;if(!i||!hd(r,i))return!1;if(Do(i)(r.center))return!0;var o=a.axis,s=i.center[o.crossAxisLine],f=r[o.crossAxisStart],p=r[o.crossAxisEnd],c=ir(i[o.crossAxisStart],i[o.crossAxisEnd]),d=c(f),h=c(p);return!d&&!h?!0:d?f<s:p>s});return l.length?l.length===1?l[0].descriptor.id:gd({pageBorderBox:r,draggable:t,candidates:l}):null}var So=function(r,t){return sr(ct(r,t))},bd=(function(e,r){var t=e.frame;return t?So(r,t.scroll.diff.value):r});function Co(e){var r=e.displaced,t=e.id;return!!(r.visible[t]||r.invisible[t])}function yd(e){var r=e.draggable,t=e.closest,n=e.inHomeList;return t?n&&t.descriptor.index>r.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var wd=(function(e){var r=e.pageBorderBoxWithDroppableScroll,t=e.draggable,n=e.destination,l=e.insideDestination,a=e.last,i=e.viewport,o=e.afterCritical,s=n.axis,f=ut(n.axis,t.displaceBy),p=f.value,c=r[s.start],d=r[s.end],h=Ft(t,l),v=Er(h,function(S){var g=S.descriptor.id,w=S.page.borderBox.center[s.line],C=Ir(g,o),_=Co({displaced:a,id:g});return C?_?d<=w:c<w-p:_?d<=w+p:c<w}),D=yd({draggable:t,closest:v,inHomeList:Yr(t,n)});return At({draggable:t,insideDestination:l,destination:n,viewport:i,last:a,displacedBy:f,index:D})}),xd=4,Dd=(function(e){var r=e.draggable,t=e.pageBorderBoxWithDroppableScroll,n=e.previousImpact,l=e.destination,a=e.insideDestination,i=e.afterCritical;if(!l.isCombineEnabled)return null;var o=l.axis,s=ut(l.axis,r.displaceBy),f=s.value,p=t[o.start],c=t[o.end],d=Ft(r,a),h=Er(d,function(D){var S=D.descriptor.id,g=D.page.borderBox,w=g[o.size],C=w/xd,_=Ir(S,i),R=Co({displaced:n.displaced,id:S});return _?R?c>g[o.start]+C&&c<g[o.end]-C:p>g[o.start]-f+C&&p<g[o.end]-f-C:R?c>g[o.start]+f+C&&c<g[o.end]+f-C:p>g[o.start]+C&&p<g[o.end]-C});if(!h)return null;var v={displacedBy:s,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:h.descriptor.id,droppableId:l.descriptor.id}}};return v}),_o=(function(e){var r=e.pageOffset,t=e.draggable,n=e.draggables,l=e.droppables,a=e.previousImpact,i=e.viewport,o=e.afterCritical,s=So(t.page.borderBox,r),f=md({pageBorderBox:s,draggable:t,droppables:l});if(!f)return Ou;var p=l[f],c=Kr(p.descriptor.id,n),d=bd(p,s);return Dd({pageBorderBoxWithDroppableScroll:d,draggable:t,previousImpact:a,destination:p,insideDestination:c,afterCritical:o})||wd({pageBorderBoxWithDroppableScroll:d,draggable:t,destination:p,insideDestination:c,last:a.displaced,viewport:i,afterCritical:o})}),Un=(function(e,r){var t;return le({},e,(t={},t[r.descriptor.id]=r,t))}),Sd=function(r){var t=r.previousImpact,n=r.impact,l=r.droppables,a=Je(t),i=Je(n);if(!a||a===i)return l;var o=l[a];if(!o.subject.withPlaceholder)return l;var s=ud(o);return Un(l,s)},Cd=(function(e){var r=e.draggable,t=e.draggables,n=e.droppables,l=e.previousImpact,a=e.impact,i=Sd({previousImpact:l,impact:a,droppables:n}),o=Je(a);if(!o)return i;var s=n[o];if(Yr(r,s)||s.subject.withPlaceholder)return i;var f=xo(s,r,t);return Un(i,f)}),rt=(function(e){var r=e.state,t=e.clientSelection,n=e.dimensions,l=e.viewport,a=e.impact,i=e.scrollJumpRequest,o=l||r.viewport,s=n||r.dimensions,f=t||r.current.client.selection,p=Xe(f,r.initial.client.selection),c={offset:p,selection:f,borderBoxCenter:Ue(r.initial.client.borderBoxCenter,p)},d={selection:Ue(c.selection,o.scroll.current),borderBoxCenter:Ue(c.borderBoxCenter,o.scroll.current),offset:Ue(c.offset,o.scroll.diff.value)},h={client:c,page:d};if(r.phase==="COLLECTING")return le({phase:"COLLECTING"},r,{dimensions:s,viewport:o,current:h});var v=s.draggables[r.critical.draggable.id],D=a||_o({pageOffset:d.offset,draggable:v,draggables:s.draggables,droppables:s.droppables,previousImpact:r.impact,viewport:o,afterCritical:r.afterCritical}),S=Cd({draggable:v,impact:D,previousImpact:r.impact,draggables:s.draggables,droppables:s.droppables}),g=le({},r,{current:h,dimensions:{draggables:s.draggables,droppables:S},impact:D,viewport:o,scrollJumpRequest:i||null,forceShouldAnimate:i?!1:null});return g});function _d(e,r){return e.map(function(t){return r[t]})}var Io=(function(e){var r=e.impact,t=e.viewport,n=e.draggables,l=e.destination,a=e.forceShouldAnimate,i=r.displaced,o=_d(i.all,n),s=lt({afterDragging:o,destination:l,displacedBy:r.displacedBy,viewport:t.frame,forceShouldAnimate:a,last:i});return le({},r,{displaced:s})}),Eo=(function(e){var r=e.impact,t=e.draggable,n=e.droppable,l=e.draggables,a=e.viewport,i=e.afterCritical,o=zt({impact:r,draggable:t,draggables:l,droppable:n,afterCritical:i});return qn({pageBorderBoxCenter:o,draggable:t,viewport:a})}),Ao=(function(e){var r=e.state,t=e.dimensions,n=e.viewport;r.movementMode!=="SNAP"&&Z();var l=r.impact,a=n||r.viewport,i=t||r.dimensions,o=i.draggables,s=i.droppables,f=o[r.critical.draggable.id],p=Je(l);p||Z();var c=s[p],d=Io({impact:l,viewport:a,destination:c,draggables:o}),h=Eo({impact:d,draggable:f,droppable:c,draggables:o,viewport:a,afterCritical:r.afterCritical});return rt({impact:d,clientSelection:h,state:r,dimensions:i,viewport:a})}),Id=(function(e){return{index:e.index,droppableId:e.droppableId}}),ko=(function(e){var r=e.draggable,t=e.home,n=e.draggables,l=e.viewport,a=ut(t.axis,r.displaceBy),i=Kr(t.descriptor.id,n),o=i.indexOf(r);o===-1&&Z();var s=i.slice(o+1),f=s.reduce(function(h,v){return h[v.descriptor.id]=!0,h},{}),p={inVirtualList:t.descriptor.mode==="virtual",displacedBy:a,effected:f},c=lt({afterDragging:s,destination:t,displacedBy:a,last:null,viewport:l.frame,forceShouldAnimate:!1}),d={displaced:c,displacedBy:a,at:{type:"REORDER",destination:Id(r.descriptor)}};return{impact:d,afterCritical:p}}),Ed=(function(e,r){return{draggables:e.draggables,droppables:Un(e.droppables,r)}}),Ad=(function(e){var r=e.draggable,t=e.offset,n=e.initialWindowScroll,l=St(r.client,t),a=Ct(l,n),i=le({},r,{placeholder:le({},r.placeholder,{client:l}),client:l,page:a});return i}),kd=(function(e){var r=e.frame;return r||Z(),r}),Rd=(function(e){var r=e.additions,t=e.updatedDroppables,n=e.viewport,l=n.scroll.diff.value;return r.map(function(a){var i=a.descriptor.droppableId,o=t[i],s=kd(o),f=s.scroll.diff.value,p=Ue(l,f),c=Ad({draggable:a,offset:p,initialWindowScroll:n.scroll.initial});return c})}),Td=(function(e){var r=e.state,t=e.published,n=t.modified.map(function(C){var _=r.dimensions.droppables[C.droppableId],R=Ln(_,C.scroll);return R}),l=le({},r.dimensions.droppables,{},uo(n)),a=fo(Rd({additions:t.additions,updatedDroppables:l,viewport:r.viewport})),i=le({},r.dimensions.draggables,{},a);t.removals.forEach(function(C){delete i[C]});var o={droppables:l,draggables:i},s=Je(r.impact),f=s?o.droppables[s]:null,p=o.draggables[r.critical.draggable.id],c=o.droppables[r.critical.droppable.id],d=ko({draggable:p,home:c,draggables:i,viewport:r.viewport}),h=d.impact,v=d.afterCritical,D=f&&f.isCombineEnabled?r.impact:h,S=_o({pageOffset:r.current.page.offset,draggable:o.draggables[r.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:D,viewport:r.viewport,afterCritical:v}),g=le({phase:"DRAGGING"},r,{phase:"DRAGGING",impact:S,onLiftImpact:h,dimensions:o,afterCritical:v,forceShouldAnimate:!1});if(r.phase==="COLLECTING")return g;var w=le({phase:"DROP_PENDING"},g,{phase:"DROP_PENDING",reason:r.reason,isWaiting:!1});return w}),xn=function(r){return r.movementMode==="SNAP"},jt=function(r,t,n){var l=Ed(r.dimensions,t);return!xn(r)||n?rt({state:r,dimensions:l}):Ao({state:r,dimensions:l})};function Kt(e){return e.isDragging&&e.movementMode==="SNAP"?le({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var La={phase:"IDLE",completed:null,shouldFlush:!1},Pd=(function(e,r){if(e===void 0&&(e=La),r.type==="FLUSH")return le({},La,{shouldFlush:!0});if(r.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&Z();var t=r.payload,n=t.critical,l=t.clientSelection,a=t.viewport,i=t.dimensions,o=t.movementMode,s=i.draggables[n.draggable.id],f=i.droppables[n.droppable.id],p={selection:l,borderBoxCenter:s.client.borderBox.center,offset:Ge},c={client:p,page:{selection:Ue(p.selection,a.scroll.initial),borderBoxCenter:Ue(p.selection,a.scroll.initial),offset:Ue(p.selection,a.scroll.diff.value)}},d=Ot(i.droppables).every(function(Ne){return!Ne.isFixedOnPage}),h=ko({draggable:s,home:f,draggables:i.draggables,viewport:a}),v=h.impact,D=h.afterCritical,S={phase:"DRAGGING",isDragging:!0,critical:n,movementMode:o,dimensions:i,initial:c,current:c,isWindowScrollAllowed:d,impact:v,afterCritical:D,onLiftImpact:v,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null};return S}if(r.type==="COLLECTION_STARTING"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&Z();var g=le({phase:"COLLECTING"},e,{phase:"COLLECTING"});return g}if(r.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||Z(),Td({state:e,published:r.payload});if(r.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Mr(e)||Z();var w=r.payload.client;return Cr(w,e.current.client.selection)?e:rt({state:e,clientSelection:w,impact:xn(e)?e.impact:null})}if(r.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return Kt(e);Mr(e)||Z();var C=r.payload,_=C.id,R=C.newScroll,T=e.dimensions.droppables[_];if(!T)return e;var I=Ln(T,R);return jt(e,I,!1)}if(r.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Mr(e)||Z();var B=r.payload,L=B.id,H=B.isEnabled,F=e.dimensions.droppables[L];F||Z(),F.isEnabled===H&&Z();var q=le({},F,{isEnabled:H});return jt(e,q,!0)}if(r.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Mr(e)||Z();var k=r.payload,W=k.id,X=k.isCombineEnabled,K=e.dimensions.droppables[W];K||Z(),K.isCombineEnabled===X&&Z();var j=le({},K,{isCombineEnabled:X});return jt(e,j,!0)}if(r.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Mr(e)||Z(),e.isWindowScrollAllowed||Z();var G=r.payload.newScroll;if(Cr(e.viewport.scroll.current,G))return Kt(e);var ee=bo(e.viewport,G);return xn(e)?Ao({state:e,viewport:ee}):rt({state:e,viewport:ee})}if(r.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Mr(e))return e;var fe=r.payload.maxScroll;if(Cr(fe,e.viewport.scroll.max))return e;var _e=le({},e.viewport,{scroll:le({},e.viewport.scroll,{max:fe})});return le({phase:"DRAGGING"},e,{viewport:_e})}if(r.type==="MOVE_UP"||r.type==="MOVE_DOWN"||r.type==="MOVE_LEFT"||r.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&Z();var ue=vd({state:e,type:r.type});return ue?rt({state:e,impact:ue.impact,clientSelection:ue.clientSelection,scrollJumpRequest:ue.scrollJumpRequest}):e}if(r.type==="DROP_PENDING"){var he=r.payload.reason;e.phase!=="COLLECTING"&&Z();var Se=le({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:he});return Se}if(r.type==="DROP_ANIMATE"){var ge=r.payload,ce=ge.completed,ye=ge.dropDuration,se=ge.newHomeClientOffset;e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||Z();var ne={phase:"DROP_ANIMATING",completed:ce,dropDuration:ye,newHomeClientOffset:se,dimensions:e.dimensions};return ne}if(r.type==="DROP_COMPLETE"){var ke=r.payload.completed;return{phase:"IDLE",completed:ke,shouldFlush:!1}}return e}),Md=function(r){return{type:"BEFORE_INITIAL_CAPTURE",payload:r}},Bd=function(r){return{type:"LIFT",payload:r}},Nd=function(r){return{type:"INITIAL_PUBLISH",payload:r}},Od=function(r){return{type:"PUBLISH_WHILE_DRAGGING",payload:r}},Ld=function(){return{type:"COLLECTION_STARTING",payload:null}},Fd=function(r){return{type:"UPDATE_DROPPABLE_SCROLL",payload:r}},zd=function(r){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:r}},Gd=function(r){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:r}},Ro=function(r){return{type:"MOVE",payload:r}},Hd=function(r){return{type:"MOVE_BY_WINDOW_SCROLL",payload:r}},Wd=function(r){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:r}},qd=function(){return{type:"MOVE_UP",payload:null}},Ud=function(){return{type:"MOVE_DOWN",payload:null}},$d=function(){return{type:"MOVE_RIGHT",payload:null}},Vd=function(){return{type:"MOVE_LEFT",payload:null}},$n=function(){return{type:"FLUSH",payload:null}},Zd=function(r){return{type:"DROP_ANIMATE",payload:r}},Vn=function(r){return{type:"DROP_COMPLETE",payload:r}},To=function(r){return{type:"DROP",payload:r}},jd=function(r){return{type:"DROP_PENDING",payload:r}},Po=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},Kd=(function(e){return function(r){var t=r.getState,n=r.dispatch;return function(l){return function(a){if(a.type!=="LIFT"){l(a);return}var i=a.payload,o=i.id,s=i.clientSelection,f=i.movementMode,p=t();p.phase==="DROP_ANIMATING"&&n(Vn({completed:p.completed})),t().phase!=="IDLE"&&Z(),n($n()),n(Md({draggableId:o,movementMode:f}));var c={shouldPublishImmediately:f==="SNAP"},d={draggableId:o,scrollOptions:c},h=e.startPublishing(d),v=h.critical,D=h.dimensions,S=h.viewport;n(Nd({critical:v,dimensions:D,clientSelection:s,movementMode:f,viewport:S}))}}}}),Yd=(function(e){return function(){return function(r){return function(t){t.type==="INITIAL_PUBLISH"&&e.dragging(),t.type==="DROP_ANIMATE"&&e.dropping(t.payload.completed.result.reason),(t.type==="FLUSH"||t.type==="DROP_COMPLETE")&&e.resting(),r(t)}}}}),Zn={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},st={opacity:{drop:0,combining:.7},scale:{drop:.75}},jn={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},kr=jn.outOfTheWay+"s "+Zn.outOfTheWay,tt={fluid:"opacity "+kr,snap:"transform "+kr+", opacity "+kr,drop:function(r){var t=r+"s "+Zn.drop;return"transform "+t+", opacity "+t},outOfTheWay:"transform "+kr,placeholder:"height "+kr+", width "+kr+", margin "+kr},Fa=function(r){return Cr(r,Ge)?null:"translate("+r.x+"px, "+r.y+"px)"},Dn={moveTo:Fa,drop:function(r,t){var n=Fa(r);return n?t?n+" scale("+st.scale.drop+")":n:null}},Sn=jn.minDropTime,Mo=jn.maxDropTime,Xd=Mo-Sn,za=1500,Jd=.6,Qd=(function(e){var r=e.current,t=e.destination,n=e.reason,l=it(r,t);if(l<=0)return Sn;if(l>=za)return Mo;var a=l/za,i=Sn+Xd*a,o=n==="CANCEL"?i*Jd:i;return Number(o.toFixed(2))}),ef=(function(e){var r=e.impact,t=e.draggable,n=e.dimensions,l=e.viewport,a=e.afterCritical,i=n.draggables,o=n.droppables,s=Je(r),f=s?o[s]:null,p=o[t.descriptor.droppableId],c=Eo({impact:r,draggable:t,draggables:i,afterCritical:a,droppable:f||p,viewport:l}),d=Xe(c,t.client.borderBox.center);return d}),rf=(function(e){var r=e.draggables,t=e.reason,n=e.lastImpact,l=e.home,a=e.viewport,i=e.onLiftImpact;if(!n.at||t!=="DROP"){var o=Io({draggables:r,impact:i,destination:l,viewport:a,forceShouldAnimate:!0});return{impact:o,didDropInsideDroppable:!1}}if(n.at.type==="REORDER")return{impact:n,didDropInsideDroppable:!0};var s=le({},n,{displaced:ot});return{impact:s,didDropInsideDroppable:!0}}),tf=(function(e){var r=e.getState,t=e.dispatch;return function(n){return function(l){if(l.type!=="DROP"){n(l);return}var a=r(),i=l.payload.reason;if(a.phase==="COLLECTING"){t(jd({reason:i}));return}if(a.phase!=="IDLE"){var o=a.phase==="DROP_PENDING"&&a.isWaiting;o&&Z(),a.phase==="DRAGGING"||a.phase==="DROP_PENDING"||Z();var s=a.critical,f=a.dimensions,p=f.draggables[a.critical.draggable.id],c=rf({reason:i,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),d=c.impact,h=c.didDropInsideDroppable,v=h?zn(d):null,D=h?Lt(d):null,S={index:s.draggable.index,droppableId:s.droppable.id},g={draggableId:p.descriptor.id,type:p.descriptor.type,source:S,reason:i,mode:a.movementMode,destination:v,combine:D},w=ef({impact:d,draggable:p,dimensions:f,viewport:a.viewport,afterCritical:a.afterCritical}),C={critical:a.critical,afterCritical:a.afterCritical,result:g,impact:d},_=!Cr(a.current.client.offset,w)||!!g.combine;if(!_){t(Vn({completed:C}));return}var R=Qd({current:a.current.client.offset,destination:w,reason:i}),T={newHomeClientOffset:w,dropDuration:R,completed:C};t(Zd(T))}}}}),Bo=(function(){return{x:window.pageXOffset,y:window.pageYOffset}});function nf(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(t){t.target!==window&&t.target!==window.document||e()}}}function af(e){var r=e.onWindowScroll;function t(){r(Bo())}var n=at(t),l=nf(n),a=Sr;function i(){return a!==Sr}function o(){i()&&Z(),a=ar(window,[l])}function s(){i()||Z(),n.cancel(),a(),a=Sr}return{start:o,stop:s,isActive:i}}var of=function(r){return r.type==="DROP_COMPLETE"||r.type==="DROP_ANIMATE"||r.type==="FLUSH"},lf=(function(e){var r=af({onWindowScroll:function(n){e.dispatch(Hd({newScroll:n}))}});return function(t){return function(n){!r.isActive()&&n.type==="INITIAL_PUBLISH"&&r.start(),r.isActive()&&of(n)&&r.stop(),t(n)}}}),sf=(function(e){var r=!1,t=!1,n=setTimeout(function(){t=!0}),l=function(i){r||t||(r=!0,e(i),clearTimeout(n))};return l.wasCalled=function(){return r},l}),cf=(function(){var e=[],r=function(a){var i=Fn(e,function(f){return f.timerId===a});i===-1&&Z();var o=e.splice(i,1),s=o[0];s.callback()},t=function(a){var i=setTimeout(function(){return r(i)}),o={timerId:i,callback:a};e.push(o)},n=function(){if(e.length){var a=[].concat(e);e.length=0,a.forEach(function(i){clearTimeout(i.timerId),i.callback()})}};return{add:t,flush:n}}),uf=function(r,t){return r==null&&t==null?!0:r==null||t==null?!1:r.droppableId===t.droppableId&&r.index===t.index},df=function(r,t){return r==null&&t==null?!0:r==null||t==null?!1:r.draggableId===t.draggableId&&r.droppableId===t.droppableId},ff=function(r,t){if(r===t)return!0;var n=r.draggable.id===t.draggable.id&&r.draggable.droppableId===t.draggable.droppableId&&r.draggable.type===t.draggable.type&&r.draggable.index===t.draggable.index,l=r.droppable.id===t.droppable.id&&r.droppable.type===t.droppable.type;return n&&l},Xr=function(r,t){t()},ht=function(r,t){return{draggableId:r.draggable.id,type:r.droppable.type,source:{droppableId:r.droppable.id,index:r.draggable.index},mode:t}},Yt=function(r,t,n,l){if(!r){n(l(t));return}var a=sf(n),i={announce:a};r(t,i),a.wasCalled()||n(l(t))},pf=(function(e,r){var t=cf(),n=null,l=function(d,h){n&&Z(),Xr("onBeforeCapture",function(){var v=e().onBeforeCapture;if(v){var D={draggableId:d,mode:h};v(D)}})},a=function(d,h){n&&Z(),Xr("onBeforeDragStart",function(){var v=e().onBeforeDragStart;v&&v(ht(d,h))})},i=function(d,h){n&&Z();var v=ht(d,h);n={mode:h,lastCritical:d,lastLocation:v.source,lastCombine:null},t.add(function(){Xr("onDragStart",function(){return Yt(e().onDragStart,v,r,wt.onDragStart)})})},o=function(d,h){var v=zn(h),D=Lt(h);n||Z();var S=!ff(d,n.lastCritical);S&&(n.lastCritical=d);var g=!uf(n.lastLocation,v);g&&(n.lastLocation=v);var w=!df(n.lastCombine,D);if(w&&(n.lastCombine=D),!(!S&&!g&&!w)){var C=le({},ht(d,n.mode),{combine:D,destination:v});t.add(function(){Xr("onDragUpdate",function(){return Yt(e().onDragUpdate,C,r,wt.onDragUpdate)})})}},s=function(){n||Z(),t.flush()},f=function(d){n||Z(),n=null,Xr("onDragEnd",function(){return Yt(e().onDragEnd,d,r,wt.onDragEnd)})},p=function(){if(n){var d=le({},ht(n.lastCritical,n.mode),{combine:null,destination:null,reason:"CANCEL"});f(d)}};return{beforeCapture:l,beforeStart:a,start:i,update:o,flush:s,drop:f,abort:p}}),vf=(function(e,r){var t=pf(e,r);return function(n){return function(l){return function(a){if(a.type==="BEFORE_INITIAL_CAPTURE"){t.beforeCapture(a.payload.draggableId,a.payload.movementMode);return}if(a.type==="INITIAL_PUBLISH"){var i=a.payload.critical;t.beforeStart(i,a.payload.movementMode),l(a),t.start(i,a.payload.movementMode);return}if(a.type==="DROP_COMPLETE"){var o=a.payload.completed.result;t.flush(),l(a),t.drop(o);return}if(l(a),a.type==="FLUSH"){t.abort();return}var s=n.getState();s.phase==="DRAGGING"&&t.update(s.critical,s.impact)}}}}),hf=(function(e){return function(r){return function(t){if(t.type!=="DROP_ANIMATION_FINISHED"){r(t);return}var n=e.getState();n.phase!=="DROP_ANIMATING"&&Z(),e.dispatch(Vn({completed:n.completed}))}}}),gf=(function(e){var r=null,t=null;function n(){t&&(cancelAnimationFrame(t),t=null),r&&(r(),r=null)}return function(l){return function(a){if((a.type==="FLUSH"||a.type==="DROP_COMPLETE"||a.type==="DROP_ANIMATION_FINISHED")&&n(),l(a),a.type==="DROP_ANIMATE"){var i={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var s=e.getState();s.phase==="DROP_ANIMATING"&&e.dispatch(Po())}};t=requestAnimationFrame(function(){t=null,r=ar(window,[i])})}}}}),mf=(function(e){return function(){return function(r){return function(t){(t.type==="DROP_COMPLETE"||t.type==="FLUSH"||t.type==="DROP_ANIMATE")&&e.stopPublishing(),r(t)}}}}),bf=(function(e){var r=!1;return function(){return function(t){return function(n){if(n.type==="INITIAL_PUBLISH"){r=!0,e.tryRecordFocus(n.payload.critical.draggable.id),t(n),e.tryRestoreFocusRecorded();return}if(t(n),!!r){if(n.type==="FLUSH"){r=!1,e.tryRestoreFocusRecorded();return}if(n.type==="DROP_COMPLETE"){r=!1;var l=n.payload.completed.result;l.combine&&e.tryShiftRecord(l.draggableId,l.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}}),yf=function(r){return r.type==="DROP_COMPLETE"||r.type==="DROP_ANIMATE"||r.type==="FLUSH"},wf=(function(e){return function(r){return function(t){return function(n){if(yf(n)){e.stop(),t(n);return}if(n.type==="INITIAL_PUBLISH"){t(n);var l=r.getState();l.phase!=="DRAGGING"&&Z(),e.start(l);return}t(n),e.scroll(r.getState())}}}}),xf=(function(e){return function(r){return function(t){if(r(t),t.type==="PUBLISH_WHILE_DRAGGING"){var n=e.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||e.dispatch(To({reason:n.reason})))}}}}),Df=Ki,Sf=(function(e){var r=e.dimensionMarshal,t=e.focusMarshal,n=e.styleMarshal,l=e.getResponders,a=e.announce,i=e.autoScroller;return ji(Pd,Df(Rc(Yd(n),mf(r),Kd(r),tf,hf,gf,xf,wf(i),lf,bf(t),vf(l,a))))}),Xt=function(){return{additions:{},removals:{},modified:{}}};function Cf(e){var r=e.registry,t=e.callbacks,n=Xt(),l=null,a=function(){l||(t.collectionStarting(),l=requestAnimationFrame(function(){l=null;var p=n,c=p.additions,d=p.removals,h=p.modified,v=Object.keys(c).map(function(g){return r.draggable.getById(g).getDimension(Ge)}).sort(function(g,w){return g.descriptor.index-w.descriptor.index}),D=Object.keys(h).map(function(g){var w=r.droppable.getById(g),C=w.callbacks.getScrollWhileDragging();return{droppableId:g,scroll:C}}),S={additions:v,removals:Object.keys(d),modified:D};n=Xt(),t.publish(S)}))},i=function(p){var c=p.descriptor.id;n.additions[c]=p,n.modified[p.descriptor.droppableId]=!0,n.removals[c]&&delete n.removals[c],a()},o=function(p){var c=p.descriptor;n.removals[c.id]=!0,n.modified[c.droppableId]=!0,n.additions[c.id]&&delete n.additions[c.id],a()},s=function(){l&&(cancelAnimationFrame(l),l=null,n=Xt())};return{add:i,remove:o,stop:s}}var No=(function(e){var r=e.scrollHeight,t=e.scrollWidth,n=e.height,l=e.width,a=Xe({x:t,y:r},{x:l,y:n}),i={x:Math.max(0,a.x),y:Math.max(0,a.y)};return i}),Oo=(function(){var e=document.documentElement;return e||Z(),e}),Lo=(function(){var e=Oo(),r=No({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight});return r}),_f=(function(){var e=Bo(),r=Lo(),t=e.y,n=e.x,l=Oo(),a=l.clientWidth,i=l.clientHeight,o=n+a,s=t+i,f=sr({top:t,left:n,right:o,bottom:s}),p={frame:f,scroll:{initial:e,current:e,max:r,diff:{value:Ge,displacement:Ge}}};return p}),If=(function(e){var r=e.critical,t=e.scrollOptions,n=e.registry,l=_f(),a=l.scroll.current,i=r.droppable,o=n.droppable.getAllByType(i.type).map(function(c){return c.callbacks.getDimensionAndWatchScroll(a,t)}),s=n.draggable.getAllByType(r.draggable.type).map(function(c){return c.getDimension(a)}),f={draggables:fo(s),droppables:uo(o)},p={dimensions:f,critical:r,viewport:l};return p});function Ga(e,r,t){if(t.descriptor.id===r.id||t.descriptor.type!==r.type)return!1;var n=e.droppable.getById(t.descriptor.droppableId);return n.descriptor.mode==="virtual"}var Ef=(function(e,r){var t=null,n=Cf({callbacks:{publish:r.publishWhileDragging,collectionStarting:r.collectionStarting},registry:e}),l=function(h,v){e.droppable.exists(h)||Z(),t&&r.updateDroppableIsEnabled({id:h,isEnabled:v})},a=function(h,v){t&&(e.droppable.exists(h)||Z(),r.updateDroppableIsCombineEnabled({id:h,isCombineEnabled:v}))},i=function(h,v){t&&(e.droppable.exists(h)||Z(),r.updateDroppableScroll({id:h,newScroll:v}))},o=function(h,v){t&&e.droppable.getById(h).callbacks.scroll(v)},s=function(){if(t){n.stop();var h=t.critical.droppable;e.droppable.getAllByType(h.type).forEach(function(v){return v.callbacks.dragStopped()}),t.unsubscribe(),t=null}},f=function(h){t||Z();var v=t.critical.draggable;h.type==="ADDITION"&&Ga(e,v,h.value)&&n.add(h.value),h.type==="REMOVAL"&&Ga(e,v,h.value)&&n.remove(h.value)},p=function(h){t&&Z();var v=e.draggable.getById(h.draggableId),D=e.droppable.getById(v.descriptor.droppableId),S={draggable:v.descriptor,droppable:D.descriptor},g=e.subscribe(f);return t={critical:S,unsubscribe:g},If({critical:S,registry:e,scrollOptions:h.scrollOptions})},c={updateDroppableIsEnabled:l,updateDroppableIsCombineEnabled:a,scrollDroppable:o,updateDroppableScroll:i,startPublishing:p,stopPublishing:s};return c}),Fo=(function(e,r){return e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===r?!1:e.completed.result.reason==="DROP"}),Af=(function(e){window.scrollBy(e.x,e.y)}),kf=ze(function(e){return Ot(e).filter(function(r){return!(!r.isEnabled||!r.frame)})}),Rf=function(r,t){var n=Er(kf(t),function(l){return l.frame||Z(),Do(l.frame.pageMarginBox)(r)});return n},Tf=(function(e){var r=e.center,t=e.destination,n=e.droppables;if(t){var l=n[t];return l.frame?l:null}var a=Rf(r,n);return a}),_r={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(r){return Math.pow(r,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},Pf=(function(e,r){var t=e[r.size]*_r.startFromPercentage,n=e[r.size]*_r.maxScrollAtPercentage,l={startScrollingFrom:t,maxScrollValueAt:n};return l}),zo=(function(e){var r=e.startOfRange,t=e.endOfRange,n=e.current,l=t-r;if(l===0)return 0;var a=n-r,i=a/l;return i}),Kn=1,Mf=(function(e,r){if(e>r.startScrollingFrom)return 0;if(e<=r.maxScrollValueAt)return _r.maxPixelScroll;if(e===r.startScrollingFrom)return Kn;var t=zo({startOfRange:r.maxScrollValueAt,endOfRange:r.startScrollingFrom,current:e}),n=1-t,l=_r.maxPixelScroll*_r.ease(n);return Math.ceil(l)}),Ha=_r.durationDampening.accelerateAt,Wa=_r.durationDampening.stopDampeningAt,Bf=(function(e,r){var t=r,n=Wa,l=Date.now(),a=l-t;if(a>=Wa)return e;if(a<Ha)return Kn;var i=zo({startOfRange:Ha,endOfRange:n,current:a}),o=e*_r.ease(i);return Math.ceil(o)}),qa=(function(e){var r=e.distanceToEdge,t=e.thresholds,n=e.dragStartTime,l=e.shouldUseTimeDampening,a=Mf(r,t);return a===0?0:l?Math.max(Bf(a,n),Kn):a}),Ua=(function(e){var r=e.container,t=e.distanceToEdges,n=e.dragStartTime,l=e.axis,a=e.shouldUseTimeDampening,i=Pf(r,l),o=t[l.end]<t[l.start];return o?qa({distanceToEdge:t[l.end],thresholds:i,dragStartTime:n,shouldUseTimeDampening:a}):-1*qa({distanceToEdge:t[l.start],thresholds:i,dragStartTime:n,shouldUseTimeDampening:a})}),Nf=(function(e){var r=e.container,t=e.subject,n=e.proposedScroll,l=t.height>r.height,a=t.width>r.width;return!a&&!l?n:a&&l?null:{x:a?0:n.x,y:l?0:n.y}}),Of=so(function(e){return e===0?0:e}),Go=(function(e){var r=e.dragStartTime,t=e.container,n=e.subject,l=e.center,a=e.shouldUseTimeDampening,i={top:l.y-t.top,right:t.right-l.x,bottom:t.bottom-l.y,left:l.x-t.left},o=Ua({container:t,distanceToEdges:i,dragStartTime:r,axis:Gn,shouldUseTimeDampening:a}),s=Ua({container:t,distanceToEdges:i,dragStartTime:r,axis:ho,shouldUseTimeDampening:a}),f=Of({x:s,y:o});if(Cr(f,Ge))return null;var p=Nf({container:t,subject:n,proposedScroll:f});return p?Cr(p,Ge)?null:p:null}),Lf=so(function(e){return e===0?0:e>0?1:-1}),Yn=(function(){var e=function(t,n){return t<0?t:t>n?t-n:0};return function(r){var t=r.current,n=r.max,l=r.change,a=Ue(t,l),i={x:e(a.x,n.x),y:e(a.y,n.y)};return Cr(i,Ge)?null:i}})(),Ho=function(r){var t=r.max,n=r.current,l=r.change,a={x:Math.max(n.x,t.x),y:Math.max(n.y,t.y)},i=Lf(l),o=Yn({max:a,current:n,change:i});return!o||i.x!==0&&o.x===0||i.y!==0&&o.y===0},Xn=function(r,t){return Ho({current:r.scroll.current,max:r.scroll.max,change:t})},Ff=function(r,t){if(!Xn(r,t))return null;var n=r.scroll.max,l=r.scroll.current;return Yn({current:l,max:n,change:t})},Jn=function(r,t){var n=r.frame;return n?Ho({current:n.scroll.current,max:n.scroll.max,change:t}):!1},zf=function(r,t){var n=r.frame;return!n||!Jn(r,t)?null:Yn({current:n.scroll.current,max:n.scroll.max,change:t})},Gf=(function(e){var r=e.viewport,t=e.subject,n=e.center,l=e.dragStartTime,a=e.shouldUseTimeDampening,i=Go({dragStartTime:l,container:r.frame,subject:t,center:n,shouldUseTimeDampening:a});return i&&Xn(r,i)?i:null}),Hf=(function(e){var r=e.droppable,t=e.subject,n=e.center,l=e.dragStartTime,a=e.shouldUseTimeDampening,i=r.frame;if(!i)return null;var o=Go({dragStartTime:l,container:i.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:a});return o&&Jn(r,o)?o:null}),$a=(function(e){var r=e.state,t=e.dragStartTime,n=e.shouldUseTimeDampening,l=e.scrollWindow,a=e.scrollDroppable,i=r.current.page.borderBoxCenter,o=r.dimensions.draggables[r.critical.draggable.id],s=o.page.marginBox;if(r.isWindowScrollAllowed){var f=r.viewport,p=Gf({dragStartTime:t,viewport:f,subject:s,center:i,shouldUseTimeDampening:n});if(p){l(p);return}}var c=Tf({center:i,destination:Je(r.impact),droppables:r.dimensions.droppables});if(c){var d=Hf({dragStartTime:t,droppable:c,subject:s,center:i,shouldUseTimeDampening:n});d&&a(c.descriptor.id,d)}}),Wf=(function(e){var r=e.scrollWindow,t=e.scrollDroppable,n=at(r),l=at(t),a=null,i=function(p){a||Z();var c=a,d=c.shouldUseTimeDampening,h=c.dragStartTime;$a({state:p,scrollWindow:n,scrollDroppable:l,dragStartTime:h,shouldUseTimeDampening:d})},o=function(p){a&&Z();var c=Date.now(),d=!1,h=function(){d=!0};$a({state:p,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:h,scrollDroppable:h}),a={dragStartTime:c,shouldUseTimeDampening:d},d&&i(p)},s=function(){a&&(n.cancel(),l.cancel(),a=null)};return{start:o,stop:s,scroll:i}}),qf=(function(e){var r=e.move,t=e.scrollDroppable,n=e.scrollWindow,l=function(f,p){var c=Ue(f.current.client.selection,p);r({client:c})},a=function(f,p){if(!Jn(f,p))return p;var c=zf(f,p);if(!c)return t(f.descriptor.id,p),null;var d=Xe(p,c);t(f.descriptor.id,d);var h=Xe(p,d);return h},i=function(f,p,c){if(!f||!Xn(p,c))return c;var d=Ff(p,c);if(!d)return n(c),null;var h=Xe(c,d);n(h);var v=Xe(c,h);return v},o=function(f){var p=f.scrollJumpRequest;if(p){var c=Je(f.impact);c||Z();var d=a(f.dimensions.droppables[c],p);if(d){var h=f.viewport,v=i(f.isWindowScrollAllowed,h,d);v&&l(f,v)}}};return o}),Uf=(function(e){var r=e.scrollDroppable,t=e.scrollWindow,n=e.move,l=Wf({scrollWindow:t,scrollDroppable:r}),a=qf({move:n,scrollWindow:t,scrollDroppable:r}),i=function(f){if(f.phase==="DRAGGING"){if(f.movementMode==="FLUID"){l.scroll(f);return}f.scrollJumpRequest&&a(f)}},o={scroll:i,start:l.start,stop:l.stop};return o}),Ur="data-rbd",$r=(function(){var e=Ur+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}})(),Cn=(function(){var e=Ur+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}})(),$f=(function(){var e=Ur+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}})(),Va={contextId:Ur+"-scroll-container-context-id"},Vf=function(r){return function(t){return"["+t+'="'+r+'"]'}},Jr=function(r,t){return r.map(function(n){var l=n.styles[t];return l?n.selector+" { "+l+" }":""}).join(" ")},Zf="pointer-events: none;",jf=(function(e){var r=Vf(e),t=(function(){var o=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:r($r.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:o,dragging:Zf,dropAnimating:o}}})(),n=(function(){var o=`
      transition: `+tt.outOfTheWay+`;
    `;return{selector:r(Cn.contextId),styles:{dragging:o,dropAnimating:o,userCancel:o}}})(),l={selector:r($f.contextId),styles:{always:"overflow-anchor: none;"}},a={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},i=[n,t,l,a];return{always:Jr(i,"always"),resting:Jr(i,"resting"),dragging:Jr(i,"dragging"),dropAnimating:Jr(i,"dropAnimating"),userCancel:Jr(i,"userCancel")}}),Qe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?Ri:Ae,Jt=function(){var r=document.querySelector("head");return r||Z(),r},Za=function(r){var t=document.createElement("style");return r&&t.setAttribute("nonce",r),t.type="text/css",t};function Kf(e,r){var t=be(function(){return jf(e)},[e]),n=De(null),l=De(null),a=te(ze(function(c){var d=l.current;d||Z(),d.textContent=c}),[]),i=te(function(c){var d=n.current;d||Z(),d.textContent=c},[]);Qe(function(){!n.current&&!l.current||Z();var c=Za(r),d=Za(r);return n.current=c,l.current=d,c.setAttribute(Ur+"-always",e),d.setAttribute(Ur+"-dynamic",e),Jt().appendChild(c),Jt().appendChild(d),i(t.always),a(t.resting),function(){var h=function(D){var S=D.current;S||Z(),Jt().removeChild(S),D.current=null};h(n),h(l)}},[r,i,a,t.always,t.resting,e]);var o=te(function(){return a(t.dragging)},[a,t.dragging]),s=te(function(c){if(c==="DROP"){a(t.dropAnimating);return}a(t.userCancel)},[a,t.dropAnimating,t.userCancel]),f=te(function(){l.current&&a(t.resting)},[a,t.resting]),p=be(function(){return{dragging:o,dropping:s,resting:f}},[o,s,f]);return p}var Wo=(function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window});function Gt(e){return e instanceof Wo(e).HTMLElement}function Yf(e,r){var t="["+$r.contextId+'="'+e+'"]',n=co(document.querySelectorAll(t));if(!n.length)return null;var l=Er(n,function(a){return a.getAttribute($r.draggableId)===r});return!l||!Gt(l)?null:l}function Xf(e){var r=De({}),t=De(null),n=De(null),l=De(!1),a=te(function(d,h){var v={id:d,focus:h};return r.current[d]=v,function(){var S=r.current,g=S[d];g!==v&&delete S[d]}},[]),i=te(function(d){var h=Yf(e,d);h&&h!==document.activeElement&&h.focus()},[e]),o=te(function(d,h){t.current===d&&(t.current=h)},[]),s=te(function(){n.current||l.current&&(n.current=requestAnimationFrame(function(){n.current=null;var d=t.current;d&&i(d)}))},[i]),f=te(function(d){t.current=null;var h=document.activeElement;h&&h.getAttribute($r.draggableId)===d&&(t.current=d)},[]);Qe(function(){return l.current=!0,function(){l.current=!1;var d=n.current;d&&cancelAnimationFrame(d)}},[]);var p=be(function(){return{register:a,tryRecordFocus:f,tryRestoreFocusRecorded:s,tryShiftRecord:o}},[a,f,s,o]);return p}function Jf(){var e={draggables:{},droppables:{}},r=[];function t(c){return r.push(c),function(){var h=r.indexOf(c);h!==-1&&r.splice(h,1)}}function n(c){r.length&&r.forEach(function(d){return d(c)})}function l(c){return e.draggables[c]||null}function a(c){var d=l(c);return d||Z(),d}var i={register:function(d){e.draggables[d.descriptor.id]=d,n({type:"ADDITION",value:d})},update:function(d,h){var v=e.draggables[h.descriptor.id];v&&v.uniqueId===d.uniqueId&&(delete e.draggables[h.descriptor.id],e.draggables[d.descriptor.id]=d)},unregister:function(d){var h=d.descriptor.id,v=l(h);v&&d.uniqueId===v.uniqueId&&(delete e.draggables[h],n({type:"REMOVAL",value:d}))},getById:a,findById:l,exists:function(d){return!!l(d)},getAllByType:function(d){return Et(e.draggables).filter(function(h){return h.descriptor.type===d})}};function o(c){return e.droppables[c]||null}function s(c){var d=o(c);return d||Z(),d}var f={register:function(d){e.droppables[d.descriptor.id]=d},unregister:function(d){var h=o(d.descriptor.id);h&&d.uniqueId===h.uniqueId&&delete e.droppables[d.descriptor.id]},getById:s,findById:o,exists:function(d){return!!o(d)},getAllByType:function(d){return Et(e.droppables).filter(function(h){return h.descriptor.type===d})}};function p(){e.draggables={},e.droppables={},r.length=0}return{draggable:i,droppable:f,subscribe:t,clean:p}}function Qf(){var e=be(Jf,[]);return Ae(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}var Qn=we.createContext(null),kt=(function(){var e=document.body;return e||Z(),e}),ep={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},rp=function(r){return"rbd-announcement-"+r};function tp(e){var r=be(function(){return rp(e)},[e]),t=De(null);Ae(function(){var a=document.createElement("div");return t.current=a,a.id=r,a.setAttribute("aria-live","assertive"),a.setAttribute("aria-atomic","true"),le(a.style,ep),kt().appendChild(a),function(){setTimeout(function(){var s=kt();s.contains(a)&&s.removeChild(a),a===t.current&&(t.current=null)})}},[r]);var n=te(function(l){var a=t.current;if(a){a.textContent=l;return}},[]);return n}var np=0,ap={separator:"::"};function ea(e,r){return r===void 0&&(r=ap),be(function(){return""+e+r.separator+np++},[r.separator,e])}function ip(e){var r=e.contextId,t=e.uniqueId;return"rbd-hidden-text-"+r+"-"+t}function op(e){var r=e.contextId,t=e.text,n=ea("hidden-text",{separator:"-"}),l=be(function(){return ip({contextId:r,uniqueId:n})},[n,r]);return Ae(function(){var i=document.createElement("div");return i.id=l,i.textContent=t,i.style.display="none",kt().appendChild(i),function(){var s=kt();s.contains(i)&&s.removeChild(i)}},[l,t]),l}var Ht=we.createContext(null);function qo(e){var r=De(e);return Ae(function(){r.current=e}),r}function lp(){var e=null;function r(){return!!e}function t(i){return i===e}function n(i){e&&Z();var o={abandon:i};return e=o,o}function l(){e||Z(),e=null}function a(){e&&(e.abandon(),l())}return{isClaimed:r,isActive:t,claim:n,release:l,tryAbandon:a}}var sp=9,cp=13,ra=27,Uo=32,up=33,dp=34,fp=35,pp=36,vp=37,hp=38,gp=39,mp=40,gt,bp=(gt={},gt[cp]=!0,gt[sp]=!0,gt),$o=(function(e){bp[e.keyCode]&&e.preventDefault()}),Wt=(function(){var e="visibilitychange";if(typeof document>"u")return e;var r=[e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],t=Er(r,function(n){return"on"+n in document});return t||e})(),Vo=0,ja=5;function yp(e,r){return Math.abs(r.x-e.x)>=ja||Math.abs(r.y-e.y)>=ja}var Ka={type:"IDLE"};function wp(e){var r=e.cancel,t=e.completed,n=e.getPhase,l=e.setPhase;return[{eventName:"mousemove",fn:function(i){var o=i.button,s=i.clientX,f=i.clientY;if(o===Vo){var p={x:s,y:f},c=n();if(c.type==="DRAGGING"){i.preventDefault(),c.actions.move(p);return}c.type!=="PENDING"&&Z();var d=c.point;if(yp(d,p)){i.preventDefault();var h=c.actions.fluidLift(p);l({type:"DRAGGING",actions:h})}}}},{eventName:"mouseup",fn:function(i){var o=n();if(o.type!=="DRAGGING"){r();return}i.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:function(i){n().type==="DRAGGING"&&i.preventDefault(),r()}},{eventName:"keydown",fn:function(i){var o=n();if(o.type==="PENDING"){r();return}if(i.keyCode===ra){i.preventDefault(),r();return}$o(i)}},{eventName:"resize",fn:r},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){n().type==="PENDING"&&r()}},{eventName:"webkitmouseforcedown",fn:function(i){var o=n();if(o.type==="IDLE"&&Z(),o.actions.shouldRespectForcePress()){r();return}i.preventDefault()}},{eventName:Wt,fn:r}]}function xp(e){var r=De(Ka),t=De(Sr),n=be(function(){return{eventName:"mousedown",fn:function(c){if(!c.defaultPrevented&&c.button===Vo&&!(c.ctrlKey||c.metaKey||c.shiftKey||c.altKey)){var d=e.findClosestDraggableId(c);if(d){var h=e.tryGetLock(d,i,{sourceEvent:c});if(h){c.preventDefault();var v={x:c.clientX,y:c.clientY};t.current(),f(h,v)}}}}}},[e]),l=be(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(c){if(!c.defaultPrevented){var d=e.findClosestDraggableId(c);if(d){var h=e.findOptionsForDraggable(d);h&&(h.shouldRespectForcePress||e.canGetLock(d)&&c.preventDefault())}}}}},[e]),a=te(function(){var c={passive:!1,capture:!0};t.current=ar(window,[l,n],c)},[l,n]),i=te(function(){var p=r.current;p.type!=="IDLE"&&(r.current=Ka,t.current(),a())},[a]),o=te(function(){var p=r.current;i(),p.type==="DRAGGING"&&p.actions.cancel({shouldBlockNextClick:!0}),p.type==="PENDING"&&p.actions.abort()},[i]),s=te(function(){var c={capture:!0,passive:!1},d=wp({cancel:o,completed:i,getPhase:function(){return r.current},setPhase:function(v){r.current=v}});t.current=ar(window,d,c)},[o,i]),f=te(function(c,d){r.current.type!=="IDLE"&&Z(),r.current={type:"PENDING",point:d,actions:c},s()},[s]);Qe(function(){return a(),function(){t.current()}},[a])}var Gr;function Dp(){}var Sp=(Gr={},Gr[dp]=!0,Gr[up]=!0,Gr[pp]=!0,Gr[fp]=!0,Gr);function Cp(e,r){function t(){r(),e.cancel()}function n(){r(),e.drop()}return[{eventName:"keydown",fn:function(a){if(a.keyCode===ra){a.preventDefault(),t();return}if(a.keyCode===Uo){a.preventDefault(),n();return}if(a.keyCode===mp){a.preventDefault(),e.moveDown();return}if(a.keyCode===hp){a.preventDefault(),e.moveUp();return}if(a.keyCode===gp){a.preventDefault(),e.moveRight();return}if(a.keyCode===vp){a.preventDefault(),e.moveLeft();return}if(Sp[a.keyCode]){a.preventDefault();return}$o(a)}},{eventName:"mousedown",fn:t},{eventName:"mouseup",fn:t},{eventName:"click",fn:t},{eventName:"touchstart",fn:t},{eventName:"resize",fn:t},{eventName:"wheel",fn:t,options:{passive:!0}},{eventName:Wt,fn:t}]}function _p(e){var r=De(Dp),t=be(function(){return{eventName:"keydown",fn:function(a){if(a.defaultPrevented||a.keyCode!==Uo)return;var i=e.findClosestDraggableId(a);if(!i)return;var o=e.tryGetLock(i,p,{sourceEvent:a});if(!o)return;a.preventDefault();var s=!0,f=o.snapLift();r.current();function p(){s||Z(),s=!1,r.current(),n()}r.current=ar(window,Cp(f,p),{capture:!0,passive:!1})}}},[e]),n=te(function(){var a={passive:!1,capture:!0};r.current=ar(window,[t],a)},[t]);Qe(function(){return n(),function(){r.current()}},[n])}var Qt={type:"IDLE"},Ip=120,Ep=.15;function Ap(e){var r=e.cancel,t=e.getPhase;return[{eventName:"orientationchange",fn:r},{eventName:"resize",fn:r},{eventName:"contextmenu",fn:function(l){l.preventDefault()}},{eventName:"keydown",fn:function(l){if(t().type!=="DRAGGING"){r();return}l.keyCode===ra&&l.preventDefault(),r()}},{eventName:Wt,fn:r}]}function kp(e){var r=e.cancel,t=e.completed,n=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(a){var i=n();if(i.type!=="DRAGGING"){r();return}i.hasMoved=!0;var o=a.touches[0],s=o.clientX,f=o.clientY,p={x:s,y:f};a.preventDefault(),i.actions.move(p)}},{eventName:"touchend",fn:function(a){var i=n();if(i.type!=="DRAGGING"){r();return}a.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:function(a){if(n().type!=="DRAGGING"){r();return}a.preventDefault(),r()}},{eventName:"touchforcechange",fn:function(a){var i=n();i.type==="IDLE"&&Z();var o=a.touches[0];if(o){var s=o.force>=Ep;if(s){var f=i.actions.shouldRespectForcePress();if(i.type==="PENDING"){f&&r();return}if(f){if(i.hasMoved){a.preventDefault();return}r();return}a.preventDefault()}}}},{eventName:Wt,fn:r}]}function Rp(e){var r=De(Qt),t=De(Sr),n=te(function(){return r.current},[]),l=te(function(h){r.current=h},[]),a=be(function(){return{eventName:"touchstart",fn:function(h){if(!h.defaultPrevented){var v=e.findClosestDraggableId(h);if(v){var D=e.tryGetLock(v,o,{sourceEvent:h});if(D){var S=h.touches[0],g=S.clientX,w=S.clientY,C={x:g,y:w};t.current(),c(D,C)}}}}}},[e]),i=te(function(){var h={capture:!0,passive:!1};t.current=ar(window,[a],h)},[a]),o=te(function(){var d=r.current;d.type!=="IDLE"&&(d.type==="PENDING"&&clearTimeout(d.longPressTimerId),l(Qt),t.current(),i())},[i,l]),s=te(function(){var d=r.current;o(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[o]),f=te(function(){var h={capture:!0,passive:!1},v={cancel:s,completed:o,getPhase:n},D=ar(window,kp(v),h),S=ar(window,Ap(v),h);t.current=function(){D(),S()}},[s,n,o]),p=te(function(){var h=n();h.type!=="PENDING"&&Z();var v=h.actions.fluidLift(h.point);l({type:"DRAGGING",actions:v,hasMoved:!1})},[n,l]),c=te(function(h,v){n().type!=="IDLE"&&Z();var D=setTimeout(p,Ip);l({type:"PENDING",point:v,actions:h,longPressTimerId:D}),f()},[f,n,l,p]);Qe(function(){return i(),function(){t.current();var v=n();v.type==="PENDING"&&(clearTimeout(v.longPressTimerId),l(Qt))}},[n,i,l]),Qe(function(){var h=ar(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return h},[])}var Tp={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function Zo(e,r){if(r==null)return!1;var t=!!Tp[r.tagName.toLowerCase()];if(t)return!0;var n=r.getAttribute("contenteditable");return n==="true"||n===""?!0:r===e?!1:Zo(e,r.parentElement)}function Pp(e,r){var t=r.target;return Gt(t)?Zo(e,t):!1}var Mp=(function(e){return sr(e.getBoundingClientRect()).center});function Bp(e){return e instanceof Wo(e).Element}var Np=(function(){var e="matches";if(typeof document>"u")return e;var r=[e,"msMatchesSelector","webkitMatchesSelector"],t=Er(r,function(n){return n in Element.prototype});return t||e})();function jo(e,r){return e==null?null:e[Np](r)?e:jo(e.parentElement,r)}function Op(e,r){return e.closest?e.closest(r):jo(e,r)}function Lp(e){return"["+$r.contextId+'="'+e+'"]'}function Fp(e,r){var t=r.target;if(!Bp(t))return null;var n=Lp(e),l=Op(t,n);return!l||!Gt(l)?null:l}function zp(e,r){var t=Fp(e,r);return t?t.getAttribute($r.draggableId):null}function Gp(e,r){var t="["+Cn.contextId+'="'+e+'"]',n=co(document.querySelectorAll(t)),l=Er(n,function(a){return a.getAttribute(Cn.id)===r});return!l||!Gt(l)?null:l}function Hp(e){e.preventDefault()}function mt(e){var r=e.expected,t=e.phase,n=e.isLockActive;return e.shouldWarn,!(!n()||r!==t)}function Ko(e){var r=e.lockAPI,t=e.store,n=e.registry,l=e.draggableId;if(r.isClaimed())return!1;var a=n.draggable.findById(l);return!(!a||!a.options.isEnabled||!Fo(t.getState(),l))}function Wp(e){var r=e.lockAPI,t=e.contextId,n=e.store,l=e.registry,a=e.draggableId,i=e.forceSensorStop,o=e.sourceEvent,s=Ko({lockAPI:r,store:n,registry:l,draggableId:a});if(!s)return null;var f=l.draggable.getById(a),p=Gp(t,f.descriptor.id);if(!p||o&&!f.options.canDragInteractiveElements&&Pp(p,o))return null;var c=r.claim(i||Sr),d="PRE_DRAG";function h(){return f.options.shouldRespectForcePress}function v(){return r.isActive(c)}function D(T,I){mt({expected:T,phase:d,isLockActive:v,shouldWarn:!0})&&n.dispatch(I())}var S=D.bind(null,"DRAGGING");function g(T){function I(){r.release(),d="COMPLETED"}d!=="PRE_DRAG"&&(I(),d!=="PRE_DRAG"&&Z()),n.dispatch(Bd(T.liftActionArgs)),d="DRAGGING";function B(L,H){if(H===void 0&&(H={shouldBlockNextClick:!1}),T.cleanup(),H.shouldBlockNextClick){var F=ar(window,[{eventName:"click",fn:Hp,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(F)}I(),n.dispatch(To({reason:L}))}return le({isActive:function(){return mt({expected:"DRAGGING",phase:d,isLockActive:v,shouldWarn:!1})},shouldRespectForcePress:h,drop:function(H){return B("DROP",H)},cancel:function(H){return B("CANCEL",H)}},T.actions)}function w(T){var I=at(function(L){S(function(){return Ro({client:L})})}),B=g({liftActionArgs:{id:a,clientSelection:T,movementMode:"FLUID"},cleanup:function(){return I.cancel()},actions:{move:I}});return le({},B,{move:I})}function C(){var T={moveUp:function(){return S(qd)},moveRight:function(){return S($d)},moveDown:function(){return S(Ud)},moveLeft:function(){return S(Vd)}};return g({liftActionArgs:{id:a,clientSelection:Mp(p),movementMode:"SNAP"},cleanup:Sr,actions:T})}function _(){var T=mt({expected:"PRE_DRAG",phase:d,isLockActive:v,shouldWarn:!0});T&&r.release()}var R={isActive:function(){return mt({expected:"PRE_DRAG",phase:d,isLockActive:v,shouldWarn:!1})},shouldRespectForcePress:h,fluidLift:w,snapLift:C,abort:_};return R}var qp=[xp,_p,Rp];function Up(e){var r=e.contextId,t=e.store,n=e.registry,l=e.customSensors,a=e.enableDefaultSensors,i=[].concat(a?qp:[],l||[]),o=ur(function(){return lp()})[0],s=te(function(w,C){w.isDragging&&!C.isDragging&&o.tryAbandon()},[o]);Qe(function(){var w=t.getState(),C=t.subscribe(function(){var _=t.getState();s(w,_),w=_});return C},[o,t,s]),Qe(function(){return o.tryAbandon},[o.tryAbandon]);for(var f=te(function(g){return Ko({lockAPI:o,registry:n,store:t,draggableId:g})},[o,n,t]),p=te(function(g,w,C){return Wp({lockAPI:o,registry:n,contextId:r,store:t,draggableId:g,forceSensorStop:w,sourceEvent:C&&C.sourceEvent?C.sourceEvent:null})},[r,o,n,t]),c=te(function(g){return zp(r,g)},[r]),d=te(function(g){var w=n.draggable.findById(g);return w?w.options:null},[n.draggable]),h=te(function(){o.isClaimed()&&(o.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch($n()))},[o,t]),v=te(o.isClaimed,[o]),D=be(function(){return{canGetLock:f,tryGetLock:p,findClosestDraggableId:c,findOptionsForDraggable:d,tryReleaseLock:h,isLockClaimed:v}},[f,p,c,d,h,v]),S=0;S<i.length;S++)i[S](D)}var $p=function(r){return{onBeforeCapture:r.onBeforeCapture,onBeforeDragStart:r.onBeforeDragStart,onDragStart:r.onDragStart,onDragEnd:r.onDragEnd,onDragUpdate:r.onDragUpdate}};function Qr(e){return e.current||Z(),e.current}function Vp(e){var r=e.contextId,t=e.setCallbacks,n=e.sensors,l=e.nonce,a=e.dragHandleUsageInstructions,i=De(null),o=qo(e),s=te(function(){return $p(o.current)},[o]),f=tp(r),p=op({contextId:r,text:a}),c=Kf(r,l),d=te(function(L){Qr(i).dispatch(L)},[]),h=be(function(){return wa({publishWhileDragging:Od,updateDroppableScroll:Fd,updateDroppableIsEnabled:zd,updateDroppableIsCombineEnabled:Gd,collectionStarting:Ld},d)},[d]),v=Qf(),D=be(function(){return Ef(v,h)},[v,h]),S=be(function(){return Uf(le({scrollWindow:Af,scrollDroppable:D.scrollDroppable},wa({move:Ro},d)))},[D.scrollDroppable,d]),g=Xf(r),w=be(function(){return Sf({announce:f,autoScroller:S,dimensionMarshal:D,focusMarshal:g,getResponders:s,styleMarshal:c})},[f,S,D,g,s,c]);i.current=w;var C=te(function(){var L=Qr(i),H=L.getState();H.phase!=="IDLE"&&L.dispatch($n())},[]),_=te(function(){var L=Qr(i).getState();return L.isDragging||L.phase==="DROP_ANIMATING"},[]),R=be(function(){return{isDragging:_,tryAbort:C}},[_,C]);t(R);var T=te(function(L){return Fo(Qr(i).getState(),L)},[]),I=te(function(){return Mr(Qr(i).getState())},[]),B=be(function(){return{marshal:D,focus:g,contextId:r,canLift:T,isMovementAllowed:I,dragHandleUsageInstructionsId:p,registry:v}},[r,D,p,g,T,I,v]);return Up({contextId:r,store:w,registry:v,customSensors:n,enableDefaultSensors:e.enableDefaultSensors!==!1}),Ae(function(){return C},[C]),we.createElement(Ht.Provider,{value:B},we.createElement(Nc,{context:Qn,store:w},e.children))}var Zp=0;function jp(){return be(function(){return""+Zp++},[])}function Yo(e){var r=jp(),t=e.dragHandleUsageInstructions||wt.dragHandleUsageInstructions;return we.createElement(Cu,null,function(n){return we.createElement(Vp,{nonce:e.nonce,contextId:r,setCallbacks:n,dragHandleUsageInstructions:t,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var Xo=function(r){return function(t){return r===t}},Kp=Xo("scroll"),Yp=Xo("auto"),Ya=function(r,t){return t(r.overflowX)||t(r.overflowY)},Xp=function(r){var t=window.getComputedStyle(r),n={overflowX:t.overflowX,overflowY:t.overflowY};return Ya(n,Kp)||Ya(n,Yp)},Jp=function(){return!1},Qp=function e(r){return r==null?null:r===document.body?Jp()?r:null:r===document.documentElement?null:Xp(r)?r:e(r.parentElement)},_n=(function(e){return{x:e.scrollLeft,y:e.scrollTop}}),ev=function e(r){if(!r)return!1;var t=window.getComputedStyle(r);return t.position==="fixed"?!0:e(r.parentElement)},rv=(function(e){var r=Qp(e),t=ev(e);return{closestScrollable:r,isFixedOnPage:t}}),tv=(function(e){var r=e.descriptor,t=e.isEnabled,n=e.isCombineEnabled,l=e.isFixedOnPage,a=e.direction,i=e.client,o=e.page,s=e.closest,f=(function(){if(!s)return null;var h=s.scrollSize,v=s.client,D=No({scrollHeight:h.scrollHeight,scrollWidth:h.scrollWidth,height:v.paddingBox.height,width:v.paddingBox.width});return{pageMarginBox:s.page.marginBox,frameClient:v,scrollSize:h,shouldClipSubject:s.shouldClipSubject,scroll:{initial:s.scroll,current:s.scroll,max:D,diff:{value:Ge,displacement:Ge}}}})(),p=a==="vertical"?Gn:ho,c=qr({page:o,withPlaceholder:null,axis:p,frame:f}),d={descriptor:r,isCombineEnabled:n,isFixedOnPage:l,axis:p,isEnabled:t,client:i,page:o,frame:f,subject:c};return d}),nv=function(r,t){var n=ao(r);if(!t||r!==t)return n;var l=n.paddingBox.top-t.scrollTop,a=n.paddingBox.left-t.scrollLeft,i=l+t.scrollHeight,o=a+t.scrollWidth,s={top:l,right:o,bottom:i,left:a},f=Nn(s,n.border),p=On({borderBox:f,margin:n.margin,border:n.border,padding:n.padding});return p},av=(function(e){var r=e.ref,t=e.descriptor,n=e.env,l=e.windowScroll,a=e.direction,i=e.isDropDisabled,o=e.isCombineEnabled,s=e.shouldClipSubject,f=n.closestScrollable,p=nv(r,f),c=Ct(p,l),d=(function(){if(!f)return null;var v=ao(f),D={scrollHeight:f.scrollHeight,scrollWidth:f.scrollWidth};return{client:v,page:Ct(v,l),scroll:_n(f),scrollSize:D,shouldClipSubject:s}})(),h=tv({descriptor:t,isEnabled:!i,isCombineEnabled:o,isFixedOnPage:n.isFixedOnPage,direction:a,client:p,page:c,closest:d});return h}),iv={passive:!1},ov={passive:!0},Xa=(function(e){return e.shouldPublishImmediately?iv:ov});function Rt(e){var r=An(e);return r||Z(),r}var bt=function(r){return r&&r.env.closestScrollable||null};function lv(e){var r=De(null),t=Rt(Ht),n=ea("droppable"),l=t.registry,a=t.marshal,i=qo(e),o=be(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),s=De(o),f=be(function(){return ze(function(_,R){r.current||Z();var T={x:_,y:R};a.updateDroppableScroll(o.id,T)})},[o.id,a]),p=te(function(){var _=r.current;return!_||!_.env.closestScrollable?Ge:_n(_.env.closestScrollable)},[]),c=te(function(){var _=p();f(_.x,_.y)},[p,f]),d=be(function(){return at(c)},[c]),h=te(function(){var _=r.current,R=bt(_);_&&R||Z();var T=_.scrollOptions;if(T.shouldPublishImmediately){c();return}d()},[d,c]),v=te(function(_,R){r.current&&Z();var T=i.current,I=T.getDroppableRef();I||Z();var B=rv(I),L={ref:I,descriptor:o,env:B,scrollOptions:R};r.current=L;var H=av({ref:I,descriptor:o,env:B,windowScroll:_,direction:T.direction,isDropDisabled:T.isDropDisabled,isCombineEnabled:T.isCombineEnabled,shouldClipSubject:!T.ignoreContainerClipping}),F=B.closestScrollable;return F&&(F.setAttribute(Va.contextId,t.contextId),F.addEventListener("scroll",h,Xa(L.scrollOptions))),H},[t.contextId,o,h,i]),D=te(function(){var _=r.current,R=bt(_);return _&&R||Z(),_n(R)},[]),S=te(function(){var _=r.current;_||Z();var R=bt(_);r.current=null,R&&(d.cancel(),R.removeAttribute(Va.contextId),R.removeEventListener("scroll",h,Xa(_.scrollOptions)))},[h,d]),g=te(function(_){var R=r.current;R||Z();var T=bt(R);T||Z(),T.scrollTop+=_.y,T.scrollLeft+=_.x},[]),w=be(function(){return{getDimensionAndWatchScroll:v,getScrollWhileDragging:D,dragStopped:S,scroll:g}},[S,v,D,g]),C=be(function(){return{uniqueId:n,descriptor:o,callbacks:w}},[w,o,n]);Qe(function(){return s.current=C.descriptor,l.droppable.register(C),function(){r.current&&S(),l.droppable.unregister(C)}},[w,o,S,C,a,l.droppable]),Qe(function(){r.current&&a.updateDroppableIsEnabled(s.current.id,!e.isDropDisabled)},[e.isDropDisabled,a]),Qe(function(){r.current&&a.updateDroppableIsCombineEnabled(s.current.id,e.isCombineEnabled)},[e.isCombineEnabled,a])}function en(){}var Ja={width:0,height:0,margin:Ru},sv=function(r){var t=r.isAnimatingOpenOnMount,n=r.placeholder,l=r.animate;return t||l==="close"?Ja:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}},cv=function(r){var t=r.isAnimatingOpenOnMount,n=r.placeholder,l=r.animate,a=sv({isAnimatingOpenOnMount:t,placeholder:n,animate:l});return{display:n.display,boxSizing:"border-box",width:a.width,height:a.height,marginTop:a.margin.top,marginRight:a.margin.right,marginBottom:a.margin.bottom,marginLeft:a.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:l!=="none"?tt.placeholder:null}};function uv(e){var r=De(null),t=te(function(){r.current&&(clearTimeout(r.current),r.current=null)},[]),n=e.animate,l=e.onTransitionEnd,a=e.onClose,i=e.contextId,o=ur(e.animate==="open"),s=o[0],f=o[1];Ae(function(){return s?n!=="open"?(t(),f(!1),en):r.current?en:(r.current=setTimeout(function(){r.current=null,f(!1)}),t):en},[n,s,t]);var p=te(function(d){d.propertyName==="height"&&(l(),n==="close"&&a())},[n,a,l]),c=cv({isAnimatingOpenOnMount:s,animate:e.animate,placeholder:e.placeholder});return we.createElement(e.placeholder.tagName,{style:c,"data-rbd-placeholder-context-id":i,onTransitionEnd:p,ref:e.innerRef})}var dv=we.memo(uv),ta=we.createContext(null),fv=(function(e){Li(r,e);function r(){for(var n,l=arguments.length,a=new Array(l),i=0;i<l;i++)a[i]=arguments[i];return n=e.call.apply(e,[this].concat(a))||this,n.state={isVisible:!!n.props.on,data:n.props.on,animate:n.props.shouldAnimate&&n.props.on?"open":"none"},n.onClose=function(){n.state.animate==="close"&&n.setState({isVisible:!1})},n}r.getDerivedStateFromProps=function(l,a){return l.shouldAnimate?l.on?{isVisible:!0,data:l.on,animate:"open"}:a.isVisible?{isVisible:!0,data:a.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!l.on,data:l.on,animate:"none"}};var t=r.prototype;return t.render=function(){if(!this.state.isVisible)return null;var l={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(l)},r})(we.PureComponent),Qa={dragging:5e3,dropAnimating:4500},pv=function(r,t){return t?tt.drop(t.duration):r?tt.snap:tt.fluid},vv=function(r,t){return r?t?st.opacity.drop:st.opacity.combining:null},hv=function(r){return r.forceShouldAnimate!=null?r.forceShouldAnimate:r.mode==="SNAP"};function gv(e){var r=e.dimension,t=r.client,n=e.offset,l=e.combineWith,a=e.dropping,i=!!l,o=hv(e),s=!!a,f=s?Dn.drop(n,i):Dn.moveTo(n),p={position:"fixed",top:t.marginBox.top,left:t.marginBox.left,boxSizing:"border-box",width:t.borderBox.width,height:t.borderBox.height,transition:pv(o,a),transform:f,opacity:vv(i,s),zIndex:s?Qa.dropAnimating:Qa.dragging,pointerEvents:"none"};return p}function mv(e){return{transform:Dn.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}function bv(e){return e.type==="DRAGGING"?gv(e):mv(e)}function yv(e,r,t){t===void 0&&(t=Ge);var n=window.getComputedStyle(r),l=r.getBoundingClientRect(),a=no(l,n),i=Ct(a,t),o={client:a,tagName:r.tagName.toLowerCase(),display:n.display},s={x:a.marginBox.width,y:a.marginBox.height},f={descriptor:e,placeholder:o,displaceBy:s,client:a,page:i};return f}function wv(e){var r=ea("draggable"),t=e.descriptor,n=e.registry,l=e.getDraggableRef,a=e.canDragInteractiveElements,i=e.shouldRespectForcePress,o=e.isEnabled,s=be(function(){return{canDragInteractiveElements:a,shouldRespectForcePress:i,isEnabled:o}},[a,o,i]),f=te(function(h){var v=l();return v||Z(),yv(t,v,h)},[t,l]),p=be(function(){return{uniqueId:r,descriptor:t,options:s,getDimension:f}},[t,f,s,r]),c=De(p),d=De(!0);Qe(function(){return n.draggable.register(c.current),function(){return n.draggable.unregister(c.current)}},[n.draggable]),Qe(function(){if(d.current){d.current=!1;return}var h=c.current;c.current=p,n.draggable.update(p,h)},[p,n.draggable])}function xv(e){e.preventDefault()}function Dv(e){var r=De(null),t=te(function(L){r.current=L},[]),n=te(function(){return r.current},[]),l=Rt(Ht),a=l.contextId,i=l.dragHandleUsageInstructionsId,o=l.registry,s=Rt(ta),f=s.type,p=s.droppableId,c=be(function(){return{id:e.draggableId,index:e.index,type:f,droppableId:p}},[e.draggableId,e.index,f,p]),d=e.children,h=e.draggableId,v=e.isEnabled,D=e.shouldRespectForcePress,S=e.canDragInteractiveElements,g=e.isClone,w=e.mapped,C=e.dropAnimationFinished;if(!g){var _=be(function(){return{descriptor:c,registry:o,getDraggableRef:n,canDragInteractiveElements:S,shouldRespectForcePress:D,isEnabled:v}},[c,o,n,S,D,v]);wv(_)}var R=be(function(){return v?{tabIndex:0,role:"button","aria-describedby":i,"data-rbd-drag-handle-draggable-id":h,"data-rbd-drag-handle-context-id":a,draggable:!1,onDragStart:xv}:null},[a,i,h,v]),T=te(function(L){w.type==="DRAGGING"&&w.dropping&&L.propertyName==="transform"&&C()},[C,w]),I=be(function(){var L=bv(w),H=w.type==="DRAGGING"&&w.dropping?T:null,F={innerRef:t,draggableProps:{"data-rbd-draggable-context-id":a,"data-rbd-draggable-id":h,style:L,onTransitionEnd:H},dragHandleProps:R};return F},[a,R,h,w,T,t]),B=be(function(){return{draggableId:c.id,type:c.type,source:{index:c.index,droppableId:c.droppableId}}},[c.droppableId,c.id,c.index,c.type]);return d(I,w.snapshot,B)}var Jo=(function(e,r){return e===r}),Qo=(function(e){var r=e.combine,t=e.destination;return t?t.droppableId:r?r.droppableId:null}),Sv=function(r){return r.combine?r.combine.draggableId:null},Cv=function(r){return r.at&&r.at.type==="COMBINE"?r.at.combine.draggableId:null};function _v(){var e=ze(function(l,a){return{x:l,y:a}}),r=ze(function(l,a,i,o,s){return{isDragging:!0,isClone:a,isDropAnimating:!!s,dropAnimation:s,mode:l,draggingOver:i,combineWith:o,combineTargetFor:null}}),t=ze(function(l,a,i,o,s,f,p){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:s,combineWith:f,mode:a,offset:l,dimension:i,forceShouldAnimate:p,snapshot:r(a,o,s,f,null)}}}),n=function(a,i){if(a.isDragging){if(a.critical.draggable.id!==i.draggableId)return null;var o=a.current.client.offset,s=a.dimensions.draggables[i.draggableId],f=Je(a.impact),p=Cv(a.impact),c=a.forceShouldAnimate;return t(e(o.x,o.y),a.movementMode,s,i.isClone,f,p,c)}if(a.phase==="DROP_ANIMATING"){var d=a.completed;if(d.result.draggableId!==i.draggableId)return null;var h=i.isClone,v=a.dimensions.draggables[i.draggableId],D=d.result,S=D.mode,g=Qo(D),w=Sv(D),C=a.dropDuration,_={duration:C,curve:Zn.drop,moveTo:a.newHomeClientOffset,opacity:w?st.opacity.drop:null,scale:w?st.scale.drop:null};return{mapped:{type:"DRAGGING",offset:a.newHomeClientOffset,dimension:v,dropping:_,draggingOver:g,combineWith:w,mode:S,forceShouldAnimate:null,snapshot:r(S,h,g,w,_)}}}return null};return n}function el(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var Iv={mapped:{type:"SECONDARY",offset:Ge,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:el(null)}};function Ev(){var e=ze(function(i,o){return{x:i,y:o}}),r=ze(el),t=ze(function(i,o,s){return o===void 0&&(o=null),{mapped:{type:"SECONDARY",offset:i,combineTargetFor:o,shouldAnimateDisplacement:s,snapshot:r(o)}}}),n=function(o){return o?t(Ge,o,!0):null},l=function(o,s,f,p){var c=f.displaced.visible[o],d=!!(p.inVirtualList&&p.effected[o]),h=Lt(f),v=h&&h.draggableId===o?s:null;if(!c){if(!d)return n(v);if(f.displaced.invisible[o])return null;var D=jr(p.displacedBy.point),S=e(D.x,D.y);return t(S,v,!0)}if(d)return n(v);var g=f.displacedBy.point,w=e(g.x,g.y);return t(w,v,c.shouldAnimate)},a=function(o,s){if(o.isDragging)return o.critical.draggable.id===s.draggableId?null:l(s.draggableId,o.critical.draggable.id,o.impact,o.afterCritical);if(o.phase==="DROP_ANIMATING"){var f=o.completed;return f.result.draggableId===s.draggableId?null:l(s.draggableId,f.result.draggableId,f.impact,f.afterCritical)}return null};return a}var Av=function(){var r=_v(),t=Ev(),n=function(a,i){return r(a,i)||t(a,i)||Iv};return n},kv={dropAnimationFinished:Po},Rv=ro(Av,kv,null,{context:Qn,pure:!0,areStatePropsEqual:Jo})(Dv);function rl(e){var r=Rt(ta),t=r.isUsingCloneFor;return t===e.draggableId&&!e.isClone?null:we.createElement(Rv,e)}function tl(e){var r=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,t=!!e.disableInteractiveElementBlocking,n=!!e.shouldRespectForcePress;return we.createElement(rl,le({},e,{isClone:!1,isEnabled:r,canDragInteractiveElements:t,shouldRespectForcePress:n}))}function Tv(e){var r=An(Ht);r||Z();var t=r.contextId,n=r.isMovementAllowed,l=De(null),a=De(null),i=e.children,o=e.droppableId,s=e.type,f=e.mode,p=e.direction,c=e.ignoreContainerClipping,d=e.isDropDisabled,h=e.isCombineEnabled,v=e.snapshot,D=e.useClone,S=e.updateViewportMaxScroll,g=e.getContainerForClone,w=te(function(){return l.current},[]),C=te(function(F){l.current=F},[]);te(function(){return a.current},[]);var _=te(function(F){a.current=F},[]),R=te(function(){n()&&S({maxScroll:Lo()})},[n,S]);lv({droppableId:o,type:s,mode:f,direction:p,isDropDisabled:d,isCombineEnabled:h,ignoreContainerClipping:c,getDroppableRef:w});var T=we.createElement(fv,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(F){var q=F.onClose,k=F.data,W=F.animate;return we.createElement(dv,{placeholder:k,onClose:q,innerRef:_,animate:W,contextId:t,onTransitionEnd:R})}),I=be(function(){return{innerRef:C,placeholder:T,droppableProps:{"data-rbd-droppable-id":o,"data-rbd-droppable-context-id":t}}},[t,o,T,C]),B=D?D.dragging.draggableId:null,L=be(function(){return{droppableId:o,type:s,isUsingCloneFor:B}},[o,B,s]);function H(){if(!D)return null;var F=D.dragging,q=D.render,k=we.createElement(rl,{draggableId:F.draggableId,index:F.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(W,X){return q(W,X,F)});return we.createPortal(k,g())}return we.createElement(ta.Provider,{value:L},i(I,v),H())}var rn=function(r,t){return r===t.droppable.type},ei=function(r,t){return t.draggables[r.draggable.id]},Pv=function(){var r={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t=le({},r,{shouldAnimatePlaceholder:!1}),n=ze(function(i){return{draggableId:i.id,type:i.type,source:{index:i.index,droppableId:i.droppableId}}}),l=ze(function(i,o,s,f,p,c){var d=p.descriptor.id,h=p.descriptor.droppableId===i;if(h){var v=c?{render:c,dragging:n(p.descriptor)}:null,D={isDraggingOver:s,draggingOverWith:s?d:null,draggingFromThisWith:d,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!1,snapshot:D,useClone:v}}if(!o)return t;if(!f)return r;var S={isDraggingOver:s,draggingOverWith:d,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!0,snapshot:S,useClone:null}}),a=function(o,s){var f=s.droppableId,p=s.type,c=!s.isDropDisabled,d=s.renderClone;if(o.isDragging){var h=o.critical;if(!rn(p,h))return t;var v=ei(h,o.dimensions),D=Je(o.impact)===f;return l(f,c,D,D,v,d)}if(o.phase==="DROP_ANIMATING"){var S=o.completed;if(!rn(p,S.critical))return t;var g=ei(S.critical,o.dimensions);return l(f,c,Qo(S.result)===f,Je(S.impact)===f,g,d)}if(o.phase==="IDLE"&&o.completed&&!o.shouldFlush){var w=o.completed;if(!rn(p,w.critical))return t;var C=Je(w.impact)===f,_=!!(w.impact.at&&w.impact.at.type==="COMBINE"),R=w.critical.droppable.id===f;return C?_?r:t:R?r:t}return t};return a},Mv={updateViewportMaxScroll:Wd};function Bv(){return document.body||Z(),document.body}var Nv={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Bv},na=ro(Pv,Mv,null,{context:Qn,pure:!0,areStatePropsEqual:Jo})(Tv);na.defaultProps=Nv;const Ov=[{value:1,label:"Dot"},{value:2,label:"Ellipse"},{value:3,label:"Line"},{value:4,label:"Square"}],Lv={bloom:[{propName:"enabled",label:"Enabled",type:"boolean"},{propName:"threshold",label:"Threshold",title:"Brightness threshold to start applying effect",type:"slider",min:0,max:1,step:.05},{propName:"strength",label:"Strength",title:"Strength of the effect",type:"slider",min:0,max:2,step:.05},{propName:"radius",label:"Radius",title:"Blur radius",type:"number",step:.5}],pixel:[{propName:"enabled",label:"Enabled",type:"boolean"},{propName:"size",label:"Pixel Size",type:"number",min:1,step:1}],afterimage:[{propName:"enabled",label:"Enabled",type:"boolean"},{propName:"damp",label:"Damp",type:"slider",min:.01,max:.99,step:.01}],smaa:[{propName:"enabled",label:"Enabled",type:"boolean"}],sobel:[{propName:"enabled",label:"Enabled",type:"boolean"}],halftone:[{propName:"enabled",label:"Enabled",type:"boolean"},{propName:"greyscale",label:"Grayscale",type:"boolean"},{propName:"radius",label:"Radius",type:"number",min:1,step:.2},{propName:"scatter",label:"Scatter",type:"slider",min:0,max:5,step:.1},{propName:"shape",label:"Shape",type:"select",options:Ov}],dotscreen:[{propName:"enabled",label:"Enabled",type:"boolean"},{propName:"scale",label:"Scale",type:"number",min:1,step:.5}],bokeh:[{propName:"enabled",label:"Enabled",type:"boolean"},{propName:"focus",label:"Focus",type:"number",step:.1},{propName:"aperture",label:"Aperture",type:"number",step:.01}]};function Fv({target:e,index:r}){const[t,n]=ns(e.open??!1),{type:l}=e,{name:a}=Sl[l],i=()=>{e.open=!t,n()},s=m(hr,{title:"Remove",className:"closeButton",onClick:c=>{c.stopPropagation(),e.remove()},children:m(Rn,{})}),f=Lv[l],p=c=>m("div",{className:`EffectController ${t?"open":""}`,...c.draggableProps,ref:c.innerRef,children:[m("div",{className:"EffectController-summary",onClick:i,children:[t?m(jl,{}):m(Kl,{}),m("div",{className:"EffectController-name",...c.dragHandleProps,children:a}),s]}),t&&m("div",{className:"EffectController-details",children:m(cr,{target:e.params,propList:f})})]});return m(tl,{draggableId:e.id,index:r,children:p})}const zv={propName:"enabled",label:"Enabled",type:"boolean"};function Gv(){const[e,r]=gr(),{passes:t}=z.postProcessing;Ae(()=>{const i=t.addEventListener("change",r);return()=>t.removeEventListener("change",i)},[]);const n=i=>void z.postProcessing.addPass(i),l=i=>{const{destination:o,source:s}=i;if(!o||o.index===s.index)return;const f=[...t],p=f.splice(s.index,1)[0];f.splice(o.index,0,p),z.postProcessing.updatePasses(f)},a=i=>m("div",{ref:i.innerRef,...i.droppableProps,children:[t.map((o,s)=>m(Fv,{index:s,target:o},o.id)),i.placeholder]});return m($e,{disableGutters:!0,className:"PostProcessingControl SettingGroup",children:[m(ae,{children:[m("div",{children:"Post-Processing"}),m(Vi,{onClick:n,options:Cl,title:"Add Pass",children:m(Mt,{})})]}),m(we.Fragment,{children:[m(cr,{target:z.postProcessing,propList:[zv]}),t.length?m(Yo,{onDragEnd:l,children:m(na,{droppableId:"postprocessing",children:a})}):"Click + to add pass"]},e)]})}const Hv=[{propName:"near",label:"Near",type:"number",min:.01,step:.01,onChange:()=>z.camera.updateProjectionMatrix()},{propName:"far",label:"Far",type:"number",min:.01,step:20,onChange:()=>z.camera.updateProjectionMatrix()},{propName:"fov",label:"FOV",type:"slider",title:"Field of View",min:5,max:175,step:5,onChange:()=>z.camera.updateProjectionMatrix()},{propName:"position",label:"Position",type:"vector",title:"Where the camera is",step:.1,onChange:()=>z.camera.updateProjectionMatrix()}],Wv=[{propName:"target",label:"Target",type:"vector",title:"Camera target, where the camera looks at",step:.1,onChange:()=>z.controls.update()}];function qv(){const{camera:e}=z,[r,t]=gr();return m($e,{disableGutters:!0,className:"SettingGroup DisplayControl",children:[m(ae,{children:[m("div",{className:"title",children:[m(Os,{}),"Camera"]}),m(pe,{onClick:l=>{l.stopPropagation(),["near","far","fov"].forEach(a=>e[a]=_l[a]),e.updateProjectionMatrix(),t()},title:"Reset camera settings",variant:"contained",children:"Reset"})]}),m(ae,{children:[m(cr,{target:e,propList:Hv},r),m(cr,{target:z.controls,propList:Wv})]})]})}function Uv(){const e=Me(a=>a.sidebar.modal.open),{showTimeControl:r,toggleTimeControl:t,showFrameRate:n,toggleFrameRate:l}=Me();return m(ae,{children:[m(wc,{}),m(qv,{}),m(Dc,{}),m("span",{className:"break"}),m(pe,{variant:"contained",onClick:l,startIcon:m($s,{}),children:n?"Hide Frame Rate":"Show Frame Rate"}),m(pe,{variant:"contained",onClick:t,startIcon:r?m(js,{}):m(Zs,{}),children:r?"Hide Time Control":"Show Time Control"}),m("span",{className:"break"}),m(pe,{variant:"contained",onClick:()=>e("background"),startIcon:m(qi,{}),children:"Background Settings"}),m(_c,{}),m(Gv,{})]})}async function $v(e,r={}){const{GLTFExporter:t}=await Tt(async()=>{const{GLTFExporter:i}=await import("./f_C_O-w4hE-GLTFExporter.js");return{GLTFExporter:i}},__vite__mapDeps([0,1])),l=await new t().parseAsync(e,r);return r.binary?new Blob([l]):new Blob([JSON.stringify(l)],{type:"application/json"})}async function Vv({binary:e=!1}){const r=Ie.getState().activeModel;if(!r)return;const{model:t}=r,n=e?"glb":"gltf",l=`${r.userData?.name??r.id}.${n}`,a=r.animation.current.chainName,i=r.animation.chain[a].clips??[],o=await $v(t,{binary:e,animations:i,onlyVisible:!0});yr.saveAs(o,l)}function Zv(){const e=r=>{r.stopPropagation();const t=!!r.currentTarget.dataset.binary;Vv({binary:t})};return m($e,{className:"SettingGroup",children:[m(ae,{children:[m("div",{children:"glTF"}),m(pe,{onClick:e,title:"Download current model as glTF",variant:"contained",children:m(Br,{})})]}),m(ae,{children:m("div",{children:[m(pe,{onClick:e,title:"Download current model as glTF",children:[m(Br,{}),"glTF"]}),m(pe,{"data-binary":!0,onClick:e,title:"Download current model as glb (binary glTF)",children:[m(Br,{}),"glb"]})]})})]})}const jv=()=>{const{activeModel:{animation:e}}=Ie.getState(),{record:r}=z;e.stop(),e.addCountedEventListener("ChainFinished",()=>r.stop()),e.play(),r.start()},Kv=[{propName:"fileName",label:"File Name",type:"string",fullWidth:!0},{propName:"appendDate",label:"Append Date",type:"boolean"},{propName:"frameRate",label:"Frame Rate",type:"slider",min:10,max:60,step:5}];function Yv(){const[e,r]=ur(z.record.state),t=o=>{const{action:s}=o.currentTarget.dataset;z.record[s]?.(),r(s==="stop"?"idle":z.record.state)},n=m(pe,{onClick:t,"data-action":e==="idle"?"start":"resume",title:e==="idle"?"Start recording":"Resume recording",children:m(Nt,{})}),l=m(pe,{onClick:t,"data-action":"pause",title:"Pause Recording",children:m(us,{})}),a=m(pe,{onClick:t,"data-action":"stop",title:"Finish Recording",children:m(Vs,{})}),i={idle:n,recording:m(ae,{children:[l,a]}),paused:m(ae,{children:[n,a]})};return m(ae,{children:[m("div",{children:`Status: ${Il(e)}`}),m("div",{children:i[e]})]})}function Xv(){const{activeModel:e}=Ie(),{record:r}=z;return r?m($e,{className:"SettingGroup",children:[m(ae,{children:[m("div",{children:"Record"}),m(pe,{onClick:n=>{n.stopPropagation();const{clipDuration:l}=e.animation.current;if(l===0||l===1/0){alert("Can't record");return}jv()},title:"Record current animation",variant:"contained",children:m(Nt,{})})]}),m(ae,{children:[m(cr,{target:r.settings,propList:Kv}),m($e,{disableGutters:!0,className:"SettingGroup-extra",children:[m(ae,{children:"Manual Record"}),m(Yv,{})]})]})]}):m(ae,{})}const Jv=[{propName:"fileName",label:"File Name",type:"string",fullWidth:!0},{propName:"noBackground",label:"Remove BG",type:"boolean"},{propName:"frameRate",label:"Frame Rate",type:"number",fullWidth:!0,min:1,max:120,step:10}],Qv=e=>{const[r,t]=e.split(","),n=r.split(";")[0].split(":")[1],l=window.atob(t),a=l.length,i=new Array(a).fill().map((s,f)=>l.charCodeAt(f)),o=new Uint8Array(i);return new Blob([o],{type:n})};function eh(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var tn={exports:{}},nn={},ri;function Ar(){return ri||(ri=1,(function(e){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function t(a,i){return Object.prototype.hasOwnProperty.call(a,i)}e.assign=function(a){for(var i=Array.prototype.slice.call(arguments,1);i.length;){var o=i.shift();if(o){if(typeof o!="object")throw new TypeError(o+"must be non-object");for(var s in o)t(o,s)&&(a[s]=o[s])}}return a},e.shrinkBuf=function(a,i){return a.length===i?a:a.subarray?a.subarray(0,i):(a.length=i,a)};var n={arraySet:function(a,i,o,s,f){if(i.subarray&&a.subarray){a.set(i.subarray(o,o+s),f);return}for(var p=0;p<s;p++)a[f+p]=i[o+p]},flattenChunks:function(a){var i,o,s,f,p,c;for(s=0,i=0,o=a.length;i<o;i++)s+=a[i].length;for(c=new Uint8Array(s),f=0,i=0,o=a.length;i<o;i++)p=a[i],c.set(p,f),f+=p.length;return c}},l={arraySet:function(a,i,o,s,f){for(var p=0;p<s;p++)a[f+p]=i[o+p]},flattenChunks:function(a){return[].concat.apply([],a)}};e.setTyped=function(a){a?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,n)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,l))},e.setTyped(r)})(nn)),nn}var Hr={},lr={},Rr={},ti;function rh(){if(ti)return Rr;ti=1;var e=Ar(),r=4,t=0,n=1,l=2;function a(x){for(var U=x.length;--U>=0;)x[U]=0}var i=0,o=1,s=2,f=3,p=258,c=29,d=256,h=d+1+c,v=30,D=19,S=2*h+1,g=15,w=16,C=7,_=256,R=16,T=17,I=18,B=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],L=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],H=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],q=512,k=new Array((h+2)*2);a(k);var W=new Array(v*2);a(W);var X=new Array(q);a(X);var K=new Array(p-f+1);a(K);var j=new Array(c);a(j);var G=new Array(v);a(G);function ee(x,U,V,Q,A){this.static_tree=x,this.extra_bits=U,this.extra_base=V,this.elems=Q,this.max_length=A,this.has_stree=x&&x.length}var fe,_e,ue;function he(x,U){this.dyn_tree=x,this.max_code=0,this.stat_desc=U}function Se(x){return x<256?X[x]:X[256+(x>>>7)]}function ge(x,U){x.pending_buf[x.pending++]=U&255,x.pending_buf[x.pending++]=U>>>8&255}function ce(x,U,V){x.bi_valid>w-V?(x.bi_buf|=U<<x.bi_valid&65535,ge(x,x.bi_buf),x.bi_buf=U>>w-x.bi_valid,x.bi_valid+=V-w):(x.bi_buf|=U<<x.bi_valid&65535,x.bi_valid+=V)}function ye(x,U,V){ce(x,V[U*2],V[U*2+1])}function se(x,U){var V=0;do V|=x&1,x>>>=1,V<<=1;while(--U>0);return V>>>1}function ne(x){x.bi_valid===16?(ge(x,x.bi_buf),x.bi_buf=0,x.bi_valid=0):x.bi_valid>=8&&(x.pending_buf[x.pending++]=x.bi_buf&255,x.bi_buf>>=8,x.bi_valid-=8)}function ke(x,U){var V=U.dyn_tree,Q=U.max_code,A=U.stat_desc.static_tree,O=U.stat_desc.has_stree,b=U.stat_desc.extra_bits,$=U.stat_desc.extra_base,oe=U.stat_desc.max_length,u,M,N,y,E,P,re=0;for(y=0;y<=g;y++)x.bl_count[y]=0;for(V[x.heap[x.heap_max]*2+1]=0,u=x.heap_max+1;u<S;u++)M=x.heap[u],y=V[V[M*2+1]*2+1]+1,y>oe&&(y=oe,re++),V[M*2+1]=y,!(M>Q)&&(x.bl_count[y]++,E=0,M>=$&&(E=b[M-$]),P=V[M*2],x.opt_len+=P*(y+E),O&&(x.static_len+=P*(A[M*2+1]+E)));if(re!==0){do{for(y=oe-1;x.bl_count[y]===0;)y--;x.bl_count[y]--,x.bl_count[y+1]+=2,x.bl_count[oe]--,re-=2}while(re>0);for(y=oe;y!==0;y--)for(M=x.bl_count[y];M!==0;)N=x.heap[--u],!(N>Q)&&(V[N*2+1]!==y&&(x.opt_len+=(y-V[N*2+1])*V[N*2],V[N*2+1]=y),M--)}}function Ne(x,U,V){var Q=new Array(g+1),A=0,O,b;for(O=1;O<=g;O++)Q[O]=A=A+V[O-1]<<1;for(b=0;b<=U;b++){var $=x[b*2+1];$!==0&&(x[b*2]=se(Q[$]++,$))}}function ie(){var x,U,V,Q,A,O=new Array(g+1);for(V=0,Q=0;Q<c-1;Q++)for(j[Q]=V,x=0;x<1<<B[Q];x++)K[V++]=Q;for(K[V-1]=Q,A=0,Q=0;Q<16;Q++)for(G[Q]=A,x=0;x<1<<L[Q];x++)X[A++]=Q;for(A>>=7;Q<v;Q++)for(G[Q]=A<<7,x=0;x<1<<L[Q]-7;x++)X[256+A++]=Q;for(U=0;U<=g;U++)O[U]=0;for(x=0;x<=143;)k[x*2+1]=8,x++,O[8]++;for(;x<=255;)k[x*2+1]=9,x++,O[9]++;for(;x<=279;)k[x*2+1]=7,x++,O[7]++;for(;x<=287;)k[x*2+1]=8,x++,O[8]++;for(Ne(k,h+1,O),x=0;x<v;x++)W[x*2+1]=5,W[x*2]=se(x,5);fe=new ee(k,B,d+1,h,g),_e=new ee(W,L,0,v,g),ue=new ee(new Array(0),H,0,D,C)}function Ee(x){var U;for(U=0;U<h;U++)x.dyn_ltree[U*2]=0;for(U=0;U<v;U++)x.dyn_dtree[U*2]=0;for(U=0;U<D;U++)x.bl_tree[U*2]=0;x.dyn_ltree[_*2]=1,x.opt_len=x.static_len=0,x.last_lit=x.matches=0}function He(x){x.bi_valid>8?ge(x,x.bi_buf):x.bi_valid>0&&(x.pending_buf[x.pending++]=x.bi_buf),x.bi_buf=0,x.bi_valid=0}function We(x,U,V,Q){He(x),ge(x,V),ge(x,~V),e.arraySet(x.pending_buf,x.window,U,V,x.pending),x.pending+=V}function Te(x,U,V,Q){var A=U*2,O=V*2;return x[A]<x[O]||x[A]===x[O]&&Q[U]<=Q[V]}function xe(x,U,V){for(var Q=x.heap[V],A=V<<1;A<=x.heap_len&&(A<x.heap_len&&Te(U,x.heap[A+1],x.heap[A],x.depth)&&A++,!Te(U,Q,x.heap[A],x.depth));)x.heap[V]=x.heap[A],V=A,A<<=1;x.heap[V]=Q}function de(x,U,V){var Q,A,O=0,b,$;if(x.last_lit!==0)do Q=x.pending_buf[x.d_buf+O*2]<<8|x.pending_buf[x.d_buf+O*2+1],A=x.pending_buf[x.l_buf+O],O++,Q===0?ye(x,A,U):(b=K[A],ye(x,b+d+1,U),$=B[b],$!==0&&(A-=j[b],ce(x,A,$)),Q--,b=Se(Q),ye(x,b,V),$=L[b],$!==0&&(Q-=G[b],ce(x,Q,$)));while(O<x.last_lit);ye(x,_,U)}function Le(x,U){var V=U.dyn_tree,Q=U.stat_desc.static_tree,A=U.stat_desc.has_stree,O=U.stat_desc.elems,b,$,oe=-1,u;for(x.heap_len=0,x.heap_max=S,b=0;b<O;b++)V[b*2]!==0?(x.heap[++x.heap_len]=oe=b,x.depth[b]=0):V[b*2+1]=0;for(;x.heap_len<2;)u=x.heap[++x.heap_len]=oe<2?++oe:0,V[u*2]=1,x.depth[u]=0,x.opt_len--,A&&(x.static_len-=Q[u*2+1]);for(U.max_code=oe,b=x.heap_len>>1;b>=1;b--)xe(x,V,b);u=O;do b=x.heap[1],x.heap[1]=x.heap[x.heap_len--],xe(x,V,1),$=x.heap[1],x.heap[--x.heap_max]=b,x.heap[--x.heap_max]=$,V[u*2]=V[b*2]+V[$*2],x.depth[u]=(x.depth[b]>=x.depth[$]?x.depth[b]:x.depth[$])+1,V[b*2+1]=V[$*2+1]=u,x.heap[1]=u++,xe(x,V,1);while(x.heap_len>=2);x.heap[--x.heap_max]=x.heap[1],ke(x,U),Ne(V,oe,x.bl_count)}function dr(x,U,V){var Q,A=-1,O,b=U[1],$=0,oe=7,u=4;for(b===0&&(oe=138,u=3),U[(V+1)*2+1]=65535,Q=0;Q<=V;Q++)O=b,b=U[(Q+1)*2+1],!(++$<oe&&O===b)&&($<u?x.bl_tree[O*2]+=$:O!==0?(O!==A&&x.bl_tree[O*2]++,x.bl_tree[R*2]++):$<=10?x.bl_tree[T*2]++:x.bl_tree[I*2]++,$=0,A=O,b===0?(oe=138,u=3):O===b?(oe=6,u=3):(oe=7,u=4))}function wr(x,U,V){var Q,A=-1,O,b=U[1],$=0,oe=7,u=4;for(b===0&&(oe=138,u=3),Q=0;Q<=V;Q++)if(O=b,b=U[(Q+1)*2+1],!(++$<oe&&O===b)){if($<u)do ye(x,O,x.bl_tree);while(--$!==0);else O!==0?(O!==A&&(ye(x,O,x.bl_tree),$--),ye(x,R,x.bl_tree),ce(x,$-3,2)):$<=10?(ye(x,T,x.bl_tree),ce(x,$-3,3)):(ye(x,I,x.bl_tree),ce(x,$-11,7));$=0,A=O,b===0?(oe=138,u=3):O===b?(oe=6,u=3):(oe=7,u=4)}}function er(x){var U;for(dr(x,x.dyn_ltree,x.l_desc.max_code),dr(x,x.dyn_dtree,x.d_desc.max_code),Le(x,x.bl_desc),U=D-1;U>=3&&x.bl_tree[F[U]*2+1]===0;U--);return x.opt_len+=3*(U+1)+5+5+4,U}function Lr(x,U,V,Q){var A;for(ce(x,U-257,5),ce(x,V-1,5),ce(x,Q-4,4),A=0;A<Q;A++)ce(x,x.bl_tree[F[A]*2+1],3);wr(x,x.dyn_ltree,U-1),wr(x,x.dyn_dtree,V-1)}function xr(x){var U=4093624447,V;for(V=0;V<=31;V++,U>>>=1)if(U&1&&x.dyn_ltree[V*2]!==0)return t;if(x.dyn_ltree[18]!==0||x.dyn_ltree[20]!==0||x.dyn_ltree[26]!==0)return n;for(V=32;V<d;V++)if(x.dyn_ltree[V*2]!==0)return n;return t}var or=!1;function Fr(x){or||(ie(),or=!0),x.l_desc=new he(x.dyn_ltree,fe),x.d_desc=new he(x.dyn_dtree,_e),x.bl_desc=new he(x.bl_tree,ue),x.bi_buf=0,x.bi_valid=0,Ee(x)}function Dr(x,U,V,Q){ce(x,(i<<1)+(Q?1:0),3),We(x,U,V)}function Ve(x){ce(x,o<<1,3),ye(x,_,k),ne(x)}function fr(x,U,V,Q){var A,O,b=0;x.level>0?(x.strm.data_type===l&&(x.strm.data_type=xr(x)),Le(x,x.l_desc),Le(x,x.d_desc),b=er(x),A=x.opt_len+3+7>>>3,O=x.static_len+3+7>>>3,O<=A&&(A=O)):A=O=V+5,V+4<=A&&U!==-1?Dr(x,U,V,Q):x.strategy===r||O===A?(ce(x,(o<<1)+(Q?1:0),3),de(x,k,W)):(ce(x,(s<<1)+(Q?1:0),3),Lr(x,x.l_desc.max_code+1,x.d_desc.max_code+1,b+1),de(x,x.dyn_ltree,x.dyn_dtree)),Ee(x),Q&&He(x)}function zr(x,U,V){return x.pending_buf[x.d_buf+x.last_lit*2]=U>>>8&255,x.pending_buf[x.d_buf+x.last_lit*2+1]=U&255,x.pending_buf[x.l_buf+x.last_lit]=V&255,x.last_lit++,U===0?x.dyn_ltree[V*2]++:(x.matches++,U--,x.dyn_ltree[(K[V]+d+1)*2]++,x.dyn_dtree[Se(U)*2]++),x.last_lit===x.lit_bufsize-1}return Rr._tr_init=Fr,Rr._tr_stored_block=Dr,Rr._tr_flush_block=fr,Rr._tr_tally=zr,Rr._tr_align=Ve,Rr}var an,ni;function nl(){if(ni)return an;ni=1;function e(r,t,n,l){for(var a=r&65535|0,i=r>>>16&65535|0,o=0;n!==0;){o=n>2e3?2e3:n,n-=o;do a=a+t[l++]|0,i=i+a|0;while(--o);a%=65521,i%=65521}return a|i<<16|0}return an=e,an}var on,ai;function al(){if(ai)return on;ai=1;function e(){for(var n,l=[],a=0;a<256;a++){n=a;for(var i=0;i<8;i++)n=n&1?3988292384^n>>>1:n>>>1;l[a]=n}return l}var r=e();function t(n,l,a,i){var o=r,s=i+a;n^=-1;for(var f=i;f<s;f++)n=n>>>8^o[(n^l[f])&255];return n^-1}return on=t,on}var ln,ii;function aa(){return ii||(ii=1,ln={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),ln}var oi;function th(){if(oi)return lr;oi=1;var e=Ar(),r=rh(),t=nl(),n=al(),l=aa(),a=0,i=1,o=3,s=4,f=5,p=0,c=1,d=-2,h=-3,v=-5,D=-1,S=1,g=2,w=3,C=4,_=0,R=2,T=8,I=9,B=15,L=8,H=29,F=256,q=F+1+H,k=30,W=19,X=2*q+1,K=15,j=3,G=258,ee=G+j+1,fe=32,_e=42,ue=69,he=73,Se=91,ge=103,ce=113,ye=666,se=1,ne=2,ke=3,Ne=4,ie=3;function Ee(u,M){return u.msg=l[M],M}function He(u){return(u<<1)-(u>4?9:0)}function We(u){for(var M=u.length;--M>=0;)u[M]=0}function Te(u){var M=u.state,N=M.pending;N>u.avail_out&&(N=u.avail_out),N!==0&&(e.arraySet(u.output,M.pending_buf,M.pending_out,N,u.next_out),u.next_out+=N,M.pending_out+=N,u.total_out+=N,u.avail_out-=N,M.pending-=N,M.pending===0&&(M.pending_out=0))}function xe(u,M){r._tr_flush_block(u,u.block_start>=0?u.block_start:-1,u.strstart-u.block_start,M),u.block_start=u.strstart,Te(u.strm)}function de(u,M){u.pending_buf[u.pending++]=M}function Le(u,M){u.pending_buf[u.pending++]=M>>>8&255,u.pending_buf[u.pending++]=M&255}function dr(u,M,N,y){var E=u.avail_in;return E>y&&(E=y),E===0?0:(u.avail_in-=E,e.arraySet(M,u.input,u.next_in,E,N),u.state.wrap===1?u.adler=t(u.adler,M,E,N):u.state.wrap===2&&(u.adler=n(u.adler,M,E,N)),u.next_in+=E,u.total_in+=E,E)}function wr(u,M){var N=u.max_chain_length,y=u.strstart,E,P,re=u.prev_length,Y=u.nice_match,J=u.strstart>u.w_size-ee?u.strstart-(u.w_size-ee):0,ve=u.window,mr=u.w_mask,Re=u.prev,me=u.strstart+G,Oe=ve[y+re-1],Ze=ve[y+re];u.prev_length>=u.good_match&&(N>>=2),Y>u.lookahead&&(Y=u.lookahead);do if(E=M,!(ve[E+re]!==Ze||ve[E+re-1]!==Oe||ve[E]!==ve[y]||ve[++E]!==ve[y+1])){y+=2,E++;do;while(ve[++y]===ve[++E]&&ve[++y]===ve[++E]&&ve[++y]===ve[++E]&&ve[++y]===ve[++E]&&ve[++y]===ve[++E]&&ve[++y]===ve[++E]&&ve[++y]===ve[++E]&&ve[++y]===ve[++E]&&y<me);if(P=G-(me-y),y=me-G,P>re){if(u.match_start=M,re=P,P>=Y)break;Oe=ve[y+re-1],Ze=ve[y+re]}}while((M=Re[M&mr])>J&&--N!==0);return re<=u.lookahead?re:u.lookahead}function er(u){var M=u.w_size,N,y,E,P,re;do{if(P=u.window_size-u.lookahead-u.strstart,u.strstart>=M+(M-ee)){e.arraySet(u.window,u.window,M,M,0),u.match_start-=M,u.strstart-=M,u.block_start-=M,y=u.hash_size,N=y;do E=u.head[--N],u.head[N]=E>=M?E-M:0;while(--y);y=M,N=y;do E=u.prev[--N],u.prev[N]=E>=M?E-M:0;while(--y);P+=M}if(u.strm.avail_in===0)break;if(y=dr(u.strm,u.window,u.strstart+u.lookahead,P),u.lookahead+=y,u.lookahead+u.insert>=j)for(re=u.strstart-u.insert,u.ins_h=u.window[re],u.ins_h=(u.ins_h<<u.hash_shift^u.window[re+1])&u.hash_mask;u.insert&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[re+j-1])&u.hash_mask,u.prev[re&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=re,re++,u.insert--,!(u.lookahead+u.insert<j)););}while(u.lookahead<ee&&u.strm.avail_in!==0)}function Lr(u,M){var N=65535;for(N>u.pending_buf_size-5&&(N=u.pending_buf_size-5);;){if(u.lookahead<=1){if(er(u),u.lookahead===0&&M===a)return se;if(u.lookahead===0)break}u.strstart+=u.lookahead,u.lookahead=0;var y=u.block_start+N;if((u.strstart===0||u.strstart>=y)&&(u.lookahead=u.strstart-y,u.strstart=y,xe(u,!1),u.strm.avail_out===0)||u.strstart-u.block_start>=u.w_size-ee&&(xe(u,!1),u.strm.avail_out===0))return se}return u.insert=0,M===s?(xe(u,!0),u.strm.avail_out===0?ke:Ne):(u.strstart>u.block_start&&(xe(u,!1),u.strm.avail_out===0),se)}function xr(u,M){for(var N,y;;){if(u.lookahead<ee){if(er(u),u.lookahead<ee&&M===a)return se;if(u.lookahead===0)break}if(N=0,u.lookahead>=j&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+j-1])&u.hash_mask,N=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart),N!==0&&u.strstart-N<=u.w_size-ee&&(u.match_length=wr(u,N)),u.match_length>=j)if(y=r._tr_tally(u,u.strstart-u.match_start,u.match_length-j),u.lookahead-=u.match_length,u.match_length<=u.max_lazy_match&&u.lookahead>=j){u.match_length--;do u.strstart++,u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+j-1])&u.hash_mask,N=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart;while(--u.match_length!==0);u.strstart++}else u.strstart+=u.match_length,u.match_length=0,u.ins_h=u.window[u.strstart],u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+1])&u.hash_mask;else y=r._tr_tally(u,0,u.window[u.strstart]),u.lookahead--,u.strstart++;if(y&&(xe(u,!1),u.strm.avail_out===0))return se}return u.insert=u.strstart<j-1?u.strstart:j-1,M===s?(xe(u,!0),u.strm.avail_out===0?ke:Ne):u.last_lit&&(xe(u,!1),u.strm.avail_out===0)?se:ne}function or(u,M){for(var N,y,E;;){if(u.lookahead<ee){if(er(u),u.lookahead<ee&&M===a)return se;if(u.lookahead===0)break}if(N=0,u.lookahead>=j&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+j-1])&u.hash_mask,N=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart),u.prev_length=u.match_length,u.prev_match=u.match_start,u.match_length=j-1,N!==0&&u.prev_length<u.max_lazy_match&&u.strstart-N<=u.w_size-ee&&(u.match_length=wr(u,N),u.match_length<=5&&(u.strategy===S||u.match_length===j&&u.strstart-u.match_start>4096)&&(u.match_length=j-1)),u.prev_length>=j&&u.match_length<=u.prev_length){E=u.strstart+u.lookahead-j,y=r._tr_tally(u,u.strstart-1-u.prev_match,u.prev_length-j),u.lookahead-=u.prev_length-1,u.prev_length-=2;do++u.strstart<=E&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+j-1])&u.hash_mask,N=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart);while(--u.prev_length!==0);if(u.match_available=0,u.match_length=j-1,u.strstart++,y&&(xe(u,!1),u.strm.avail_out===0))return se}else if(u.match_available){if(y=r._tr_tally(u,0,u.window[u.strstart-1]),y&&xe(u,!1),u.strstart++,u.lookahead--,u.strm.avail_out===0)return se}else u.match_available=1,u.strstart++,u.lookahead--}return u.match_available&&(y=r._tr_tally(u,0,u.window[u.strstart-1]),u.match_available=0),u.insert=u.strstart<j-1?u.strstart:j-1,M===s?(xe(u,!0),u.strm.avail_out===0?ke:Ne):u.last_lit&&(xe(u,!1),u.strm.avail_out===0)?se:ne}function Fr(u,M){for(var N,y,E,P,re=u.window;;){if(u.lookahead<=G){if(er(u),u.lookahead<=G&&M===a)return se;if(u.lookahead===0)break}if(u.match_length=0,u.lookahead>=j&&u.strstart>0&&(E=u.strstart-1,y=re[E],y===re[++E]&&y===re[++E]&&y===re[++E])){P=u.strstart+G;do;while(y===re[++E]&&y===re[++E]&&y===re[++E]&&y===re[++E]&&y===re[++E]&&y===re[++E]&&y===re[++E]&&y===re[++E]&&E<P);u.match_length=G-(P-E),u.match_length>u.lookahead&&(u.match_length=u.lookahead)}if(u.match_length>=j?(N=r._tr_tally(u,1,u.match_length-j),u.lookahead-=u.match_length,u.strstart+=u.match_length,u.match_length=0):(N=r._tr_tally(u,0,u.window[u.strstart]),u.lookahead--,u.strstart++),N&&(xe(u,!1),u.strm.avail_out===0))return se}return u.insert=0,M===s?(xe(u,!0),u.strm.avail_out===0?ke:Ne):u.last_lit&&(xe(u,!1),u.strm.avail_out===0)?se:ne}function Dr(u,M){for(var N;;){if(u.lookahead===0&&(er(u),u.lookahead===0)){if(M===a)return se;break}if(u.match_length=0,N=r._tr_tally(u,0,u.window[u.strstart]),u.lookahead--,u.strstart++,N&&(xe(u,!1),u.strm.avail_out===0))return se}return u.insert=0,M===s?(xe(u,!0),u.strm.avail_out===0?ke:Ne):u.last_lit&&(xe(u,!1),u.strm.avail_out===0)?se:ne}function Ve(u,M,N,y,E){this.good_length=u,this.max_lazy=M,this.nice_length=N,this.max_chain=y,this.func=E}var fr;fr=[new Ve(0,0,0,0,Lr),new Ve(4,4,8,4,xr),new Ve(4,5,16,8,xr),new Ve(4,6,32,32,xr),new Ve(4,4,16,16,or),new Ve(8,16,32,32,or),new Ve(8,16,128,128,or),new Ve(8,32,128,256,or),new Ve(32,128,258,1024,or),new Ve(32,258,258,4096,or)];function zr(u){u.window_size=2*u.w_size,We(u.head),u.max_lazy_match=fr[u.level].max_lazy,u.good_match=fr[u.level].good_length,u.nice_match=fr[u.level].nice_length,u.max_chain_length=fr[u.level].max_chain,u.strstart=0,u.block_start=0,u.lookahead=0,u.insert=0,u.match_length=u.prev_length=j-1,u.match_available=0,u.ins_h=0}function x(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=T,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new e.Buf16(X*2),this.dyn_dtree=new e.Buf16((2*k+1)*2),this.bl_tree=new e.Buf16((2*W+1)*2),We(this.dyn_ltree),We(this.dyn_dtree),We(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new e.Buf16(K+1),this.heap=new e.Buf16(2*q+1),We(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new e.Buf16(2*q+1),We(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function U(u){var M;return!u||!u.state?Ee(u,d):(u.total_in=u.total_out=0,u.data_type=R,M=u.state,M.pending=0,M.pending_out=0,M.wrap<0&&(M.wrap=-M.wrap),M.status=M.wrap?_e:ce,u.adler=M.wrap===2?0:1,M.last_flush=a,r._tr_init(M),p)}function V(u){var M=U(u);return M===p&&zr(u.state),M}function Q(u,M){return!u||!u.state||u.state.wrap!==2?d:(u.state.gzhead=M,p)}function A(u,M,N,y,E,P){if(!u)return d;var re=1;if(M===D&&(M=6),y<0?(re=0,y=-y):y>15&&(re=2,y-=16),E<1||E>I||N!==T||y<8||y>15||M<0||M>9||P<0||P>C)return Ee(u,d);y===8&&(y=9);var Y=new x;return u.state=Y,Y.strm=u,Y.wrap=re,Y.gzhead=null,Y.w_bits=y,Y.w_size=1<<Y.w_bits,Y.w_mask=Y.w_size-1,Y.hash_bits=E+7,Y.hash_size=1<<Y.hash_bits,Y.hash_mask=Y.hash_size-1,Y.hash_shift=~~((Y.hash_bits+j-1)/j),Y.window=new e.Buf8(Y.w_size*2),Y.head=new e.Buf16(Y.hash_size),Y.prev=new e.Buf16(Y.w_size),Y.lit_bufsize=1<<E+6,Y.pending_buf_size=Y.lit_bufsize*4,Y.pending_buf=new e.Buf8(Y.pending_buf_size),Y.d_buf=1*Y.lit_bufsize,Y.l_buf=3*Y.lit_bufsize,Y.level=M,Y.strategy=P,Y.method=N,V(u)}function O(u,M){return A(u,M,T,B,L,_)}function b(u,M){var N,y,E,P;if(!u||!u.state||M>f||M<0)return u?Ee(u,d):d;if(y=u.state,!u.output||!u.input&&u.avail_in!==0||y.status===ye&&M!==s)return Ee(u,u.avail_out===0?v:d);if(y.strm=u,N=y.last_flush,y.last_flush=M,y.status===_e)if(y.wrap===2)u.adler=0,de(y,31),de(y,139),de(y,8),y.gzhead?(de(y,(y.gzhead.text?1:0)+(y.gzhead.hcrc?2:0)+(y.gzhead.extra?4:0)+(y.gzhead.name?8:0)+(y.gzhead.comment?16:0)),de(y,y.gzhead.time&255),de(y,y.gzhead.time>>8&255),de(y,y.gzhead.time>>16&255),de(y,y.gzhead.time>>24&255),de(y,y.level===9?2:y.strategy>=g||y.level<2?4:0),de(y,y.gzhead.os&255),y.gzhead.extra&&y.gzhead.extra.length&&(de(y,y.gzhead.extra.length&255),de(y,y.gzhead.extra.length>>8&255)),y.gzhead.hcrc&&(u.adler=n(u.adler,y.pending_buf,y.pending,0)),y.gzindex=0,y.status=ue):(de(y,0),de(y,0),de(y,0),de(y,0),de(y,0),de(y,y.level===9?2:y.strategy>=g||y.level<2?4:0),de(y,ie),y.status=ce);else{var re=T+(y.w_bits-8<<4)<<8,Y=-1;y.strategy>=g||y.level<2?Y=0:y.level<6?Y=1:y.level===6?Y=2:Y=3,re|=Y<<6,y.strstart!==0&&(re|=fe),re+=31-re%31,y.status=ce,Le(y,re),y.strstart!==0&&(Le(y,u.adler>>>16),Le(y,u.adler&65535)),u.adler=1}if(y.status===ue)if(y.gzhead.extra){for(E=y.pending;y.gzindex<(y.gzhead.extra.length&65535)&&!(y.pending===y.pending_buf_size&&(y.gzhead.hcrc&&y.pending>E&&(u.adler=n(u.adler,y.pending_buf,y.pending-E,E)),Te(u),E=y.pending,y.pending===y.pending_buf_size));)de(y,y.gzhead.extra[y.gzindex]&255),y.gzindex++;y.gzhead.hcrc&&y.pending>E&&(u.adler=n(u.adler,y.pending_buf,y.pending-E,E)),y.gzindex===y.gzhead.extra.length&&(y.gzindex=0,y.status=he)}else y.status=he;if(y.status===he)if(y.gzhead.name){E=y.pending;do{if(y.pending===y.pending_buf_size&&(y.gzhead.hcrc&&y.pending>E&&(u.adler=n(u.adler,y.pending_buf,y.pending-E,E)),Te(u),E=y.pending,y.pending===y.pending_buf_size)){P=1;break}y.gzindex<y.gzhead.name.length?P=y.gzhead.name.charCodeAt(y.gzindex++)&255:P=0,de(y,P)}while(P!==0);y.gzhead.hcrc&&y.pending>E&&(u.adler=n(u.adler,y.pending_buf,y.pending-E,E)),P===0&&(y.gzindex=0,y.status=Se)}else y.status=Se;if(y.status===Se)if(y.gzhead.comment){E=y.pending;do{if(y.pending===y.pending_buf_size&&(y.gzhead.hcrc&&y.pending>E&&(u.adler=n(u.adler,y.pending_buf,y.pending-E,E)),Te(u),E=y.pending,y.pending===y.pending_buf_size)){P=1;break}y.gzindex<y.gzhead.comment.length?P=y.gzhead.comment.charCodeAt(y.gzindex++)&255:P=0,de(y,P)}while(P!==0);y.gzhead.hcrc&&y.pending>E&&(u.adler=n(u.adler,y.pending_buf,y.pending-E,E)),P===0&&(y.status=ge)}else y.status=ge;if(y.status===ge&&(y.gzhead.hcrc?(y.pending+2>y.pending_buf_size&&Te(u),y.pending+2<=y.pending_buf_size&&(de(y,u.adler&255),de(y,u.adler>>8&255),u.adler=0,y.status=ce)):y.status=ce),y.pending!==0){if(Te(u),u.avail_out===0)return y.last_flush=-1,p}else if(u.avail_in===0&&He(M)<=He(N)&&M!==s)return Ee(u,v);if(y.status===ye&&u.avail_in!==0)return Ee(u,v);if(u.avail_in!==0||y.lookahead!==0||M!==a&&y.status!==ye){var J=y.strategy===g?Dr(y,M):y.strategy===w?Fr(y,M):fr[y.level].func(y,M);if((J===ke||J===Ne)&&(y.status=ye),J===se||J===ke)return u.avail_out===0&&(y.last_flush=-1),p;if(J===ne&&(M===i?r._tr_align(y):M!==f&&(r._tr_stored_block(y,0,0,!1),M===o&&(We(y.head),y.lookahead===0&&(y.strstart=0,y.block_start=0,y.insert=0))),Te(u),u.avail_out===0))return y.last_flush=-1,p}return M!==s?p:y.wrap<=0?c:(y.wrap===2?(de(y,u.adler&255),de(y,u.adler>>8&255),de(y,u.adler>>16&255),de(y,u.adler>>24&255),de(y,u.total_in&255),de(y,u.total_in>>8&255),de(y,u.total_in>>16&255),de(y,u.total_in>>24&255)):(Le(y,u.adler>>>16),Le(y,u.adler&65535)),Te(u),y.wrap>0&&(y.wrap=-y.wrap),y.pending!==0?p:c)}function $(u){var M;return!u||!u.state?d:(M=u.state.status,M!==_e&&M!==ue&&M!==he&&M!==Se&&M!==ge&&M!==ce&&M!==ye?Ee(u,d):(u.state=null,M===ce?Ee(u,h):p))}function oe(u,M){var N=M.length,y,E,P,re,Y,J,ve,mr;if(!u||!u.state||(y=u.state,re=y.wrap,re===2||re===1&&y.status!==_e||y.lookahead))return d;for(re===1&&(u.adler=t(u.adler,M,N,0)),y.wrap=0,N>=y.w_size&&(re===0&&(We(y.head),y.strstart=0,y.block_start=0,y.insert=0),mr=new e.Buf8(y.w_size),e.arraySet(mr,M,N-y.w_size,y.w_size,0),M=mr,N=y.w_size),Y=u.avail_in,J=u.next_in,ve=u.input,u.avail_in=N,u.next_in=0,u.input=M,er(y);y.lookahead>=j;){E=y.strstart,P=y.lookahead-(j-1);do y.ins_h=(y.ins_h<<y.hash_shift^y.window[E+j-1])&y.hash_mask,y.prev[E&y.w_mask]=y.head[y.ins_h],y.head[y.ins_h]=E,E++;while(--P);y.strstart=E,y.lookahead=j-1,er(y)}return y.strstart+=y.lookahead,y.block_start=y.strstart,y.insert=y.lookahead,y.lookahead=0,y.match_length=y.prev_length=j-1,y.match_available=0,u.next_in=J,u.input=ve,u.avail_in=Y,y.wrap=re,p}return lr.deflateInit=O,lr.deflateInit2=A,lr.deflateReset=V,lr.deflateResetKeep=U,lr.deflateSetHeader=Q,lr.deflate=b,lr.deflateEnd=$,lr.deflateSetDictionary=oe,lr.deflateInfo="pako deflate (from Nodeca project)",lr}var Tr={},li;function il(){if(li)return Tr;li=1;var e=Ar(),r=!0,t=!0;try{String.fromCharCode.apply(null,[0])}catch{r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{t=!1}for(var n=new e.Buf8(256),l=0;l<256;l++)n[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;n[254]=n[254]=1,Tr.string2buf=function(i){var o,s,f,p,c,d=i.length,h=0;for(p=0;p<d;p++)s=i.charCodeAt(p),(s&64512)===55296&&p+1<d&&(f=i.charCodeAt(p+1),(f&64512)===56320&&(s=65536+(s-55296<<10)+(f-56320),p++)),h+=s<128?1:s<2048?2:s<65536?3:4;for(o=new e.Buf8(h),c=0,p=0;c<h;p++)s=i.charCodeAt(p),(s&64512)===55296&&p+1<d&&(f=i.charCodeAt(p+1),(f&64512)===56320&&(s=65536+(s-55296<<10)+(f-56320),p++)),s<128?o[c++]=s:s<2048?(o[c++]=192|s>>>6,o[c++]=128|s&63):s<65536?(o[c++]=224|s>>>12,o[c++]=128|s>>>6&63,o[c++]=128|s&63):(o[c++]=240|s>>>18,o[c++]=128|s>>>12&63,o[c++]=128|s>>>6&63,o[c++]=128|s&63);return o};function a(i,o){if(o<65534&&(i.subarray&&t||!i.subarray&&r))return String.fromCharCode.apply(null,e.shrinkBuf(i,o));for(var s="",f=0;f<o;f++)s+=String.fromCharCode(i[f]);return s}return Tr.buf2binstring=function(i){return a(i,i.length)},Tr.binstring2buf=function(i){for(var o=new e.Buf8(i.length),s=0,f=o.length;s<f;s++)o[s]=i.charCodeAt(s);return o},Tr.buf2string=function(i,o){var s,f,p,c,d=o||i.length,h=new Array(d*2);for(f=0,s=0;s<d;){if(p=i[s++],p<128){h[f++]=p;continue}if(c=n[p],c>4){h[f++]=65533,s+=c-1;continue}for(p&=c===2?31:c===3?15:7;c>1&&s<d;)p=p<<6|i[s++]&63,c--;if(c>1){h[f++]=65533;continue}p<65536?h[f++]=p:(p-=65536,h[f++]=55296|p>>10&1023,h[f++]=56320|p&1023)}return a(h,f)},Tr.utf8border=function(i,o){var s;for(o=o||i.length,o>i.length&&(o=i.length),s=o-1;s>=0&&(i[s]&192)===128;)s--;return s<0||s===0?o:s+n[i[s]]>o?s:o},Tr}var sn,si;function ol(){if(si)return sn;si=1;function e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return sn=e,sn}var ci;function nh(){if(ci)return Hr;ci=1;var e=th(),r=Ar(),t=il(),n=aa(),l=ol(),a=Object.prototype.toString,i=0,o=4,s=0,f=1,p=2,c=-1,d=0,h=8;function v(w){if(!(this instanceof v))return new v(w);this.options=r.assign({level:c,method:h,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},w||{});var C=this.options;C.raw&&C.windowBits>0?C.windowBits=-C.windowBits:C.gzip&&C.windowBits>0&&C.windowBits<16&&(C.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var _=e.deflateInit2(this.strm,C.level,C.method,C.windowBits,C.memLevel,C.strategy);if(_!==s)throw new Error(n[_]);if(C.header&&e.deflateSetHeader(this.strm,C.header),C.dictionary){var R;if(typeof C.dictionary=="string"?R=t.string2buf(C.dictionary):a.call(C.dictionary)==="[object ArrayBuffer]"?R=new Uint8Array(C.dictionary):R=C.dictionary,_=e.deflateSetDictionary(this.strm,R),_!==s)throw new Error(n[_]);this._dict_set=!0}}v.prototype.push=function(w,C){var _=this.strm,R=this.options.chunkSize,T,I;if(this.ended)return!1;I=C===~~C?C:C===!0?o:i,typeof w=="string"?_.input=t.string2buf(w):a.call(w)==="[object ArrayBuffer]"?_.input=new Uint8Array(w):_.input=w,_.next_in=0,_.avail_in=_.input.length;do{if(_.avail_out===0&&(_.output=new r.Buf8(R),_.next_out=0,_.avail_out=R),T=e.deflate(_,I),T!==f&&T!==s)return this.onEnd(T),this.ended=!0,!1;(_.avail_out===0||_.avail_in===0&&(I===o||I===p))&&(this.options.to==="string"?this.onData(t.buf2binstring(r.shrinkBuf(_.output,_.next_out))):this.onData(r.shrinkBuf(_.output,_.next_out)))}while((_.avail_in>0||_.avail_out===0)&&T!==f);return I===o?(T=e.deflateEnd(this.strm),this.onEnd(T),this.ended=!0,T===s):(I===p&&(this.onEnd(s),_.avail_out=0),!0)},v.prototype.onData=function(w){this.chunks.push(w)},v.prototype.onEnd=function(w){w===s&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg};function D(w,C){var _=new v(C);if(_.push(w,!0),_.err)throw _.msg||n[_.err];return _.result}function S(w,C){return C=C||{},C.raw=!0,D(w,C)}function g(w,C){return C=C||{},C.gzip=!0,D(w,C)}return Hr.Deflate=v,Hr.deflate=D,Hr.deflateRaw=S,Hr.gzip=g,Hr}var Wr={},nr={},cn,ui;function ah(){if(ui)return cn;ui=1;var e=30,r=12;return cn=function(n,l){var a,i,o,s,f,p,c,d,h,v,D,S,g,w,C,_,R,T,I,B,L,H,F,q,k;a=n.state,i=n.next_in,q=n.input,o=i+(n.avail_in-5),s=n.next_out,k=n.output,f=s-(l-n.avail_out),p=s+(n.avail_out-257),c=a.dmax,d=a.wsize,h=a.whave,v=a.wnext,D=a.window,S=a.hold,g=a.bits,w=a.lencode,C=a.distcode,_=(1<<a.lenbits)-1,R=(1<<a.distbits)-1;e:do{g<15&&(S+=q[i++]<<g,g+=8,S+=q[i++]<<g,g+=8),T=w[S&_];r:for(;;){if(I=T>>>24,S>>>=I,g-=I,I=T>>>16&255,I===0)k[s++]=T&65535;else if(I&16){B=T&65535,I&=15,I&&(g<I&&(S+=q[i++]<<g,g+=8),B+=S&(1<<I)-1,S>>>=I,g-=I),g<15&&(S+=q[i++]<<g,g+=8,S+=q[i++]<<g,g+=8),T=C[S&R];t:for(;;){if(I=T>>>24,S>>>=I,g-=I,I=T>>>16&255,I&16){if(L=T&65535,I&=15,g<I&&(S+=q[i++]<<g,g+=8,g<I&&(S+=q[i++]<<g,g+=8)),L+=S&(1<<I)-1,L>c){n.msg="invalid distance too far back",a.mode=e;break e}if(S>>>=I,g-=I,I=s-f,L>I){if(I=L-I,I>h&&a.sane){n.msg="invalid distance too far back",a.mode=e;break e}if(H=0,F=D,v===0){if(H+=d-I,I<B){B-=I;do k[s++]=D[H++];while(--I);H=s-L,F=k}}else if(v<I){if(H+=d+v-I,I-=v,I<B){B-=I;do k[s++]=D[H++];while(--I);if(H=0,v<B){I=v,B-=I;do k[s++]=D[H++];while(--I);H=s-L,F=k}}}else if(H+=v-I,I<B){B-=I;do k[s++]=D[H++];while(--I);H=s-L,F=k}for(;B>2;)k[s++]=F[H++],k[s++]=F[H++],k[s++]=F[H++],B-=3;B&&(k[s++]=F[H++],B>1&&(k[s++]=F[H++]))}else{H=s-L;do k[s++]=k[H++],k[s++]=k[H++],k[s++]=k[H++],B-=3;while(B>2);B&&(k[s++]=k[H++],B>1&&(k[s++]=k[H++]))}}else if((I&64)===0){T=C[(T&65535)+(S&(1<<I)-1)];continue t}else{n.msg="invalid distance code",a.mode=e;break e}break}}else if((I&64)===0){T=w[(T&65535)+(S&(1<<I)-1)];continue r}else if(I&32){a.mode=r;break e}else{n.msg="invalid literal/length code",a.mode=e;break e}break}}while(i<o&&s<p);B=g>>3,i-=B,g-=B<<3,S&=(1<<g)-1,n.next_in=i,n.next_out=s,n.avail_in=i<o?5+(o-i):5-(i-o),n.avail_out=s<p?257+(p-s):257-(s-p),a.hold=S,a.bits=g},cn}var un,di;function ih(){if(di)return un;di=1;var e=Ar(),r=15,t=852,n=592,l=0,a=1,i=2,o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return un=function(d,h,v,D,S,g,w,C){var _=C.bits,R=0,T=0,I=0,B=0,L=0,H=0,F=0,q=0,k=0,W=0,X,K,j,G,ee,fe=null,_e=0,ue,he=new e.Buf16(r+1),Se=new e.Buf16(r+1),ge=null,ce=0,ye,se,ne;for(R=0;R<=r;R++)he[R]=0;for(T=0;T<D;T++)he[h[v+T]]++;for(L=_,B=r;B>=1&&he[B]===0;B--);if(L>B&&(L=B),B===0)return S[g++]=1<<24|64<<16|0,S[g++]=1<<24|64<<16|0,C.bits=1,0;for(I=1;I<B&&he[I]===0;I++);for(L<I&&(L=I),q=1,R=1;R<=r;R++)if(q<<=1,q-=he[R],q<0)return-1;if(q>0&&(d===l||B!==1))return-1;for(Se[1]=0,R=1;R<r;R++)Se[R+1]=Se[R]+he[R];for(T=0;T<D;T++)h[v+T]!==0&&(w[Se[h[v+T]]++]=T);if(d===l?(fe=ge=w,ue=19):d===a?(fe=o,_e-=257,ge=s,ce-=257,ue=256):(fe=f,ge=p,ue=-1),W=0,T=0,R=I,ee=g,H=L,F=0,j=-1,k=1<<L,G=k-1,d===a&&k>t||d===i&&k>n)return 1;for(;;){ye=R-F,w[T]<ue?(se=0,ne=w[T]):w[T]>ue?(se=ge[ce+w[T]],ne=fe[_e+w[T]]):(se=96,ne=0),X=1<<R-F,K=1<<H,I=K;do K-=X,S[ee+(W>>F)+K]=ye<<24|se<<16|ne|0;while(K!==0);for(X=1<<R-1;W&X;)X>>=1;if(X!==0?(W&=X-1,W+=X):W=0,T++,--he[R]===0){if(R===B)break;R=h[v+w[T]]}if(R>L&&(W&G)!==j){for(F===0&&(F=L),ee+=I,H=R-F,q=1<<H;H+F<B&&(q-=he[H+F],!(q<=0));)H++,q<<=1;if(k+=1<<H,d===a&&k>t||d===i&&k>n)return 1;j=W&G,S[j]=L<<24|H<<16|ee-g|0}}return W!==0&&(S[ee+W]=R-F<<24|64<<16|0),C.bits=L,0},un}var fi;function oh(){if(fi)return nr;fi=1;var e=Ar(),r=nl(),t=al(),n=ah(),l=ih(),a=0,i=1,o=2,s=4,f=5,p=6,c=0,d=1,h=2,v=-2,D=-3,S=-4,g=-5,w=8,C=1,_=2,R=3,T=4,I=5,B=6,L=7,H=8,F=9,q=10,k=11,W=12,X=13,K=14,j=15,G=16,ee=17,fe=18,_e=19,ue=20,he=21,Se=22,ge=23,ce=24,ye=25,se=26,ne=27,ke=28,Ne=29,ie=30,Ee=31,He=32,We=852,Te=592,xe=15,de=xe;function Le(A){return(A>>>24&255)+(A>>>8&65280)+((A&65280)<<8)+((A&255)<<24)}function dr(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function wr(A){var O;return!A||!A.state?v:(O=A.state,A.total_in=A.total_out=O.total=0,A.msg="",O.wrap&&(A.adler=O.wrap&1),O.mode=C,O.last=0,O.havedict=0,O.dmax=32768,O.head=null,O.hold=0,O.bits=0,O.lencode=O.lendyn=new e.Buf32(We),O.distcode=O.distdyn=new e.Buf32(Te),O.sane=1,O.back=-1,c)}function er(A){var O;return!A||!A.state?v:(O=A.state,O.wsize=0,O.whave=0,O.wnext=0,wr(A))}function Lr(A,O){var b,$;return!A||!A.state||($=A.state,O<0?(b=0,O=-O):(b=(O>>4)+1,O<48&&(O&=15)),O&&(O<8||O>15))?v:($.window!==null&&$.wbits!==O&&($.window=null),$.wrap=b,$.wbits=O,er(A))}function xr(A,O){var b,$;return A?($=new dr,A.state=$,$.window=null,b=Lr(A,O),b!==c&&(A.state=null),b):v}function or(A){return xr(A,de)}var Fr=!0,Dr,Ve;function fr(A){if(Fr){var O;for(Dr=new e.Buf32(512),Ve=new e.Buf32(32),O=0;O<144;)A.lens[O++]=8;for(;O<256;)A.lens[O++]=9;for(;O<280;)A.lens[O++]=7;for(;O<288;)A.lens[O++]=8;for(l(i,A.lens,0,288,Dr,0,A.work,{bits:9}),O=0;O<32;)A.lens[O++]=5;l(o,A.lens,0,32,Ve,0,A.work,{bits:5}),Fr=!1}A.lencode=Dr,A.lenbits=9,A.distcode=Ve,A.distbits=5}function zr(A,O,b,$){var oe,u=A.state;return u.window===null&&(u.wsize=1<<u.wbits,u.wnext=0,u.whave=0,u.window=new e.Buf8(u.wsize)),$>=u.wsize?(e.arraySet(u.window,O,b-u.wsize,u.wsize,0),u.wnext=0,u.whave=u.wsize):(oe=u.wsize-u.wnext,oe>$&&(oe=$),e.arraySet(u.window,O,b-$,oe,u.wnext),$-=oe,$?(e.arraySet(u.window,O,b-$,$,0),u.wnext=$,u.whave=u.wsize):(u.wnext+=oe,u.wnext===u.wsize&&(u.wnext=0),u.whave<u.wsize&&(u.whave+=oe))),0}function x(A,O){var b,$,oe,u,M,N,y,E,P,re,Y,J,ve,mr,Re=0,me,Oe,Ze,Ke,dt,ft,Pe,rr,qe=new e.Buf8(4),br,pr,oa=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!A||!A.state||!A.output||!A.input&&A.avail_in!==0)return v;b=A.state,b.mode===W&&(b.mode=X),M=A.next_out,oe=A.output,y=A.avail_out,u=A.next_in,$=A.input,N=A.avail_in,E=b.hold,P=b.bits,re=N,Y=y,rr=c;e:for(;;)switch(b.mode){case C:if(b.wrap===0){b.mode=X;break}for(;P<16;){if(N===0)break e;N--,E+=$[u++]<<P,P+=8}if(b.wrap&2&&E===35615){b.check=0,qe[0]=E&255,qe[1]=E>>>8&255,b.check=t(b.check,qe,2,0),E=0,P=0,b.mode=_;break}if(b.flags=0,b.head&&(b.head.done=!1),!(b.wrap&1)||(((E&255)<<8)+(E>>8))%31){A.msg="incorrect header check",b.mode=ie;break}if((E&15)!==w){A.msg="unknown compression method",b.mode=ie;break}if(E>>>=4,P-=4,Pe=(E&15)+8,b.wbits===0)b.wbits=Pe;else if(Pe>b.wbits){A.msg="invalid window size",b.mode=ie;break}b.dmax=1<<Pe,A.adler=b.check=1,b.mode=E&512?q:W,E=0,P=0;break;case _:for(;P<16;){if(N===0)break e;N--,E+=$[u++]<<P,P+=8}if(b.flags=E,(b.flags&255)!==w){A.msg="unknown compression method",b.mode=ie;break}if(b.flags&57344){A.msg="unknown header flags set",b.mode=ie;break}b.head&&(b.head.text=E>>8&1),b.flags&512&&(qe[0]=E&255,qe[1]=E>>>8&255,b.check=t(b.check,qe,2,0)),E=0,P=0,b.mode=R;case R:for(;P<32;){if(N===0)break e;N--,E+=$[u++]<<P,P+=8}b.head&&(b.head.time=E),b.flags&512&&(qe[0]=E&255,qe[1]=E>>>8&255,qe[2]=E>>>16&255,qe[3]=E>>>24&255,b.check=t(b.check,qe,4,0)),E=0,P=0,b.mode=T;case T:for(;P<16;){if(N===0)break e;N--,E+=$[u++]<<P,P+=8}b.head&&(b.head.xflags=E&255,b.head.os=E>>8),b.flags&512&&(qe[0]=E&255,qe[1]=E>>>8&255,b.check=t(b.check,qe,2,0)),E=0,P=0,b.mode=I;case I:if(b.flags&1024){for(;P<16;){if(N===0)break e;N--,E+=$[u++]<<P,P+=8}b.length=E,b.head&&(b.head.extra_len=E),b.flags&512&&(qe[0]=E&255,qe[1]=E>>>8&255,b.check=t(b.check,qe,2,0)),E=0,P=0}else b.head&&(b.head.extra=null);b.mode=B;case B:if(b.flags&1024&&(J=b.length,J>N&&(J=N),J&&(b.head&&(Pe=b.head.extra_len-b.length,b.head.extra||(b.head.extra=new Array(b.head.extra_len)),e.arraySet(b.head.extra,$,u,J,Pe)),b.flags&512&&(b.check=t(b.check,$,J,u)),N-=J,u+=J,b.length-=J),b.length))break e;b.length=0,b.mode=L;case L:if(b.flags&2048){if(N===0)break e;J=0;do Pe=$[u+J++],b.head&&Pe&&b.length<65536&&(b.head.name+=String.fromCharCode(Pe));while(Pe&&J<N);if(b.flags&512&&(b.check=t(b.check,$,J,u)),N-=J,u+=J,Pe)break e}else b.head&&(b.head.name=null);b.length=0,b.mode=H;case H:if(b.flags&4096){if(N===0)break e;J=0;do Pe=$[u+J++],b.head&&Pe&&b.length<65536&&(b.head.comment+=String.fromCharCode(Pe));while(Pe&&J<N);if(b.flags&512&&(b.check=t(b.check,$,J,u)),N-=J,u+=J,Pe)break e}else b.head&&(b.head.comment=null);b.mode=F;case F:if(b.flags&512){for(;P<16;){if(N===0)break e;N--,E+=$[u++]<<P,P+=8}if(E!==(b.check&65535)){A.msg="header crc mismatch",b.mode=ie;break}E=0,P=0}b.head&&(b.head.hcrc=b.flags>>9&1,b.head.done=!0),A.adler=b.check=0,b.mode=W;break;case q:for(;P<32;){if(N===0)break e;N--,E+=$[u++]<<P,P+=8}A.adler=b.check=Le(E),E=0,P=0,b.mode=k;case k:if(b.havedict===0)return A.next_out=M,A.avail_out=y,A.next_in=u,A.avail_in=N,b.hold=E,b.bits=P,h;A.adler=b.check=1,b.mode=W;case W:if(O===f||O===p)break e;case X:if(b.last){E>>>=P&7,P-=P&7,b.mode=ne;break}for(;P<3;){if(N===0)break e;N--,E+=$[u++]<<P,P+=8}switch(b.last=E&1,E>>>=1,P-=1,E&3){case 0:b.mode=K;break;case 1:if(fr(b),b.mode=ue,O===p){E>>>=2,P-=2;break e}break;case 2:b.mode=ee;break;case 3:A.msg="invalid block type",b.mode=ie}E>>>=2,P-=2;break;case K:for(E>>>=P&7,P-=P&7;P<32;){if(N===0)break e;N--,E+=$[u++]<<P,P+=8}if((E&65535)!==(E>>>16^65535)){A.msg="invalid stored block lengths",b.mode=ie;break}if(b.length=E&65535,E=0,P=0,b.mode=j,O===p)break e;case j:b.mode=G;case G:if(J=b.length,J){if(J>N&&(J=N),J>y&&(J=y),J===0)break e;e.arraySet(oe,$,u,J,M),N-=J,u+=J,y-=J,M+=J,b.length-=J;break}b.mode=W;break;case ee:for(;P<14;){if(N===0)break e;N--,E+=$[u++]<<P,P+=8}if(b.nlen=(E&31)+257,E>>>=5,P-=5,b.ndist=(E&31)+1,E>>>=5,P-=5,b.ncode=(E&15)+4,E>>>=4,P-=4,b.nlen>286||b.ndist>30){A.msg="too many length or distance symbols",b.mode=ie;break}b.have=0,b.mode=fe;case fe:for(;b.have<b.ncode;){for(;P<3;){if(N===0)break e;N--,E+=$[u++]<<P,P+=8}b.lens[oa[b.have++]]=E&7,E>>>=3,P-=3}for(;b.have<19;)b.lens[oa[b.have++]]=0;if(b.lencode=b.lendyn,b.lenbits=7,br={bits:b.lenbits},rr=l(a,b.lens,0,19,b.lencode,0,b.work,br),b.lenbits=br.bits,rr){A.msg="invalid code lengths set",b.mode=ie;break}b.have=0,b.mode=_e;case _e:for(;b.have<b.nlen+b.ndist;){for(;Re=b.lencode[E&(1<<b.lenbits)-1],me=Re>>>24,Oe=Re>>>16&255,Ze=Re&65535,!(me<=P);){if(N===0)break e;N--,E+=$[u++]<<P,P+=8}if(Ze<16)E>>>=me,P-=me,b.lens[b.have++]=Ze;else{if(Ze===16){for(pr=me+2;P<pr;){if(N===0)break e;N--,E+=$[u++]<<P,P+=8}if(E>>>=me,P-=me,b.have===0){A.msg="invalid bit length repeat",b.mode=ie;break}Pe=b.lens[b.have-1],J=3+(E&3),E>>>=2,P-=2}else if(Ze===17){for(pr=me+3;P<pr;){if(N===0)break e;N--,E+=$[u++]<<P,P+=8}E>>>=me,P-=me,Pe=0,J=3+(E&7),E>>>=3,P-=3}else{for(pr=me+7;P<pr;){if(N===0)break e;N--,E+=$[u++]<<P,P+=8}E>>>=me,P-=me,Pe=0,J=11+(E&127),E>>>=7,P-=7}if(b.have+J>b.nlen+b.ndist){A.msg="invalid bit length repeat",b.mode=ie;break}for(;J--;)b.lens[b.have++]=Pe}}if(b.mode===ie)break;if(b.lens[256]===0){A.msg="invalid code -- missing end-of-block",b.mode=ie;break}if(b.lenbits=9,br={bits:b.lenbits},rr=l(i,b.lens,0,b.nlen,b.lencode,0,b.work,br),b.lenbits=br.bits,rr){A.msg="invalid literal/lengths set",b.mode=ie;break}if(b.distbits=6,b.distcode=b.distdyn,br={bits:b.distbits},rr=l(o,b.lens,b.nlen,b.ndist,b.distcode,0,b.work,br),b.distbits=br.bits,rr){A.msg="invalid distances set",b.mode=ie;break}if(b.mode=ue,O===p)break e;case ue:b.mode=he;case he:if(N>=6&&y>=258){A.next_out=M,A.avail_out=y,A.next_in=u,A.avail_in=N,b.hold=E,b.bits=P,n(A,Y),M=A.next_out,oe=A.output,y=A.avail_out,u=A.next_in,$=A.input,N=A.avail_in,E=b.hold,P=b.bits,b.mode===W&&(b.back=-1);break}for(b.back=0;Re=b.lencode[E&(1<<b.lenbits)-1],me=Re>>>24,Oe=Re>>>16&255,Ze=Re&65535,!(me<=P);){if(N===0)break e;N--,E+=$[u++]<<P,P+=8}if(Oe&&(Oe&240)===0){for(Ke=me,dt=Oe,ft=Ze;Re=b.lencode[ft+((E&(1<<Ke+dt)-1)>>Ke)],me=Re>>>24,Oe=Re>>>16&255,Ze=Re&65535,!(Ke+me<=P);){if(N===0)break e;N--,E+=$[u++]<<P,P+=8}E>>>=Ke,P-=Ke,b.back+=Ke}if(E>>>=me,P-=me,b.back+=me,b.length=Ze,Oe===0){b.mode=se;break}if(Oe&32){b.back=-1,b.mode=W;break}if(Oe&64){A.msg="invalid literal/length code",b.mode=ie;break}b.extra=Oe&15,b.mode=Se;case Se:if(b.extra){for(pr=b.extra;P<pr;){if(N===0)break e;N--,E+=$[u++]<<P,P+=8}b.length+=E&(1<<b.extra)-1,E>>>=b.extra,P-=b.extra,b.back+=b.extra}b.was=b.length,b.mode=ge;case ge:for(;Re=b.distcode[E&(1<<b.distbits)-1],me=Re>>>24,Oe=Re>>>16&255,Ze=Re&65535,!(me<=P);){if(N===0)break e;N--,E+=$[u++]<<P,P+=8}if((Oe&240)===0){for(Ke=me,dt=Oe,ft=Ze;Re=b.distcode[ft+((E&(1<<Ke+dt)-1)>>Ke)],me=Re>>>24,Oe=Re>>>16&255,Ze=Re&65535,!(Ke+me<=P);){if(N===0)break e;N--,E+=$[u++]<<P,P+=8}E>>>=Ke,P-=Ke,b.back+=Ke}if(E>>>=me,P-=me,b.back+=me,Oe&64){A.msg="invalid distance code",b.mode=ie;break}b.offset=Ze,b.extra=Oe&15,b.mode=ce;case ce:if(b.extra){for(pr=b.extra;P<pr;){if(N===0)break e;N--,E+=$[u++]<<P,P+=8}b.offset+=E&(1<<b.extra)-1,E>>>=b.extra,P-=b.extra,b.back+=b.extra}if(b.offset>b.dmax){A.msg="invalid distance too far back",b.mode=ie;break}b.mode=ye;case ye:if(y===0)break e;if(J=Y-y,b.offset>J){if(J=b.offset-J,J>b.whave&&b.sane){A.msg="invalid distance too far back",b.mode=ie;break}J>b.wnext?(J-=b.wnext,ve=b.wsize-J):ve=b.wnext-J,J>b.length&&(J=b.length),mr=b.window}else mr=oe,ve=M-b.offset,J=b.length;J>y&&(J=y),y-=J,b.length-=J;do oe[M++]=mr[ve++];while(--J);b.length===0&&(b.mode=he);break;case se:if(y===0)break e;oe[M++]=b.length,y--,b.mode=he;break;case ne:if(b.wrap){for(;P<32;){if(N===0)break e;N--,E|=$[u++]<<P,P+=8}if(Y-=y,A.total_out+=Y,b.total+=Y,Y&&(A.adler=b.check=b.flags?t(b.check,oe,Y,M-Y):r(b.check,oe,Y,M-Y)),Y=y,(b.flags?E:Le(E))!==b.check){A.msg="incorrect data check",b.mode=ie;break}E=0,P=0}b.mode=ke;case ke:if(b.wrap&&b.flags){for(;P<32;){if(N===0)break e;N--,E+=$[u++]<<P,P+=8}if(E!==(b.total&4294967295)){A.msg="incorrect length check",b.mode=ie;break}E=0,P=0}b.mode=Ne;case Ne:rr=d;break e;case ie:rr=D;break e;case Ee:return S;case He:default:return v}return A.next_out=M,A.avail_out=y,A.next_in=u,A.avail_in=N,b.hold=E,b.bits=P,(b.wsize||Y!==A.avail_out&&b.mode<ie&&(b.mode<ne||O!==s))&&zr(A,A.output,A.next_out,Y-A.avail_out),re-=A.avail_in,Y-=A.avail_out,A.total_in+=re,A.total_out+=Y,b.total+=Y,b.wrap&&Y&&(A.adler=b.check=b.flags?t(b.check,oe,Y,A.next_out-Y):r(b.check,oe,Y,A.next_out-Y)),A.data_type=b.bits+(b.last?64:0)+(b.mode===W?128:0)+(b.mode===ue||b.mode===j?256:0),(re===0&&Y===0||O===s)&&rr===c&&(rr=g),rr}function U(A){if(!A||!A.state)return v;var O=A.state;return O.window&&(O.window=null),A.state=null,c}function V(A,O){var b;return!A||!A.state||(b=A.state,(b.wrap&2)===0)?v:(b.head=O,O.done=!1,c)}function Q(A,O){var b=O.length,$,oe,u;return!A||!A.state||($=A.state,$.wrap!==0&&$.mode!==k)?v:$.mode===k&&(oe=1,oe=r(oe,O,b,0),oe!==$.check)?D:(u=zr(A,O,b,b),u?($.mode=Ee,S):($.havedict=1,c))}return nr.inflateReset=er,nr.inflateReset2=Lr,nr.inflateResetKeep=wr,nr.inflateInit=or,nr.inflateInit2=xr,nr.inflate=x,nr.inflateEnd=U,nr.inflateGetHeader=V,nr.inflateSetDictionary=Q,nr.inflateInfo="pako inflate (from Nodeca project)",nr}var dn,pi;function ll(){return pi||(pi=1,dn={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),dn}var fn,vi;function lh(){if(vi)return fn;vi=1;function e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return fn=e,fn}var hi;function sh(){if(hi)return Wr;hi=1;var e=oh(),r=Ar(),t=il(),n=ll(),l=aa(),a=ol(),i=lh(),o=Object.prototype.toString;function s(c){if(!(this instanceof s))return new s(c);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},c||{});var d=this.options;d.raw&&d.windowBits>=0&&d.windowBits<16&&(d.windowBits=-d.windowBits,d.windowBits===0&&(d.windowBits=-15)),d.windowBits>=0&&d.windowBits<16&&!(c&&c.windowBits)&&(d.windowBits+=32),d.windowBits>15&&d.windowBits<48&&(d.windowBits&15)===0&&(d.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var h=e.inflateInit2(this.strm,d.windowBits);if(h!==n.Z_OK)throw new Error(l[h]);if(this.header=new i,e.inflateGetHeader(this.strm,this.header),d.dictionary&&(typeof d.dictionary=="string"?d.dictionary=t.string2buf(d.dictionary):o.call(d.dictionary)==="[object ArrayBuffer]"&&(d.dictionary=new Uint8Array(d.dictionary)),d.raw&&(h=e.inflateSetDictionary(this.strm,d.dictionary),h!==n.Z_OK)))throw new Error(l[h])}s.prototype.push=function(c,d){var h=this.strm,v=this.options.chunkSize,D=this.options.dictionary,S,g,w,C,_,R=!1;if(this.ended)return!1;g=d===~~d?d:d===!0?n.Z_FINISH:n.Z_NO_FLUSH,typeof c=="string"?h.input=t.binstring2buf(c):o.call(c)==="[object ArrayBuffer]"?h.input=new Uint8Array(c):h.input=c,h.next_in=0,h.avail_in=h.input.length;do{if(h.avail_out===0&&(h.output=new r.Buf8(v),h.next_out=0,h.avail_out=v),S=e.inflate(h,n.Z_NO_FLUSH),S===n.Z_NEED_DICT&&D&&(S=e.inflateSetDictionary(this.strm,D)),S===n.Z_BUF_ERROR&&R===!0&&(S=n.Z_OK,R=!1),S!==n.Z_STREAM_END&&S!==n.Z_OK)return this.onEnd(S),this.ended=!0,!1;h.next_out&&(h.avail_out===0||S===n.Z_STREAM_END||h.avail_in===0&&(g===n.Z_FINISH||g===n.Z_SYNC_FLUSH))&&(this.options.to==="string"?(w=t.utf8border(h.output,h.next_out),C=h.next_out-w,_=t.buf2string(h.output,w),h.next_out=C,h.avail_out=v-C,C&&r.arraySet(h.output,h.output,w,C,0),this.onData(_)):this.onData(r.shrinkBuf(h.output,h.next_out))),h.avail_in===0&&h.avail_out===0&&(R=!0)}while((h.avail_in>0||h.avail_out===0)&&S!==n.Z_STREAM_END);return S===n.Z_STREAM_END&&(g=n.Z_FINISH),g===n.Z_FINISH?(S=e.inflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===n.Z_OK):(g===n.Z_SYNC_FLUSH&&(this.onEnd(n.Z_OK),h.avail_out=0),!0)},s.prototype.onData=function(c){this.chunks.push(c)},s.prototype.onEnd=function(c){c===n.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=c,this.msg=this.strm.msg};function f(c,d){var h=new s(d);if(h.push(c,!0),h.err)throw h.msg||l[h.err];return h.result}function p(c,d){return d=d||{},d.raw=!0,f(c,d)}return Wr.Inflate=s,Wr.inflate=f,Wr.inflateRaw=p,Wr.ungzip=f,Wr}var pn,gi;function ch(){if(gi)return pn;gi=1;var e=Ar().assign,r=nh(),t=sh(),n=ll(),l={};return e(l,r,t,n),pn=l,pn}var mi;function uh(){return mi||(mi=1,(function(e){(function(){var r={},t;e.exports=r,typeof eh=="function"?t=ch():t=window.pako,(function(n,l){n.toRGBA8=function(a){var i=a.width,o=a.height;if(a.tabs.acTL==null)return[n.toRGBA8.decodeImage(a.data,i,o,a).buffer];var s=[];a.frames[0].data==null&&(a.frames[0].data=a.data);for(var f,p=new Uint8Array(i*o*4),c=0;c<a.frames.length;c++){var d=a.frames[c],h=d.rect.x,v=d.rect.y,D=d.rect.width,S=d.rect.height,g=n.toRGBA8.decodeImage(d.data,D,S,a);if(c==0?f=g:d.blend==0?n._copyTile(g,D,S,f,i,o,h,v,0):d.blend==1&&n._copyTile(g,D,S,f,i,o,h,v,1),s.push(f.buffer),f=f.slice(0),d.dispose!=0){if(d.dispose==1)n._copyTile(p,D,S,f,i,o,h,v,0);else if(d.dispose==2){for(var w=c-1;a.frames[w].dispose==2;)w--;f=new Uint8Array(s[w]).slice(0)}}}return s},n.toRGBA8.decodeImage=function(a,i,o,s){var f=i*o,p=n.decode._getBPP(s),c=Math.ceil(i*p/8),d=new Uint8Array(f*4),h=new Uint32Array(d.buffer),v=s.ctype,D=s.depth,S=n._bin.readUshort;if(v==6){var g=f<<2;if(D==8)for(var w=0;w<g;w++)d[w]=a[w];if(D==16)for(var w=0;w<g;w++)d[w]=a[w<<1]}else if(v==2){var C=s.tabs.tRNS,_=-1,R=-1,T=-1;if(C&&(_=C[0],R=C[1],T=C[2]),D==8)for(var w=0;w<f;w++){var I=w<<2,B=w*3;d[I]=a[B],d[I+1]=a[B+1],d[I+2]=a[B+2],d[I+3]=255,_!=-1&&a[B]==_&&a[B+1]==R&&a[B+2]==T&&(d[I+3]=0)}if(D==16)for(var w=0;w<f;w++){var I=w<<2,B=w*6;d[I]=a[B],d[I+1]=a[B+2],d[I+2]=a[B+4],d[I+3]=255,_!=-1&&S(a,B)==_&&S(a,B+2)==R&&S(a,B+4)==T&&(d[I+3]=0)}}else if(v==3){var L=s.tabs.PLTE,H=s.tabs.tRNS,F=H?H.length:0;if(D==1)for(var q=0;q<o;q++)for(var k=q*c,W=q*i,w=0;w<i;w++){var I=W+w<<2,X=a[k+(w>>3)]>>7-((w&7)<<0)&1,K=3*X;d[I]=L[K],d[I+1]=L[K+1],d[I+2]=L[K+2],d[I+3]=X<F?H[X]:255}if(D==2)for(var q=0;q<o;q++)for(var k=q*c,W=q*i,w=0;w<i;w++){var I=W+w<<2,X=a[k+(w>>2)]>>6-((w&3)<<1)&3,K=3*X;d[I]=L[K],d[I+1]=L[K+1],d[I+2]=L[K+2],d[I+3]=X<F?H[X]:255}if(D==4)for(var q=0;q<o;q++)for(var k=q*c,W=q*i,w=0;w<i;w++){var I=W+w<<2,X=a[k+(w>>1)]>>4-((w&1)<<2)&15,K=3*X;d[I]=L[K],d[I+1]=L[K+1],d[I+2]=L[K+2],d[I+3]=X<F?H[X]:255}if(D==8)for(var w=0;w<f;w++){var I=w<<2,X=a[w],K=3*X;d[I]=L[K],d[I+1]=L[K+1],d[I+2]=L[K+2],d[I+3]=X<F?H[X]:255}}else if(v==4){if(D==8)for(var w=0;w<f;w++){var I=w<<2,j=w<<1,G=a[j];d[I]=G,d[I+1]=G,d[I+2]=G,d[I+3]=a[j+1]}if(D==16)for(var w=0;w<f;w++){var I=w<<2,j=w<<2,G=a[j];d[I]=G,d[I+1]=G,d[I+2]=G,d[I+3]=a[j+2]}}else if(v==0){var _=s.tabs.tRNS?s.tabs.tRNS:-1;if(D==1)for(var w=0;w<f;w++){var G=255*(a[w>>3]>>7-(w&7)&1),ee=G==_*255?0:255;h[w]=ee<<24|G<<16|G<<8|G}if(D==2)for(var w=0;w<f;w++){var G=85*(a[w>>2]>>6-((w&3)<<1)&3),ee=G==_*85?0:255;h[w]=ee<<24|G<<16|G<<8|G}if(D==4)for(var w=0;w<f;w++){var G=17*(a[w>>1]>>4-((w&1)<<2)&15),ee=G==_*17?0:255;h[w]=ee<<24|G<<16|G<<8|G}if(D==8)for(var w=0;w<f;w++){var G=a[w],ee=G==_?0:255;h[w]=ee<<24|G<<16|G<<8|G}if(D==16)for(var w=0;w<f;w++){var G=a[w<<1],ee=S(a,w<<1)==_?0:255;h[w]=ee<<24|G<<16|G<<8|G}}return d},n.decode=function(a){for(var i=new Uint8Array(a),o=8,s=n._bin,f=s.readUshort,p=s.readUint,c={tabs:{},frames:[]},d=new Uint8Array(i.length),h=0,v,D=0,S=[137,80,78,71,13,10,26,10],g=0;g<8;g++)if(i[g]!=S[g])throw"The input is not a PNG file!";for(;o<i.length;){var w=s.readUint(i,o);o+=4;var C=s.readASCII(i,o,4);if(o+=4,C=="IHDR")n.decode._IHDR(i,o,c);else if(C=="IDAT"){for(var g=0;g<w;g++)d[h+g]=i[o+g];h+=w}else if(C=="acTL")c.tabs[C]={num_frames:p(i,o),num_plays:p(i,o+4)},v=new Uint8Array(i.length);else if(C=="fcTL"){if(D!=0){var _=c.frames[c.frames.length-1];_.data=n.decode._decompress(c,v.slice(0,D),_.rect.width,_.rect.height),D=0}var R={x:p(i,o+12),y:p(i,o+16),width:p(i,o+4),height:p(i,o+8)},T=f(i,o+22);T=f(i,o+20)/(T==0?100:T);var I={rect:R,delay:Math.round(T*1e3),dispose:i[o+24],blend:i[o+25]};c.frames.push(I)}else if(C=="fdAT"){for(var g=0;g<w-4;g++)v[D+g]=i[o+g+4];D+=w-4}else if(C=="pHYs")c.tabs[C]=[s.readUint(i,o),s.readUint(i,o+4),i[o+8]];else if(C=="cHRM"){c.tabs[C]=[];for(var g=0;g<8;g++)c.tabs[C].push(s.readUint(i,o+g*4))}else if(C=="tEXt"){c.tabs[C]==null&&(c.tabs[C]={});var B=s.nextZero(i,o),L=s.readASCII(i,o,B-o),H=s.readASCII(i,B+1,o+w-B-1);c.tabs[C][L]=H}else if(C=="iTXt"){c.tabs[C]==null&&(c.tabs[C]={});var B=0,F=o;B=s.nextZero(i,F);var L=s.readASCII(i,F,B-F);F=B+1,i[F],i[F+1],F+=2,B=s.nextZero(i,F),s.readASCII(i,F,B-F),F=B+1,B=s.nextZero(i,F),s.readUTF8(i,F,B-F),F=B+1;var H=s.readUTF8(i,F,w-(F-o));c.tabs[C][L]=H}else if(C=="PLTE")c.tabs[C]=s.readBytes(i,o,w);else if(C=="hIST"){var q=c.tabs.PLTE.length/3;c.tabs[C]=[];for(var g=0;g<q;g++)c.tabs[C].push(f(i,o+g*2))}else if(C=="tRNS")c.ctype==3?c.tabs[C]=s.readBytes(i,o,w):c.ctype==0?c.tabs[C]=f(i,o):c.ctype==2&&(c.tabs[C]=[f(i,o),f(i,o+2),f(i,o+4)]);else if(C=="gAMA")c.tabs[C]=s.readUint(i,o)/1e5;else if(C=="sRGB")c.tabs[C]=i[o];else if(C=="bKGD")c.ctype==0||c.ctype==4?c.tabs[C]=[f(i,o)]:c.ctype==2||c.ctype==6?c.tabs[C]=[f(i,o),f(i,o+2),f(i,o+4)]:c.ctype==3&&(c.tabs[C]=i[o]);else if(C=="IEND"){if(D!=0){var _=c.frames[c.frames.length-1];_.data=n.decode._decompress(c,v.slice(0,D),_.rect.width,_.rect.height),D=0}c.data=n.decode._decompress(c,d,c.width,c.height);break}o+=w,s.readUint(i,o),o+=4}return delete c.compress,delete c.interlace,delete c.filter,c},n.decode._decompress=function(a,i,o,s){return a.compress==0&&(i=n.decode._inflate(i)),a.interlace==0?i=n.decode._filterZero(i,a,0,o,s):a.interlace==1&&(i=n.decode._readInterlace(i,a)),i},n.decode._inflate=function(a){return l.inflate(a)},n.decode._readInterlace=function(a,i){for(var o=i.width,s=i.height,f=n.decode._getBPP(i),p=f>>3,c=Math.ceil(o*f/8),d=new Uint8Array(s*c),h=0,v=[0,0,4,0,2,0,1],D=[0,4,0,2,0,1,0],S=[8,8,8,4,4,2,2],g=[8,8,4,4,2,2,1],w=0;w<7;){for(var C=S[w],_=g[w],R=0,T=0,I=v[w];I<s;)I+=C,T++;for(var B=D[w];B<o;)B+=_,R++;var L=Math.ceil(R*f/8);n.decode._filterZero(a,i,h,R,T);for(var H=0,F=v[w];F<s;){for(var q=D[w],k=h+H*L<<3;q<o;){if(f==1){var W=a[k>>3];W=W>>7-(k&7)&1,d[F*c+(q>>3)]|=W<<7-((q&3)<<0)}if(f==2){var W=a[k>>3];W=W>>6-(k&7)&3,d[F*c+(q>>2)]|=W<<6-((q&3)<<1)}if(f==4){var W=a[k>>3];W=W>>4-(k&7)&15,d[F*c+(q>>1)]|=W<<4-((q&1)<<2)}if(f>=8)for(var X=F*c+q*p,K=0;K<p;K++)d[X+K]=a[(k>>3)+K];k+=f,q+=_}H++,F+=C}R*T!=0&&(h+=T*(1+L)),w=w+1}return d},n.decode._getBPP=function(a){var i=[1,null,3,1,2,null,4][a.ctype];return i*a.depth},n.decode._filterZero=function(a,i,o,s,f){var p=n.decode._getBPP(i),c=Math.ceil(s*p/8),d=n.decode._paeth;p=Math.ceil(p/8);for(var h=0;h<f;h++){var v=o+h*c,D=v+h+1,S=a[D-1];if(S==0)for(var g=0;g<c;g++)a[v+g]=a[D+g];else if(S==1){for(var g=0;g<p;g++)a[v+g]=a[D+g];for(var g=p;g<c;g++)a[v+g]=a[D+g]+a[v+g-p]&255}else if(h==0){for(var g=0;g<p;g++)a[v+g]=a[D+g];if(S==2)for(var g=p;g<c;g++)a[v+g]=a[D+g]&255;if(S==3)for(var g=p;g<c;g++)a[v+g]=a[D+g]+(a[v+g-p]>>1)&255;if(S==4)for(var g=p;g<c;g++)a[v+g]=a[D+g]+d(a[v+g-p],0,0)&255}else{if(S==2)for(var g=0;g<c;g++)a[v+g]=a[D+g]+a[v+g-c]&255;if(S==3){for(var g=0;g<p;g++)a[v+g]=a[D+g]+(a[v+g-c]>>1)&255;for(var g=p;g<c;g++)a[v+g]=a[D+g]+(a[v+g-c]+a[v+g-p]>>1)&255}if(S==4){for(var g=0;g<p;g++)a[v+g]=a[D+g]+d(0,a[v+g-c],0)&255;for(var g=p;g<c;g++)a[v+g]=a[D+g]+d(a[v+g-p],a[v+g-c],a[v+g-p-c])&255}}}return a},n.decode._paeth=function(a,i,o){var s=a+i-o,f=Math.abs(s-a),p=Math.abs(s-i),c=Math.abs(s-o);return f<=p&&f<=c?a:p<=c?i:o},n.decode._IHDR=function(a,i,o){var s=n._bin;o.width=s.readUint(a,i),i+=4,o.height=s.readUint(a,i),i+=4,o.depth=a[i],i++,o.ctype=a[i],i++,o.compress=a[i],i++,o.filter=a[i],i++,o.interlace=a[i],i++},n._bin={nextZero:function(a,i){for(;a[i]!=0;)i++;return i},readUshort:function(a,i){return a[i]<<8|a[i+1]},writeUshort:function(a,i,o){a[i]=o>>8&255,a[i+1]=o&255},readUint:function(a,i){return a[i]*(256*256*256)+(a[i+1]<<16|a[i+2]<<8|a[i+3])},writeUint:function(a,i,o){a[i]=o>>24&255,a[i+1]=o>>16&255,a[i+2]=o>>8&255,a[i+3]=o&255},readASCII:function(a,i,o){for(var s="",f=0;f<o;f++)s+=String.fromCharCode(a[i+f]);return s},writeASCII:function(a,i,o){for(var s=0;s<o.length;s++)a[i+s]=o.charCodeAt(s)},readBytes:function(a,i,o){for(var s=[],f=0;f<o;f++)s.push(a[i+f]);return s},pad:function(a){return a.length<2?"0"+a:a},readUTF8:function(a,i,o){for(var s="",f,p=0;p<o;p++)s+="%"+n._bin.pad(a[i+p].toString(16));try{f=decodeURIComponent(s)}catch{return n._bin.readASCII(a,i,o)}return f}},n._copyTile=function(a,i,o,s,f,p,c,d,h){for(var v=Math.min(i,f),D=Math.min(o,p),S=0,g=0,w=0;w<D;w++)for(var C=0;C<v;C++)if(c>=0&&d>=0?(S=w*i+C<<2,g=(d+w)*f+c+C<<2):(S=(-d+w)*i-c+C<<2,g=w*f+C<<2),h==0)s[g]=a[S],s[g+1]=a[S+1],s[g+2]=a[S+2],s[g+3]=a[S+3];else if(h==1){var _=a[S+3]*.00392156862745098,R=a[S]*_,T=a[S+1]*_,I=a[S+2]*_,B=s[g+3]*(1/255),L=s[g]*B,H=s[g+1]*B,F=s[g+2]*B,q=1-_,k=_+B*q,W=k==0?0:1/k;s[g+3]=255*k,s[g+0]=(R+L*q)*W,s[g+1]=(T+H*q)*W,s[g+2]=(I+F*q)*W}else if(h==2){var _=a[S+3],R=a[S],T=a[S+1],I=a[S+2],B=s[g+3],L=s[g],H=s[g+1],F=s[g+2];_==B&&R==L&&T==H&&I==F?(s[g]=0,s[g+1]=0,s[g+2]=0,s[g+3]=0):(s[g]=R,s[g+1]=T,s[g+2]=I,s[g+3]=_)}else if(h==3){var _=a[S+3],R=a[S],T=a[S+1],I=a[S+2],B=s[g+3],L=s[g],H=s[g+1],F=s[g+2];if(_==B&&R==L&&T==H&&I==F)continue;if(_<220&&B>20)return!1}return!0},n.encode=function(a,i,o,s,f,p){s==null&&(s=0),p==null&&(p=!1);for(var c=new Uint8Array(a[0].byteLength*a.length+100),d=[137,80,78,71,13,10,26,10],h=0;h<8;h++)c[h]=d[h];var v=8,D=n._bin,S=n.crc.crc,g=D.writeUint,w=D.writeUshort,C=D.writeASCII,_=n.encode.compressPNG(a,i,o,s,p);g(c,v,13),v+=4,C(c,v,"IHDR"),v+=4,g(c,v,i),v+=4,g(c,v,o),v+=4,c[v]=_.depth,v++,c[v]=_.ctype,v++,c[v]=0,v++,c[v]=0,v++,c[v]=0,v++,g(c,v,S(c,v-17,17)),v+=4,g(c,v,1),v+=4,C(c,v,"sRGB"),v+=4,c[v]=1,v++,g(c,v,S(c,v-5,5)),v+=4;var R=a.length>1;if(R&&(g(c,v,8),v+=4,C(c,v,"acTL"),v+=4,g(c,v,a.length),v+=4,g(c,v,0),v+=4,g(c,v,S(c,v-12,12)),v+=4),_.ctype==3){var T=_.plte.length;g(c,v,T*3),v+=4,C(c,v,"PLTE"),v+=4;for(var h=0;h<T;h++){var I=h*3,B=_.plte[h],L=B&255,H=B>>8&255,F=B>>16&255;c[v+I+0]=L,c[v+I+1]=H,c[v+I+2]=F}if(v+=T*3,g(c,v,S(c,v-T*3-4,T*3+4)),v+=4,_.gotAlpha){g(c,v,T),v+=4,C(c,v,"tRNS"),v+=4;for(var h=0;h<T;h++)c[v+h]=_.plte[h]>>24&255;v+=T,g(c,v,S(c,v-T-4,T+4)),v+=4}}for(var q=0,k=0;k<_.frames.length;k++){var W=_.frames[k];R&&(g(c,v,26),v+=4,C(c,v,"fcTL"),v+=4,g(c,v,q++),v+=4,g(c,v,W.rect.width),v+=4,g(c,v,W.rect.height),v+=4,g(c,v,W.rect.x),v+=4,g(c,v,W.rect.y),v+=4,w(c,v,f[k]),v+=2,w(c,v,1e3),v+=2,c[v]=W.dispose,v++,c[v]=W.blend,v++,g(c,v,S(c,v-30,30)),v+=4);var X=W.cimg,T=X.length;g(c,v,T+(k==0?0:4)),v+=4;var K=v;C(c,v,k==0?"IDAT":"fdAT"),v+=4,k!=0&&(g(c,v,q++),v+=4);for(var h=0;h<T;h++)c[v+h]=X[h];v+=T,g(c,v,S(c,K,v-K)),v+=4}return g(c,v,0),v+=4,C(c,v,"IEND"),v+=4,g(c,v,S(c,v-4,4)),v+=4,c.buffer.slice(0,v)},n.encode.compressPNG=function(a,i,o,s,f){for(var p=n.encode.compress(a,i,o,s,!1,f),c=0;c<a.length;c++){var d=p.frames[c];d.rect.width;var h=d.rect.height,v=d.bpl,D=d.bpp,S=new Uint8Array(h*v+h);d.cimg=n.encode._filterZero(d.img,h,D,v,S)}return p},n.encode.compress=function(a,i,o,s,f,p){p==null&&(p=!1);for(var c=6,d=8,h=4,v=255,D=0;D<a.length;D++)for(var S=new Uint8Array(a[D]),g=S.length,w=0;w<g;w+=4)v&=S[w+3];var C=v!=255,_={},R=[];if(a.length!=0&&(_[0]=0,R.push(0),s!=0&&s--),s!=0){var T=n.quantize(a,s,f);a=T.bufs;for(var w=0;w<T.plte.length;w++){var I=T.plte[w].est.rgba;_[I]==null&&(_[I]=R.length,R.push(I))}}else for(var D=0;D<a.length;D++)for(var B=new Uint32Array(a[D]),g=B.length,w=0;w<g;w++){var I=B[w];if((w<i||I!=B[w-1]&&I!=B[w-i])&&_[I]==null&&(_[I]=R.length,R.push(I),R.length>=300))break}var L=C?f:!1,H=R.length;H<=256&&p==!1&&(H<=2?d=1:H<=4?d=2:H<=16?d=4:d=8,f&&(d=8),C=!0);for(var F=[],D=0;D<a.length;D++){var q=new Uint8Array(a[D]),k=new Uint32Array(q.buffer),W=0,X=0,K=i,j=o,G=0;if(D!=0&&!L){for(var ee=f||D==1||F[F.length-2].dispose==2?1:2,fe=0,_e=1e9,ue=0;ue<ee;ue++){for(var Ne=new Uint8Array(a[D-1-ue]),he=new Uint32Array(a[D-1-ue]),Se=i,ge=o,ce=-1,ye=-1,se=0;se<o;se++)for(var ne=0;ne<i;ne++){var w=se*i+ne;k[w]!=he[w]&&(ne<Se&&(Se=ne),ne>ce&&(ce=ne),se<ge&&(ge=se),se>ye&&(ye=se))}var ke=ce==-1?1:(ce-Se+1)*(ye-ge+1);ke<_e&&(_e=ke,fe=ue,ce==-1?(W=X=0,K=j=1):(W=Se,X=ge,K=ce-Se+1,j=ye-ge+1))}var Ne=new Uint8Array(a[D-1-fe]);fe==1&&(F[F.length-1].dispose=2);var ie=new Uint8Array(K*j*4);new Uint32Array(ie.buffer),n._copyTile(Ne,i,o,ie,K,j,-W,-X,0),n._copyTile(q,i,o,ie,K,j,-W,-X,3)?(n._copyTile(q,i,o,ie,K,j,-W,-X,2),G=1):(n._copyTile(q,i,o,ie,K,j,-W,-X,0),G=0),q=ie,k=new Uint32Array(q.buffer)}var Ee=4*K;if(H<=256&&p==!1){Ee=Math.ceil(d*K/8);for(var ie=new Uint8Array(Ee*j),se=0;se<j;se++){var w=se*Ee,He=se*K;if(d==8)for(var ne=0;ne<K;ne++)ie[w+ne]=_[k[He+ne]];else if(d==4)for(var ne=0;ne<K;ne++)ie[w+(ne>>1)]|=_[k[He+ne]]<<4-(ne&1)*4;else if(d==2)for(var ne=0;ne<K;ne++)ie[w+(ne>>2)]|=_[k[He+ne]]<<6-(ne&3)*2;else if(d==1)for(var ne=0;ne<K;ne++)ie[w+(ne>>3)]|=_[k[He+ne]]<<7-(ne&7)*1}q=ie,c=3,h=1}else if(C==!1&&a.length==1){for(var ie=new Uint8Array(K*j*3),We=K*j,w=0;w<We;w++){var Te=w*3,xe=w*4;ie[Te]=q[xe],ie[Te+1]=q[xe+1],ie[Te+2]=q[xe+2]}q=ie,c=2,h=3,Ee=3*K}F.push({rect:{x:W,y:X,width:K,height:j},img:q,bpl:Ee,bpp:h,blend:G,dispose:L?1:0})}return{ctype:c,depth:d,plte:R,gotAlpha:C,frames:F}},n.encode._filterZero=function(a,i,o,s,f){for(var p=[],c=0;c<5;c++)if(!(i*s>5e5&&(c==2||c==3||c==4))){for(var d=0;d<i;d++)n.encode._filterLine(f,a,d,s,o,c);if(p.push(l.deflate(f)),o==1)break}for(var h,v=1e9,D=0;D<p.length;D++)p[D].length<v&&(h=D,v=p[D].length);return p[h]},n.encode._filterLine=function(a,i,o,s,f,p){var c=o*s,d=c+o,h=n.decode._paeth;if(a[d]=p,d++,p==0)for(var v=0;v<s;v++)a[d+v]=i[c+v];else if(p==1){for(var v=0;v<f;v++)a[d+v]=i[c+v];for(var v=f;v<s;v++)a[d+v]=i[c+v]-i[c+v-f]+256&255}else if(o==0){for(var v=0;v<f;v++)a[d+v]=i[c+v];if(p==2)for(var v=f;v<s;v++)a[d+v]=i[c+v];if(p==3)for(var v=f;v<s;v++)a[d+v]=i[c+v]-(i[c+v-f]>>1)+256&255;if(p==4)for(var v=f;v<s;v++)a[d+v]=i[c+v]-h(i[c+v-f],0,0)+256&255}else{if(p==2)for(var v=0;v<s;v++)a[d+v]=i[c+v]+256-i[c+v-s]&255;if(p==3){for(var v=0;v<f;v++)a[d+v]=i[c+v]+256-(i[c+v-s]>>1)&255;for(var v=f;v<s;v++)a[d+v]=i[c+v]+256-(i[c+v-s]+i[c+v-f]>>1)&255}if(p==4){for(var v=0;v<f;v++)a[d+v]=i[c+v]+256-h(0,i[c+v-s],0)&255;for(var v=f;v<s;v++)a[d+v]=i[c+v]+256-h(i[c+v-f],i[c+v-s],i[c+v-f-s])&255}}},n.crc={table:(function(){for(var a=new Uint32Array(256),i=0;i<256;i++){for(var o=i,s=0;s<8;s++)o&1?o=3988292384^o>>>1:o=o>>>1;a[i]=o}return a})(),update:function(a,i,o,s){for(var f=0;f<s;f++)a=n.crc.table[(a^i[o+f])&255]^a>>>8;return a},crc:function(a,i,o){return n.crc.update(4294967295,a,i,o)^4294967295}},n.quantize=function(a,i,o){for(var s=[],f=0,p=0;p<a.length;p++)s.push(n.encode.alphaMul(new Uint8Array(a[p]),o)),f+=a[p].byteLength;for(var c=new Uint8Array(f),d=new Uint32Array(c.buffer),h=0,p=0;p<s.length;p++){for(var v=s[p],D=v.length,S=0;S<D;S++)c[h+S]=v[S];h+=D}var g={i0:0,i1:c.length,bst:null,est:null,tdst:0,left:null,right:null};g.bst=n.quantize.stats(c,g.i0,g.i1),g.est=n.quantize.estats(g.bst);for(var w=[g];w.length<i;){for(var C=0,_=0,p=0;p<w.length;p++)w[p].est.L>C&&(C=w[p].est.L,_=p);if(C<.001)break;var R=w[_],T=n.quantize.splitPixels(c,d,R.i0,R.i1,R.est.e,R.est.eMq255),I={i0:R.i0,i1:T,bst:null,est:null,tdst:0,left:null,right:null};I.bst=n.quantize.stats(c,I.i0,I.i1),I.est=n.quantize.estats(I.bst);var B={i0:T,i1:R.i1,bst:null,est:null,tdst:0,left:null,right:null};B.bst={R:[],m:[],N:R.bst.N-I.bst.N};for(var p=0;p<16;p++)B.bst.R[p]=R.bst.R[p]-I.bst.R[p];for(var p=0;p<4;p++)B.bst.m[p]=R.bst.m[p]-I.bst.m[p];B.est=n.quantize.estats(B.bst),R.left=I,R.right=B,w[_]=I,w.push(B)}w.sort(function(ee,fe){return fe.bst.N-ee.bst.N});for(var L=0;L<s.length;L++){for(var H=n.quantize.planeDst,F=new Uint8Array(s[L].buffer),q=new Uint32Array(s[L].buffer),k=F.length,p=0;p<k;p+=4){for(var W=F[p]*.00392156862745098,X=F[p+1]*(1/255),K=F[p+2]*(1/255),j=F[p+3]*(1/255),G=g;G.left;)G=H(G.est,W,X,K,j)<=0?G.left:G.right;q[p>>2]=G.est.rgba}s[L]=q.buffer}return{bufs:s,plte:w}},n.quantize.getNearest=function(a,i,o,s,f){if(a.left==null)return a.tdst=n.quantize.dist(a.est.q,i,o,s,f),a;var p=n.quantize.planeDst(a.est,i,o,s,f),c=a.left,d=a.right;p>0&&(c=a.right,d=a.left);var h=n.quantize.getNearest(c,i,o,s,f);if(h.tdst<=p*p)return h;var v=n.quantize.getNearest(d,i,o,s,f);return v.tdst<h.tdst?v:h},n.quantize.planeDst=function(a,i,o,s,f){var p=a.e;return p[0]*i+p[1]*o+p[2]*s+p[3]*f-a.eMq},n.quantize.dist=function(a,i,o,s,f){var p=i-a[0],c=o-a[1],d=s-a[2],h=f-a[3];return p*p+c*c+d*d+h*h},n.quantize.splitPixels=function(a,i,o,s,f,p){var c=n.quantize.vecDot;for(s-=4;o<s;){for(;c(a,o,f)<=p;)o+=4;for(;c(a,s,f)>p;)s-=4;if(o>=s)break;var d=i[o>>2];i[o>>2]=i[s>>2],i[s>>2]=d,o+=4,s-=4}for(;c(a,o,f)>p;)o-=4;return o+4},n.quantize.vecDot=function(a,i,o){return a[i]*o[0]+a[i+1]*o[1]+a[i+2]*o[2]+a[i+3]*o[3]},n.quantize.stats=function(a,i,o){for(var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],f=[0,0,0,0],p=o-i>>2,c=i;c<o;c+=4){var d=a[c]*.00392156862745098,h=a[c+1]*(1/255),v=a[c+2]*(1/255),D=a[c+3]*(1/255);f[0]+=d,f[1]+=h,f[2]+=v,f[3]+=D,s[0]+=d*d,s[1]+=d*h,s[2]+=d*v,s[3]+=d*D,s[5]+=h*h,s[6]+=h*v,s[7]+=h*D,s[10]+=v*v,s[11]+=v*D,s[15]+=D*D}return s[4]=s[1],s[8]=s[2],s[12]=s[3],s[9]=s[6],s[13]=s[7],s[14]=s[11],{R:s,m:f,N:p}},n.quantize.estats=function(a){var i=a.R,o=a.m,s=a.N,f=o[0],p=o[1],c=o[2],d=o[3],h=s==0?0:1/s,v=[i[0]-f*f*h,i[1]-f*p*h,i[2]-f*c*h,i[3]-f*d*h,i[4]-p*f*h,i[5]-p*p*h,i[6]-p*c*h,i[7]-p*d*h,i[8]-c*f*h,i[9]-c*p*h,i[10]-c*c*h,i[11]-c*d*h,i[12]-d*f*h,i[13]-d*p*h,i[14]-d*c*h,i[15]-d*d*h],D=v,S=n.M4,g=[.5,.5,.5,.5],w=0,C=0;if(s!=0)for(var _=0;_<10&&(g=S.multVec(D,g),C=Math.sqrt(S.dot(g,g)),g=S.sml(1/C,g),!(Math.abs(C-w)<1e-9));_++)w=C;var R=[f*h,p*h,c*h,d*h],T=S.dot(S.sml(255,R),g),I=R[3]<.001?0:1/R[3];return{Cov:v,q:R,e:g,L:w,eMq255:T,eMq:S.dot(g,R),rgba:(Math.round(255*R[3])<<24|Math.round(255*R[2]*I)<<16|Math.round(255*R[1]*I)<<8|Math.round(255*R[0]*I)<<0)>>>0}},n.M4={multVec:function(a,i){return[a[0]*i[0]+a[1]*i[1]+a[2]*i[2]+a[3]*i[3],a[4]*i[0]+a[5]*i[1]+a[6]*i[2]+a[7]*i[3],a[8]*i[0]+a[9]*i[1]+a[10]*i[2]+a[11]*i[3],a[12]*i[0]+a[13]*i[1]+a[14]*i[2]+a[15]*i[3]]},dot:function(a,i){return a[0]*i[0]+a[1]*i[1]+a[2]*i[2]+a[3]*i[3]},sml:function(a,i){return[a*i[0],a*i[1],a*i[2],a*i[3]]}},n.encode.alphaMul=function(a,i){for(var o=new Uint8Array(a.length),s=a.length>>2,f=0;f<s;f++){var p=f<<2,c=a[p+3];i&&(c=c<128?0:255);var d=c*(1/255);o[p+0]=a[p+0]*d,o[p+1]=a[p+1]*d,o[p+2]=a[p+2]*d,o[p+3]=c}return o}})(r,t)})()})(tn)),tn.exports}var sl=uh();function dh(){const{setLoadingMsg:e}=Me(),{activeModel:r}=Ie(),{screenshot:t}=z,n=async o=>{o.stopPropagation();const s=t.getFrame(),f=Qv(s);navigator.clipboard.write([new ClipboardItem({"image/png":f})])},l=()=>{if(!r){e("No model"),setTimeout(()=>e(""),2e3);return}e("Generating frames..."),setTimeout(async()=>{const o=t.getAllFrames(r);if(!o){e("Invalid animation..."),setTimeout(()=>e(""),2e3);return}e("Creating zip...");const s=t.settings.fileName||"frames",f=await Ti(o,s);e("Finished"),yr.saveAs(f,`${s}.zip`),setTimeout(()=>e(""),1e3)})},a=()=>{if(!r){e("No model"),setTimeout(()=>e(""),2e3);return}e("Generating frames..."),setTimeout(async()=>{const o=t.getAllFrames(r);if(!o){e("Invalid animation"),setTimeout(()=>e(""),2e3);return}e(`Creating gif from ${o.length} frames...`);const{frameRate:s}=t.settings,{makeGif:f}=await Tt(async()=>{const{makeGif:d}=await import("./f_BH7J_fNF-index.js");return{makeGif:d}},[]),p=await f({frames:o,width:z.viewport.width,height:z.viewport.height,delay:Math.ceil(1e3/s)});e("Finished");const c=r.userData.name??r.id??"ani";yr.saveAs(p,`${c}.gif`),setTimeout(()=>e(""),1e3)})},i=()=>{if(!r){e("No model"),setTimeout(()=>e(""),2e3);return}e("Generating frames..."),setTimeout(async()=>{const o=t.getAllFramesAsArrayBuffer(r);if(!o){e("Invalid animation"),setTimeout(()=>e(""),2e3);return}e(`Creating apng from ${o.length} frames...`);const{frameRate:s}=t.settings,f=Math.ceil(1e3/s),p=Array(o.length-1).fill(f),{width:c,height:d}=z.viewport,h=sl.encode(o,c,d,0,p),v=new Blob([h],{type:"image/apng"});e("Finished");const D=r.userData.name??r.id??"ani";yr.saveAs(v,`${D}.png`),setTimeout(()=>e(""),1e3)})};return m($e,{className:"SettingGroup",children:[m(ae,{children:[m("div",{children:"Screenshot/GIF/APNG"}),m(pe,{onClick:n,title:"Copy screenshot to clipboard",variant:"contained",children:m(Ls,{})})]}),m(ae,{children:[m(cr,{target:t.settings,propList:Jv}),m(pe,{onClick:l,title:"Get all frames as zip",startIcon:m(Br,{}),children:"Get All Frames"}),m(pe,{title:"Create GIF of current animation",startIcon:m(Mn,{viewBox:"4 4 16 16"}),onClick:a,children:"Create GIF"}),m(pe,{onClick:i,title:"Create APNG of current animation",startIcon:m(Br,{}),children:"Create APNG"})]})]})}const{setLoadingMsg:Fe}=Me.getState(),bi=e=>()=>{Fe("Generating frames..."),setTimeout(async()=>{const r=await e();Fe("Creating zip...");const t="frames",n=await Ti(r,t);Fe("Finished"),yr.saveAs(n,`${t}.zip`),setTimeout(()=>Fe(""),1e3)})},yi=e=>async()=>{Fe("Generating frames...");const{frameRate:r}=z.screenshot.settings;setTimeout(async()=>{const t=await e();Fe("Creating gif...");const{makeGif:n}=await Tt(async()=>{const{makeGif:a}=await import("./f_BH7J_fNF-index.js");return{makeGif:a}},[]),l=await n({frames:t,width:z.viewport.width,height:z.viewport.height,delay:Math.ceil(1e3/r)});Fe("Finished"),yr.saveAs(l,"spCapture.gif"),setTimeout(()=>Fe(""),1e3)})},cl=[{value:"rotate",label:"Rotate",frames:bi(wi),gif:yi(wi),clip:fh,preview:ph},{value:"speedDraw",label:"Speed Draw",frames:bi(xi),gif:yi(xi),clip:hh,preview:gh}];async function wi(){const{frameRate:e=30,duration:r=5}=z.userData.specialCapture??{};let t=z.scene.background;z.scene.background=null;const{sqrt:n,sin:l,cos:a,atan:i,PI:o}=Math;let{x:s,y:f,z:p}=z.camera.position;const{x:c,z:d}=z.controls.target,h=n((s-c)**2+(p-d)**2);if(h===0){Fe("Invalid camera settings"),setTimeout(()=>Fe(""),1e3);return}const v=r*e,D=2*o/v,S=p===d?o/4:i((s-c)/(p-d)),g=[];let w=S;for(let C=0;C<v;C++){z.update(1/e),s=c+h*l(w),p=d+h*a(w),z.camera.position.set(s,f,p),z.controls.update(),z.render();const _=z.canvas.toDataURL();g.push(_),w+=D}return z.scene.background=t,g}function fh(){Fe("Recording...");const{frameRate:e=30,duration:r=5}=z.userData.specialCapture??{},t=z.loop.paused,n=z.record.settings.frameRate;z.record.settings.frameRate=e;let l=0;const{sqrt:a,sin:i,cos:o,atan:s,PI:f}=Math;let{x:p,y:c,z:d}=z.camera.position;const{x:h,z:v}=z.controls.target,D=a((p-h)**2+(d-v)**2);if(D===0){Fe("Invalid camera settings"),setTimeout(()=>Fe(""),1e3);return}const S=2*f/r;let w=d===v?f/4:s((p-h)/(d-v));const C=z.addEventListener("timeUpdate",({dt:_})=>{l+=_,l>r&&(z.record.stop(),setTimeout(()=>Fe(""),1e3),z.removeEventListener("timeUpdate",C),t&&z.loop.pause(),z.record.settings.frameRate=n),p=h+D*i(w),d=v+D*o(w),z.camera.position.set(p,c,d),w+=S*_});t&&z.loop.resume(),z.record.start()}function ph(){const{duration:e=5}=z.userData.specialCapture??{},r=z.loop.paused;let t=0;const{sqrt:n,sin:l,cos:a,atan:i,PI:o}=Math;let{x:s,y:f,z:p}=z.camera.position;const{x:c,z:d}=z.controls.target,h=n((s-c)**2+(p-d)**2);if(h===0){Fe("Invalid camera settings"),setTimeout(()=>Fe(""),1e3);return}const v=2*o/e;let S=p===d?o/4:i((s-c)/(p-d));const g=z.addEventListener("timeUpdate",({dt:w})=>{t+=w,t>e&&(z.removeEventListener("timeUpdate",g),r&&z.loop.pause()),s=c+h*l(S),p=d+h*a(S),z.camera.position.set(s,f,p),S+=v*w});r&&z.loop.resume()}const vh=e=>{const{geometry:r}=e,{start:t,count:n}=r.groups.at(-1);return{geometry:r,count:t+n}},ia=e=>{const r=e.meshes.visible,t=e.attachment.list.flatMap(n=>n.meshes.visible);return[...r,...t].map(vh)};async function xi(){const e=Ie.getState().activeModel,r=ia(e).sort((d,h)=>h.count-d.count),t=r.map(({count:d})=>d),n=t.map((d,h)=>t.slice(0,h+1).reduce((v,D)=>v+D,0));n.unshift(0);const l=n.at(-1),{frameRate:a=30,duration:i=5}=z.userData.specialCapture??{};let o=z.scene.background;z.scene.background=null;const s=i*a,f=[];let p=0,c=0;r.forEach(({geometry:d})=>d.drawRange.count=0);for(let d=0;d<=s;d++){e.update(1/a),c=Math.ceil(l*d/s),r[p].geometry.drawRange.count=c-n[p];const h=c-n[p+1];h>=0&&(r[p++].geometry.drawRange.count=1/0,p<r.length&&(r[p].geometry.drawRange.count=h)),z.render();const v=z.canvas.toDataURL();f.push(v)}return z.scene.background=o,f}function hh(){const e=Ie.getState().activeModel;Fe("Recording...");const r=ia(e).sort((v,D)=>D.count-v.count),t=r.map(({count:v})=>v),n=t.map((v,D)=>t.slice(0,D+1).reduce((S,g)=>S+g,0));n.unshift(0);const l=n.at(-1),{frameRate:a=30,duration:i=5}=z.userData.specialCapture??{},o=z.loop.paused,s=z.record.settings.frameRate;z.record.settings.frameRate=a;let f=0,p=0;r.forEach(({geometry:v})=>v.drawRange.count=0);const{ceil:c,max:d}=Math,h=z.addEventListener("timeUpdate",({dt:v})=>{const D=c(l*v/i);p+=d(D,1),r[f].geometry.drawRange.count=p-n[f],p-n[f+1]>=0&&(r[f++].geometry.drawRange.count=1/0,f>=r.length&&(z.removeEventListener("timeUpdate",h),setTimeout(()=>{Fe(""),z.record.stop(),o&&z.loop.pause(),z.record.settings.frameRate=s},1e3)))});o&&z.loop.resume(),z.record.start()}function gh(){const e=Ie.getState().activeModel,r=ia(e).sort((d,h)=>h.count-d.count),t=r.map(({count:d})=>d),n=t.map((d,h)=>t.slice(0,h+1).reduce((v,D)=>v+D,0));n.unshift(0);const l=n.at(-1),{duration:a=5}=z.userData.specialCapture??{},i=z.loop.paused;let o=0,s=0;r.forEach(({geometry:d})=>d.drawRange.count=0);const{ceil:f,max:p}=Math,c=z.addEventListener("timeUpdate",({dt:d})=>{const h=f(l*d/a);s+=p(h,1),r[o].geometry.drawRange.count=s-n[o],s-n[o+1]>=0&&(r[o++].geometry.drawRange.count=1/0,o>=r.length&&(z.removeEventListener("timeUpdate",c),setTimeout(()=>{i&&z.loop.pause()},1e3)))});i&&z.loop.resume()}const mh=[{propName:"program",label:"Program",type:"select",options:cl},{propName:"frameRate",label:"Frame Rate",type:"slider",min:10,max:60,step:10},{propName:"duration",label:"Duration (s)",type:"number",min:1,max:60,step:.5}];function bh(){const e=r=>{const{type:t}=r.currentTarget.dataset,{program:n="rotate"}=z.userData.specialCapture??{};cl.find(l=>l.value===n)?.[t]?.()};return m($e,{className:"SpecialCapture SettingGroup",children:[m(ae,{children:m("div",{children:"Special Capture"})}),m(ae,{children:[m(cr,{target:z.userData.specialCapture,propList:mh}),m("div",{className:"SpecialCapture-actions",children:[m(pe,{"data-type":"preview",onClick:e,title:"Preview",startIcon:m(Pn,{}),children:"Preview"}),m(pe,{"data-type":"frames",onClick:e,title:"Get all frames as zip",startIcon:m(Br,{}),children:"Get Frames"}),m(pe,{"data-type":"gif",onClick:e,title:"Download as GIF",startIcon:m(Mn,{}),children:"Get GIF"}),z.record&&m(pe,{"data-type":"clip",onClick:e,startIcon:m(Nt,{}),title:"Record Clip",children:"Get Clip"})]})]})]})}function yh(){return m(ae,{children:[m($i,{}),m("span",{className:"break"}),m(Xv,{}),m(dh,{}),m("span",{className:"break"}),m(bh,{}),m("span",{className:"break"}),m(Zv,{})]})}function wh(e,r){return new Promise(function(t,n){let l=new XMLHttpRequest;l.open(e,r),l.onload=function(){this.status>=200&&this.status<300?t(l.response):n({status:this.status,statusText:l.statusText})},l.onerror=function(){n({status:this.status,statusText:l.statusText})},l.send()})}const xh=e=>wh("GET",e),Dh=async e=>{const r=`https://api.github.com/repos/dgk3593/dl-model/contents/public/fbx/${e}`,t=await xh(r);return JSON.parse(t).map(l=>l.name)},Sh=async e=>await(await fetch(e)).arrayBuffer(),Ch=async e=>{const t=(await Dh(e)).map(l=>{const a=`https://dgk3593.github.io/dl-model/fbx/${e}/${l}`,i=Sh(a);return{name:l,data:i}}),n=await El(t);yr.saveAs(n,`${e}.zip`)},_h=()=>{const{activeModel:e}=Ie.getState(),{setLoadingMsg:r}=Me.getState(),{screenshot:t}=z;if(!e){r("No model"),setTimeout(()=>r(""),2e3);return}r("Generating frames..."),setTimeout(async()=>{const n=t.getAllFrames(e);if(!n){r("Invalid animation"),setTimeout(()=>r(""),2e3);return}r(`Creating gif from ${n.length} frames...`);const{frameRate:l}=t.settings,{makeGif:a}=await Tt(async()=>{const{makeGif:s}=await import("./f_BH7J_fNF-index.js");return{makeGif:s}},[]),i=await a({frames:n,width:z.viewport.width,height:z.viewport.height,delay:Math.ceil(1e3/l)});r("Finished");const o=e.userData.name??e.id??"ani";yr.saveAs(i,`${o}.gif`),setTimeout(()=>r(""),1e3)})},Ih=()=>{const{activeModel:e}=Ie.getState(),{setLoadingMsg:r}=Me.getState(),{screenshot:t}=z;if(!e){r("No model"),setTimeout(()=>r(""),2e3);return}r("Generating frames..."),setTimeout(async()=>{const n=t.getAllFramesAsArrayBuffer(e);if(!n){r("Invalid animation"),setTimeout(()=>r(""),2e3);return}r(`Creating apng from ${n.length} frames...`);const{frameRate:l}=t.settings,a=Math.ceil(1e3/l),i=Array(n.length-1).fill(a),{width:o,height:s}=z.viewport,f=sl.encode(n,o,s,0,i),p=new Blob([f],{type:"image/apng"});r("Finished");const c=e.userData.name??e.id??"ani";yr.saveAs(p,`${c}.png`),setTimeout(()=>r(""),1e3)})};window.quickApng=Ih;function Eh(){const{activeModel:e}=Ie(),{record:r,screenshot:t}=z,n=Me(o=>o.sidebar.modal.open);return m("div",{className:"QuickAction",children:[m(hr,{title:"Change Background",onClick:()=>n("background"),children:m(qi,{})}),m(hr,{title:"Get Screenshot",onClick:o=>{o.stopPropagation(),t.downloadFrame()},children:m(Ns,{})}),m(hr,{title:"Create GIF",onClick:_h,children:m(Mn,{fontSize:"large"})}),r&&m(hr,{title:"Record Current Animation",onClick:o=>{o.stopPropagation();const{clipDuration:s}=e.animation.current;if(s===0||s===1/0){alert("Can't record");return}const{animation:f}=e;f.stop(),f.addCountedEventListener("ChainFinished",()=>r.stop()),f.play(),r.start()},children:m(Nt,{})}),m(hr,{title:"Download Current Model",onClick:()=>Ch(e.id),children:m(Br,{})})]})}const Ah=["Model","Scene","Export"].map(e=>({name:e})),kh={Model:mc,Scene:Uv,Export:yh};function Rh(){const{tab:e,setTab:r}=Me(l=>l.sidebar.settings),t=(l,a)=>r(a),n=kh[e];return m(ae,{children:[m(Eh,{}),m(ps,{value:e,tabs:Ah,onChange:t}),m(n,{}),m("span",{className:"bottom-space"})]})}function Th(){const{target:e,setTarget:r}=Or();if(!e)return null;const{inputTarget:t}=Pt(),{loadState:n}=Vr(),l=e?.id,[a,i]=ur(e?.userData?.name);Ae(()=>{i(e?.userData?.name),!(a||!e)&&ki(l).then(f=>{i(f.name),e.userData.name=f.name})},[e]);const o=a??l;return e&&m("div",{className:"ChainMaker-target",children:["Target",m(pe,{onClick:async()=>{const f=await t();if(!f)return;const p=f[0];n(p.userData?.aniSelectState),r(p)},title:"Click to change",children:[m(Ni,{modelId:l,alt:o}),m("span",{className:"name",children:o})]})]})}function Ph({target:e}){const{toggle:r}=Or(),{inputAni:t}=Pt(),{activeModel:n}=Ie(),l=e?.userData?.chain??[];return m("div",{className:"ChainMaker-header",children:[m("div",{className:"ChainMaker-title",children:[m(ds,{disabled:!e,children:[m(pe,{variant:"contained",title:"Play All",onClick:()=>{const s=Pi(l);e?.animation.addChain(s)},children:m(Pn,{})}),m(pe,{variant:"contained",title:"Add",onClick:async()=>{const s=await t();if(!s)return;const[f,p,c]=s,d=En(f,p);e.userData?.chain.push(...d),e.userData.aniSelectState=c},children:m(Mt,{})})]}),"ChainMaker"]}),m(Th,{}),m(Bt,{onClick:()=>{r(),Vr.getState().loadState(n?.userData?.aniSelectState)},color:"white",title:"Close Chain Maker"})]})}function Mh({ani:e}){const[r,t]=ur({timeScale:e.timeScale,reps:e.reps}),n=l=>{const{name:a,value:i}=l.target,o=a==="reps"?parseInt(i):parseFloat(i),s=isNaN(o)?1:o;e[a]=s,t(f=>({...f,[a]:s}))};return m("div",{className:"ChainAni-advanced",children:[m(xt,{onChange:n,label:"Speed",size:"small",margin:"dense",variant:"filled",inputProps:{type:"number",step:.25,name:"timeScale"},value:r.timeScale}),m(xt,{onChange:n,label:"Repetitions",size:"small",margin:"dense",variant:"filled",inputProps:{type:"number",name:"reps"},value:r.reps})]})}const Bh={type:"number",min:0,max:100,step:.25};function Di({value:e,label:r,onChange:t,index:n}){return m(xt,{className:"SetNumbers-number",onChange:a=>{const i=a.currentTarget.getAttribute("index"),o=parseFloat(a.currentTarget.value);t(o,i)},value:e,label:r,size:"small",margin:"dense",variant:"outlined",inputProps:{...Bh,index:n}})}const Nh=({value:e,onChange:r,reset:t})=>m("div",{className:"SetNumbers",children:[m(Di,{value:e[0],label:"Start (%)",onChange:r,index:"0"}),m(Di,{value:e[1],label:"End (%)",onChange:r,index:"1"}),m(hr,{onClick:t,title:"Reset",children:m(Bs,{})})]});function Oh({ani:e}){const[r,t]=ur(e.duration??[0,100]),n=o=>{t(o),e.duration=o};return m($e,{disableGutters:!0,className:"ChainAni-duration",children:[m(ae,{children:" Duration"}),m(ae,{children:[m(Nh,{value:r,onChange:(o,s)=>{const f=[...r];f[s]=o,n(f)},reset:()=>n([0,100])}),m("div",{className:"duration-slider",children:m(fs,{size:"small",value:r,onChange:(o,s)=>n(s)})})]})]})}const vn=1024,Pr=64;function Lh({index:e,part:r}){const{activeModel:t}=Ie(),n=t?.face?.[`${r}List`];if(!n)return m(ae,{children:"N/A"});const l=t.userData[`${r}Uv`]??Ql(n);if(t.userData[`${r}Uv`]=l,!l[e-1])return m(ae,{children:"N/A"});const a=es(t.id),[i,o]=l[0].u,[s,f]=l[0].v,p=o-i,c=f-s,d=p*vn,h=c*vn,v=d/Pr,D=vn/v,S=h/v,g={width:Pr,height:S,position:"relative"},w={content:'""',position:"absolute",backgroundImage:`url(${a})`,backgroundSize:`${D}px ${D}px`,width:Pr,height:S};return m("div",{style:g,children:m(Zr,{sx:(({u:_,v:R})=>{const T=_[1]-_[0]!==p,I=_[0],B=R[0],L=I*D,H=B*D,F=T?(Pr-S)/2:0;return T?{width:S,height:Pr,"&::after":{...w,width:S,height:Pr,backgroundPosition:`left -${L}px bottom -${H}px`,transform:`rotate(90deg) translate(-${F}px, -${F}px)`,position:"absolute"}}:{width:Pr,height:S,position:"relative","&::after":{...w,backgroundPosition:`left -${L}px bottom -${H}px`}}})(l[e-1])})})}const Fh=({part:e,...r})=>e==="eye"?m(rs,{...r}):m(ts,{...r});function Si({part:e,index:r,...t}){const{target:n}=Or(),l=n?.face;switch(l?.type){case"uv":return m("div",{...t,"data-part":e,children:r?m(Fh,{part:e,texture:l[`${e}Texture`],index:r}):m(ae,{children:"Set"})});case"meshes":return!l?.[`${e}List`]?.length?m("div",{style:{cursor:"default"},children:"N/A"}):m("div",{...t,"data-part":e,children:r?m(Lh,{part:e,index:r}):m(ae,{children:"Set"})});default:return m(ae,{})}}const zh={type:"number",min:0,max:100,step:1},Gh={marginTop:"0.2rem"};function Hh({details:e,onUpdate:r,onRemove:t}){const{id:n,time:l,eyeIdx:a,mouthIdx:i}=e,[o,s]=ur(l),{inputEye:f,inputMouth:p}=Pt(),c=()=>t(n),d=v=>{const D=parseFloat(v.target.value);s(D);const S={...e,time:D};r(S)},h=async v=>{const{part:D}=v.currentTarget.dataset,S=D==="eye"?await f():await p();if(!S)return;const g=S[0]?S[0]:void 0,w={...e,[`${D}Idx`]:g};r(w)};return m(ae,{children:[m("div",{onClick:c,children:m(Rn,{})}),m(xt,{onChange:d,inputProps:zh,value:o,margin:"dense",size:"small",variant:"standard",sx:Gh}),m(Si,{part:"eye",index:a,"data-id":n,onClick:h}),m(Si,{part:"mouth",index:i,"data-id":n,onClick:h})]})}function Wh({ani:e}){const{target:r}=Or(),{aniAction:t}=e,n=[],l=[];t.forEach(d=>{const{time:h,["face.eyeIdx"]:v,["face.mouthIdx"]:D,...S}=d;(v||D)&&n.push({id:la(),time:h,eyeIdx:v,mouthIdx:D}),Object.keys(S).length&&l.push({time:h,...S})});const[a,i]=ur(n),o=d=>{const h=d.map(({time:w})=>w),v=l.map(({time:w})=>w),g=[...new Set([...h,...v])].sort((w,C)=>w-C).map(w=>{const C=d.find(B=>B.time===w),{eyeIdx:_,mouthIdx:R}=C,I={...l.find(B=>B.time===w),time:w};return _&&(I["face.eyeIdx"]=_),R&&(I["face.mouthIdx"]=R),I});e.aniAction=g,i(d)},s=d=>{const{id:h}=d,v=a.map(D=>D.id===h?d:D);o(v)},f=d=>{const h=a.filter(v=>v.id!==d);i(h),o(h)},p=()=>i(d=>[...d,{id:la()}]),c=a.map(d=>m(Hh,{details:d,onUpdate:s,onRemove:f},d.id));return r.face&&m($e,{disableGutters:!0,className:"ChainAni-face",children:[m(ae,{children:"Facial Expression"}),m("div",{className:"ChainAniFace",children:[a?.length>0&&m(ae,{children:[m("div",{}),m("div",{children:"Time (%)"}),m("div",{children:"Eye"}),m("div",{children:"Mouth"}),c]}),m("div",{onClick:p,children:m(Mt,{})})]})]})}const qh=({onClick:e})=>m(hr,{onClick:e,title:"Play",children:m(Pn,{})});function Uh({target:e,ani:r,index:t}){const{chain:n}=e.userData,l=o=>{o.stopPropagation(),n.remove(r)},a=o=>{o.stopPropagation();const s=Pi([r]);e?.animation.addChain(s)},i=o=>m($e,{className:"ChainAni",...o.draggableProps,ref:o.innerRef,children:[m(ae,{children:[m(qh,{onClick:a}),m("div",{...o.dragHandleProps,className:"ChainAni-name",children:r.name}),m(Bt,{onClick:l,title:"Delete"})]}),m(ae,{children:[m(Mh,{ani:r}),m(Oh,{ani:r}),m(Wh,{ani:r})]})]});return m(tl,{draggableId:r.id,index:t,children:i})}function $h({target:e}){if(!e?.userData?.chain)return null;const[r,t]=gr(),n=e.userData.chain;return Ae(()=>{const i=n.addEventListener("change",t);return()=>n.removeEventListener("change",i)},[]),m(Yo,{onDragEnd:i=>{const{destination:o,source:s}=i;if(!o||o.index===s.index)return;const f=[...n],p=f.splice(s.index,1)[0];f.splice(o.index,0,p),n.length=0,n.push(...f)},children:m(na,{droppableId:"chainList",children:i=>m("div",{ref:i.innerRef,...i.droppableProps,children:[n.map((o,s)=>m(Uh,{target:e,index:s,ani:o},o.id)),i.placeholder]},r)})})}function Vh(){const{activeModel:e}=Ie(),{target:r,setTarget:t}=Or();return Ae(()=>{if(!r)return;const n=r.addEventListener("dispose",()=>t(e));return()=>r.removeEventListener("dispose",n)},[r]),Ae(()=>{r&&z.loadedModel.includes(r)||t(e)},[r,e]),m("div",{className:"ChainMaker",children:[m(Ph,{target:r}),m($h,{target:r})]},r?.uniqueId)}const Zh={sx:yn.paper};function jh({open:e}){const r=Me(l=>l.sidebar.toggle),t=Or(l=>l.open),n=m(Zr,{sx:yn.sidebarHeader,children:[Js,Xs,m(Bt,{color:"white",onClick:r,title:"Close Sidebar"})]});return m(Wi,{className:"Sidebar",open:e,onClose:r,variant:"persistent",sx:yn.sidebar,PaperProps:Zh,children:[n,t?m(Vh,{}):m(Rh,{}),m(ec,{})]})}const Ci="23rem",_i={dock:{width:Ci},Paper:{width:Ci,border:"unset",scrollbarWidth:"thin",scrollbarColor:"rgba(128, 0, 0, 0.8) rgba(255, 255, 255, 0.3)","&::-webkit-scrollbar":{width:"4px",backgroundColor:"rgba(128, 0, 0, 0.3)"},"&::-webkit-scrollbar-thumb":{width:"4px",backgroundColor:"rgba(128, 0, 0, 0.8)",borderRadius:"2px"}}};function Kh(){const{mode:e,handleSelect:r,close:t}=Me(l=>l.dock),n=Ei[e]??Zr;return e&&m(Wi,{className:"Dock",sx:_i.dock,open:!!e,variant:"persistent",anchor:"right",PaperProps:{sx:_i.Paper},children:[m(Bt,{onClick:t,title:"Close Dock"}),m(In,{fallback:m(kn,{}),children:m(n,{compact:!0,onSelect:r})})]})}function Yh(){const{Component:e,props:r={},close:t,onClose:n}=Pt();return m(Mi,{open:!!e,closeModal:n??t,children:m(In,{fallback:m(kn,{}),children:m(e,{...r})})})}const ul=["chara-regular","chara-allies","chara-enemies","dragon-regular","dragon-special","weapon-regular","weapon-special","weapon-extra","boss-archdemon","boss-agito","boss-raid","boss-void","boss-others","model-unlisted"],dl=["ani-home","ani-quest","ani-weapon","ani-gun","ani-genericSkill","ani-uniqueSkill","ani-uniqueCombo","ani-uniqueFS","ani-uniqueVictory","ani-uniqueOther","ani-misc","ani-extra"],fl=["background-image","background-skybox","model-texture"],Xh=[...ul,...dl,...fl],Jh=Object.freeze(Object.defineProperty({__proto__:null,all:Xh,animation:dl,model:ul,others:fl},Symbol.toStringTag,{value:"Module"})),hn=e=>Al(Jh[e]??[]);function pl(e){return typeof e!="object"||e===null||Object.isFrozen(e)?e:(Object.keys(e).forEach(r=>{typeof e[r]=="object"&&(e[r]=pl(e[r]))}),Object.freeze(e))}const gn=Xl.getState().set,mn=!!indexedDB,Qh=async()=>{const e=hn("others"),r=hn("model"),t=hn("animation"),n=await e;gn(n);const l=await r;gn(l);const a=mn&&kl(l),i=await t;gn(i),mn&&Ds(i),await Rl,await a,mn&&await Tl(),console.info("Data Load Complete"),window.appData=pl({model:l,animation:i,others:n})};function Tg(){const e=Me(s=>s.sidebar),r=Me(s=>s.setLoadingMsg),t=Pl(),{activeModel:n,setActiveModel:l}=Ie(),{setSource:a,setSourceName:i}=Vr(s=>s.personalAni),o=Bi("(min-width:640px)");return Ae(()=>{t&&r("Loading"),l(z.model[0]);const s=z.model.addEventListener("change",()=>{z.model.includes(n)||l(z.model[0])});return Qh(),window.addEventListener("unload",()=>indexedDB?.deleteDatabase("model-viewer")),r(""),()=>z.model.removeEventListener("change",s)},[]),Ae(()=>{n&&(i(n?.userData.name),a(n?.id))},[n]),m(ae,{children:[m("button",{title:"Settings",className:"sidebar-toggle",onClick:e.toggle,children:m(Gs,{})}),m(Yh,{}),m(jh,{open:e.open}),o&&m(Kh,{})]})}export{Tg as default};
