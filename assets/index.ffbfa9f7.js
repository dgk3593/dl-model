import{o,m as p,p as y,v as m}from"./index.ccb23c47.js";import{T as x}from"./TabBar.b3dfea06.js";import{C as f}from"./ColorPicker.921d244b.js";import{G as C,T as v,u}from"./Gallery.0669a18f.js";import{B as b}from"./Box.649e99ed.js";import{U as B,f as U}from"./file2dataURL.10287bce.js";import{B as I}from"./Button.bf97c370.js";import{a as P,b as T}from"./DialogTitle.d167ea80.js";import"./ButtonBase.5bef7c26.js";import"./Popover.4daca8ce.js";import"./createSvgIcon.eb10e38f.js";import"./ColorButton.ac4da492.js";const d={gallery:{gap:"1rem"},container:{boxSizing:"border-box",maxWidth:"8rem",maxHeight:"8rem",position:"relative",cursor:"pointer",borderRadius:"5%",overflow:"hidden",filter:"drop-shadow(0 0 2px rgba(0,0,0,0.5))",objectFit:"cover",contentVisibility:"auto",containIntrinsicSize:"0 8rem",alignSelf:"stretch",margin:"auto","&:hover":{border:"1px solid white",filter:"drop-shadow(0.1rem 0.1rem 0.2rem black)"},"&[data-name]::after":{content:"attr(data-name)",position:"absolute",bottom:"0.25rem",left:0,backgroundColor:"rgba(0,0,0,0.8)",color:"#fff",textAlign:"center",padding:"0.1rem",width:"100%"},"&[data-name]:hover::after":{backgroundColor:"rgba(255,255,255,0.6)",color:"black"}},image:{maxWidth:"100%"}},w=({src:t,value:e,name:n,onClick:r})=>o(b,{sx:d.container,"data-name":n,children:o("img",{src:t,"data-value":e,onClick:r,style:d.image})}),h=({list:t,onClick:e})=>o(C,{style:d.gallery,onClick:e,list:t,component:w}),g={input:{paddingRight:"0.2rem",minWidth:"8rem"},button:{padding:"0.5rem 1rem",margin:0,backgroundColor:"rgba(16, 16, 16, 0.8)",color:"rgba(255, 255, 255, 0.9)",border:"1px solid rgba(16, 16, 16, 0.5)","&:hover":{backgroundColor:"rgba(50, 50, 50, 0.8)",border:"1px solid rgba(16, 16, 16, 0.8)"}}};function $({onApply:t,applyLabel:e="Apply",...n}){const[r,l]=p(""),a=c=>l(c.target.value),i=()=>t(r),s=o(I,{sx:g.button,variant:"contained",onClick:i,children:e});return o(v,{value:r,onChange:a,placeholder:"Enter URL",margin:"none",InputProps:{endAdornment:s,sx:g.input},inputProps:{type:"url"},size:"small",...n})}const R={external:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.5rem",maxWidth:"100%",marginBottom:"0.5rem"}};function W({onSelect:t}){const e=u(a=>a["background-image"]),n=a=>{const{value:i}=a.target.dataset,s=`img:${i}`;t(s)},r=async a=>{const s=`img:${await U(a[0])}`;t(s)},l=a=>{if(!a)return;const i=`img:${a}`;t(i)};return o(y,{children:[o(b,{sx:R.external,children:[o(B,{onChange:r}),o($,{onApply:l})]}),o(h,{list:e,onClick:n})]})}function L({onSelect:t}){const e=u(r=>r["background-skybox"]);return o(h,{list:e,onClick:r=>{const{value:l}=r.target.dataset,a=`sky:${l}`;t(a)}})}const D=["Color","Image","Skybox"].map(t=>({name:t})),z={Color:f,Image:W,Skybox:L},G=t=>t.startsWith("sky:")?"Skybox":t.startsWith("img:")?"Image":"Color";function M({onAfterSelect:t}){var s;const e=G(m.background),[n,r]=p(e),l=c=>{m.background=c,t==null||t()},a=(c,k)=>r(k),i=(s=z[n])!=null?s:()=>null;return o("div",{className:"BackgroundPicker",children:[o(P,{sx:{textAlign:"center"},children:"Choose a background"}),o(x,{value:n,onChange:a,tabs:D}),o(T,{children:o(i,{onSelect:l})})]})}export{M as default};
