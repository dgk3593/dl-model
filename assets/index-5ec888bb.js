import{_ as u,h as p,o as a,D as f,a as v,M as y,b as _}from"./a481e55d-jsxRuntime.module.js";import{_ as w}from"./45408441-preload-helper.js";import{u as A}from"./01c1aa6f-useIsMount.js";import{u as m,g,a as S}from"./61e48b0a-index.js";import{g as D,p as L}from"./a4be5a26-getPersonalAni.js";import{p as O,v as c,g as E,a as P}from"./267a0ebf-viewer.js";import{c as h}from"./8ae97cac-helper.js";import{i as b}from"./54296060-initAniSelectState.js";import"./64d5bff0-index.js";import"./042e6b4d-_commonjsHelpers.js";import"./6e6bf9f0-compat.module.js";import"./a2089eea-immer.esm.js";import"./f60cacb5-index.js";import"./422fb203-three.js";import"./e27bbfcf-CopyShader.js";import"./717175ec-ShaderPass.js";import"./c51705f5-Pass.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function t(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(e){if(e.ep)return;e.ep=!0;const o=t(e);fetch(e.href,o)}})();const M="cccccc",N="c100001_01";function d(){const n=decodeURI(window.location.hash),r=O(n),t=Object.fromEntries(r);T(t),I(n)}function T(n){const{bg:r=M,showAC:t="true",showSettings:i="true"}=n;c.background=r,m.setState({showTimeControl:g(t)}),m.setState({showSettings:g(i)})}async function I(n){c.disposeAllModels(),setTimeout(async()=>{const r=n.includes("id=")?n:n+`/id=${N}`,t=await c.loadModelFromCode(r);c.add(t);const i=t.type==="adventurer"?"Adv":"Personal";S.getState().setCategory(i),b(t);const{id:e}=t;if(!n.includes("camPos=")){const s=E(e);c.camera.position.set(...s)}const o=P(e);if(c.controls.target.set(...o),n.includes("ani=")){const s=t.animation.current.chainCode??"";s&&(t.userData.chain=h(s,"init"))}else{const s=D(e);if(s){const{code:l,name:C}=s;t.animation.addChain(l),t.userData.chain=h(l,C)}}})}const R=y(()=>w(()=>import("./ead0e420-index.js"),["assets/ead0e420-index.js","assets/a481e55d-jsxRuntime.module.js","assets/61e48b0a-index.js","assets/64d5bff0-index.js","assets/042e6b4d-_commonjsHelpers.js","assets/6e6bf9f0-compat.module.js","assets/a2089eea-immer.esm.js","assets/267a0ebf-viewer.js","assets/45408441-preload-helper.js","assets/422fb203-three.js","assets/e27bbfcf-CopyShader.js","assets/717175ec-ShaderPass.js","assets/c51705f5-Pass.js","assets/01c1aa6f-useIsMount.js","assets/53e7721e-createSvgIcon.js","assets/2b3d8e58-ButtonBase.js","assets/9c75b126-BoneManager.js","assets/11e2c849-ModelIcon.js","assets/0c11c75a-Accordion.js","assets/2b8c3014-useToggleState.js","assets/09fd7fc3-Accordion.css","assets/8bea9b78-filterConfig.js","assets/d547337d-Gallery.js","assets/e29cb512-Popover.js","assets/fe7550fe-Box.js","assets/7657992e-DialogTitle.js","assets/32598b2e-GlowToggle.js","assets/eb519626-GlowToggle.css","assets/a8cb2ce8-lists.js","assets/d2947805-Close.js","assets/4341b07e-lists.css","assets/ea114570-filterConfig.css","assets/2a0f997f-ColorButton.js","assets/27dad05c-Button.js","assets/0fa6ce92-SkipPrevious.js","assets/368b29c2-useKey.js","assets/32d3176a-FaceSelect.js","assets/eec81504-FacePartSelector.js","assets/107e4d3c-Selector.js","assets/88a094c7-Selector.css","assets/3bf32e7c-MeshMouthSelect.js","assets/7f49998c-MeshMouthSelect.css","assets/febe3778-FaceSelect.css","assets/70532496-FaceTexture.js","assets/fb83fb90-styles.js","assets/6d95f099-styles.css","assets/2ff56570-styles.css","assets/f60cacb5-index.js","assets/8ae97cac-helper.js","assets/6866ff4f-AddWeapon.js","assets/92f823bf-index.js","assets/54296060-initAniSelectState.js","assets/45b642d6-AddWeapon.css","assets/bf3fbd2c-BoneManager.css","assets/a4be5a26-getPersonalAni.js","assets/6757f2dc-TabBar.js","assets/e0a4883b-aniFunction.js","assets/0f03617c-index.css"])),B=y(()=>w(()=>import("./f619a9ca-index.js"),["assets/f619a9ca-index.js","assets/a481e55d-jsxRuntime.module.js","assets/2b8c3014-useToggleState.js","assets/61e48b0a-index.js","assets/64d5bff0-index.js","assets/042e6b4d-_commonjsHelpers.js","assets/6e6bf9f0-compat.module.js","assets/a2089eea-immer.esm.js","assets/267a0ebf-viewer.js","assets/45408441-preload-helper.js","assets/422fb203-three.js","assets/e27bbfcf-CopyShader.js","assets/717175ec-ShaderPass.js","assets/c51705f5-Pass.js","assets/32598b2e-GlowToggle.js","assets/eb519626-GlowToggle.css","assets/27dad05c-Button.js","assets/2b3d8e58-ButtonBase.js","assets/e29cb512-Popover.js","assets/0fa6ce92-SkipPrevious.js","assets/53e7721e-createSvgIcon.js","assets/d2947805-Close.js","assets/0a450c69-index.css"]));function F(){const n=A(),r=u(),t=u(),{loadingMsg:i,showTimeControl:e,showSettings:o,showFrameRate:s}=m();return p(()=>(n&&L.then(d),window.addEventListener("hashchange",d),()=>window.removeEventListener("hashchange",d))),p(()=>{r.current.appendChild(c.canvas),c.stats.dom.style.position="",t.current.appendChild(c.stats.dom)},[]),a(v,{children:[o&&a(f,{fallback:null,children:a(R,{})}),a("div",{className:"mount",ref:l=>r.current=l}),a("div",{className:"stats",style:{display:s?"unset":"none"},ref:l=>t.current=l}),i&&a("div",{className:"loading-msg",children:i}),e&&a(f,{fallback:null,children:a(B,{})})]})}_(a(F,{}),document.getElementById("app"));
