import{n as S,o as N,u as a,r as X}from"./index-DugXr78E.js";import{B as z}from"./f_BUdg-DyD-Box.js";import{B as C}from"./f_CS9hFeZz-Button.js";const O=t=>`${S}/${t}/${t}.png`,Y=[1,2,3,4,5,6,7,8,9],$=64,H=Y.map(t=>{if(t===1)return[-280,-170];const n=(t-2)%4,e=Math.floor(t/6),o=-(24+n*128),s=-(298+e*128);return[o,s]}),T=(t,n)=>{const[e,o]=H[n-1],[s,c]=N(t),r=s*128,i=c*128,u=e-r,d=o+i;return{x:u,y:d}},W=(t,n)=>{const{x:e,y:o}=T(t,n),s=o-$/2;return{x:e,y:s}};function k({texture:t,x:n,y:e,...o}){const c={backgroundImage:`url(${O(t)})`,backgroundSize:"512px 512px",backgroundPosition:`${n}px ${e}px`,width:$,height:$/2};return a("div",{style:c,...o})}function L({texture:t,index:n,...e}){const{x:o,y:s}=T(t,n);return a(k,{texture:t,x:o,y:s,className:"EyeBox",...e})}function Q({texture:t,index:n,...e}){const{x:o,y:s}=W(t,n);return a(k,{texture:t,x:o,y:s,className:"EyeBox",...e})}const P=t=>{let n=t[0],e=t[0];return t.forEach(o=>{n=o<n?o:n,e=o>e?o:e}),[n,e]},j=t=>t.map(n=>{const e=n.geometry.attributes.uv.array,o=e.filter((d,x)=>x%2===0),s=e.filter((d,x)=>x%2===1),[c,r]=P(o),[i,u]=P(s);return{u:[c,r],v:[i,u]}}),A=t=>`${S}/${t}/${X(t)}.png`,m=1024,h=160;function Z({id:t,uvList:n,onClick:e,part:o}){const s=A(t).replace(">",""),[c,r]=n[0].u,[i,u]=n[0].v,d=r-c,x=u-i,U=d*m,I=x*m,M=U/h,g=m/M,l=I/M,R={width:h,height:l,position:"relative",borderRadius:"0.5rem",overflow:"hidden"},b={content:'""',position:"absolute",backgroundImage:`url(${s})`,backgroundSize:`${g}px ${g}px`,width:h,height:l},_=({u:f,v:p})=>{const v=f[1]-f[0]!==d,D=f[0],F=p[0],y=D*g,B=F*g,E=v?(h-l)/2:0;return v?{width:l,height:h,"&::after":{...b,width:l,height:h,backgroundPosition:`left -${y}px bottom -${B}px`,transform:`rotate(90deg) translate(-${E}px, -${E}px)`,position:"absolute"}}:{width:h,height:l,position:"relative","&::after":{...b,backgroundPosition:`left -${y}px bottom -${B}px`}}};return a("div",{className:"MeshFaceButton",children:[n.map((f,p)=>a("div",{style:R,onClick:e,"data-index":p+1,"data-part":o,children:a(z,{sx:_(f)})})),a(C,{"data-part":o,"data-index":"0",onClick:e,variant:"outlined",children:"Remove"})]})}const q=([t,...n])=>`${t.toUpperCase()}${n.join("")}`;function w({target:t,onSelect:n,part:e}){const o=t?.face?.[`${e}List`];if(!o)return null;const s=t.userData[`${e}Uv`]??j(o);t.userData[`${e}Uv`]=s;const c=r=>{const{index:i,part:u}=r.currentTarget.dataset;n(parseInt(i),u)};return o&&a("div",{className:"MeshPartSelect",children:[a("h3",{children:["Select ",q(e)]}),a(Z,{id:t.id,uvList:s,onClick:c,part:e})]})}const V=t=>a(w,{part:"eye",...t}),tt=t=>a(w,{part:"mouth",...t});export{L as E,tt as M,V as a,Q as b,A as c,j as g,Y as i};
