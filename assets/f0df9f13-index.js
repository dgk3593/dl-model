import{o,a as g,p as k}from"./888d32ea-jsxRuntime.module.js";import{T as y}from"./882832ba-TabBar.js";import{C as x}from"./1f5376e5-ColorPicker.js";import{G as f,T as C,u}from"./587f51be-Gallery.js";import{B as b}from"./fa2036ae-Box.js";import{U as v,f as B}from"./a6853fdc-file2dataURL.js";import{B as U}from"./b44d1d10-Button.js";import{v as d}from"./1c32777d-viewer.js";import{a as I,b as P}from"./65cb6644-DialogTitle.js";import"./c83da345-ButtonBase.js";import"./a2ee47c2-Popover.js";import"./fa80b542-createSvgIcon.js";import"./45408441-preload-helper.js";import"./af5d734b-ColorButton.js";import"./c64ba8b7-index.js";import"./042e6b4d-_commonjsHelpers.js";import"./264cfb41-compat.module.js";import"./416e9bf6-three.js";import"./e27bbfcf-CopyShader.js";import"./ef11c09e-ShaderPass.js";import"./13b127e2-Pass.js";const m={gallery:{gap:"1rem"},container:{boxSizing:"border-box",maxWidth:"8rem",maxHeight:"8rem",position:"relative",cursor:"pointer",borderRadius:"5%",overflow:"hidden",filter:"drop-shadow(0 0 2px rgba(0,0,0,0.5))",objectFit:"cover",contentVisibility:"auto",containIntrinsicSize:"0 8rem",alignSelf:"stretch",margin:"auto","&:hover":{border:"1px solid white",filter:"drop-shadow(0.1rem 0.1rem 0.2rem black)"},"&[data-name]::after":{content:"attr(data-name)",position:"absolute",bottom:"0.25rem",left:0,backgroundColor:"rgba(0,0,0,0.8)",color:"#fff",textAlign:"center",padding:"0.1rem",width:"100%"},"&[data-name]:hover::after":{backgroundColor:"rgba(255,255,255,0.6)",color:"black"}},image:{maxWidth:"100%"}},T=({src:t,value:e,name:n,onClick:a})=>o(b,{sx:m.container,"data-name":n,children:o("img",{src:t,"data-value":e,onClick:a,style:m.image})}),h=({list:t,onClick:e})=>o(f,{style:m.gallery,onClick:e,list:t,component:T}),p={input:{paddingRight:"0.2rem",minWidth:"8rem"},button:{padding:"0.5rem 1rem",margin:0,backgroundColor:"rgba(16, 16, 16, 0.8)",color:"rgba(255, 255, 255, 0.9)",border:"1px solid rgba(16, 16, 16, 0.5)","&:hover":{backgroundColor:"rgba(50, 50, 50, 0.8)",border:"1px solid rgba(16, 16, 16, 0.8)"}}};function w({onApply:t,applyLabel:e="Apply",...n}){const[a,l]=g(""),r=c=>l(c.target.value),i=()=>t(a),s=o(U,{sx:p.button,variant:"contained",onClick:i,children:e});return o(C,{value:a,onChange:r,placeholder:"Enter URL",margin:"none",InputProps:{endAdornment:s,sx:p.input},inputProps:{type:"url"},size:"small",...n})}const $={external:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.5rem",maxWidth:"100%",marginBottom:"0.5rem"}};function R({onSelect:t}){const e=u(r=>r["background-image"]),n=r=>{const{value:i}=r.target.dataset,s=`img:${i}`;t(s)},a=async r=>{const s=`img:${await B(r[0])}`;t(s)},l=r=>{if(!r)return;const i=`img:${r}`;t(i)};return o(k,{children:[o(b,{sx:$.external,children:[o(v,{onChange:a}),o(w,{onApply:l})]}),o(h,{list:e,onClick:n})]})}function W({onSelect:t}){const e=u(a=>a["background-skybox"]);return o(h,{list:e,onClick:a=>{const{value:l}=a.target.dataset,r=`sky:${l}`;t(r)}})}const L=["Color","Image","Skybox"].map(t=>({name:t})),D={Color:x,Image:R,Skybox:W},z=t=>t.startsWith("sky:")?"Skybox":t.startsWith("img:")?"Image":"Color";function rt({onAfterSelect:t}){const e=z(d.background),[n,a]=g(e),l=s=>{d.background=s,t==null||t()},r=(s,c)=>a(c),i=D[n]??(()=>null);return o("div",{className:"BackgroundPicker",children:[o(I,{sx:{textAlign:"center"},children:"Choose a background"}),o(y,{value:n,onChange:r,tabs:L}),o(P,{children:o(i,{onSelect:l})})]})}export{rt as default};
