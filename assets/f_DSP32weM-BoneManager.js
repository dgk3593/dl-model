import{D as de,u as a,A as ue,T as Ve,d as g,b as me,k as S,y as Q,R as he,$ as Ee,L as je,H as Ge,N as Ue,g as qe,v as ce,a as Xe}from"./index-CzesR0e2.js";/* empty css                 */import{M as Ke}from"./f_hi4hNcc0-ModelIcon.js";import{A as U}from"./f_CtNdNwEu-Accordion.js";import{M as ve,T as Ye}from"./f_DconIPK2-filterConfig.js";import{b as Qe,S as Te,T as be,u as Ne}from"./f_DdLWGNAr-Gallery.js";import{a as fe,g as Se,s as A,d as P,e as ye,B as Je,o as Ze,u as Fe,b as et,c as Y,m as G,f as xe,h as tt,D as at,E as ot}from"./f_Copz09Ox-CircularProgress.js";import{g as lt,e as F,c as nt,a as Ae,F as Ce,M as st,B as rt,P as it}from"./f_BP15UnUZ-Popover.js";import{C as ct}from"./f_CC1oZv9p-ColorButton.js";import{S as pt,B as dt,a as ut,P as mt,b as ht,c as vt}from"./f_DR5WRqnK-SkipPrevious.js";import{u as J}from"./f_C0k23ix1-useKey.js";import{C as Z,I as ke}from"./f_Ce9mrLJ1-Close.js";import{c as x}from"./f_BOZFCTKD-createSvgIcon.js";import{B as k}from"./f_BZ3IZGS2-Button.js";import{B as bt}from"./f_qweRAh_q-Box.js";import{b as ft}from"./f_DTquevhv-DialogTitle.js";import St from"./f_zxItusCP-index.js";import yt from"./f_Da2o6F56-index.js";import{u as we}from"./f_lp9w_V7P-useToggleState.js";import{G as kt}from"./f_EwSakghM-GlowToggle.js";import gt from"./f_Bi2l4zcG-index.js";function xt(e){return fe("PrivateSwitchBase",e)}Se("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Ct=e=>{const{classes:t,checked:o,disabled:l,edge:n}=e,s={root:["root",o&&"checked",l&&"disabled",n&&`edge${P(n)}`],input:["input"]};return ye(s,xt,t)},wt=A(Je)({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:e,ownerState:t})=>e==="start"&&t.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:e,ownerState:t})=>e==="end"&&t.size!=="small",style:{marginRight:-12}}]}),Pt=A("input",{shouldForwardProp:Ze})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Mt=de(function(t,o){const{autoFocus:l,checked:n,checkedIcon:s,defaultChecked:i,disabled:c,disableFocusRipple:r=!1,edge:p=!1,icon:m,id:h,inputProps:d,inputRef:u,name:b,onBlur:M,onChange:f,onFocus:C,readOnly:B,required:$=!1,tabIndex:D,type:z,value:q,slots:ee={},slotProps:te={},...ae}=t,[O,oe]=lt({controlled:n,default:!!i,name:"SwitchBase",state:"checked"}),T=Qe(),L=v=>{C&&C(v),T&&T.onFocus&&T.onFocus(v)},_=v=>{M&&M(v),T&&T.onBlur&&T.onBlur(v)},V=v=>{if(v.nativeEvent.defaultPrevented)return;const w=v.target.checked;oe(w),f&&f(v,w)};let I=c;T&&typeof I>"u"&&(I=T.disabled);const le=z==="checkbox"||z==="radio",R={...t,checked:O,disabled:I,disableFocusRipple:r,edge:p},X=Ct(R),K={slots:ee,slotProps:{input:d,...te}},[ne,W]=F("root",{ref:o,elementType:wt,className:X.root,shouldForwardComponentProp:!0,externalForwardedProps:{...K,component:"span",...ae},getSlotProps:v=>({...v,onFocus:w=>{var N;(N=v.onFocus)==null||N.call(v,w),L(w)},onBlur:w=>{var N;(N=v.onBlur)==null||N.call(v,w),_(w)}}),ownerState:R,additionalProps:{centerRipple:!0,focusRipple:!r,disabled:I,role:void 0,tabIndex:null}}),[se,re]=F("input",{ref:u,elementType:Pt,className:X.input,externalForwardedProps:K,getSlotProps:v=>({...v,onChange:w=>{var N;(N=v.onChange)==null||N.call(v,w),V(w)}}),ownerState:R,additionalProps:{autoFocus:l,checked:n,defaultChecked:i,disabled:I,id:le?h:void 0,name:b,readOnly:B,required:$,tabIndex:D,type:z,...z==="checkbox"&&q===void 0?{}:{value:q}}});return a(ne,{...W,children:[a(se,{...re}),O?s:m]})});function Tt(e){return fe("MuiDialog",e)}const ie=Se("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),Nt=A(rt,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),Ft=e=>{const{classes:t,scroll:o,maxWidth:l,fullWidth:n,fullScreen:s}=e,i={root:["root"],container:["container",`scroll${P(o)}`],paper:["paper",`paperScroll${P(o)}`,`paperWidth${P(String(l))}`,n&&"paperFullWidth",s&&"paperFullScreen"]};return ye(i,Tt,t)},At=A(st,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),Bt=A("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.container,t[`scroll${P(o.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),$t=A(Ae,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.paper,t[`scrollPaper${P(o.scroll)}`],t[`paperWidth${P(String(o.maxWidth))}`],o.fullWidth&&t.paperFullWidth,o.fullScreen&&t.paperFullScreen]}})(G(({theme:e})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:t})=>!t.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${ie.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(e.breakpoints.values).filter(t=>t!=="xs").map(t=>({props:{maxWidth:t},style:{maxWidth:`${e.breakpoints.values[t]}${e.breakpoints.unit}`,[`&.${ie.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t]+32*2)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:t})=>t.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:t})=>t.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${ie.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),zt=de(function(t,o){const l=Fe({props:t,name:"MuiDialog"}),n=nt(),s={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{"aria-describedby":i,"aria-labelledby":c,"aria-modal":r=!0,BackdropComponent:p,BackdropProps:m,children:h,className:d,disableEscapeKeyDown:u=!1,fullScreen:b=!1,fullWidth:M=!1,maxWidth:f="sm",onClick:C,onClose:B,open:$,PaperComponent:D=Ae,PaperProps:z={},scroll:q="paper",slots:ee={},slotProps:te={},TransitionComponent:ae=Ce,transitionDuration:O=s,TransitionProps:oe,...T}=l,L={...l,disableEscapeKeyDown:u,fullScreen:b,fullWidth:M,maxWidth:f,scroll:q},_=Ft(L),V=ue(),I=E=>{V.current=E.target===E.currentTarget},le=E=>{C&&C(E),V.current&&(V.current=null,B&&B(E,"backdropClick"))},R=et(c),X=Ve(()=>({titleId:R}),[R]),K={transition:ae,...ee},ne={transition:oe,paper:z,backdrop:m,...te},W={slots:K,slotProps:ne},[se,re]=F("root",{elementType:At,shouldForwardComponentProp:!0,externalForwardedProps:W,ownerState:L,className:Y(_.root,d),ref:o}),[v,w]=F("backdrop",{elementType:Nt,shouldForwardComponentProp:!0,externalForwardedProps:W,ownerState:L}),[N,Re]=F("paper",{elementType:$t,shouldForwardComponentProp:!0,externalForwardedProps:W,ownerState:L,className:Y(_.paper,z.className)}),[We,He]=F("container",{elementType:Bt,externalForwardedProps:W,ownerState:L,className:Y(_.container)}),[Oe,_e]=F("transition",{elementType:Ce,externalForwardedProps:W,ownerState:L,additionalProps:{appear:!0,in:$,timeout:O,role:"presentation"}});return a(se,{closeAfterTransition:!0,slots:{backdrop:v},slotProps:{backdrop:{transitionDuration:O,as:p,...w}},disableEscapeKeyDown:u,onClose:B,open:$,onClick:le,...re,...T,children:a(Oe,{..._e,children:a(We,{onMouseDown:I,...He,children:a(N,{as:D,elevation:24,role:"dialog","aria-describedby":i,"aria-labelledby":R,"aria-modal":r,...Re,children:a(ft.Provider,{value:X,children:h})})})})})});function Lt(e){return fe("MuiSwitch",e)}const y=Se("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),Dt=e=>{const{classes:t,edge:o,size:l,color:n,checked:s,disabled:i}=e,c={root:["root",o&&`edge${P(o)}`,`size${P(l)}`],switchBase:["switchBase",`color${P(n)}`,s&&"checked",i&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},r=ye(c,Lt,t);return{...t,...r}},It=A("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.edge&&t[`edge${P(o.edge)}`],t[`size${P(o.size)}`]]}})({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${y.thumb}`]:{width:16,height:16},[`& .${y.switchBase}`]:{padding:4,[`&.${y.checked}`]:{transform:"translateX(16px)"}}}}]}),Rt=A(Mt,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.switchBase,{[`& .${y.input}`]:t.input},o.color!=="default"&&t[`color${P(o.color)}`]]}})(G(({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:`${e.palette.mode==="light"?e.palette.common.white:e.palette.grey[300]}`,transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${y.checked}`]:{transform:"translateX(20px)"},[`&.${y.disabled}`]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:`${e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]}`},[`&.${y.checked} + .${y.track}`]:{opacity:.5},[`&.${y.disabled} + .${y.track}`]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:`${e.palette.mode==="light"?.12:.2}`},[`& .${y.input}`]:{left:"-100%",width:"300%"}})),G(({theme:e})=>({"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:xe(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(e.palette).filter(tt(["light"])).map(([t])=>({props:{color:t},style:{[`&.${y.checked}`]:{color:(e.vars||e).palette[t].main,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:xe(e.palette[t].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${y.disabled}`]:{color:e.vars?e.vars.palette.Switch[`${t}DisabledColor`]:`${e.palette.mode==="light"?at(e.palette[t].main,.62):ot(e.palette[t].main,.55)}`}},[`&.${y.checked} + .${y.track}`]:{backgroundColor:(e.vars||e).palette[t].main}}}))]}))),Wt=A("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})(G(({theme:e})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:`${e.palette.mode==="light"?e.palette.common.black:e.palette.common.white}`,opacity:e.vars?e.vars.opacity.switchTrack:`${e.palette.mode==="light"?.38:.3}`}))),Ht=A("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})(G(({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),Ot=de(function(t,o){const l=Fe({props:t,name:"MuiSwitch"}),{className:n,color:s="primary",edge:i=!1,size:c="medium",sx:r,slots:p={},slotProps:m={},...h}=l,d={...l,color:s,edge:i,size:c},u=Dt(d),b={slots:p,slotProps:m},[M,f]=F("root",{className:Y(u.root,n),elementType:It,externalForwardedProps:b,ownerState:d,additionalProps:{sx:r}}),[C,B]=F("thumb",{className:u.thumb,elementType:Ht,externalForwardedProps:b,ownerState:d}),$=a(C,{...B}),[D,z]=F("track",{className:u.track,elementType:Wt,externalForwardedProps:b,ownerState:d});return a(M,{...f,children:[a(Rt,{type:"checkbox",icon:$,checkedIcon:$,ref:o,ownerState:d,...h,classes:{...u,root:u.switchBase},slots:{...p.switchBase&&{root:p.switchBase},...p.input&&{input:p.input}},slotProps:{...m.switchBase&&{root:typeof m.switchBase=="function"?m.switchBase(d):m.switchBase},...m.input&&{input:typeof m.input=="function"?m.input(d):m.input}}}),a(D,{...z})]})}),ge=x(a("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})),_t=x(a("path",{d:"M2 12.5C2 9.46 4.46 7 7.5 7H18c2.21 0 4 1.79 4 4s-1.79 4-4 4H9.5C8.12 15 7 13.88 7 12.5S8.12 10 9.5 10H17v2H9.41c-.55 0-.55 1 0 1H18c1.1 0 2-.9 2-2s-.9-2-2-2H7.5C5.57 9 4 10.57 4 12.5S5.57 16 7.5 16H17v2H7.5C4.46 18 2 15.54 2 12.5"})),Be=x(a("path",{d:"m19 9 1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25zm-7.5.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25z"})),Vt=x([a("path",{d:"M15.54 5.54 13.77 7.3 12 5.54 10.23 7.3 8.46 5.54 12 2zm2.92 10-1.76-1.77L18.46 12l-1.76-1.77 1.76-1.77L22 12zm-10 2.92 1.77-1.76L12 18.46l1.77-1.76 1.77 1.76L12 22zm-2.92-10 1.76 1.77L5.54 12l1.76 1.77-1.76 1.77L2 12z"},"0"),a("circle",{cx:"12",cy:"12",r:"3"},"1")]),Et=x(a("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 16H5V5h14zm-5.04-6.71-2.75 3.54-1.96-2.36L6.5 17h11z"})),$e=x(a("path",{d:"M13.49 5.48c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m-3.6 13.9 1-4.4 2.1 2v6h2v-7.5l-2.1-2 .6-3c1.3 1.5 3.3 2.5 5.5 2.5v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1l-5.2 2.2v4.7h2v-3.4l1.8-.7-1.6 8.1-4.9-1-.4 2z"})),jt=x(a("path",{d:"M20.5 11H19V7c0-1.1-.9-2-2-2h-4V3.5C13 2.12 11.88 1 10.5 1S8 2.12 8 3.5V5H4c-1.1 0-1.99.9-1.99 2v3.8H3.5c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-1.5c0-1.49 1.21-2.7 2.7-2.7s2.7 1.21 2.7 2.7V22H17c1.1 0 2-.9 2-2v-4h1.5c1.38 0 2.5-1.12 2.5-2.5S21.88 11 20.5 11"})),ze=x(a("path",{d:"M9 11.75c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25m6 0c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8 0-.29.02-.58.05-.86 2.36-1.05 4.23-2.98 5.21-5.37C11.07 8.33 14.05 10 17.42 10c.78 0 1.53-.09 2.25-.26.21.71.33 1.47.33 2.26 0 4.41-3.59 8-8 8"})),Gt=x(a("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8m3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5m-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11m3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5"})),Ut=x(a("path",{d:"M21 11V3h-8l3.29 3.29-10 10L3 13v8h8l-3.29-3.29 10-10z"})),qt=x(a("path",{d:"M12 6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m0 10c2.7 0 5.8 1.29 6 2H6c.23-.72 3.31-2 6-2m0-12C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 10c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),Xt=x(a("path",{d:"M2 20h20v-4H2zm2-3h2v2H4zM2 4v4h20V4zm4 3H4V5h2zm-4 7h20v-4H2zm2-3h2v2H4z"})),Kt=x(a("path",{d:"M19.51 3.08 3.08 19.51c.09.34.27.65.51.9.25.24.56.42.9.51L20.93 4.49c-.19-.69-.73-1.23-1.42-1.41M11.88 3 3 11.88v2.83L14.71 3zM5 3c-1.1 0-2 .9-2 2v2l4-4zm14 18c.55 0 1.05-.22 1.41-.59.37-.36.59-.86.59-1.41v-2l-4 4zm-9.71 0h2.83L21 12.12V9.29z"})),Yt=x(a("path",{d:"M12 7C6.48 7 2 9.24 2 12c0 2.24 2.94 4.13 7 4.77V20l4-4-4-4v2.73c-3.15-.56-5-1.9-5-2.73 0-1.06 3.04-3 8-3s8 1.94 8 3c0 .73-1.46 1.89-4 2.53v2.05c3.53-.77 6-2.53 6-4.58 0-2.76-4.48-5-10-5"}));function Le({options:e,value:t,onChange:o,...l}){return a(Te,{className:"SelectBox",value:t,onChange:s=>o(s.target.value),...l,children:e.map(({value:s,label:i=s,title:c})=>a(ve,{value:s,title:c,children:i}))})}function Qt({target:e,keyList:t,labels:o=[],scale:l=1,inputProps:n={},onBeforeChange:s=void 0,onChange:i=void 0,...c}){const r=t.map(u=>e[u]/l),[p,m]=g(r),h=u=>{const b=u.currentTarget.value;if(b.endsWith("."))return;const M=parseInt(u.currentTarget.getAttribute("index")),f=parseFloat(b);if(isNaN(f))return;let C;m(D=>(C=[...D],C[M]=f,C));const B=f*l,$=t[M];s==null||s(C),e[$]=B,i==null||i(C)},d=u=>u.currentTarget.select();return a("div",{className:"SetNumbers",...c,children:t.map((u,b)=>a(be,{className:"SetNumbers-number",onChange:h,value:p[b],label:o[b]??u,size:"small",margin:"dense",variant:"outlined",inputProps:{type:"number",index:b,onFocus:d,...n}},u))})}const Jt=["x","y","z","w"];function pe({target:e,dimension:t=3,scale:o=1,min:l,max:n,step:s,...i}){const c=Jt.slice(0,t);return a(Qt,{target:e,keyList:c,scale:o,inputProps:{min:l,max:n,step:s},className:"SetVector SetNumbers","data-dimension":t,...i})}const Zt=(e,t=-1/0,o=1/0)=>{if(e===void 0)return;let l=e;return l<t&&(l=t),l>o&&(l=o),l};function De({target:e,propName:t,label:o,min:l,max:n,step:s=1,onBeforeChange:i,onChange:c,...r}){const[p,m]=g(e[t]);return a("div",{className:"SetNumber",children:a(be,{onChange:d=>{if(!d.currentTarget.value)return;const u=parseFloat(d.currentTarget.value)||l;let b=Zt(u,l,n);m(b),i==null||i(b),e[t]=b,c==null||c(b)},value:p,label:o,size:"small",margin:"dense",variant:"outlined",inputProps:{type:"number",min:l,max:n,step:s},...r})})}function ea({target:e,propName:t,label:o,inputProps:l={},onBeforeChange:n,onChange:s,...i}){const[c,r]=g(e[t]);return a("div",{className:"SetString",children:a(be,{onChange:m=>{const h=m.currentTarget.value;r(h),n==null||n(h),e[t]=h,s==null||s(h)},value:c,label:o,size:"small",margin:"dense",variant:"outlined",inputProps:l,...i})})}function ta({target:e,propName:t,onBeforeChange:o,onChange:l}){const[n,s]=g(e[t]);return a("div",{className:"SetBoolean",children:a(Ot,{onChange:()=>{const c=!n;s(c),o==null||o(c),e[t]=c,l==null||l(c)},checked:n})})}function aa({target:e,propName:t,onBeforeChange:o,onChange:l}){const[n,s]=g(e[t]),{inputColor:i}=me(),c=async()=>{const r=await i();r&&(s(r),o==null||o(r),e[t]=r,l==null||l(r))};return a("div",{className:"SetColor",children:a(ct,{color:n.startsWith("#")?n:"#"+n,onClick:c,style:{border:"1px solid rgba(255, 255, 255, 0.5)"}})})}function oa({target:e,propName:t,label:o,options:l,onBeforeChange:n,onChange:s,...i}){const[c,r]=g(e[t]);return a("div",{className:"SetFromList",children:a(Le,{onChange:m=>{r(m),n==null||n(m),e[t]=m,s==null||s(m)},options:l,value:c,size:"small",margin:"dense",...i})})}function la({target:e,propName:t,label:o=t,title:l,valueMap:n=String,min:s=0,max:i=1,step:c=.01,onBeforeChange:r,onChange:p,...m}){const[h,d]=g(e[t]),u=(M,f)=>{d(f),r==null||r(f),e[t]=f,p==null||p(f)},b=`${o}: ${n(h)}`;return a(S,{children:[a("div",{className:"Setters-label",title:l,children:b}),a("div",{className:"Setters-slider",children:a(pt,{size:"small",value:h,min:s,max:i,step:c,onChange:u,...m})})]})}function H({target:e,propList:t}){const o=t.map(l=>{const{propName:n,label:s=n,title:i,type:c,...r}=l,p=na[c];switch(c){case"slider":return a(la,{target:e,propName:n,label:s,title:i,...r});case"vector":return a(S,{children:[a("div",{className:"Setters-label vector",title:i,children:s}),a(pe,{target:e[n],...r})]});default:return a(S,{children:[a("div",{className:"Setters-label",title:i,children:s}),a(p,{target:e,propName:n,...r})]})}});return a("div",{className:"Setters",children:o})}const na={boolean:ta,number:De,string:ea,color:aa,select:oa};function sa({target:e,name:t}){if(!e)return null;const o=e.list.map(n=>({value:n}));o.push({value:"None"});const l=[{propName:"current",label:t.replaceAll("_"," "),type:"select",options:o}];return a(H,{target:e,propList:l})}function ra({list:e}){const t=e.map(({name:c})=>c),o=c=>e.find(({name:r})=>r===c),l=Object.fromEntries(t.map(c=>{var r;return[c,(r=o(c))==null?void 0:r.visible]})),[n,s]=g(l);return a(Ye,{name:"",options:t,type:"text",state:n,toggle:(c,r)=>{const p=!n[r];s({...n,[r]:p}),o(r).visible=p}})}function ia({target:e}){const{parts:t}=e;if(!t)return null;const{list:o,others:l}=t;return a("div",{className:"BodyPartsController",children:[o.map(n=>a(sa,{target:t[n],name:n})),l.length>0&&a(U,{children:[a(S,{children:o.length?"Other Parts":"Body Parts"}),a(ra,{list:l})]})]})}const ca=[{value:"img/textures/particle/cloud.png",label:"Cloud"},{value:"img/textures/particle/smoke.png",label:"Smoke"},{value:"img/textures/particle/heart.png",label:"Heart"}],pa=[{propName:"visible",label:"Visible",type:"boolean"},{propName:"speed",label:"Speed",type:"slider",title:"How fast the aura rises",min:0,max:10,step:.5},{propName:"auraSize",label:"Aura Size",type:"number",title:"How big the aura is",min:0,step:10},{propName:"auraOpacity",label:"Aura Opacity",type:"slider",title:"How opaque the aura is",min:0,max:1,step:.05},{propName:"particleSize",label:"Particle Size",type:"number",title:"How big the particles are",min:0,step:1},{propName:"particleOpacity",label:"Particle Opacity",type:"slider",title:"How opaque the particles are",min:0,max:1,step:.05},{propName:"spread",label:"Spread",type:"number",title:"Distance from the model",min:0,step:1},{propName:"threshold",label:"Threshold",type:"slider",title:"Higher value means less aura, more particles",min:0,max:.7,step:.05},{propName:"color",label:"Color",type:"color"},{propName:"color2",label:"Color 2",type:"color"},{propName:"texture",label:"Texture",type:"select",options:ca}];function da({target:e}){const{name:t}=e;return a(U,{disableGutters:!0,className:"AuraController",children:[a(S,{children:[t,a(ke,{title:"Remove",className:"closeButton",onClick:n=>{n.stopPropagation(),e.dispose()},children:a(Z,{})})]}),a(H,{target:e,propList:pa})]})}function ua({target:e}){const{particle:t}=e,[o,l]=J();return Q(()=>{const{list:s}=t,i=s.addEventListener("change",l);return()=>s.removeEventListener("change",i)},[]),a(U,{disableGutters:!0,className:"ParticleController",children:[a(S,{children:[a("div",{className:"title",children:[a(Be,{}),"Particles"]}),a(k,{onClick:s=>{s.stopPropagation(),t.add(),l()},title:"Add particles",variant:"contained",children:a(ge,{})})]}),a(he.Fragment,{children:t.list.length?t.list.map((s,i)=>a(da,{target:s},o+i)):"Click + to add particles"},o)]})}const ma=({onClick:e,color:t="#101010",title:o})=>a(bt,{position:"absolute",top:0,right:0,children:a(ke,{sx:{color:t,zIndex:5},onClick:e,size:"large",title:o,children:a(Z,{})})}),ha={sx:{margin:"0.3rem",minWidth:"12rem",minHeight:"12rem",maxHeight:"calc(100% - 2rem)"}},Ie=({children:e,open:t,closeModal:o,...l})=>t?Ee(a(zt,{className:"Modal",maxWidth:"lg",open:t,onClose:o,PaperProps:ha,...l,children:[a(ma,{onClick:o,title:"Close"}),e]}),document.getElementById("modal-root")):a(S,{}),va={face:St,faceTexture:yt};function ba({target:e}){const t=e==null?void 0:e.face;if(!t)return a(S,{});const[o,l]=g(""),n=()=>l(""),s=va[o]??S,i=r=>{const{value:p}=r.currentTarget.dataset;l(p)},c=(...r)=>{const[p,m]=r;switch(o){case"face":e.face[`${m}BaseIdx`]=p;return;case"faceTexture":e.face[`${m}Texture`]=p;return;default:return}};return a("div",{className:"FaceController",children:[a(k,{variant:"contained",startIcon:a(Gt,{}),onClick:i,"data-value":"face",children:"Facial Expresion"}),t.type==="uv"&&a(k,{variant:"contained",startIcon:a(ze,{}),onClick:i,"data-value":"faceTexture",children:"Face Texture"}),a(Ie,{closeModal:n,open:!!o,children:a(s,{target:e,onSelect:c,onAfterSelect:n})})]})}const fa={backgroundColor:"#101010",color:"#ccc","& li:not(:last-child)":{borderBottom:"1px solid #ffffff33"},"& li[data-current]":{backgroundColor:"#202020",color:"#fff",borderColor:"#fff"},"& li:hover":{backgroundColor:"#ffffff33"}};function Sa({target:e,isReverse:t}){const{animation:o}=e,l=Math.abs(o.mixer.timeScale),[n,s]=g(l),[i,c]=g(null),r=d=>{d.stopPropagation(),c(d.currentTarget)},p=()=>c(null),m=Array(8).fill().map((d,u)=>u*.25+.25),h=d=>{const{value:u}=d.target.dataset;o.mixer.timeScale=t?-u:u,s(parseFloat(u)),p()};return a(S,{children:[a(k,{title:"Time Scale",onClick:r,children:`${n}x`}),a(it,{anchorEl:i,open:!!i,onClose:p,className:"TimeScaleSelect",PaperProps:{sx:fa},children:m.map(d=>a(ve,{onClick:h,"data-value":d,"data-current":d===n,children:`${d}x`}))})]})}function ya({target:e}){const{animation:t}=e,[o,l]=we(t.isPaused),[n,s]=we(t.mixer.timeScale<0),i=()=>{o?t.resume():t.pause(),l()},c=()=>{t.mixer.timeScale*=-1,s()},r=p=>{const{dir:m}=p.currentTarget.dataset,h=m==="next"?1:-1,u=1/60*h;o?(t.resume(),t.update(u),t.pause()):t.update(u)};return a("div",{className:"ModelTimeControl",children:[a(dt,{children:[a(k,{variant:"contained","data-dir":"prev",onClick:r,title:"Previous Frame",children:a(ut,{})}),a(k,{variant:"contained",onClick:i,title:o?"Resume":"Pause",children:o?a(mt,{}):a(ht,{})}),a(k,{variant:"contained","data-dir":"next",onClick:r,title:"Next Frame",children:a(vt,{})})]}),a(kt,{type:"text",value:"Reverse",checked:n,onClick:c}),a(Sa,{isReverse:n,target:e})]})}function ka({target:e}){const{inputAni:t}=me(),{toggle:o,setTarget:l}=je(),{loadState:n}=Ge();return a("div",{className:"AnimationController",children:[a(ya,{target:e}),a(k,{variant:"contained",startIcon:a($e,{}),onClick:async()=>{var u;n(e==null?void 0:e.userData.aniSelectState);const r=await t();if(!r)return;const p=e==null?void 0:e.animation.isPaused,[m,h]=r;e==null||e.animation.addChain(m).then(()=>p&&e.animation.pause());const d=Ue(m,h);e!=null&&e.userData&&(((u=e.userData.chain)==null?void 0:u.splice(0,1/0,...d))??(e.userData.chain=d))},title:"Add Animation",children:"Add Animation"}),a(k,{variant:"contained",startIcon:a(Xt,{}),onClick:()=>{l(e),n(e==null?void 0:e.userData.aniSelectState),o()},title:"Open Chain Maker",children:"Chain Maker"}),a(k,{variant:"contained",startIcon:a(Z,{}),onClick:()=>{var r,p;(r=e==null?void 0:e.animation)==null||r.reset(),(p=e==null?void 0:e.userData)==null||p.chain.splice(0,1/0)},title:"Remove Animation",children:"Reset"})]})}function ga({target:e}){var h;if(!e)return a(S,{});const{inputModel:t}=me(),o=["root",...((h=e==null?void 0:e.bones)==null?void 0:h.list)??[]],[l,n]=g(o[0]),s=qe(e.attachment.list.map(d=>d.parentBone)),[i,c]=J();Q(()=>e==null?void 0:e.addEventListener("AttachmentChanged",c),[]);const r=d=>n(d.target.value),p=async(d=l)=>{const u=await t();if(!u)return;const[b,M]=u,f=await ce.loadDLModel(b);f.userData.name=M,e.attach(f,d==="root"?void 0:d),f.outline.code=e.outline.code,f.material.code=e.material.code,ce.render()},m=()=>p();return a(he.Fragment,{children:[a("div",{className:"AttachmentController-add",children:[a(Te,{className:"AttachmentController-select",onChange:r,value:l,children:o.map(d=>a(ve,{value:d,children:d},d))}),a(k,{title:"Add attachment to selected joint",variant:"contained",onClick:m,children:a(ge,{})})]}),a("div",{className:"AttachmentList",children:s.map(d=>a(Ea,{target:e,add:p,bone:d},d))},i)]},e.uniqueId)}const xa=a("img",{className:"btn-icon",src:"img/appIcon/weapon.png",alt:"Add Weapon"});function Ca({target:e}){const[t,o]=g(!1),l=e.bones.list.includes("jWeaponR");return a("div",{className:"AttachmentController",children:[l&&a(k,{title:"Add Weapon",startIcon:xa,onClick:()=>o(!0),children:"Add Weapon"}),a(ga,{target:e}),a(Ie,{open:t,closeModal:()=>o(!1),children:a(gt,{target:e})})]})}const wa={propName:"texture",label:"Texture",type:"select"};function Pa({target:e}){const t=Ne(l=>l["model-texture"]);if(!(t!=null&&t[e.id]))return null;const o=[{...wa,options:t[e.id]}];return a("div",{className:"TextureController",children:a(H,{target:e,propList:o})})}const Ma=e=>{var t,o;return!!((o=(t=Ne.getState())==null?void 0:t["model-texture"])!=null&&o[e])},Ta=["Position","Rotation","Scale","Outline","Material","Particles","Animation","Attachment"],Na={Position:Vt,Rotation:Yt,Scale:Ut,Outline:qt,Material:Kt,Particles:Be,Animation:$e,Attachment:_t,"Body Parts":jt,Face:ze,Texture:Et},Fa=({target:e,type:t,...o})=>{switch(t){case"Position":return a(pe,{target:e.position,step:.005,...o},"position");case"Rotation":return a(pe,{target:e.rotation,min:-1,max:1,step:.05,scale:Math.PI*2,...o},"rotation");case"Scale":return a(De,{target:e,propName:"scale",label:"Scale",step:.05,...o});case"Outline":return a(Ia,{target:e});case"Material":return a(_a,{target:e});case"Particles":return a(ua,{target:e});case"Animation":return a(ka,{target:e});case"Attachment":return a(Ca,{target:e});case"Face":return a(ba,{target:e});case"Body Parts":return a(ia,{target:e});case"Texture":return a(Pa,{target:e});default:return a(S,{})}},Aa=e=>{const t=[...Ta];return e.face&&t.push("Face"),e.parts&&t.push("Body Parts"),Ma(e.id)&&t.push("Texture"),t},Ba=e=>e.map(t=>({value:t})),$a=e=>e.map(t=>{const o=Na[t]??S;return{value:t,icon:a(o,{})}});function za({value:e,onChange:t,tabs:o,orientation:l="horizontal",className:n=""}){n=`IconTabBar ${n} `+l;const s=i=>{const{value:c}=i.currentTarget.dataset;t(c)};return a("div",{className:n,children:o.map(i=>{const{icon:c,value:r,title:p=r}=i;return a("button",{...e===r&&{className:"selected"},title:p,"data-value":r,onClick:s,children:c})})})}function La({value:e,list:t,onChange:o}){const l=$a(t);return a("div",{children:a(za,{className:"QuickAccess",value:e,onChange:o,tabs:l})})}function Da({target:e}){const t=Aa(e),[o,l]=g(e.userData.controller??t[0]),n=Ba(t),s=i=>{e.userData.controller=i,l(i)};return a("div",{className:"ModelController",children:[a(La,{list:t,value:o,onChange:s}),a(Le,{options:n,value:o,onChange:s,fullWidth:!0,size:"small"}),a(Fa,{type:o,target:e})]})}const Pe=[{propName:"enabled",label:"Enabled",type:"boolean"},{propName:"size",label:"Size",type:"slider",min:1,max:20,step:1},{propName:"opacity",label:"Opacity",type:"slider",step:.1,valueMap:e=>`${~~(e*100)}%`},{propName:"color",label:"Color",type:"color"}];function Ia({target:e}){const{outline:t}=e,[o,l]=J(),n=ue(!1);Q(()=>{const c=t.addEventListener("change",()=>{if(n.current){n.current=!1;return}l()});return()=>t.removeEventListener("change",c)},[]);const s=()=>{const{code:c}=t;e.attachment.traverse(r=>r.outline.code=c)};return Pe.forEach(c=>{c.onBeforeChange=()=>n.current=!0,c.onChange=s}),a(S,{children:[a(H,{target:t,propList:Pe},o),a("div",{className:"SettingGroup-extra",children:a(k,{onClick:()=>{const c=ce.settings.outline;Object.entries(c).forEach(([r,p])=>{t[r]=p}),s(),l()},children:"Reset"})})]})}const Ra=[{value:"Basic",title:"Most basic, doesn't respond to light"},{value:"Toon",title:"Toon shading, also called cell shading"},{value:"Lambert",title:"For matte or diffusely reflecting surface"},{value:"Phong",title:"For shiny surface"},{value:"Standard",title:"For physically based rendering"},{value:"Physical",title:"For physically based rendering, can simulate transparency like water or glass"},{value:"Matcap",title:"Material capture, doesn't respond to light"},{value:"MMDToon",label:"MMD Toon",title:"Combination of Phong, Toon, and Matcap material"}],Wa=[{value:"none",label:"None"},{value:"127,255",label:"2 Tones"},{value:"85,170,255",label:"3 Tones"},{value:"64,128,172,255",label:"4 Tones"}],Ha=[{label:"Fresnel",value:"matcap_fresnel.jpg"},{label:"Black Stone",value:"matcap_black_stone.jpg"},{label:"Chrome 1",value:"matcap_chrome_1.jpg"},{label:"Chrome 2",value:"matcap_chrome_2.jpg"},{label:"Brown Clay",value:"matcap_clay_brown.jpg"},{label:"Dark Brown Clay",value:"matcap_clay_dark_brown.jpg"},{label:"Flesh Clay",value:"matcap_clay_flesh_6.jpg"},{label:"Gray Clay",value:"matcap_clay_gray.jpg"},{label:"Metal Putty",value:"matcap_metal_putty.jpg"},{label:"Obsidian",value:"matcap_obsidian.jpg"},{label:"Pearl",value:"matcap_pearl.jpg"},{label:"Yellow Plastic",value:"matcap_plastic_yellow.jpg"},{label:"Sci-fi Plastic",value:"matcap_scifi_plastic.jpg"},{label:"Slick Mud",value:"matcap_slick_mud.jpg"},{label:"Shiny Metal",value:"metal_shiny.jpg"}],j=e=>`${~~(e*100)}%`,Me=[{propName:"type",label:"Type",type:"select",options:Ra}],Oa=[{propName:"transparent",label:"Transparent",type:"boolean",title:"Whether to allow seeing through the model"},{propName:"opacity",label:"Opacity",type:"slider",title:"The opacity of the material",min:0,max:1,valueMap:j},{propName:"showTexture",label:"Texture",type:"boolean",title:"Show / hide model texture"},{propName:"color",label:"Color",type:"color",title:"The color of the material. Default is white"},{propName:"wireframe",label:"Wireframe",type:"boolean",title:"Whether to show the model as wireframe. Turn off outline to only see the wireframe"},{propName:"flatShading",label:"Flat Shading",type:"boolean",title:"Whether to use flat shading"},{propName:"emissive",label:"Emissive",type:"color",title:"The emissive color of the material, essentially a solid color unaffected by other lighting. Default is black"},{propName:"emissiveIntensity",label:"Emissive Intensity",type:"slider",title:"The intensity of the emissive light. Default is 1",min:0,max:1,valueMap:j},{propName:"specular",label:"Specular",type:"color"},{propName:"metalness",label:"Metalness",type:"slider",title:"How much the material is like a metal. Default is 0",min:0,max:1,valueMap:j},{propName:"roughness",label:"Roughness",type:"slider",title:"How rough the material is, 0 means a smooth mirror reflection, 1 means fully diffuse. Default is 1",min:0,max:1,valueMap:j},{propName:"shininess",label:"Shininess",type:"slider",title:"How shiny the specular highlight is, a higher value gives a sharper highlight. Default is 30",min:1,max:100,step:1},{propName:"gradientMap",label:"Gradient Map",type:"select",title:"The gradient map to use",options:Wa},{propName:"matcap",label:"Matcap",type:"select",title:"The matcap to use",options:Ha},{propName:"transmission",label:"Transmission",type:"slider",title:"The amount of light passing through the material. Default is 0",min:0,max:1,valueMap:j},{propName:"thickness",label:"Thickness",type:"slider",title:"The thickness of the material. Default is 0",min:0,max:10},{propName:"ior",label:"Index of Refraction",type:"slider",title:"The index of refraction of the material. Default is 1.5",min:1,max:2.333}];function _a({target:e}){const{material:t}=e,{propList:o}=t,[l,n]=J(),s=ue(!1);Q(()=>{const r=t.addEventListener("change",()=>{if(s.current){s.current=!1;return}n()});return()=>t.removeEventListener("change",r)},[]);const i=()=>{const{code:r}=t;e.attachment.traverse(p=>{p.material.code=r})};Me[0].onChange=()=>{n(),i()};const c=Oa.filter(({propName:r})=>o.includes(r));return c.forEach(r=>{r.onBeforeChange=()=>s.current=!0,r.onChange=i}),a(he.Fragment,{children:[a(H,{target:t,propList:Me}),a(H,{target:t,propList:c})]},l)}function Va({target:e,label:t=(o=>(o=e==null?void 0:e.userData)==null?void 0:o.name)()??e.id}){const l=i=>{i.stopPropagation(),e.dispose()},n=a(Ke,{modelId:e.id,alt:e==null?void 0:e.userData.name,className:"FullModelController-icon"});return a(U,{className:"FullModelController",children:[a(S,{children:[n,t,a(ke,{title:"Remove",className:"closeButton",onClick:l,size:"large",children:a(Z,{})})]}),a(Da,{target:e})]})}function Ea({bone:e,add:t,target:o}){const{activeModel:l}=Xe();o??(o=l);const n=(o==null?void 0:o.attachment[e])??[];return a(U,{defaultOpen:!0,className:"BoneManager",disableGutters:!0,children:[a(S,{children:[a("div",{className:"BoneManager-name",children:e}),a(k,{variant:"contained",className:"BoneManager-add",onClick:i=>{i.stopPropagation(),t(e)},children:a(ge,{})})]}),a(S,{children:n.map(i=>a(Va,{target:i}))})]})}export{ge as A,Ea as B,ma as C,$e as D,Va as F,za as I,Ie as M,Ia as O,qt as P,Xt as S,Kt as T,Gt as a,ze as b,_a as c,Pa as d,ia as e,_t as f,ua as g,H as h,Yt as i};
