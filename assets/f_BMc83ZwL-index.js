import{u as e,d as p,k,v as m}from"./index-DXaiJyD2.js";import{T as y}from"./f_CW1723x--TabBar.js";import{C as f}from"./f_BiFzoub3-ColorPicker.js";import{G as x,T as C,u}from"./f_B8i0mmid-Gallery.js";import{B as b}from"./f_D3kxc8ur-Box.js";import{U as v,f as B}from"./f_flkbJqXH-file2dataURL.js";import{B as U}from"./f_Cl3_3bWN-Button.js";import{D as I,a as T}from"./f_DWZLa36v-DialogTitle.js";import"./f_BM_tZNm2-three.js";import"./f_Vq0GrzTt-CircularProgress.js";import"./f_DatbvlDC-Popover.js";import"./f_bLorWNuQ-createSvgIcon.js";import"./f_DKP3VO5Y-ColorButton.js";const d={gallery:{gap:"1rem"},container:{boxSizing:"border-box",maxWidth:"8rem",maxHeight:"8rem",position:"relative",cursor:"pointer",borderRadius:"5%",overflow:"hidden",filter:"drop-shadow(0 0 2px rgba(0,0,0,0.5))",objectFit:"cover",contentVisibility:"auto",containIntrinsicSize:"0 8rem",alignSelf:"stretch",margin:"auto","&:hover":{border:"1px solid white",filter:"drop-shadow(0.1rem 0.1rem 0.2rem black)"},"&[data-name]::after":{content:"attr(data-name)",position:"absolute",bottom:"0.25rem",left:0,backgroundColor:"rgba(0,0,0,0.8)",color:"#fff",textAlign:"center",padding:"0.1rem",width:"100%"},"&[data-name]:hover::after":{backgroundColor:"rgba(255,255,255,0.6)",color:"black"}},image:{maxWidth:"100%"}},w=({src:t,value:a,name:n,onClick:r})=>e(b,{sx:d.container,"data-name":n,children:e("img",{src:t,"data-value":a,onClick:r,style:d.image})}),h=({list:t,onClick:a})=>e(x,{style:d.gallery,onClick:a,list:t,component:w}),g={input:{paddingRight:"0.2rem",minWidth:"8rem"},button:{padding:"0.5rem 1rem",margin:0,backgroundColor:"rgba(16, 16, 16, 0.8)",color:"rgba(255, 255, 255, 0.9)",border:"1px solid rgba(16, 16, 16, 0.5)","&:hover":{backgroundColor:"rgba(50, 50, 50, 0.8)",border:"1px solid rgba(16, 16, 16, 0.8)"}}};function P({onApply:t,applyLabel:a="Apply",...n}){const[r,s]=p(""),o=c=>s(c.target.value),i=()=>t(r),l=e(U,{sx:g.button,variant:"contained",onClick:i,children:a});return e(C,{value:r,onChange:o,placeholder:"Enter URL",margin:"none",InputProps:{endAdornment:l,sx:g.input},inputProps:{type:"url"},size:"small",...n})}const R={external:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.5rem",maxWidth:"100%",marginBottom:"0.5rem"}};function S({onSelect:t}){const a=u(o=>o["background-image"]),n=o=>{const{value:i}=o.target.dataset,l=`img:${i}`;t(l)},r=async o=>{const l=`img:${await B(o[0])}`;t(l)},s=o=>{if(!o)return;const i=`img:${o}`;t(i)};return e(k,{children:[e(b,{sx:R.external,children:[e(v,{onChange:r}),e(P,{onApply:s})]}),e(h,{list:a,onClick:n})]})}function W({onSelect:t}){const a=u(r=>r["background-skybox"]);return e(h,{list:a,onClick:r=>{const{value:s}=r.target.dataset,o=`sky:${s}`;t(o)}})}const A=["Color","Image","Skybox"].map(t=>({name:t})),$={Color:f,Image:S,Skybox:W},D=t=>t.startsWith("sky:")?"Skybox":t.startsWith("img:")?"Image":"Color";function M({onAfterSelect:t}){const a=D(m.background),[n,r]=p(a),s=l=>{m.background=l,t?.()},o=(l,c)=>r(c),i=$[n]??(()=>null);return e("div",{className:"BackgroundPicker",children:[e(I,{sx:{textAlign:"center"},children:"Choose a background"}),e(y,{value:n,onChange:o,tabs:A}),e(T,{children:e(i,{onSelect:s})})]})}export{M as default};
