import{u as n,n as l,_ as u,r as g,g as v,v as B}from"./index-s2gfWonh.js";import{u as y}from"./f_Doif6RHv-useKey.js";import{A as h}from"./f_qJsyPlm_-Accordion.js";/* empty css                 */import{M as C}from"./f_DSbpRqIn-ModelIcon.js";import{B as D}from"./f_DBH8vtXd-Button.js";import{C as T}from"./f_DHizZ1cf-Check.js";import{D as b,a as I}from"./f_BufKjS2u-DialogTitle.js";import{B as M}from"./f_Dgh0m9or-Box.js";import"./f_C9gxwGGW-three.js";import"./f_CwDxMp6k-useToggleState.js";import"./f_Bn4VdYgL-createSvgIcon.js";import"./f_D1XD7N7g-ButtonBase.js";function N({list:e,label:r,defaultOpen:o=!1,onSelect:a}){return n(h,{disableGutters:!0,defaultOpen:o,className:"BoneChildren",children:[n(l,{children:r}),n(l,{children:e.map(t=>n(p,{target:t,onSelect:a},t.uniqueId))})]})}function p({target:e,onSelect:r}){if(!e)return null;const[o,a]=y();u(()=>{const i=e.addEventListener("AttachmentChanged",a);return()=>e.removeEventListener("AttachmentChanged",i)},[]),u(()=>{e.userData.name||g(e.id).then(i=>{e.userData.name=i==null?void 0:i.name,a()})},[]);const t=e.id,c=e==null?void 0:e.userData.name,f=c??t,x=n(C,{modelId:t,alt:c??t,className:"ModelTree-icon"}),s=v(e.attachment.list.map(i=>i.parentBone)),d=n(l,{children:[x,n("div",{className:"target-name",children:f}),n(D,{title:"Select",variant:"contained",onClick:()=>r(e),children:n(T,{})})]});return s.length?n(h,{disableGutters:!0,className:"ModelTree",children:[d,n(l,{children:s.map(i=>n(N,{defaultOpen:s.length===1,label:i,onSelect:r,list:e.attachment[i]}))})]},o):n("div",{className:"ModelTree",children:d},o)}const m={root:{display:"flex",flexDirection:"column",overflowY:"hidden",minHeight:"20rem",minWidth:"20rem"},title:{textAlign:"center",padding:"0.5rem 2rem",display:"flex",alignItems:"center",justifyContent:"center",borderBottom:"1px solid rgba(16, 16, 16, 0.4)",boxShadow:"0 0.2rem 0.3rem rgba(16, 16, 16, 0.4)",minHeight:"4rem"},content:{padding:"2rem 1rem",display:"flex",flexDirection:"column",flexWrap:"wrap"}};function U({onSelect:e=console.log,onAfterSelect:r}){const o=B.model,a=t=>{e(t),r==null||r()};return n(M,{sx:m.root,className:"TargetPicker",children:[n(b,{sx:m.title,children:"Select Target"}),n(I,{sx:m.content,children:o.length?o.map(t=>n(p,{target:t,onSelect:a},t.uniqueId)):"No model"})]})}export{U as default};
