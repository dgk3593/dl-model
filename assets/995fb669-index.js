import{k as Oi,_ as xe,T as kl,p as Ae,o as h,z as Tl,m as Be,U as Fn,$ as Li,u as _e,W as zn,v as F,t as Fi,a0 as Rl,a1 as Pl,a2 as Bl,L as Kr,I as ye,l as ie,c as Ml,h as dr,r as zi,V as zr,a3 as Nl,X as Hi,y as hr,q as Hn,a4 as Ol,a5 as Ll,a6 as Fl,a7 as zl,a8 as Hl,a9 as xr,f as Wt,aa as Gl,ab as Gi,ac as Wl,a as $t,ad as Wi,ae as wa,af as $l,ag as Ul,ah as ql,ai as Vl,n as Zl}from"./index-e4230540.js";import{c as Me}from"./b637f57c-createSvgIcon.js";import{M as $i,F as Tn,a as jl,b as Kl,P as Yl,O as Xl,T as Jl,c as Ql,d as es,e as rs,f as ts,D as ns,S as as,g as is,I as os,h as ur,i as ls,A as Ut,C as qt}from"./1aa815bc-BoneManager.js";import{L as Gn}from"./838f580a-lists.js";import{I as mr,C as Wn}from"./d6182c1d-Close.js";import{B as Yr}from"./b5d94bf8-Box.js";import{u as Ui,c as ss}from"./3dfc75c9-styles.js";import{u as br}from"./8b0d1ef6-useKey.js";import{B as fe}from"./f0671e71-Button.js";import{A as Ve,a as cs,b as us}from"./29815664-Accordion.js";import{M as ds,T as Pt,u as fs}from"./abcf3ac4-Gallery.js";import"./f27cda01-GlowToggle.js";import{M as ps}from"./1a344c7f-filterConfig.js";import"./6d1616a3-Selector.js";import{g as vs,c as gs,E as hs,M as ms}from"./a79ef90e-MeshMouthSelect.js";import"./25d82d6d-FaceSelect.js";import"./ce84160f-FaceTexture.js";/* empty css               */import{M as qi}from"./0ad743aa-ModelIcon.js";import{u as bs}from"./a37dee62-useToggleState.js";import{_ as Lr,v as ys,b as ee,e as ws,g as xs,f as $n,r as Ds,h as Bt,j as Ss,c as Ct,k as Cs,J as xa,D as Vi}from"./bbd9eb08-ButtonBase.js";import{b as _s,P as Un,B as Is,S as Es}from"./d0242a09-SkipPrevious.js";import{T as As}from"./866a47f8-TabBar.js";import{a as Zi,d as ks,e as ji,T as Ts,r as Rs,h as Da,M as Ps,c as Bs}from"./a3bc3134-Popover.js";import{i as Ms}from"./d98b9fb0-aniFunction.js";import"./6f5f1b8d-three.js";import"./1b5c82c5-ColorButton.js";import"./c96dbc2e-DialogTitle.js";import"./5ef829ec-AddWeapon.js";import"./26d4e2b2-index.js";import"./8676e0b7-FacePartSelector.js";const Ns=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function Os(e,r,t){const n=r.getBoundingClientRect(),l=t&&t.getBoundingClientRect(),a=ji(r);let i;if(r.fakeTransform)i=r.fakeTransform;else{const f=a.getComputedStyle(r);i=f.getPropertyValue("-webkit-transform")||f.getPropertyValue("transform")}let o=0,s=0;if(i&&i!=="none"&&typeof i=="string"){const f=i.split("(")[1].split(")")[0].split(",");o=parseInt(f[4],10),s=parseInt(f[5],10)}return e==="left"?l?`translateX(${l.right+o-n.left}px)`:`translateX(${a.innerWidth+o-n.left}px)`:e==="right"?l?`translateX(-${n.right-l.left-o}px)`:`translateX(-${n.left+n.width-o}px)`:e==="up"?l?`translateY(${l.bottom+s-n.top}px)`:`translateY(${a.innerHeight+s-n.top}px)`:l?`translateY(-${n.top-l.top+n.height-s}px)`:`translateY(-${n.top+n.height-s}px)`}function Ls(e){return typeof e=="function"?e():e}function _t(e,r,t){const n=Ls(t),l=Os(e,r,n);l&&(r.style.webkitTransform=l,r.style.transform=l)}const Fs=Oi(function(r,t){const n=Zi(),l={enter:n.transitions.easing.easeOut,exit:n.transitions.easing.sharp},a={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:i,appear:o=!0,children:s,container:f,direction:p="down",easing:c=l,in:d,onEnter:g,onEntered:v,onEntering:D,onExit:S,onExited:b,onExiting:w,style:C,timeout:I=a,TransitionComponent:k=Ts}=r,T=Lr(r,Ns),_=xe(null),M=ys(s.ref,_,t),O=H=>re=>{H&&(re===void 0?H(_.current):H(_.current,re))},z=O((H,re)=>{_t(p,H,f),Rs(H),g&&g(H,re)}),L=O((H,re)=>{const ve=Da({timeout:I,style:C,easing:c},{mode:"enter"});H.style.webkitTransition=n.transitions.create("-webkit-transform",ee({},ve)),H.style.transition=n.transitions.create("transform",ee({},ve)),H.style.webkitTransform="none",H.style.transform="none",D&&D(H,re)}),U=O(v),W=O(w),q=O(H=>{const re=Da({timeout:I,style:C,easing:c},{mode:"exit"});H.style.webkitTransition=n.transitions.create("-webkit-transform",re),H.style.transition=n.transitions.create("transform",re),_t(p,H,f),S&&S(H)}),Q=O(H=>{H.style.webkitTransition="",H.style.transition="",b&&b(H)}),K=H=>{i&&i(_.current,H)},j=kl(()=>{_.current&&_t(p,_.current,f)},[p,f]);return Ae(()=>{if(d||p==="down"||p==="right")return;const H=ks(()=>{_.current&&_t(p,_.current,f)}),re=ji(_.current);return re.addEventListener("resize",H),()=>{H.clear(),re.removeEventListener("resize",H)}},[p,d,f]),Ae(()=>{d||j()},[d,j]),h(k,ee({nodeRef:_,onEnter:z,onEntered:U,onEntering:L,onExit:q,onExited:Q,onExiting:W,addEndListener:K,appear:o,in:d,timeout:I},T,{children:(H,re)=>Tl(s,ee({ref:M,style:ee({visibility:H==="exited"&&!d?"hidden":void 0},C,s.props.style)},re))}))}),zs=Fs;function Hs(e){return ws("MuiDrawer",e)}xs("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const Gs=["BackdropProps"],Ws=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],Ki=(e,r)=>{const{ownerState:t}=e;return[r.root,(t.variant==="permanent"||t.variant==="persistent")&&r.docked,r.modal]},$s=e=>{const{classes:r,anchor:t,variant:n}=e,l={root:["root"],docked:[(n==="permanent"||n==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${Bt(t)}`,n!=="temporary"&&`paperAnchorDocked${Bt(t)}`]};return Cs(l,Hs,r)},Us=$n(Ps,{name:"MuiDrawer",slot:"Root",overridesResolver:Ki})(({theme:e})=>({zIndex:(e.vars||e).zIndex.drawer})),Sa=$n("div",{shouldForwardProp:Ds,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:Ki})({flex:"0 0 auto"}),qs=$n(Bs,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.paper,r[`paperAnchor${Bt(t.anchor)}`],t.variant!=="temporary"&&r[`paperAnchorDocked${Bt(t.anchor)}`]]}})(({theme:e,ownerState:r})=>ee({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(e.vars||e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},r.anchor==="left"&&{left:0},r.anchor==="top"&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},r.anchor==="right"&&{right:0},r.anchor==="bottom"&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},r.anchor==="left"&&r.variant!=="temporary"&&{borderRight:`1px solid ${(e.vars||e).palette.divider}`},r.anchor==="top"&&r.variant!=="temporary"&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`},r.anchor==="right"&&r.variant!=="temporary"&&{borderLeft:`1px solid ${(e.vars||e).palette.divider}`},r.anchor==="bottom"&&r.variant!=="temporary"&&{borderTop:`1px solid ${(e.vars||e).palette.divider}`})),Yi={left:"right",right:"left",top:"down",bottom:"up"};function Vs(e){return["left","right"].indexOf(e)!==-1}function Zs(e,r){return e.direction==="rtl"&&Vs(r)?Yi[r]:r}const js=Oi(function(r,t){const n=Ss({props:r,name:"MuiDrawer"}),l=Zi(),a={enter:l.transitions.duration.enteringScreen,exit:l.transitions.duration.leavingScreen},{anchor:i="left",BackdropProps:o,children:s,className:f,elevation:p=16,hideBackdrop:c=!1,ModalProps:{BackdropProps:d}={},onClose:g,open:v=!1,PaperProps:D={},SlideProps:S,TransitionComponent:b=zs,transitionDuration:w=a,variant:C="temporary"}=n,I=Lr(n.ModalProps,Gs),k=Lr(n,Ws),T=xe(!1);Ae(()=>{T.current=!0},[]);const _=Zs(l,i),O=ee({},n,{anchor:i,elevation:p,open:v,variant:C},k),z=$s(O),L=h(qs,ee({elevation:C==="temporary"?p:0,square:!0},D,{className:Ct(z.paper,D.className),ownerState:O,children:s}));if(C==="permanent")return h(Sa,ee({className:Ct(z.root,z.docked,f),ownerState:O,ref:t},k,{children:L}));const U=h(b,ee({in:v,direction:Yi[_],timeout:w,appear:T.current},S,{children:L}));return C==="persistent"?h(Sa,ee({className:Ct(z.root,z.docked,f),ownerState:O,ref:t},k,{children:U})):h(Us,ee({BackdropProps:ee({},o,d,{transitionDuration:w}),className:Ct(z.root,z.modal,f),open:v,ownerState:O,onClose:g,hideBackdrop:c,ref:t},k,I,{children:U}))}),Xi=js,Ks=Me(h("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos"),Ys=Me(h("path",{d:"M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z"}),"Autorenew"),Xs=Me(h("path",{d:"m9.4 10.5 4.77-8.26C13.47 2.09 12.75 2 12 2c-2.4 0-4.6.85-6.32 2.25l3.66 6.35.06-.1zM21.54 9c-.92-2.92-3.15-5.26-6-6.34L11.88 9h9.66zm.26 1h-7.49l.29.5 4.76 8.25C21 16.97 22 14.61 22 12c0-.69-.07-1.35-.2-2zM8.54 12l-3.9-6.75C3.01 7.03 2 9.39 2 12c0 .69.07 1.35.2 2h7.49l-1.15-2zm-6.08 3c.92 2.92 3.15 5.26 6 6.34L12.12 15H2.46zm11.27 0-3.9 6.76c.7.15 1.42.24 2.17.24 2.4 0 4.6-.85 6.32-2.25l-3.66-6.35-.93 1.6z"}),"Camera"),Js=Me([h("circle",{cx:"12",cy:"12",r:"3.2"},"0"),h("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"},"1")],"CameraAlt"),Qs=Me(h("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"}),"ContentCopy"),Or=Me(h("path",{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"}),"Download"),Vt=Me(h("circle",{cx:"12",cy:"12",r:"8"}),"FiberManualRecord"),qn=Me(h("path",{d:"M11.5 9H13v6h-1.5zM9 9H6c-.6 0-1 .5-1 1v4c0 .5.4 1 1 1h3c.6 0 1-.5 1-1v-2H8.5v1.5h-2v-3H10V10c0-.5-.4-1-1-1zm10 1.5V9h-4.5v6H16v-2h2v-1.5h-2v-1z"}),"Gif"),ec=Me(h("path",{d:"M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"}),"GitHub"),rc=Me(h("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"}),"LightMode"),tc=Me(h("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu"),nc=Me(h("path",{d:"M20 3H4c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h3l-1 1v2h12v-2l-1-1h3c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 13H4V5h16v11z"}),"Monitor"),Ji=Me(h("path",{d:"M23 18V6c0-1.1-.9-2-2-2H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zM8.5 12.5l2.5 3.01L14.5 11l4.5 6H5l3.5-4.5z"}),"Panorama"),ac=Me(h("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"}),"People"),ic=Me(h("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person"),oc=Me(h("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8zm-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91z"}),"RestartAlt"),lc=Me(h("path",{d:"m3.5 18.49 6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z"}),"ShowChart"),sc=Me(h("path",{d:"M6 6h12v12H6z"}),"Stop"),cc=Me(h("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"Visibility"),uc=Me(h("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff"),dc="/dl-model/assets/5387a4b1-Rose-Petals.svg",Ca="17rem",fc="#1f0000",Rn={sidebar:{minWidth:Ca},sidebarHeader:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:"1rem",position:"sticky",top:0,height:"2.75rem",backgroundColor:"#101010",zIndex:6},paper:{width:Ca,backgroundColor:fc,border:"none",backgroundImage:`url(${dc})`,backgroundSize:"cover",backgroundPosition:"center",scrollbarWidth:"thin",scrollbarColor:"rgba(255, 255, 255, 0.8) rgba(0, 0, 0, 0.3)","&::-webkit-scrollbar":{width:"4px",backgroundColor:"rgba(255, 255, 255, 0.3)"},"&::-webkit-scrollbar-thumb":{width:"4px",backgroundColor:"rgba(255, 255, 255, 0.8)",borderRadius:"2px"},"& > .QuickAction":{position:"sticky",top:"2.75rem",zIndex:6,height:"2rem"},"& > .TabBar":{position:"sticky",top:"4.75rem",zIndex:6,marginBottom:"0.5rem"},"& > button":{backgroundColor:"rgba(16, 16, 16, 0.5)",minHeight:"2.5rem",borderRadius:"unset",padding:"0.5rem 1.5rem",justifyContent:"flex-start",gap:"1rem","& .btn-icon":{maxHeight:"1.5rem"}},"& > button:hover":{backgroundColor:"rgba(16, 16, 16, 0.8)"},"& .break":{minHeight:"0.5rem"},"& .break + .break":{minHeight:0},"& .bottom-space":{minHeight:"2rem"}}},pc=h("a",{href:"https://ko-fi.com/L4L83VOAP",rel:"noreferrer",target:"_blank",children:h("img",{style:{height:"2rem"},src:"https://cdn.ko-fi.com/cdn/kofi5.png?v=2",alt:"Buy Me a Coffee"})}),vc=h("a",{href:"https://github.com/dgk3593/dl-model",target:"_blank",children:h(ec,{style:{width:"2rem",margin:"0.5rem 1rem",color:"white"},titleAccess:"Source Code"})});const gc=({onClick:e,color:r="#101010"})=>h(Yr,{position:"absolute",top:"2rem",right:0,children:h(mr,{className:"DockButton",sx:{color:r},onClick:e,title:"Send to Dock",size:"large",children:h(Ks,{})})});function hc(){const{mode:e,handleSelect:r,close:t}=Be(o=>o.sidebar.modal),n=Be(o=>o.dock.open),l=()=>{n(e,r),t()},a=Ui("(min-width:640px)"),i=Li[e]??Yr;return h($i,{closeModal:t,open:!!e,children:[a&&h(gc,{onClick:l}),h(Fn,{fallback:h(Gn,{}),children:h(i,{onSelect:r,onAfterSelect:t})})]})}const{setLoadingMsg:_a}=Be.getState(),mc=(e,r,t)=>{const n=_e.getState().activeModel;n==null||n.animation.addChain(e);const l=zn(e,r);n!=null&&n.userData&&(n.userData.aniSelectState=t,n.userData.chain?n.userData.chain.splice(0,1/0,...l):n.userData.chain=l)},bc=async(e,r)=>{_a("Loading");const t=_e.getState().setActiveModel,n=_e.getState().activeModel,l=await F.loadDLModel(e);l.userData.name=r,l.material.code=(n==null?void 0:n.material.code)??"",l.outline.code=(n==null?void 0:n.outline.code)??"",Fi(l);const{parent:a,parentBone:i}=n??{},o=(n==null?void 0:n.type)==="adventurer"&&l.type==="adventurer";if(o)l.userData.chain=n.userData.chain,l.animation.addChain(n.animation.current.chainCode),n.attachment.list.forEach(s=>l.attach(s,s.parentBone));else if(n!=null&&n.animation.current.chainCode||!i){const s=Rl(e);if(s){const{code:f,name:p}=s;l.animation.addChain(f),l.userData.chain=zn(f,p)}}if(n==null||n.dispose(),i)a.attach(l,i);else{if(F.add(l),!o){const f=Pl(e);F.camera.position.set(...f);const p=Bl(e);F.controls.target.set(...p)}const s=l.type==="adventurer"?"Adv":"Personal";Kr.getState().setCategory(s)}t(l),_a("")},yc=(e,r)=>{const t=_e.getState().activeModel;!(t!=null&&t.face)||e===void 0||e===null||(t.face[`${r}BaseIdx`]=e)},wc=(e,r)=>{const t=_e.getState().activeModel;!e||!(t!=null&&t.face)||(t.face[`${r}Texture`]=e)},Tt={model:bc,animation:mc,face:yc,faceTexture:wc},xc=h("img",{className:"btn-icon",src:"img/appIcon/weapon.png",alt:"Add Weapon"});function Dc({openModal:e}){const{activeModel:r}=_e(),[t,n]=br(),l=xe(()=>{}),a=r==null?void 0:r.bones.list.includes("jWeaponR"),i=r==null?void 0:r.attachment.jWeaponL,o=r==null?void 0:r.attachment.jWeaponR,s=()=>e("weapon",Tt.weapon);return Ae(()=>{l.current();const f=r==null?void 0:r.addEventListener("AttachmentChanged",n);return l.current=()=>r==null?void 0:r.removeEventListener("AttachmentChanged",f),l.current},[r]),a?h(ie,{children:[h(fe,{variant:"contained","data-mode":"weapon",onClick:s,startIcon:xc,children:"Add Weapon"}),h(ye.Fragment,{children:[i==null?void 0:i.map(f=>h(Tn,{target:f,label:"Left Weapon"},f.uniqueId)),o==null?void 0:o.map(f=>h(Tn,{target:f,label:"Right Weapon"},f.uniqueId))]},t)]}):h(ie,{})}function Sc({handleClick:e}){const{activeModel:r}=_e(),t=r==null?void 0:r.face;return t?h(ie,{children:[h(fe,{variant:"contained","data-mode":"face",onClick:e,startIcon:h(jl,{}),children:"Facial Expression"}),t.type==="uv"&&h(fe,{variant:"contained","data-mode":"faceTexture",onClick:e,startIcon:h(Kl,{}),children:"Face Texture"})]}):h(ie,{})}function Qi({label:e,handleSelect:r}){const t=Be(i=>i.sidebar.modal.open),{setIndex:n}=Ml(),l=i=>{i.stopPropagation();const{index:o}=i.currentTarget.dataset;o!==void 0&&n(0,o),t("model",r)},a=ss.map((i,o)=>{const{label:s,icon:f}=i;return h(fe,{title:s,"data-index":o,onClick:l,children:h("img",{src:f,alt:s})})});return h(Ve,{className:"ModelSelect",defaultOpen:!0,disableGutters:!0,children:[h(fe,{variant:"contained",onClick:l,children:e}),h("div",{className:"ModelSelect-groups",children:a})]})}function Cc(){const{activeModel:e}=_e(),r=e==null?void 0:e.outline;if(!r)return h(ie,{});const[t,n]=br(),l=()=>{const{code:i}=r;e.attachment.traverse(o=>{o.outline.code=i})},a=i=>{i.stopPropagation(),r.enabled=!r.enabled,l(),n()};return h(Ve,{disableGutters:!0,className:"SettingGroup",children:[h(ie,{children:[h("div",{className:"title",children:[h(Yl,{}),"Outline"]}),h(fe,{onClick:a,title:"Toggle Outline",variant:"contained",children:"Toggle"})]}),h(Xl,{target:e},t)]})}function _c(){const{activeModel:e}=_e(),{material:r}=e,[t,n]=br(),l=()=>{const{code:i}=r;e.attachment.traverse(o=>{o.material.code=i})},a=i=>{i.stopPropagation(),r.code="",l(),n()};return h(Ve,{disableGutters:!0,className:"SettingGroup",children:[h(ie,{children:[h("div",{className:"title",children:[h(Jl,{}),"Material"]}),h(fe,{onClick:a,title:"Reset to default",variant:"contained",children:"Reset"})]}),h(Ql,{target:e},t)]})}const Ic=e=>{const{setCategory:r,loadState:t}=Kr.getState();_e.getState().setActiveModel(e),r(e.type==="adventurer"?"Adv":"Personal"),t(e.userData.aniSelectState)};function eo(){var o;const{activeModel:e}=_e(),r=e==null?void 0:e.id,[t,n]=dr((o=e==null?void 0:e.userData)==null?void 0:o.name),l=Be(s=>s.sidebar.modal.open),a=()=>l("target",Ic);Ae(()=>{var s;n((s=e==null?void 0:e.userData)==null?void 0:s.name),!(t||!e)&&zi(r).then(f=>{f&&(n(f.name),e.userData.name=f.name)})},[e]);const i=t??r??"None";return h("div",{className:"ModelSettings-target",children:["Current",h(fe,{onClick:a,title:"Click to change",children:[h(qi,{modelId:r,alt:i}),h("span",{className:"name",children:i})]})]})}const Ia={change:"Change Model",select:"Select Model"};function Ec(){const{activeModel:e}=_e(),{loadState:r}=Kr(),t=Be(s=>s.sidebar.modal.open),{toggle:n,setTarget:l}=zr(),a=s=>{const{mode:f}=s.currentTarget.dataset;t(f,Tt[f])},i=()=>{r(e==null?void 0:e.userData.aniSelectState),t("animation",Tt.animation)},o=()=>{l(e),n()};return h(ie,{children:[h(eo,{}),h(Qi,{label:e?Ia.change:Ia.select,handleSelect:Tt.model}),h("span",{className:"break"}),e&&h(ie,{children:[h(es,{target:e},e.uniqueId),(e==null?void 0:e.parts)&&h(ie,{children:[h(rs,{target:e},e.uniqueId),h("span",{className:"break"})]}),(e==null?void 0:e.face)&&h(Sc,{handleClick:a}),h("span",{className:"break"}),h(fe,{variant:"contained","data-mode":"attachment",onClick:a,startIcon:h(ts,{}),children:"Manage Attachments"}),h(Dc,{openModal:t}),h("span",{className:"break"}),h(fe,{variant:"contained","data-mode":"animation",onClick:i,startIcon:h(ns,{}),children:"Animation Select"}),h(fe,{variant:"contained",onClick:o,startIcon:h(as,{}),title:"Create Animation Chain",children:"Chain Maker"}),h("span",{className:"break"}),h(Cc,{}),h(_c,{}),h(is,{target:e})]})]})}const{setLoadingMsg:Ea}=Be.getState(),Ac=async(e,r)=>{Ea("Loading");const t=await F.loadDLModel(e);t.userData.name=r,Fi(t),F.add(t),Ea("")};function kc(){const[e,r]=br();Ae(()=>{const n=F.model.addEventListener("change",r);return()=>{F.model.removeEventListener("change",n)}},[]);const t=()=>{F.loadedModel.forEach(({animation:n})=>{n.stop(),n.play()})};return h(ie,{children:[h(Qi,{label:"Add Model",handleSelect:Ac}),h("span",{className:"break"}),h(fe,{variant:"contained",onClick:t,startIcon:h(oc,{}),children:"Restart All Animation"}),h("span",{className:"break"}),h(ye.Fragment,{children:F.model.map(n=>h("div",{children:h(Tn,{target:n})},n.uniqueId))},e)]})}const Tc=[{title:"Single Model",value:"single",icon:h(ic,{})},{title:"Multiple Model",value:"multi",icon:h(ac,{})}],Rc={single:Ec,multi:kc},Pc={ModeSelect:{backgroundColor:"#101010",color:"#eee",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",gap:"2rem",marginBottom:"0.3rem",cursor:"default",position:"sticky",top:"7.75rem",zIndex:"6"}};function Bc(){const{manageMode:e,setManageMode:r}=Be(n=>n.sidebar),t=Rc[e]??ye.Fragment;return h(ie,{children:[h(Yr,{className:"ModeSelect",sx:Pc.ModeSelect,children:["Mode",h(os,{tabs:Tc,className:"ModeSelect-tabs",value:e,onChange:r})]}),h(t,{})]})}const Mc=Object.keys(Nl).map(e=>({value:e,label:e})),Nc=[{propName:"pixelRatio",label:"Pixel Ratio",type:"slider",title:"Pixel Ratio, used to increase image quality on high DPI screens",min:.1,max:window.devicePixelRatio,step:.1},{propName:"toneMapping",label:"Tone Mapping",type:"select",options:Mc}];function Oc(){const[e,r]=br(),t=a=>{a.stopPropagation(),F.setViewport(),F.pixelRatio=1,F.toneMapping="No Mapping",setTimeout(()=>{r()},200)},n=()=>{const{viewport:{width:a,height:i}}=F;F.setViewport(a,i)};Ae(()=>{const a=()=>setTimeout(()=>{r()},200);return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]);const l=[{propName:"width",label:"Width",type:"number",min:0,max:window.innerWidth,step:32,onChange:n},{propName:"height",label:"Height",type:"number",min:0,max:window.innerHeight,step:32,onChange:n}];return h(Ve,{disableGutters:!0,className:"SettingGroup DisplayControl",children:[h(ie,{children:[h("div",{className:"title",children:[h(nc,{}),"Display"]}),h(fe,{onClick:t,title:"Reset display settings",variant:"contained",children:"Reset"})]}),h(ye.Fragment,{children:[h(ur,{target:F.viewport,propList:l}),h(ur,{target:F,propList:Nc})]},e)]})}const Lc=[{propName:"autoRotate",label:"Enabled",type:"boolean"},{propName:"autoRotateSpeed",label:"Speed",type:"slider",min:-10,max:10,step:1}];function Fc(){const{controls:e}=F,[r,t]=br(),n=l=>{l.stopPropagation(),e.autoRotate=!1,e.autoRotateSpeed=2,t()};return h(Ve,{className:"SettingGroup",children:[h(ie,{children:[h("div",{className:"title",children:[h(ls,{}),"Auto Rotate"]}),h(fe,{onClick:n,title:"Reset Auto Rotate Settings",variant:"contained",children:"Reset"})]}),h(ur,{target:e,propList:Lc},r)]})}function ro({children:e,onClick:r,options:t,title:n}){const[l,a]=dr(null),i=f=>{f.stopPropagation(),a(f.currentTarget)},o=()=>a(null),s=f=>{f.stopPropagation();const{value:p}=f.currentTarget.dataset;r(p),o()};return h(ie,{children:[h(fe,{onClick:i,title:n,variant:"contained",children:e}),h(ds,{anchorEl:l,open:!!l,onClose:o,children:t.map(({value:f,label:p})=>h(ps,{"data-value":f,onClick:s,children:p??f},f))})]})}const to={DirectionalLight:[{propName:"visible",label:"Enabled",type:"boolean"},{propName:"showHelper",label:"Show Helper",type:"boolean"},{propName:"intensity",label:"Intensity",type:"slider",min:0,max:1,step:.05},{propName:"colorCode",label:"Color",type:"color"},{propName:"position",label:"Position",type:"vector",step:.05}],AmbientLight:[{propName:"visible",label:"Enabled",type:"boolean"},{propName:"intensity",label:"Intensity",type:"slider",min:0,max:1,step:.05},{propName:"colorCode",label:"Color",type:"color"}],PointLight:[{propName:"visible",label:"Enabled",type:"boolean"},{propName:"showHelper",label:"Show Helper",type:"boolean"},{propName:"intensity",label:"Intensity",type:"slider",min:0,max:1,step:.05},{propName:"colorCode",label:"Color",type:"color"},{propName:"decay",label:"Dacay",type:"slider",min:1,max:2,step:.05},{propName:"position",label:"Position",type:"vector",step:.05}]};function zc({target:e}){const{type:r,name:t}=e,l=h(mr,{title:"Remove",className:"closeButton",onClick:i=>{i.stopPropagation(),e.remove()},children:h(Wn,{})}),a=to[r];return r==="DirectionalLight"&&(a.find(i=>i.propName==="position").onChange=()=>{var i,o;return(o=(i=e.helper)==null?void 0:i.update)==null?void 0:o.call(i)}),h(Ve,{disableGutters:!0,className:"LightController",children:[h(ie,{children:[t,l]}),h(ie,{children:h(ur,{target:e,propList:a})})]})}const Hc=Object.keys(to).map(e=>{const r=e.replace("Light","");return{label:r,value:r.toLowerCase()}});function Gc(){const[e,r]=br(),t=F.light.list;Ae(()=>{const l=t.addEventListener("change",r);return()=>t.removeEventListener("change",l)},[]);const n=l=>F.light.add(l);return h(Ve,{disableGutters:!0,className:"LightControl SettingGroup with-subgroup",children:[h(ie,{children:[h("div",{className:"title",children:[h(rc,{}),"Light"]}),h(ro,{title:"Add Light",onClick:n,options:Hc,children:h(Ut,{})})]}),h(ye.Fragment,{children:t.length?t.map((l,a)=>h(zc,{target:l},`${e+a}`)):"Click + to add light"},e)]})}function it(e){"@babel/helpers - typeof";return it=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},it(e)}function Wc(e,r){if(it(e)!=="object"||e===null)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,r||"default");if(it(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function $c(e){var r=Wc(e,"string");return it(r)==="symbol"?r:String(r)}function Uc(e,r,t){return r=$c(r),r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Aa(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),t.push.apply(t,n)}return t}function ka(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Aa(Object(t),!0).forEach(function(n){Uc(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Aa(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Xe(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Ta=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),tn=function(){return Math.random().toString(36).substring(7).split("").join(".")},Ra={INIT:"@@redux/INIT"+tn(),REPLACE:"@@redux/REPLACE"+tn(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+tn()}};function qc(e){if(typeof e!="object"||e===null)return!1;for(var r=e;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r}function no(e,r,t){var n;if(typeof r=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Xe(0));if(typeof r=="function"&&typeof t>"u"&&(t=r,r=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Xe(1));return t(no)(e,r)}if(typeof e!="function")throw new Error(Xe(2));var l=e,a=r,i=[],o=i,s=!1;function f(){o===i&&(o=i.slice())}function p(){if(s)throw new Error(Xe(3));return a}function c(D){if(typeof D!="function")throw new Error(Xe(4));if(s)throw new Error(Xe(5));var S=!0;return f(),o.push(D),function(){if(S){if(s)throw new Error(Xe(6));S=!1,f();var w=o.indexOf(D);o.splice(w,1),i=null}}}function d(D){if(!qc(D))throw new Error(Xe(7));if(typeof D.type>"u")throw new Error(Xe(8));if(s)throw new Error(Xe(9));try{s=!0,a=l(a,D)}finally{s=!1}for(var S=i=o,b=0;b<S.length;b++){var w=S[b];w()}return D}function g(D){if(typeof D!="function")throw new Error(Xe(10));l=D,d({type:Ra.REPLACE})}function v(){var D,S=c;return D={subscribe:function(w){if(typeof w!="object"||w===null)throw new Error(Xe(11));function C(){w.next&&w.next(p())}C();var I=S(C);return{unsubscribe:I}}},D[Ta]=function(){return this},D}return d({type:Ra.INIT}),n={dispatch:d,subscribe:c,getState:p,replaceReducer:g},n[Ta]=v,n}function Pa(e,r){return function(){return r(e.apply(this,arguments))}}function Ba(e,r){if(typeof e=="function")return Pa(e,r);if(typeof e!="object"||e===null)throw new Error(Xe(16));var t={};for(var n in e){var l=e[n];typeof l=="function"&&(t[n]=Pa(l,r))}return t}function ao(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.length===0?function(n){return n}:r.length===1?r[0]:r.reduce(function(n,l){return function(){return n(l.apply(void 0,arguments))}})}function Vc(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(n){return function(){var l=n.apply(void 0,arguments),a=function(){throw new Error(Xe(15))},i={getState:l.getState,dispatch:function(){return a.apply(void 0,arguments)}},o=r.map(function(s){return s(i)});return a=ao.apply(void 0,o)(l.dispatch),ka(ka({},l),{},{dispatch:a})}}}var io=ye.createContext(null);function Zc(e){e()}var oo=Zc,jc=function(r){return oo=r},Kc=function(){return oo};function Yc(){var e=Kc(),r=null,t=null;return{clear:function(){r=null,t=null},notify:function(){e(function(){for(var l=r;l;)l.callback(),l=l.next})},get:function(){for(var l=[],a=r;a;)l.push(a),a=a.next;return l},subscribe:function(l){var a=!0,i=t={callback:l,next:null,prev:t};return i.prev?i.prev.next=i:r=i,function(){!a||r===null||(a=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:r=i.next)}}}}var Ma={notify:function(){},get:function(){return[]}};function lo(e,r){var t,n=Ma;function l(c){return s(),n.subscribe(c)}function a(){n.notify()}function i(){p.onStateChange&&p.onStateChange()}function o(){return!!t}function s(){t||(t=r?r.addNestedSub(i):e.subscribe(i),n=Yc())}function f(){t&&(t(),t=void 0,n.clear(),n=Ma)}var p={addNestedSub:l,notifyNestedSubs:a,handleChangeWrapper:i,isSubscribed:o,trySubscribe:s,tryUnsubscribe:f,getListeners:function(){return n}};return p}var so=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?Hi:Ae;function Xc(e){var r=e.store,t=e.context,n=e.children,l=hr(function(){var o=lo(r);return{store:r,subscription:o}},[r]),a=hr(function(){return r.getState()},[r]);so(function(){var o=l.subscription;return o.onStateChange=o.notifyNestedSubs,o.trySubscribe(),a!==r.getState()&&o.notifyNestedSubs(),function(){o.tryUnsubscribe(),o.onStateChange=null}},[l,a]);var i=t||io;return ye.createElement(i.Provider,{value:l},n)}var co={exports:{}},Se={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zt=60103,jt=60106,dt=60107,ft=60108,pt=60114,vt=60109,gt=60110,ht=60112,mt=60113,Vn=60120,bt=60115,yt=60116,uo=60121,fo=60122,po=60117,vo=60129,go=60131;if(typeof Symbol=="function"&&Symbol.for){var Ue=Symbol.for;Zt=Ue("react.element"),jt=Ue("react.portal"),dt=Ue("react.fragment"),ft=Ue("react.strict_mode"),pt=Ue("react.profiler"),vt=Ue("react.provider"),gt=Ue("react.context"),ht=Ue("react.forward_ref"),mt=Ue("react.suspense"),Vn=Ue("react.suspense_list"),bt=Ue("react.memo"),yt=Ue("react.lazy"),uo=Ue("react.block"),fo=Ue("react.server.block"),po=Ue("react.fundamental"),vo=Ue("react.debug_trace_mode"),go=Ue("react.legacy_hidden")}function fr(e){if(typeof e=="object"&&e!==null){var r=e.$$typeof;switch(r){case Zt:switch(e=e.type,e){case dt:case pt:case ft:case mt:case Vn:return e;default:switch(e=e&&e.$$typeof,e){case gt:case ht:case yt:case bt:case vt:return e;default:return r}}case jt:return r}}}var Jc=vt,Qc=Zt,eu=ht,ru=dt,tu=yt,nu=bt,au=jt,iu=pt,ou=ft,lu=mt;Se.ContextConsumer=gt;Se.ContextProvider=Jc;Se.Element=Qc;Se.ForwardRef=eu;Se.Fragment=ru;Se.Lazy=tu;Se.Memo=nu;Se.Portal=au;Se.Profiler=iu;Se.StrictMode=ou;Se.Suspense=lu;Se.isAsyncMode=function(){return!1};Se.isConcurrentMode=function(){return!1};Se.isContextConsumer=function(e){return fr(e)===gt};Se.isContextProvider=function(e){return fr(e)===vt};Se.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Zt};Se.isForwardRef=function(e){return fr(e)===ht};Se.isFragment=function(e){return fr(e)===dt};Se.isLazy=function(e){return fr(e)===yt};Se.isMemo=function(e){return fr(e)===bt};Se.isPortal=function(e){return fr(e)===jt};Se.isProfiler=function(e){return fr(e)===pt};Se.isStrictMode=function(e){return fr(e)===ft};Se.isSuspense=function(e){return fr(e)===mt};Se.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===dt||e===pt||e===vo||e===ft||e===mt||e===Vn||e===go||typeof e=="object"&&e!==null&&(e.$$typeof===yt||e.$$typeof===bt||e.$$typeof===vt||e.$$typeof===gt||e.$$typeof===ht||e.$$typeof===po||e.$$typeof===uo||e[0]===fo)};Se.typeOf=fr;co.exports=Se;var su=co.exports,cu=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],uu=["reactReduxForwardedRef"],du=[],fu=[null,null];function pu(e,r){var t=e[1];return[r.payload,t+1]}function Na(e,r,t){so(function(){return e.apply(void 0,r)},t)}function vu(e,r,t,n,l,a,i){e.current=n,r.current=l,t.current=!1,a.current&&(a.current=null,i())}function gu(e,r,t,n,l,a,i,o,s,f){if(e){var p=!1,c=null,d=function(){if(!p){var D=r.getState(),S,b;try{S=n(D,l.current)}catch(w){b=w,c=w}b||(c=null),S===a.current?i.current||s():(a.current=S,o.current=S,i.current=!0,f({type:"STORE_UPDATED",payload:{error:b}}))}};t.onStateChange=d,t.trySubscribe(),d();var g=function(){if(p=!0,t.tryUnsubscribe(),t.onStateChange=null,c)throw c};return g}}var hu=function(){return[null,0]};function mu(e,r){r===void 0&&(r={});var t=r,n=t.getDisplayName,l=n===void 0?function(C){return"ConnectAdvanced("+C+")"}:n,a=t.methodName,i=a===void 0?"connectAdvanced":a,o=t.renderCountProp,s=o===void 0?void 0:o,f=t.shouldHandleStateChanges,p=f===void 0?!0:f,c=t.storeKey,d=c===void 0?"store":c;t.withRef;var g=t.forwardRef,v=g===void 0?!1:g,D=t.context,S=D===void 0?io:D,b=Lr(t,cu),w=S;return function(I){var k=I.displayName||I.name||"Component",T=l(k),_=ee({},b,{getDisplayName:l,methodName:i,renderCountProp:s,shouldHandleStateChanges:p,storeKey:d,displayName:T,wrappedComponentName:k,WrappedComponent:I}),M=b.pure;function O(q){return e(q.dispatch,_)}var z=M?hr:function(q){return q()};function L(q){var Q=hr(function(){var Le=q.reactReduxForwardedRef,pr=Lr(q,uu);return[q.context,Le,pr]},[q]),K=Q[0],j=Q[1],H=Q[2],re=hr(function(){return K&&K.Consumer&&su.isContextConsumer(ye.createElement(K.Consumer,null))?K:w},[K,w]),ve=Hn(re),Ie=!!q.store&&!!q.store.getState&&!!q.store.dispatch;ve&&ve.store;var de=Ie?q.store:ve.store,De=hr(function(){return O(de)},[de]),Ce=hr(function(){if(!p)return fu;var Le=lo(de,Ie?null:ve.subscription),pr=Le.notifyNestedSubs.bind(Le);return[Le,pr]},[de,Ie,ve]),ge=Ce[0],ce=Ce[1],be=hr(function(){return Ie?ve:ee({},ve,{subscription:ge})},[Ie,ve,ge]),se=Ol(pu,du,hu),ae=se[0],ke=ae[0],Ne=se[1];if(ke&&ke.error)throw ke.error;var oe=xe(),Ee=xe(H),Ge=xe(),We=xe(!1),Re=z(function(){return Ge.current&&H===Ee.current?Ge.current:De(de.getState(),H)},[de,ke,H]);Na(vu,[Ee,oe,We,H,Re,Ge,ce]),Na(gu,[p,de,ge,De,Ee,oe,We,Ge,ce,Ne],[de,ge,De]);var we=hr(function(){return ye.createElement(I,ee({},Re,{ref:j}))},[j,I,Re]),ue=hr(function(){return p?ye.createElement(re.Provider,{value:be},we):we},[re,we,be]);return ue}var U=M?ye.memo(L):L;if(U.WrappedComponent=I,U.displayName=L.displayName=T,v){var W=ye.forwardRef(function(Q,K){return ye.createElement(U,ee({},Q,{reactReduxForwardedRef:K}))});return W.displayName=T,W.WrappedComponent=I,xa(W,I)}return xa(U,I)}}function Oa(e,r){return e===r?e!==0||r!==0||1/e===1/r:e!==e&&r!==r}function nn(e,r){if(Oa(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var t=Object.keys(e),n=Object.keys(r);if(t.length!==n.length)return!1;for(var l=0;l<t.length;l++)if(!Object.prototype.hasOwnProperty.call(r,t[l])||!Oa(e[t[l]],r[t[l]]))return!1;return!0}function bu(e,r){var t={},n=function(i){var o=e[i];typeof o=="function"&&(t[i]=function(){return r(o.apply(void 0,arguments))})};for(var l in e)n(l);return t}function Zn(e){return function(t,n){var l=e(t,n);function a(){return l}return a.dependsOnOwnProps=!1,a}}function La(e){return e.dependsOnOwnProps!==null&&e.dependsOnOwnProps!==void 0?!!e.dependsOnOwnProps:e.length!==1}function ho(e,r){return function(n,l){l.displayName;var a=function(o,s){return a.dependsOnOwnProps?a.mapToProps(o,s):a.mapToProps(o)};return a.dependsOnOwnProps=!0,a.mapToProps=function(o,s){a.mapToProps=e,a.dependsOnOwnProps=La(e);var f=a(o,s);return typeof f=="function"&&(a.mapToProps=f,a.dependsOnOwnProps=La(f),f=a(o,s)),f},a}}function yu(e){return typeof e=="function"?ho(e):void 0}function wu(e){return e?void 0:Zn(function(r){return{dispatch:r}})}function xu(e){return e&&typeof e=="object"?Zn(function(r){return bu(e,r)}):void 0}const Du=[yu,wu,xu];function Su(e){return typeof e=="function"?ho(e):void 0}function Cu(e){return e?void 0:Zn(function(){return{}})}const _u=[Su,Cu];function Iu(e,r,t){return ee({},t,e,r)}function Eu(e){return function(t,n){n.displayName;var l=n.pure,a=n.areMergedPropsEqual,i=!1,o;return function(f,p,c){var d=e(f,p,c);return i?(!l||!a(d,o))&&(o=d):(i=!0,o=d),o}}}function Au(e){return typeof e=="function"?Eu(e):void 0}function ku(e){return e?void 0:function(){return Iu}}const Tu=[Au,ku];var Ru=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function Pu(e,r,t,n){return function(a,i){return t(e(a,i),r(n,i),i)}}function Bu(e,r,t,n,l){var a=l.areStatesEqual,i=l.areOwnPropsEqual,o=l.areStatePropsEqual,s=!1,f,p,c,d,g;function v(C,I){return f=C,p=I,c=e(f,p),d=r(n,p),g=t(c,d,p),s=!0,g}function D(){return c=e(f,p),r.dependsOnOwnProps&&(d=r(n,p)),g=t(c,d,p),g}function S(){return e.dependsOnOwnProps&&(c=e(f,p)),r.dependsOnOwnProps&&(d=r(n,p)),g=t(c,d,p),g}function b(){var C=e(f,p),I=!o(C,c);return c=C,I&&(g=t(c,d,p)),g}function w(C,I){var k=!i(I,p),T=!a(C,f,I,p);return f=C,p=I,k&&T?D():k?S():T?b():g}return function(I,k){return s?w(I,k):v(I,k)}}function Mu(e,r){var t=r.initMapStateToProps,n=r.initMapDispatchToProps,l=r.initMergeProps,a=Lr(r,Ru),i=t(e,a),o=n(e,a),s=l(e,a),f=a.pure?Bu:Pu;return f(i,o,s,e,a)}var Nu=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function an(e,r,t){for(var n=r.length-1;n>=0;n--){var l=r[n](e);if(l)return l}return function(a,i){throw new Error("Invalid value of type "+typeof e+" for "+t+" argument when connecting component "+i.wrappedComponentName+".")}}function Ou(e,r){return e===r}function Lu(e){var r=e===void 0?{}:e,t=r.connectHOC,n=t===void 0?mu:t,l=r.mapStateToPropsFactories,a=l===void 0?_u:l,i=r.mapDispatchToPropsFactories,o=i===void 0?Du:i,s=r.mergePropsFactories,f=s===void 0?Tu:s,p=r.selectorFactory,c=p===void 0?Mu:p;return function(g,v,D,S){S===void 0&&(S={});var b=S,w=b.pure,C=w===void 0?!0:w,I=b.areStatesEqual,k=I===void 0?Ou:I,T=b.areOwnPropsEqual,_=T===void 0?nn:T,M=b.areStatePropsEqual,O=M===void 0?nn:M,z=b.areMergedPropsEqual,L=z===void 0?nn:z,U=Lr(b,Nu),W=an(g,a,"mapStateToProps"),q=an(v,o,"mapDispatchToProps"),Q=an(D,f,"mergeProps");return n(c,ee({methodName:"connect",getDisplayName:function(j){return"Connect("+j+")"},shouldHandleStateChanges:!!g,initMapStateToProps:W,initMapDispatchToProps:q,initMergeProps:Q,pure:C,areStatesEqual:k,areOwnPropsEqual:_,areStatePropsEqual:O,areMergedPropsEqual:L},U))}}const mo=Lu();jc(Ll);function Fu(e,r){if(e.length!==r.length)return!1;for(var t=0;t<e.length;t++)if(e[t]!==r[t])return!1;return!0}function bo(e,r){var t=dr(function(){return{inputs:r,result:e()}})[0],n=xe(!0),l=xe(t),a=n.current||!!(r&&l.current.inputs&&Fu(r,l.current.inputs)),i=a?l.current:{inputs:r,result:e()};return Ae(function(){n.current=!1,l.current=i},[i]),i.result}function zu(e,r){return bo(function(){return e},r)}var me=bo,ne=zu,Hu=!0,on="Invariant failed";function Gu(e,r){if(!e){if(Hu)throw new Error(on);var t=typeof r=="function"?r():r,n=t?"".concat(on,": ").concat(t):on;throw new Error(n)}}var cr=function(r){var t=r.top,n=r.right,l=r.bottom,a=r.left,i=n-a,o=l-t,s={top:t,right:n,bottom:l,left:a,width:i,height:o,x:a,y:t,center:{x:(n+a)/2,y:(l+t)/2}};return s},jn=function(r,t){return{top:r.top-t.top,left:r.left-t.left,bottom:r.bottom+t.bottom,right:r.right+t.right}},Fa=function(r,t){return{top:r.top+t.top,left:r.left+t.left,bottom:r.bottom-t.bottom,right:r.right-t.right}},Wu=function(r,t){return{top:r.top+t.y,left:r.left+t.x,bottom:r.bottom+t.y,right:r.right+t.x}},ln={top:0,right:0,bottom:0,left:0},Kn=function(r){var t=r.borderBox,n=r.margin,l=n===void 0?ln:n,a=r.border,i=a===void 0?ln:a,o=r.padding,s=o===void 0?ln:o,f=cr(jn(t,l)),p=cr(Fa(t,i)),c=cr(Fa(p,s));return{marginBox:f,borderBox:cr(t),paddingBox:p,contentBox:c,margin:l,border:i,padding:s}},nr=function(r){var t=r.slice(0,-2),n=r.slice(-2);if(n!=="px")return 0;var l=Number(t);return isNaN(l)&&Gu(!1),l},$u=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Mt=function(r,t){var n=r.borderBox,l=r.border,a=r.margin,i=r.padding,o=Wu(n,t);return Kn({borderBox:o,border:l,margin:a,padding:i})},Nt=function(r,t){return t===void 0&&(t=$u()),Mt(r,t)},yo=function(r,t){var n={top:nr(t.marginTop),right:nr(t.marginRight),bottom:nr(t.marginBottom),left:nr(t.marginLeft)},l={top:nr(t.paddingTop),right:nr(t.paddingRight),bottom:nr(t.paddingBottom),left:nr(t.paddingLeft)},a={top:nr(t.borderTopWidth),right:nr(t.borderRightWidth),bottom:nr(t.borderBottomWidth),left:nr(t.borderLeftWidth)};return Kn({borderBox:r,margin:n,padding:l,border:a})},wo=function(r){var t=r.getBoundingClientRect(),n=window.getComputedStyle(r);return yo(t,n)},za=Number.isNaN||function(r){return typeof r=="number"&&r!==r};function Uu(e,r){return!!(e===r||za(e)&&za(r))}function qu(e,r){if(e.length!==r.length)return!1;for(var t=0;t<e.length;t++)if(!Uu(e[t],r[t]))return!1;return!0}function ze(e,r){r===void 0&&(r=qu);var t,n=[],l,a=!1;function i(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return a&&t===this&&r(o,n)||(l=e.apply(this,o),a=!0,t=this,n=o),l}return i}var Vu=function(r){var t=[],n=null,l=function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];t=o,!n&&(n=requestAnimationFrame(function(){n=null,r.apply(void 0,t)}))};return l.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},l};const ot=Vu;function xo(e,r){}xo.bind(null,"warn");xo.bind(null,"error");function _r(){}function Zu(e,r){return ee({},e,{},r)}function ir(e,r,t){var n=r.map(function(l){var a=Zu(t,l.options);return e.addEventListener(l.eventName,l.fn,a),function(){e.removeEventListener(l.eventName,l.fn,a)}});return function(){n.forEach(function(a){a()})}}var ju="Invariant failed";function Ot(e){this.message=e}Ot.prototype.toString=function(){return this.message};function Z(e,r){if(!e)throw new Ot(ju)}var Ku=function(e){Vi(r,e);function r(){for(var n,l=arguments.length,a=new Array(l),i=0;i<l;i++)a[i]=arguments[i];return n=e.call.apply(e,[this].concat(a))||this,n.callbacks=null,n.unbind=_r,n.onWindowError=function(o){var s=n.getCallbacks();s.isDragging()&&s.tryAbort();var f=o.error;f instanceof Ot&&o.preventDefault()},n.getCallbacks=function(){if(!n.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return n.callbacks},n.setCallbacks=function(o){n.callbacks=o},n}var t=r.prototype;return t.componentDidMount=function(){this.unbind=ir(window,[{eventName:"error",fn:this.onWindowError}])},t.componentDidCatch=function(l){if(l instanceof Ot){this.setState({});return}throw l},t.componentWillUnmount=function(){this.unbind()},t.render=function(){return this.props.children(this.setCallbacks)},r}(ye.Component),Yu=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Lt=function(r){return r+1},Xu=function(r){return`
  You have lifted an item in position `+Lt(r.source.index)+`
`},Do=function(r,t){var n=r.droppableId===t.droppableId,l=Lt(r.index),a=Lt(t.index);return n?`
      You have moved the item from position `+l+`
      to position `+a+`
    `:`
    You have moved the item from position `+l+`
    in list `+r.droppableId+`
    to list `+t.droppableId+`
    in position `+a+`
  `},So=function(r,t,n){var l=t.droppableId===n.droppableId;return l?`
      The item `+r+`
      has been combined with `+n.draggableId:`
      The item `+r+`
      in list `+t.droppableId+`
      has been combined with `+n.draggableId+`
      in list `+n.droppableId+`
    `},Ju=function(r){var t=r.destination;if(t)return Do(r.source,t);var n=r.combine;return n?So(r.draggableId,r.source,n):"You are over an area that cannot be dropped on"},Ha=function(r){return`
  The item has returned to its starting position
  of `+Lt(r.index)+`
`},Qu=function(r){if(r.reason==="CANCEL")return`
      Movement cancelled.
      `+Ha(r.source)+`
    `;var t=r.destination,n=r.combine;return t?`
      You have dropped the item.
      `+Do(r.source,t)+`
    `:n?`
      You have dropped the item.
      `+So(r.draggableId,r.source,n)+`
    `:`
    The item has been dropped while not over a drop area.
    `+Ha(r.source)+`
  `},Rt={dragHandleUsageInstructions:Yu,onDragStart:Xu,onDragUpdate:Ju,onDragEnd:Qu},He={x:0,y:0},qe=function(r,t){return{x:r.x+t.x,y:r.y+t.y}},Je=function(r,t){return{x:r.x-t.x,y:r.y-t.y}},Ir=function(r,t){return r.x===t.x&&r.y===t.y},Xr=function(r){return{x:r.x!==0?-r.x:0,y:r.y!==0?-r.y:0}},Fr=function(r,t,n){var l;return n===void 0&&(n=0),l={},l[r]=t,l[r==="x"?"y":"x"]=n,l},lt=function(r,t){return Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))},Ga=function(r,t){return Math.min.apply(Math,t.map(function(n){return lt(r,n)}))},Co=function(r){return function(t){return{x:r(t.x),y:r(t.y)}}},ed=function(e,r){var t=cr({top:Math.max(r.top,e.top),right:Math.min(r.right,e.right),bottom:Math.min(r.bottom,e.bottom),left:Math.max(r.left,e.left)});return t.width<=0||t.height<=0?null:t},wt=function(r,t){return{top:r.top+t.y,left:r.left+t.x,bottom:r.bottom+t.y,right:r.right+t.x}},Wa=function(r){return[{x:r.left,y:r.top},{x:r.right,y:r.top},{x:r.left,y:r.bottom},{x:r.right,y:r.bottom}]},rd={top:0,right:0,bottom:0,left:0},td=function(r,t){return t?wt(r,t.scroll.diff.displacement):r},nd=function(r,t,n){if(n&&n.increasedBy){var l;return ee({},r,(l={},l[t.end]=r[t.end]+n.increasedBy[t.line],l))}return r},ad=function(r,t){return t&&t.shouldClipSubject?ed(t.pageMarginBox,r):cr(r)},Vr=function(e){var r=e.page,t=e.withPlaceholder,n=e.axis,l=e.frame,a=td(r.marginBox,l),i=nd(a,n,t),o=ad(i,l);return{page:r,withPlaceholder:t,active:o}},Yn=function(e,r){e.frame||Z(!1);var t=e.frame,n=Je(r,t.scroll.initial),l=Xr(n),a=ee({},t,{scroll:{initial:t.scroll.initial,current:r,diff:{value:n,displacement:l},max:t.scroll.max}}),i=Vr({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:a}),o=ee({},e,{frame:a,subject:i});return o};function Ft(e){return Object.values?Object.values(e):Object.keys(e).map(function(r){return e[r]})}function Xn(e,r){if(e.findIndex)return e.findIndex(r);for(var t=0;t<e.length;t++)if(r(e[t]))return t;return-1}function kr(e,r){if(e.find)return e.find(r);var t=Xn(e,r);if(t!==-1)return e[t]}function _o(e){return Array.prototype.slice.call(e)}var Io=ze(function(e){return e.reduce(function(r,t){return r[t.descriptor.id]=t,r},{})}),Eo=ze(function(e){return e.reduce(function(r,t){return r[t.descriptor.id]=t,r},{})}),Kt=ze(function(e){return Ft(e)}),id=ze(function(e){return Ft(e)}),Jr=ze(function(e,r){var t=id(r).filter(function(n){return e===n.descriptor.droppableId}).sort(function(n,l){return n.descriptor.index-l.descriptor.index});return t});function Jn(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function Yt(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var Xt=ze(function(e,r){return r.filter(function(t){return t.descriptor.id!==e.descriptor.id})}),od=function(e){var r=e.isMovingForward,t=e.draggable,n=e.destination,l=e.insideDestination,a=e.previousImpact;if(!n.isCombineEnabled)return null;var i=Jn(a);if(!i)return null;function o(D){var S={type:"COMBINE",combine:{draggableId:D,droppableId:n.descriptor.id}};return ee({},a,{at:S})}var s=a.displaced.all,f=s.length?s[0]:null;if(r)return f?o(f):null;var p=Xt(t,l);if(!f){if(!p.length)return null;var c=p[p.length-1];return o(c.descriptor.id)}var d=Xn(p,function(D){return D.descriptor.id===f});d===-1&&Z(!1);var g=d-1;if(g<0)return null;var v=p[g];return o(v.descriptor.id)},Qr=function(e,r){return e.descriptor.droppableId===r.descriptor.id},Ao={point:He,value:0},st={invisible:{},visible:{},all:[]},ld={displaced:st,displacedBy:Ao,at:null},or=function(e,r){return function(t){return e<=t&&t<=r}},ko=function(e){var r=or(e.top,e.bottom),t=or(e.left,e.right);return function(n){var l=r(n.top)&&r(n.bottom)&&t(n.left)&&t(n.right);if(l)return!0;var a=r(n.top)||r(n.bottom),i=t(n.left)||t(n.right),o=a&&i;if(o)return!0;var s=n.top<e.top&&n.bottom>e.bottom,f=n.left<e.left&&n.right>e.right,p=s&&f;if(p)return!0;var c=s&&i||f&&a;return c}},sd=function(e){var r=or(e.top,e.bottom),t=or(e.left,e.right);return function(n){var l=r(n.top)&&r(n.bottom)&&t(n.left)&&t(n.right);return l}},Qn={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},To={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},cd=function(e){return function(r){var t=or(r.top,r.bottom),n=or(r.left,r.right);return function(l){return e===Qn?t(l.top)&&t(l.bottom):n(l.left)&&n(l.right)}}},ud=function(r,t){var n=t.frame?t.frame.scroll.diff.displacement:He;return wt(r,n)},dd=function(r,t,n){return t.subject.active?n(t.subject.active)(r):!1},fd=function(r,t,n){return n(t)(r)},ea=function(r){var t=r.target,n=r.destination,l=r.viewport,a=r.withDroppableDisplacement,i=r.isVisibleThroughFrameFn,o=a?ud(t,n):t;return dd(o,n,i)&&fd(o,l,i)},pd=function(r){return ea(ee({},r,{isVisibleThroughFrameFn:ko}))},Ro=function(r){return ea(ee({},r,{isVisibleThroughFrameFn:sd}))},vd=function(r){return ea(ee({},r,{isVisibleThroughFrameFn:cd(r.destination.axis)}))},gd=function(r,t,n){if(typeof n=="boolean")return n;if(!t)return!0;var l=t.invisible,a=t.visible;if(l[r])return!1;var i=a[r];return i?i.shouldAnimate:!0};function hd(e,r){var t=e.page.marginBox,n={top:r.point.y,right:0,bottom:0,left:r.point.x};return cr(jn(t,n))}function ct(e){var r=e.afterDragging,t=e.destination,n=e.displacedBy,l=e.viewport,a=e.forceShouldAnimate,i=e.last;return r.reduce(function(s,f){var p=hd(f,n),c=f.descriptor.id;s.all.push(c);var d=pd({target:p,destination:t,viewport:l,withDroppableDisplacement:!0});if(!d)return s.invisible[f.descriptor.id]=!0,s;var g=gd(c,i,a),v={draggableId:c,shouldAnimate:g};return s.visible[c]=v,s},{all:[],visible:{},invisible:{}})}function md(e,r){if(!e.length)return 0;var t=e[e.length-1].descriptor.index;return r.inHomeList?t:t+1}function $a(e){var r=e.insideDestination,t=e.inHomeList,n=e.displacedBy,l=e.destination,a=md(r,{inHomeList:t});return{displaced:st,displacedBy:n,at:{type:"REORDER",destination:{droppableId:l.descriptor.id,index:a}}}}function zt(e){var r=e.draggable,t=e.insideDestination,n=e.destination,l=e.viewport,a=e.displacedBy,i=e.last,o=e.index,s=e.forceShouldAnimate,f=Qr(r,n);if(o==null)return $a({insideDestination:t,inHomeList:f,displacedBy:a,destination:n});var p=kr(t,function(D){return D.descriptor.index===o});if(!p)return $a({insideDestination:t,inHomeList:f,displacedBy:a,destination:n});var c=Xt(r,t),d=t.indexOf(p),g=c.slice(d),v=ct({afterDragging:g,destination:n,displacedBy:a,last:i,viewport:l.frame,forceShouldAnimate:s});return{displaced:v,displacedBy:a,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:o}}}}function Ar(e,r){return!!r.effected[e]}var bd=function(e){var r=e.isMovingForward,t=e.destination,n=e.draggables,l=e.combine,a=e.afterCritical;if(!t.isCombineEnabled)return null;var i=l.draggableId,o=n[i],s=o.descriptor.index,f=Ar(i,a);return f?r?s:s-1:r?s+1:s},yd=function(e){var r=e.isMovingForward,t=e.isInHomeList,n=e.insideDestination,l=e.location;if(!n.length)return null;var a=l.index,i=r?a+1:a-1,o=n[0].descriptor.index,s=n[n.length-1].descriptor.index,f=t?s:s+1;return i<o||i>f?null:i},wd=function(e){var r=e.isMovingForward,t=e.isInHomeList,n=e.draggable,l=e.draggables,a=e.destination,i=e.insideDestination,o=e.previousImpact,s=e.viewport,f=e.afterCritical,p=o.at;if(p||Z(!1),p.type==="REORDER"){var c=yd({isMovingForward:r,isInHomeList:t,location:p.destination,insideDestination:i});return c==null?null:zt({draggable:n,insideDestination:i,destination:a,viewport:s,last:o.displaced,displacedBy:o.displacedBy,index:c})}var d=bd({isMovingForward:r,destination:a,displaced:o.displaced,draggables:l,combine:p.combine,afterCritical:f});return d==null?null:zt({draggable:n,insideDestination:i,destination:a,viewport:s,last:o.displaced,displacedBy:o.displacedBy,index:d})},xd=function(e){var r=e.displaced,t=e.afterCritical,n=e.combineWith,l=e.displacedBy,a=!!(r.visible[n]||r.invisible[n]);return Ar(n,t)?a?He:Xr(l.point):a?l.point:He},Dd=function(e){var r=e.afterCritical,t=e.impact,n=e.draggables,l=Yt(t);l||Z(!1);var a=l.draggableId,i=n[a].page.borderBox.center,o=xd({displaced:t.displaced,afterCritical:r,combineWith:a,displacedBy:t.displacedBy});return qe(i,o)},Po=function(r,t){return t.margin[r.start]+t.borderBox[r.size]/2},Sd=function(r,t){return t.margin[r.end]+t.borderBox[r.size]/2},ra=function(r,t,n){return t[r.crossAxisStart]+n.margin[r.crossAxisStart]+n.borderBox[r.crossAxisSize]/2},Ua=function(r){var t=r.axis,n=r.moveRelativeTo,l=r.isMoving;return Fr(t.line,n.marginBox[t.end]+Po(t,l),ra(t,n.marginBox,l))},qa=function(r){var t=r.axis,n=r.moveRelativeTo,l=r.isMoving;return Fr(t.line,n.marginBox[t.start]-Sd(t,l),ra(t,n.marginBox,l))},Cd=function(r){var t=r.axis,n=r.moveInto,l=r.isMoving;return Fr(t.line,n.contentBox[t.start]+Po(t,l),ra(t,n.contentBox,l))},_d=function(e){var r=e.impact,t=e.draggable,n=e.draggables,l=e.droppable,a=e.afterCritical,i=Jr(l.descriptor.id,n),o=t.page,s=l.axis;if(!i.length)return Cd({axis:s,moveInto:l.page,isMoving:o});var f=r.displaced,p=r.displacedBy,c=f.all[0];if(c){var d=n[c];if(Ar(c,a))return qa({axis:s,moveRelativeTo:d.page,isMoving:o});var g=Mt(d.page,p.point);return qa({axis:s,moveRelativeTo:g,isMoving:o})}var v=i[i.length-1];if(v.descriptor.id===t.descriptor.id)return o.borderBox.center;if(Ar(v.descriptor.id,a)){var D=Mt(v.page,Xr(a.displacedBy.point));return Ua({axis:s,moveRelativeTo:D,isMoving:o})}return Ua({axis:s,moveRelativeTo:v.page,isMoving:o})},Pn=function(e,r){var t=e.frame;return t?qe(r,t.scroll.diff.displacement):r},Id=function(r){var t=r.impact,n=r.draggable,l=r.droppable,a=r.draggables,i=r.afterCritical,o=n.page.borderBox.center,s=t.at;return!l||!s?o:s.type==="REORDER"?_d({impact:t,draggable:n,draggables:a,droppable:l,afterCritical:i}):Dd({impact:t,draggables:a,afterCritical:i})},Jt=function(e){var r=Id(e),t=e.droppable,n=t?Pn(t,r):r;return n},Bo=function(e,r){var t=Je(r,e.scroll.initial),n=Xr(t),l=cr({top:r.y,bottom:r.y+e.frame.height,left:r.x,right:r.x+e.frame.width}),a={frame:l,scroll:{initial:e.scroll.initial,max:e.scroll.max,current:r,diff:{value:t,displacement:n}}};return a};function Va(e,r){return e.map(function(t){return r[t]})}function Ed(e,r){for(var t=0;t<r.length;t++){var n=r[t].visible[e];if(n)return n}return null}var Ad=function(e){var r=e.impact,t=e.viewport,n=e.destination,l=e.draggables,a=e.maxScrollChange,i=Bo(t,qe(t.scroll.current,a)),o=n.frame?Yn(n,qe(n.frame.scroll.current,a)):n,s=r.displaced,f=ct({afterDragging:Va(s.all,l),destination:n,displacedBy:r.displacedBy,viewport:i.frame,last:s,forceShouldAnimate:!1}),p=ct({afterDragging:Va(s.all,l),destination:o,displacedBy:r.displacedBy,viewport:t.frame,last:s,forceShouldAnimate:!1}),c={},d={},g=[s,f,p];s.all.forEach(function(D){var S=Ed(D,g);if(S){d[D]=S;return}c[D]=!0});var v=ee({},r,{displaced:{all:s.all,invisible:c,visible:d}});return v},kd=function(e,r){return qe(e.scroll.diff.displacement,r)},ta=function(e){var r=e.pageBorderBoxCenter,t=e.draggable,n=e.viewport,l=kd(n,r),a=Je(l,t.page.borderBox.center);return qe(t.client.borderBox.center,a)},Mo=function(e){var r=e.draggable,t=e.destination,n=e.newPageBorderBoxCenter,l=e.viewport,a=e.withDroppableDisplacement,i=e.onlyOnMainAxis,o=i===void 0?!1:i,s=Je(n,r.page.borderBox.center),f=wt(r.page.borderBox,s),p={target:f,destination:t,withDroppableDisplacement:a,viewport:l};return o?vd(p):Ro(p)},Td=function(e){var r=e.isMovingForward,t=e.draggable,n=e.destination,l=e.draggables,a=e.previousImpact,i=e.viewport,o=e.previousPageBorderBoxCenter,s=e.previousClientSelection,f=e.afterCritical;if(!n.isEnabled)return null;var p=Jr(n.descriptor.id,l),c=Qr(t,n),d=od({isMovingForward:r,draggable:t,destination:n,insideDestination:p,previousImpact:a})||wd({isMovingForward:r,isInHomeList:c,draggable:t,draggables:l,destination:n,insideDestination:p,previousImpact:a,viewport:i,afterCritical:f});if(!d)return null;var g=Jt({impact:d,draggable:t,droppable:n,draggables:l,afterCritical:f}),v=Mo({draggable:t,destination:n,newPageBorderBoxCenter:g,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(v){var D=ta({pageBorderBoxCenter:g,draggable:t,viewport:i});return{clientSelection:D,impact:d,scrollJumpRequest:null}}var S=Je(g,o),b=Ad({impact:d,viewport:i,destination:n,draggables:l,maxScrollChange:S});return{clientSelection:s,impact:b,scrollJumpRequest:S}},Ke=function(r){var t=r.subject.active;return t||Z(!1),t},Rd=function(e){var r=e.isMovingForward,t=e.pageBorderBoxCenter,n=e.source,l=e.droppables,a=e.viewport,i=n.subject.active;if(!i)return null;var o=n.axis,s=or(i[o.start],i[o.end]),f=Kt(l).filter(function(c){return c!==n}).filter(function(c){return c.isEnabled}).filter(function(c){return!!c.subject.active}).filter(function(c){return ko(a.frame)(Ke(c))}).filter(function(c){var d=Ke(c);return r?i[o.crossAxisEnd]<d[o.crossAxisEnd]:d[o.crossAxisStart]<i[o.crossAxisStart]}).filter(function(c){var d=Ke(c),g=or(d[o.start],d[o.end]);return s(d[o.start])||s(d[o.end])||g(i[o.start])||g(i[o.end])}).sort(function(c,d){var g=Ke(c)[o.crossAxisStart],v=Ke(d)[o.crossAxisStart];return r?g-v:v-g}).filter(function(c,d,g){return Ke(c)[o.crossAxisStart]===Ke(g[0])[o.crossAxisStart]});if(!f.length)return null;if(f.length===1)return f[0];var p=f.filter(function(c){var d=or(Ke(c)[o.start],Ke(c)[o.end]);return d(t[o.line])});return p.length===1?p[0]:p.length>1?p.sort(function(c,d){return Ke(c)[o.start]-Ke(d)[o.start]})[0]:f.sort(function(c,d){var g=Ga(t,Wa(Ke(c))),v=Ga(t,Wa(Ke(d)));return g!==v?g-v:Ke(c)[o.start]-Ke(d)[o.start]})[0]},Za=function(r,t){var n=r.page.borderBox.center;return Ar(r.descriptor.id,t)?Je(n,t.displacedBy.point):n},Pd=function(r,t){var n=r.page.borderBox;return Ar(r.descriptor.id,t)?wt(n,Xr(t.displacedBy.point)):n},Bd=function(e){var r=e.pageBorderBoxCenter,t=e.viewport,n=e.destination,l=e.insideDestination,a=e.afterCritical,i=l.filter(function(o){return Ro({target:Pd(o,a),destination:n,viewport:t.frame,withDroppableDisplacement:!0})}).sort(function(o,s){var f=lt(r,Pn(n,Za(o,a))),p=lt(r,Pn(n,Za(s,a)));return f<p?-1:p<f?1:o.descriptor.index-s.descriptor.index});return i[0]||null},xt=ze(function(r,t){var n=t[r.line];return{value:n,point:Fr(r.line,n)}}),Md=function(r,t,n){var l=r.axis;if(r.descriptor.mode==="virtual")return Fr(l.line,t[l.line]);var a=r.subject.page.contentBox[l.size],i=Jr(r.descriptor.id,n),o=i.reduce(function(p,c){return p+c.client.marginBox[l.size]},0),s=o+t[l.line],f=s-a;return f<=0?null:Fr(l.line,f)},No=function(r,t){return ee({},r,{scroll:ee({},r.scroll,{max:t})})},Oo=function(r,t,n){var l=r.frame;Qr(t,r)&&Z(!1),r.subject.withPlaceholder&&Z(!1);var a=xt(r.axis,t.displaceBy).point,i=Md(r,a,n),o={placeholderSize:a,increasedBy:i,oldFrameMaxScroll:r.frame?r.frame.scroll.max:null};if(!l){var s=Vr({page:r.subject.page,withPlaceholder:o,axis:r.axis,frame:r.frame});return ee({},r,{subject:s})}var f=i?qe(l.scroll.max,i):l.scroll.max,p=No(l,f),c=Vr({page:r.subject.page,withPlaceholder:o,axis:r.axis,frame:p});return ee({},r,{subject:c,frame:p})},Nd=function(r){var t=r.subject.withPlaceholder;t||Z(!1);var n=r.frame;if(!n){var l=Vr({page:r.subject.page,axis:r.axis,frame:null,withPlaceholder:null});return ee({},r,{subject:l})}var a=t.oldFrameMaxScroll;a||Z(!1);var i=No(n,a),o=Vr({page:r.subject.page,axis:r.axis,frame:i,withPlaceholder:null});return ee({},r,{subject:o,frame:i})},Od=function(e){var r=e.previousPageBorderBoxCenter,t=e.moveRelativeTo,n=e.insideDestination,l=e.draggable,a=e.draggables,i=e.destination,o=e.viewport,s=e.afterCritical;if(!t){if(n.length)return null;var f={displaced:st,displacedBy:Ao,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:0}}},p=Jt({impact:f,draggable:l,droppable:i,draggables:a,afterCritical:s}),c=Qr(l,i)?i:Oo(i,l,a),d=Mo({draggable:l,destination:c,newPageBorderBoxCenter:p,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return d?f:null}var g=r[i.axis.line]<=t.page.borderBox.center[i.axis.line],v=function(){var S=t.descriptor.index;return t.descriptor.id===l.descriptor.id||g?S:S+1}(),D=xt(i.axis,l.displaceBy);return zt({draggable:l,insideDestination:n,destination:i,viewport:o,displacedBy:D,last:st,index:v})},Ld=function(e){var r=e.isMovingForward,t=e.previousPageBorderBoxCenter,n=e.draggable,l=e.isOver,a=e.draggables,i=e.droppables,o=e.viewport,s=e.afterCritical,f=Rd({isMovingForward:r,pageBorderBoxCenter:t,source:l,droppables:i,viewport:o});if(!f)return null;var p=Jr(f.descriptor.id,a),c=Bd({pageBorderBoxCenter:t,viewport:o,destination:f,insideDestination:p,afterCritical:s}),d=Od({previousPageBorderBoxCenter:t,destination:f,draggable:n,draggables:a,moveRelativeTo:c,insideDestination:p,viewport:o,afterCritical:s});if(!d)return null;var g=Jt({impact:d,draggable:n,droppable:f,draggables:a,afterCritical:s}),v=ta({pageBorderBoxCenter:g,draggable:n,viewport:o});return{clientSelection:v,impact:d,scrollJumpRequest:null}},Qe=function(e){var r=e.at;return r?r.type==="REORDER"?r.destination.droppableId:r.combine.droppableId:null},Fd=function(r,t){var n=Qe(r);return n?t[n]:null},zd=function(e){var r=e.state,t=e.type,n=Fd(r.impact,r.dimensions.droppables),l=!!n,a=r.dimensions.droppables[r.critical.droppable.id],i=n||a,o=i.axis.direction,s=o==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||o==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(s&&!l)return null;var f=t==="MOVE_DOWN"||t==="MOVE_RIGHT",p=r.dimensions.draggables[r.critical.draggable.id],c=r.current.page.borderBoxCenter,d=r.dimensions,g=d.draggables,v=d.droppables;return s?Td({isMovingForward:f,previousPageBorderBoxCenter:c,draggable:p,destination:i,draggables:g,viewport:r.viewport,previousClientSelection:r.current.client.selection,previousImpact:r.impact,afterCritical:r.afterCritical}):Ld({isMovingForward:f,previousPageBorderBoxCenter:c,draggable:p,isOver:i,draggables:g,droppables:v,viewport:r.viewport,afterCritical:r.afterCritical})};function Nr(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function Lo(e){var r=or(e.top,e.bottom),t=or(e.left,e.right);return function(l){return r(l.y)&&t(l.x)}}function Hd(e,r){return e.left<r.right&&e.right>r.left&&e.top<r.bottom&&e.bottom>r.top}function Gd(e){var r=e.pageBorderBox,t=e.draggable,n=e.candidates,l=t.page.borderBox.center,a=n.map(function(i){var o=i.axis,s=Fr(i.axis.line,r.center[o.line],i.page.borderBox.center[o.crossAxisLine]);return{id:i.descriptor.id,distance:lt(l,s)}}).sort(function(i,o){return o.distance-i.distance});return a[0]?a[0].id:null}function Wd(e){var r=e.pageBorderBox,t=e.draggable,n=e.droppables,l=Kt(n).filter(function(a){if(!a.isEnabled)return!1;var i=a.subject.active;if(!i||!Hd(r,i))return!1;if(Lo(i)(r.center))return!0;var o=a.axis,s=i.center[o.crossAxisLine],f=r[o.crossAxisStart],p=r[o.crossAxisEnd],c=or(i[o.crossAxisStart],i[o.crossAxisEnd]),d=c(f),g=c(p);return!d&&!g?!0:d?f<s:p>s});return l.length?l.length===1?l[0].descriptor.id:Gd({pageBorderBox:r,draggable:t,candidates:l}):null}var Fo=function(r,t){return cr(wt(r,t))},$d=function(e,r){var t=e.frame;return t?Fo(r,t.scroll.diff.value):r};function zo(e){var r=e.displaced,t=e.id;return!!(r.visible[t]||r.invisible[t])}function Ud(e){var r=e.draggable,t=e.closest,n=e.inHomeList;return t?n&&t.descriptor.index>r.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var qd=function(e){var r=e.pageBorderBoxWithDroppableScroll,t=e.draggable,n=e.destination,l=e.insideDestination,a=e.last,i=e.viewport,o=e.afterCritical,s=n.axis,f=xt(n.axis,t.displaceBy),p=f.value,c=r[s.start],d=r[s.end],g=Xt(t,l),v=kr(g,function(S){var b=S.descriptor.id,w=S.page.borderBox.center[s.line],C=Ar(b,o),I=zo({displaced:a,id:b});return C?I?d<=w:c<w-p:I?d<=w+p:c<w}),D=Ud({draggable:t,closest:v,inHomeList:Qr(t,n)});return zt({draggable:t,insideDestination:l,destination:n,viewport:i,last:a,displacedBy:f,index:D})},Vd=4,Zd=function(e){var r=e.draggable,t=e.pageBorderBoxWithDroppableScroll,n=e.previousImpact,l=e.destination,a=e.insideDestination,i=e.afterCritical;if(!l.isCombineEnabled)return null;var o=l.axis,s=xt(l.axis,r.displaceBy),f=s.value,p=t[o.start],c=t[o.end],d=Xt(r,a),g=kr(d,function(D){var S=D.descriptor.id,b=D.page.borderBox,w=b[o.size],C=w/Vd,I=Ar(S,i),k=zo({displaced:n.displaced,id:S});return I?k?c>b[o.start]+C&&c<b[o.end]-C:p>b[o.start]-f+C&&p<b[o.end]-f-C:k?c>b[o.start]+f+C&&c<b[o.end]+f-C:p>b[o.start]+C&&p<b[o.end]-C});if(!g)return null;var v={displacedBy:s,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:g.descriptor.id,droppableId:l.descriptor.id}}};return v},Ho=function(e){var r=e.pageOffset,t=e.draggable,n=e.draggables,l=e.droppables,a=e.previousImpact,i=e.viewport,o=e.afterCritical,s=Fo(t.page.borderBox,r),f=Wd({pageBorderBox:s,draggable:t,droppables:l});if(!f)return ld;var p=l[f],c=Jr(p.descriptor.id,n),d=$d(p,s);return Zd({pageBorderBoxWithDroppableScroll:d,draggable:t,previousImpact:a,destination:p,insideDestination:c,afterCritical:o})||qd({pageBorderBoxWithDroppableScroll:d,draggable:t,destination:p,insideDestination:c,last:a.displaced,viewport:i,afterCritical:o})},na=function(e,r){var t;return ee({},e,(t={},t[r.descriptor.id]=r,t))},jd=function(r){var t=r.previousImpact,n=r.impact,l=r.droppables,a=Qe(t),i=Qe(n);if(!a||a===i)return l;var o=l[a];if(!o.subject.withPlaceholder)return l;var s=Nd(o);return na(l,s)},Kd=function(e){var r=e.draggable,t=e.draggables,n=e.droppables,l=e.previousImpact,a=e.impact,i=jd({previousImpact:l,impact:a,droppables:n}),o=Qe(a);if(!o)return i;var s=n[o];if(Qr(r,s)||s.subject.withPlaceholder)return i;var f=Oo(s,r,t);return na(i,f)},nt=function(e){var r=e.state,t=e.clientSelection,n=e.dimensions,l=e.viewport,a=e.impact,i=e.scrollJumpRequest,o=l||r.viewport,s=n||r.dimensions,f=t||r.current.client.selection,p=Je(f,r.initial.client.selection),c={offset:p,selection:f,borderBoxCenter:qe(r.initial.client.borderBoxCenter,p)},d={selection:qe(c.selection,o.scroll.current),borderBoxCenter:qe(c.borderBoxCenter,o.scroll.current),offset:qe(c.offset,o.scroll.diff.value)},g={client:c,page:d};if(r.phase==="COLLECTING")return ee({phase:"COLLECTING"},r,{dimensions:s,viewport:o,current:g});var v=s.draggables[r.critical.draggable.id],D=a||Ho({pageOffset:d.offset,draggable:v,draggables:s.draggables,droppables:s.droppables,previousImpact:r.impact,viewport:o,afterCritical:r.afterCritical}),S=Kd({draggable:v,impact:D,previousImpact:r.impact,draggables:s.draggables,droppables:s.droppables}),b=ee({},r,{current:g,dimensions:{draggables:s.draggables,droppables:S},impact:D,viewport:o,scrollJumpRequest:i||null,forceShouldAnimate:i?!1:null});return b};function Yd(e,r){return e.map(function(t){return r[t]})}var Go=function(e){var r=e.impact,t=e.viewport,n=e.draggables,l=e.destination,a=e.forceShouldAnimate,i=r.displaced,o=Yd(i.all,n),s=ct({afterDragging:o,destination:l,displacedBy:r.displacedBy,viewport:t.frame,forceShouldAnimate:a,last:i});return ee({},r,{displaced:s})},Wo=function(e){var r=e.impact,t=e.draggable,n=e.droppable,l=e.draggables,a=e.viewport,i=e.afterCritical,o=Jt({impact:r,draggable:t,draggables:l,droppable:n,afterCritical:i});return ta({pageBorderBoxCenter:o,draggable:t,viewport:a})},$o=function(e){var r=e.state,t=e.dimensions,n=e.viewport;r.movementMode!=="SNAP"&&Z(!1);var l=r.impact,a=n||r.viewport,i=t||r.dimensions,o=i.draggables,s=i.droppables,f=o[r.critical.draggable.id],p=Qe(l);p||Z(!1);var c=s[p],d=Go({impact:l,viewport:a,destination:c,draggables:o}),g=Wo({impact:d,draggable:f,droppable:c,draggables:o,viewport:a,afterCritical:r.afterCritical});return nt({impact:d,clientSelection:g,state:r,dimensions:i,viewport:a})},Xd=function(e){return{index:e.index,droppableId:e.droppableId}},Uo=function(e){var r=e.draggable,t=e.home,n=e.draggables,l=e.viewport,a=xt(t.axis,r.displaceBy),i=Jr(t.descriptor.id,n),o=i.indexOf(r);o===-1&&Z(!1);var s=i.slice(o+1),f=s.reduce(function(g,v){return g[v.descriptor.id]=!0,g},{}),p={inVirtualList:t.descriptor.mode==="virtual",displacedBy:a,effected:f},c=ct({afterDragging:s,destination:t,displacedBy:a,last:null,viewport:l.frame,forceShouldAnimate:!1}),d={displaced:c,displacedBy:a,at:{type:"REORDER",destination:Xd(r.descriptor)}};return{impact:d,afterCritical:p}},Jd=function(e,r){return{draggables:e.draggables,droppables:na(e.droppables,r)}},Qd=function(e){var r=e.draggable,t=e.offset,n=e.initialWindowScroll,l=Mt(r.client,t),a=Nt(l,n),i=ee({},r,{placeholder:ee({},r.placeholder,{client:l}),client:l,page:a});return i},ef=function(e){var r=e.frame;return r||Z(!1),r},rf=function(e){var r=e.additions,t=e.updatedDroppables,n=e.viewport,l=n.scroll.diff.value;return r.map(function(a){var i=a.descriptor.droppableId,o=t[i],s=ef(o),f=s.scroll.diff.value,p=qe(l,f),c=Qd({draggable:a,offset:p,initialWindowScroll:n.scroll.initial});return c})},tf=function(e){var r=e.state,t=e.published,n=t.modified.map(function(C){var I=r.dimensions.droppables[C.droppableId],k=Yn(I,C.scroll);return k}),l=ee({},r.dimensions.droppables,{},Io(n)),a=Eo(rf({additions:t.additions,updatedDroppables:l,viewport:r.viewport})),i=ee({},r.dimensions.draggables,{},a);t.removals.forEach(function(C){delete i[C]});var o={droppables:l,draggables:i},s=Qe(r.impact),f=s?o.droppables[s]:null,p=o.draggables[r.critical.draggable.id],c=o.droppables[r.critical.droppable.id],d=Uo({draggable:p,home:c,draggables:i,viewport:r.viewport}),g=d.impact,v=d.afterCritical,D=f&&f.isCombineEnabled?r.impact:g,S=Ho({pageOffset:r.current.page.offset,draggable:o.draggables[r.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:D,viewport:r.viewport,afterCritical:v}),b=ee({phase:"DRAGGING"},r,{phase:"DRAGGING",impact:S,onLiftImpact:g,dimensions:o,afterCritical:v,forceShouldAnimate:!1});if(r.phase==="COLLECTING")return b;var w=ee({phase:"DROP_PENDING"},b,{phase:"DROP_PENDING",reason:r.reason,isWaiting:!1});return w},Bn=function(r){return r.movementMode==="SNAP"},sn=function(r,t,n){var l=Jd(r.dimensions,t);return!Bn(r)||n?nt({state:r,dimensions:l}):$o({state:r,dimensions:l})};function cn(e){return e.isDragging&&e.movementMode==="SNAP"?ee({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var ja={phase:"IDLE",completed:null,shouldFlush:!1},nf=function(e,r){if(e===void 0&&(e=ja),r.type==="FLUSH")return ee({},ja,{shouldFlush:!0});if(r.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&Z(!1);var t=r.payload,n=t.critical,l=t.clientSelection,a=t.viewport,i=t.dimensions,o=t.movementMode,s=i.draggables[n.draggable.id],f=i.droppables[n.droppable.id],p={selection:l,borderBoxCenter:s.client.borderBox.center,offset:He},c={client:p,page:{selection:qe(p.selection,a.scroll.initial),borderBoxCenter:qe(p.selection,a.scroll.initial),offset:qe(p.selection,a.scroll.diff.value)}},d=Kt(i.droppables).every(function(Ne){return!Ne.isFixedOnPage}),g=Uo({draggable:s,home:f,draggables:i.draggables,viewport:a}),v=g.impact,D=g.afterCritical,S={phase:"DRAGGING",isDragging:!0,critical:n,movementMode:o,dimensions:i,initial:c,current:c,isWindowScrollAllowed:d,impact:v,afterCritical:D,onLiftImpact:v,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null};return S}if(r.type==="COLLECTION_STARTING"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&Z(!1);var b=ee({phase:"COLLECTING"},e,{phase:"COLLECTING"});return b}if(r.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||Z(!1),tf({state:e,published:r.payload});if(r.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Nr(e)||Z(!1);var w=r.payload.client;return Ir(w,e.current.client.selection)?e:nt({state:e,clientSelection:w,impact:Bn(e)?e.impact:null})}if(r.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return cn(e);Nr(e)||Z(!1);var C=r.payload,I=C.id,k=C.newScroll,T=e.dimensions.droppables[I];if(!T)return e;var _=Yn(T,k);return sn(e,_,!1)}if(r.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Nr(e)||Z(!1);var M=r.payload,O=M.id,z=M.isEnabled,L=e.dimensions.droppables[O];L||Z(!1),L.isEnabled===z&&Z(!1);var U=ee({},L,{isEnabled:z});return sn(e,U,!0)}if(r.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Nr(e)||Z(!1);var W=r.payload,q=W.id,Q=W.isCombineEnabled,K=e.dimensions.droppables[q];K||Z(!1),K.isCombineEnabled===Q&&Z(!1);var j=ee({},K,{isCombineEnabled:Q});return sn(e,j,!0)}if(r.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Nr(e)||Z(!1),e.isWindowScrollAllowed||Z(!1);var H=r.payload.newScroll;if(Ir(e.viewport.scroll.current,H))return cn(e);var re=Bo(e.viewport,H);return Bn(e)?$o({state:e,viewport:re}):nt({state:e,viewport:re})}if(r.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Nr(e))return e;var ve=r.payload.maxScroll;if(Ir(ve,e.viewport.scroll.max))return e;var Ie=ee({},e.viewport,{scroll:ee({},e.viewport.scroll,{max:ve})});return ee({phase:"DRAGGING"},e,{viewport:Ie})}if(r.type==="MOVE_UP"||r.type==="MOVE_DOWN"||r.type==="MOVE_LEFT"||r.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&Z(!1);var de=zd({state:e,type:r.type});return de?nt({state:e,impact:de.impact,clientSelection:de.clientSelection,scrollJumpRequest:de.scrollJumpRequest}):e}if(r.type==="DROP_PENDING"){var De=r.payload.reason;e.phase!=="COLLECTING"&&Z(!1);var Ce=ee({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:De});return Ce}if(r.type==="DROP_ANIMATE"){var ge=r.payload,ce=ge.completed,be=ge.dropDuration,se=ge.newHomeClientOffset;e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||Z(!1);var ae={phase:"DROP_ANIMATING",completed:ce,dropDuration:be,newHomeClientOffset:se,dimensions:e.dimensions};return ae}if(r.type==="DROP_COMPLETE"){var ke=r.payload.completed;return{phase:"IDLE",completed:ke,shouldFlush:!1}}return e},af=function(r){return{type:"BEFORE_INITIAL_CAPTURE",payload:r}},of=function(r){return{type:"LIFT",payload:r}},lf=function(r){return{type:"INITIAL_PUBLISH",payload:r}},sf=function(r){return{type:"PUBLISH_WHILE_DRAGGING",payload:r}},cf=function(){return{type:"COLLECTION_STARTING",payload:null}},uf=function(r){return{type:"UPDATE_DROPPABLE_SCROLL",payload:r}},df=function(r){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:r}},ff=function(r){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:r}},qo=function(r){return{type:"MOVE",payload:r}},pf=function(r){return{type:"MOVE_BY_WINDOW_SCROLL",payload:r}},vf=function(r){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:r}},gf=function(){return{type:"MOVE_UP",payload:null}},hf=function(){return{type:"MOVE_DOWN",payload:null}},mf=function(){return{type:"MOVE_RIGHT",payload:null}},bf=function(){return{type:"MOVE_LEFT",payload:null}},aa=function(){return{type:"FLUSH",payload:null}},yf=function(r){return{type:"DROP_ANIMATE",payload:r}},ia=function(r){return{type:"DROP_COMPLETE",payload:r}},Vo=function(r){return{type:"DROP",payload:r}},wf=function(r){return{type:"DROP_PENDING",payload:r}},Zo=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},xf=function(e){return function(r){var t=r.getState,n=r.dispatch;return function(l){return function(a){if(a.type!=="LIFT"){l(a);return}var i=a.payload,o=i.id,s=i.clientSelection,f=i.movementMode,p=t();p.phase==="DROP_ANIMATING"&&n(ia({completed:p.completed})),t().phase!=="IDLE"&&Z(!1),n(aa()),n(af({draggableId:o,movementMode:f}));var c={shouldPublishImmediately:f==="SNAP"},d={draggableId:o,scrollOptions:c},g=e.startPublishing(d),v=g.critical,D=g.dimensions,S=g.viewport;n(lf({critical:v,dimensions:D,clientSelection:s,movementMode:f,viewport:S}))}}}},Df=function(e){return function(){return function(r){return function(t){t.type==="INITIAL_PUBLISH"&&e.dragging(),t.type==="DROP_ANIMATE"&&e.dropping(t.payload.completed.result.reason),(t.type==="FLUSH"||t.type==="DROP_COMPLETE")&&e.resting(),r(t)}}}},oa={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},ut={opacity:{drop:0,combining:.7},scale:{drop:.75}},la={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Rr=la.outOfTheWay+"s "+oa.outOfTheWay,at={fluid:"opacity "+Rr,snap:"transform "+Rr+", opacity "+Rr,drop:function(r){var t=r+"s "+oa.drop;return"transform "+t+", opacity "+t},outOfTheWay:"transform "+Rr,placeholder:"height "+Rr+", width "+Rr+", margin "+Rr},Ka=function(r){return Ir(r,He)?null:"translate("+r.x+"px, "+r.y+"px)"},Mn={moveTo:Ka,drop:function(r,t){var n=Ka(r);return n?t?n+" scale("+ut.scale.drop+")":n:null}},Nn=la.minDropTime,jo=la.maxDropTime,Sf=jo-Nn,Ya=1500,Cf=.6,_f=function(e){var r=e.current,t=e.destination,n=e.reason,l=lt(r,t);if(l<=0)return Nn;if(l>=Ya)return jo;var a=l/Ya,i=Nn+Sf*a,o=n==="CANCEL"?i*Cf:i;return Number(o.toFixed(2))},If=function(e){var r=e.impact,t=e.draggable,n=e.dimensions,l=e.viewport,a=e.afterCritical,i=n.draggables,o=n.droppables,s=Qe(r),f=s?o[s]:null,p=o[t.descriptor.droppableId],c=Wo({impact:r,draggable:t,draggables:i,afterCritical:a,droppable:f||p,viewport:l}),d=Je(c,t.client.borderBox.center);return d},Ef=function(e){var r=e.draggables,t=e.reason,n=e.lastImpact,l=e.home,a=e.viewport,i=e.onLiftImpact;if(!n.at||t!=="DROP"){var o=Go({draggables:r,impact:i,destination:l,viewport:a,forceShouldAnimate:!0});return{impact:o,didDropInsideDroppable:!1}}if(n.at.type==="REORDER")return{impact:n,didDropInsideDroppable:!0};var s=ee({},n,{displaced:st});return{impact:s,didDropInsideDroppable:!0}},Af=function(e){var r=e.getState,t=e.dispatch;return function(n){return function(l){if(l.type!=="DROP"){n(l);return}var a=r(),i=l.payload.reason;if(a.phase==="COLLECTING"){t(wf({reason:i}));return}if(a.phase!=="IDLE"){var o=a.phase==="DROP_PENDING"&&a.isWaiting;o&&Z(!1),a.phase==="DRAGGING"||a.phase==="DROP_PENDING"||Z(!1);var s=a.critical,f=a.dimensions,p=f.draggables[a.critical.draggable.id],c=Ef({reason:i,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),d=c.impact,g=c.didDropInsideDroppable,v=g?Jn(d):null,D=g?Yt(d):null,S={index:s.draggable.index,droppableId:s.droppable.id},b={draggableId:p.descriptor.id,type:p.descriptor.type,source:S,reason:i,mode:a.movementMode,destination:v,combine:D},w=If({impact:d,draggable:p,dimensions:f,viewport:a.viewport,afterCritical:a.afterCritical}),C={critical:a.critical,afterCritical:a.afterCritical,result:b,impact:d},I=!Ir(a.current.client.offset,w)||!!b.combine;if(!I){t(ia({completed:C}));return}var k=_f({current:a.current.client.offset,destination:w,reason:i}),T={newHomeClientOffset:w,dropDuration:k,completed:C};t(yf(T))}}}},Ko=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function kf(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(t){t.target!==window&&t.target!==window.document||e()}}}function Tf(e){var r=e.onWindowScroll;function t(){r(Ko())}var n=ot(t),l=kf(n),a=_r;function i(){return a!==_r}function o(){i()&&Z(!1),a=ir(window,[l])}function s(){i()||Z(!1),n.cancel(),a(),a=_r}return{start:o,stop:s,isActive:i}}var Rf=function(r){return r.type==="DROP_COMPLETE"||r.type==="DROP_ANIMATE"||r.type==="FLUSH"},Pf=function(e){var r=Tf({onWindowScroll:function(n){e.dispatch(pf({newScroll:n}))}});return function(t){return function(n){!r.isActive()&&n.type==="INITIAL_PUBLISH"&&r.start(),r.isActive()&&Rf(n)&&r.stop(),t(n)}}},Bf=function(e){var r=!1,t=!1,n=setTimeout(function(){t=!0}),l=function(i){r||t||(r=!0,e(i),clearTimeout(n))};return l.wasCalled=function(){return r},l},Mf=function(){var e=[],r=function(a){var i=Xn(e,function(f){return f.timerId===a});i===-1&&Z(!1);var o=e.splice(i,1),s=o[0];s.callback()},t=function(a){var i=setTimeout(function(){return r(i)}),o={timerId:i,callback:a};e.push(o)},n=function(){if(e.length){var a=[].concat(e);e.length=0,a.forEach(function(i){clearTimeout(i.timerId),i.callback()})}};return{add:t,flush:n}},Nf=function(r,t){return r==null&&t==null?!0:r==null||t==null?!1:r.droppableId===t.droppableId&&r.index===t.index},Of=function(r,t){return r==null&&t==null?!0:r==null||t==null?!1:r.draggableId===t.draggableId&&r.droppableId===t.droppableId},Lf=function(r,t){if(r===t)return!0;var n=r.draggable.id===t.draggable.id&&r.draggable.droppableId===t.draggable.droppableId&&r.draggable.type===t.draggable.type&&r.draggable.index===t.draggable.index,l=r.droppable.id===t.droppable.id&&r.droppable.type===t.droppable.type;return n&&l},et=function(r,t){t()},It=function(r,t){return{draggableId:r.draggable.id,type:r.droppable.type,source:{droppableId:r.droppable.id,index:r.draggable.index},mode:t}},un=function(r,t,n,l){if(!r){n(l(t));return}var a=Bf(n),i={announce:a};r(t,i),a.wasCalled()||n(l(t))},Ff=function(e,r){var t=Mf(),n=null,l=function(d,g){n&&Z(!1),et("onBeforeCapture",function(){var v=e().onBeforeCapture;if(v){var D={draggableId:d,mode:g};v(D)}})},a=function(d,g){n&&Z(!1),et("onBeforeDragStart",function(){var v=e().onBeforeDragStart;v&&v(It(d,g))})},i=function(d,g){n&&Z(!1);var v=It(d,g);n={mode:g,lastCritical:d,lastLocation:v.source,lastCombine:null},t.add(function(){et("onDragStart",function(){return un(e().onDragStart,v,r,Rt.onDragStart)})})},o=function(d,g){var v=Jn(g),D=Yt(g);n||Z(!1);var S=!Lf(d,n.lastCritical);S&&(n.lastCritical=d);var b=!Nf(n.lastLocation,v);b&&(n.lastLocation=v);var w=!Of(n.lastCombine,D);if(w&&(n.lastCombine=D),!(!S&&!b&&!w)){var C=ee({},It(d,n.mode),{combine:D,destination:v});t.add(function(){et("onDragUpdate",function(){return un(e().onDragUpdate,C,r,Rt.onDragUpdate)})})}},s=function(){n||Z(!1),t.flush()},f=function(d){n||Z(!1),n=null,et("onDragEnd",function(){return un(e().onDragEnd,d,r,Rt.onDragEnd)})},p=function(){if(n){var d=ee({},It(n.lastCritical,n.mode),{combine:null,destination:null,reason:"CANCEL"});f(d)}};return{beforeCapture:l,beforeStart:a,start:i,update:o,flush:s,drop:f,abort:p}},zf=function(e,r){var t=Ff(e,r);return function(n){return function(l){return function(a){if(a.type==="BEFORE_INITIAL_CAPTURE"){t.beforeCapture(a.payload.draggableId,a.payload.movementMode);return}if(a.type==="INITIAL_PUBLISH"){var i=a.payload.critical;t.beforeStart(i,a.payload.movementMode),l(a),t.start(i,a.payload.movementMode);return}if(a.type==="DROP_COMPLETE"){var o=a.payload.completed.result;t.flush(),l(a),t.drop(o);return}if(l(a),a.type==="FLUSH"){t.abort();return}var s=n.getState();s.phase==="DRAGGING"&&t.update(s.critical,s.impact)}}}},Hf=function(e){return function(r){return function(t){if(t.type!=="DROP_ANIMATION_FINISHED"){r(t);return}var n=e.getState();n.phase!=="DROP_ANIMATING"&&Z(!1),e.dispatch(ia({completed:n.completed}))}}},Gf=function(e){var r=null,t=null;function n(){t&&(cancelAnimationFrame(t),t=null),r&&(r(),r=null)}return function(l){return function(a){if((a.type==="FLUSH"||a.type==="DROP_COMPLETE"||a.type==="DROP_ANIMATION_FINISHED")&&n(),l(a),a.type==="DROP_ANIMATE"){var i={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var s=e.getState();s.phase==="DROP_ANIMATING"&&e.dispatch(Zo())}};t=requestAnimationFrame(function(){t=null,r=ir(window,[i])})}}}},Wf=function(e){return function(){return function(r){return function(t){(t.type==="DROP_COMPLETE"||t.type==="FLUSH"||t.type==="DROP_ANIMATE")&&e.stopPublishing(),r(t)}}}},$f=function(e){var r=!1;return function(){return function(t){return function(n){if(n.type==="INITIAL_PUBLISH"){r=!0,e.tryRecordFocus(n.payload.critical.draggable.id),t(n),e.tryRestoreFocusRecorded();return}if(t(n),!!r){if(n.type==="FLUSH"){r=!1,e.tryRestoreFocusRecorded();return}if(n.type==="DROP_COMPLETE"){r=!1;var l=n.payload.completed.result;l.combine&&e.tryShiftRecord(l.draggableId,l.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}},Uf=function(r){return r.type==="DROP_COMPLETE"||r.type==="DROP_ANIMATE"||r.type==="FLUSH"},qf=function(e){return function(r){return function(t){return function(n){if(Uf(n)){e.stop(),t(n);return}if(n.type==="INITIAL_PUBLISH"){t(n);var l=r.getState();l.phase!=="DRAGGING"&&Z(!1),e.start(l);return}t(n),e.scroll(r.getState())}}}},Vf=function(e){return function(r){return function(t){if(r(t),t.type==="PUBLISH_WHILE_DRAGGING"){var n=e.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||e.dispatch(Vo({reason:n.reason})))}}}},Zf=ao,jf=function(e){var r=e.dimensionMarshal,t=e.focusMarshal,n=e.styleMarshal,l=e.getResponders,a=e.announce,i=e.autoScroller;return no(nf,Zf(Vc(Df(n),Wf(r),xf(r),Af,Hf,Gf,Vf,qf(i),Pf,$f(t),zf(l,a))))},dn=function(){return{additions:{},removals:{},modified:{}}};function Kf(e){var r=e.registry,t=e.callbacks,n=dn(),l=null,a=function(){l||(t.collectionStarting(),l=requestAnimationFrame(function(){l=null;var p=n,c=p.additions,d=p.removals,g=p.modified,v=Object.keys(c).map(function(b){return r.draggable.getById(b).getDimension(He)}).sort(function(b,w){return b.descriptor.index-w.descriptor.index}),D=Object.keys(g).map(function(b){var w=r.droppable.getById(b),C=w.callbacks.getScrollWhileDragging();return{droppableId:b,scroll:C}}),S={additions:v,removals:Object.keys(d),modified:D};n=dn(),t.publish(S)}))},i=function(p){var c=p.descriptor.id;n.additions[c]=p,n.modified[p.descriptor.droppableId]=!0,n.removals[c]&&delete n.removals[c],a()},o=function(p){var c=p.descriptor;n.removals[c.id]=!0,n.modified[c.droppableId]=!0,n.additions[c.id]&&delete n.additions[c.id],a()},s=function(){l&&(cancelAnimationFrame(l),l=null,n=dn())};return{add:i,remove:o,stop:s}}var Yo=function(e){var r=e.scrollHeight,t=e.scrollWidth,n=e.height,l=e.width,a=Je({x:t,y:r},{x:l,y:n}),i={x:Math.max(0,a.x),y:Math.max(0,a.y)};return i},Xo=function(){var e=document.documentElement;return e||Z(!1),e},Jo=function(){var e=Xo(),r=Yo({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight});return r},Yf=function(){var e=Ko(),r=Jo(),t=e.y,n=e.x,l=Xo(),a=l.clientWidth,i=l.clientHeight,o=n+a,s=t+i,f=cr({top:t,left:n,right:o,bottom:s}),p={frame:f,scroll:{initial:e,current:e,max:r,diff:{value:He,displacement:He}}};return p},Xf=function(e){var r=e.critical,t=e.scrollOptions,n=e.registry,l=Yf(),a=l.scroll.current,i=r.droppable,o=n.droppable.getAllByType(i.type).map(function(c){return c.callbacks.getDimensionAndWatchScroll(a,t)}),s=n.draggable.getAllByType(r.draggable.type).map(function(c){return c.getDimension(a)}),f={draggables:Eo(s),droppables:Io(o)},p={dimensions:f,critical:r,viewport:l};return p};function Xa(e,r,t){if(t.descriptor.id===r.id||t.descriptor.type!==r.type)return!1;var n=e.droppable.getById(t.descriptor.droppableId);return n.descriptor.mode==="virtual"}var Jf=function(e,r){var t=null,n=Kf({callbacks:{publish:r.publishWhileDragging,collectionStarting:r.collectionStarting},registry:e}),l=function(g,v){e.droppable.exists(g)||Z(!1),t&&r.updateDroppableIsEnabled({id:g,isEnabled:v})},a=function(g,v){t&&(e.droppable.exists(g)||Z(!1),r.updateDroppableIsCombineEnabled({id:g,isCombineEnabled:v}))},i=function(g,v){t&&(e.droppable.exists(g)||Z(!1),r.updateDroppableScroll({id:g,newScroll:v}))},o=function(g,v){t&&e.droppable.getById(g).callbacks.scroll(v)},s=function(){if(t){n.stop();var g=t.critical.droppable;e.droppable.getAllByType(g.type).forEach(function(v){return v.callbacks.dragStopped()}),t.unsubscribe(),t=null}},f=function(g){t||Z(!1);var v=t.critical.draggable;g.type==="ADDITION"&&Xa(e,v,g.value)&&n.add(g.value),g.type==="REMOVAL"&&Xa(e,v,g.value)&&n.remove(g.value)},p=function(g){t&&Z(!1);var v=e.draggable.getById(g.draggableId),D=e.droppable.getById(v.descriptor.droppableId),S={draggable:v.descriptor,droppable:D.descriptor},b=e.subscribe(f);return t={critical:S,unsubscribe:b},Xf({critical:S,registry:e,scrollOptions:g.scrollOptions})},c={updateDroppableIsEnabled:l,updateDroppableIsCombineEnabled:a,scrollDroppable:o,updateDroppableScroll:i,startPublishing:p,stopPublishing:s};return c},Qo=function(e,r){return e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===r?!1:e.completed.result.reason==="DROP"},Qf=function(e){window.scrollBy(e.x,e.y)},ep=ze(function(e){return Kt(e).filter(function(r){return!(!r.isEnabled||!r.frame)})}),rp=function(r,t){var n=kr(ep(t),function(l){return l.frame||Z(!1),Lo(l.frame.pageMarginBox)(r)});return n},tp=function(e){var r=e.center,t=e.destination,n=e.droppables;if(t){var l=n[t];return l.frame?l:null}var a=rp(r,n);return a},Er={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(r){return Math.pow(r,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},np=function(e,r){var t=e[r.size]*Er.startFromPercentage,n=e[r.size]*Er.maxScrollAtPercentage,l={startScrollingFrom:t,maxScrollValueAt:n};return l},el=function(e){var r=e.startOfRange,t=e.endOfRange,n=e.current,l=t-r;if(l===0)return 0;var a=n-r,i=a/l;return i},sa=1,ap=function(e,r){if(e>r.startScrollingFrom)return 0;if(e<=r.maxScrollValueAt)return Er.maxPixelScroll;if(e===r.startScrollingFrom)return sa;var t=el({startOfRange:r.maxScrollValueAt,endOfRange:r.startScrollingFrom,current:e}),n=1-t,l=Er.maxPixelScroll*Er.ease(n);return Math.ceil(l)},Ja=Er.durationDampening.accelerateAt,Qa=Er.durationDampening.stopDampeningAt,ip=function(e,r){var t=r,n=Qa,l=Date.now(),a=l-t;if(a>=Qa)return e;if(a<Ja)return sa;var i=el({startOfRange:Ja,endOfRange:n,current:a}),o=e*Er.ease(i);return Math.ceil(o)},ei=function(e){var r=e.distanceToEdge,t=e.thresholds,n=e.dragStartTime,l=e.shouldUseTimeDampening,a=ap(r,t);return a===0?0:l?Math.max(ip(a,n),sa):a},ri=function(e){var r=e.container,t=e.distanceToEdges,n=e.dragStartTime,l=e.axis,a=e.shouldUseTimeDampening,i=np(r,l),o=t[l.end]<t[l.start];return o?ei({distanceToEdge:t[l.end],thresholds:i,dragStartTime:n,shouldUseTimeDampening:a}):-1*ei({distanceToEdge:t[l.start],thresholds:i,dragStartTime:n,shouldUseTimeDampening:a})},op=function(e){var r=e.container,t=e.subject,n=e.proposedScroll,l=t.height>r.height,a=t.width>r.width;return!a&&!l?n:a&&l?null:{x:a?0:n.x,y:l?0:n.y}},lp=Co(function(e){return e===0?0:e}),rl=function(e){var r=e.dragStartTime,t=e.container,n=e.subject,l=e.center,a=e.shouldUseTimeDampening,i={top:l.y-t.top,right:t.right-l.x,bottom:t.bottom-l.y,left:l.x-t.left},o=ri({container:t,distanceToEdges:i,dragStartTime:r,axis:Qn,shouldUseTimeDampening:a}),s=ri({container:t,distanceToEdges:i,dragStartTime:r,axis:To,shouldUseTimeDampening:a}),f=lp({x:s,y:o});if(Ir(f,He))return null;var p=op({container:t,subject:n,proposedScroll:f});return p?Ir(p,He)?null:p:null},sp=Co(function(e){return e===0?0:e>0?1:-1}),ca=function(){var e=function(t,n){return t<0?t:t>n?t-n:0};return function(r){var t=r.current,n=r.max,l=r.change,a=qe(t,l),i={x:e(a.x,n.x),y:e(a.y,n.y)};return Ir(i,He)?null:i}}(),tl=function(r){var t=r.max,n=r.current,l=r.change,a={x:Math.max(n.x,t.x),y:Math.max(n.y,t.y)},i=sp(l),o=ca({max:a,current:n,change:i});return!o||i.x!==0&&o.x===0||i.y!==0&&o.y===0},ua=function(r,t){return tl({current:r.scroll.current,max:r.scroll.max,change:t})},cp=function(r,t){if(!ua(r,t))return null;var n=r.scroll.max,l=r.scroll.current;return ca({current:l,max:n,change:t})},da=function(r,t){var n=r.frame;return n?tl({current:n.scroll.current,max:n.scroll.max,change:t}):!1},up=function(r,t){var n=r.frame;return!n||!da(r,t)?null:ca({current:n.scroll.current,max:n.scroll.max,change:t})},dp=function(e){var r=e.viewport,t=e.subject,n=e.center,l=e.dragStartTime,a=e.shouldUseTimeDampening,i=rl({dragStartTime:l,container:r.frame,subject:t,center:n,shouldUseTimeDampening:a});return i&&ua(r,i)?i:null},fp=function(e){var r=e.droppable,t=e.subject,n=e.center,l=e.dragStartTime,a=e.shouldUseTimeDampening,i=r.frame;if(!i)return null;var o=rl({dragStartTime:l,container:i.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:a});return o&&da(r,o)?o:null},ti=function(e){var r=e.state,t=e.dragStartTime,n=e.shouldUseTimeDampening,l=e.scrollWindow,a=e.scrollDroppable,i=r.current.page.borderBoxCenter,o=r.dimensions.draggables[r.critical.draggable.id],s=o.page.marginBox;if(r.isWindowScrollAllowed){var f=r.viewport,p=dp({dragStartTime:t,viewport:f,subject:s,center:i,shouldUseTimeDampening:n});if(p){l(p);return}}var c=tp({center:i,destination:Qe(r.impact),droppables:r.dimensions.droppables});if(c){var d=fp({dragStartTime:t,droppable:c,subject:s,center:i,shouldUseTimeDampening:n});d&&a(c.descriptor.id,d)}},pp=function(e){var r=e.scrollWindow,t=e.scrollDroppable,n=ot(r),l=ot(t),a=null,i=function(p){a||Z(!1);var c=a,d=c.shouldUseTimeDampening,g=c.dragStartTime;ti({state:p,scrollWindow:n,scrollDroppable:l,dragStartTime:g,shouldUseTimeDampening:d})},o=function(p){a&&Z(!1);var c=Date.now(),d=!1,g=function(){d=!0};ti({state:p,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:g,scrollDroppable:g}),a={dragStartTime:c,shouldUseTimeDampening:d},d&&i(p)},s=function(){a&&(n.cancel(),l.cancel(),a=null)};return{start:o,stop:s,scroll:i}},vp=function(e){var r=e.move,t=e.scrollDroppable,n=e.scrollWindow,l=function(f,p){var c=qe(f.current.client.selection,p);r({client:c})},a=function(f,p){if(!da(f,p))return p;var c=up(f,p);if(!c)return t(f.descriptor.id,p),null;var d=Je(p,c);t(f.descriptor.id,d);var g=Je(p,d);return g},i=function(f,p,c){if(!f||!ua(p,c))return c;var d=cp(p,c);if(!d)return n(c),null;var g=Je(c,d);n(g);var v=Je(c,g);return v},o=function(f){var p=f.scrollJumpRequest;if(p){var c=Qe(f.impact);c||Z(!1);var d=a(f.dimensions.droppables[c],p);if(d){var g=f.viewport,v=i(f.isWindowScrollAllowed,g,d);v&&l(f,v)}}};return o},gp=function(e){var r=e.scrollDroppable,t=e.scrollWindow,n=e.move,l=pp({scrollWindow:t,scrollDroppable:r}),a=vp({move:n,scrollWindow:t,scrollDroppable:r}),i=function(f){if(f.phase==="DRAGGING"){if(f.movementMode==="FLUID"){l.scroll(f);return}f.scrollJumpRequest&&a(f)}},o={scroll:i,start:l.start,stop:l.stop};return o},Zr="data-rbd",jr=function(){var e=Zr+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),On=function(){var e=Zr+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),hp=function(){var e=Zr+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),ni={contextId:Zr+"-scroll-container-context-id"},mp=function(r){return function(t){return"["+t+'="'+r+'"]'}},rt=function(r,t){return r.map(function(n){var l=n.styles[t];return l?n.selector+" { "+l+" }":""}).join(" ")},bp="pointer-events: none;",yp=function(e){var r=mp(e),t=function(){var o=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:r(jr.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:o,dragging:bp,dropAnimating:o}}}(),n=function(){var o=`
      transition: `+at.outOfTheWay+`;
    `;return{selector:r(On.contextId),styles:{dragging:o,dropAnimating:o,userCancel:o}}}(),l={selector:r(hp.contextId),styles:{always:"overflow-anchor: none;"}},a={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},i=[n,t,l,a];return{always:rt(i,"always"),resting:rt(i,"resting"),dragging:rt(i,"dragging"),dropAnimating:rt(i,"dropAnimating"),userCancel:rt(i,"userCancel")}},er=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?Hi:Ae,fn=function(){var r=document.querySelector("head");return r||Z(!1),r},ai=function(r){var t=document.createElement("style");return r&&t.setAttribute("nonce",r),t.type="text/css",t};function wp(e,r){var t=me(function(){return yp(e)},[e]),n=xe(null),l=xe(null),a=ne(ze(function(c){var d=l.current;d||Z(!1),d.textContent=c}),[]),i=ne(function(c){var d=n.current;d||Z(!1),d.textContent=c},[]);er(function(){!n.current&&!l.current||Z(!1);var c=ai(r),d=ai(r);return n.current=c,l.current=d,c.setAttribute(Zr+"-always",e),d.setAttribute(Zr+"-dynamic",e),fn().appendChild(c),fn().appendChild(d),i(t.always),a(t.resting),function(){var g=function(D){var S=D.current;S||Z(!1),fn().removeChild(S),D.current=null};g(n),g(l)}},[r,i,a,t.always,t.resting,e]);var o=ne(function(){return a(t.dragging)},[a,t.dragging]),s=ne(function(c){if(c==="DROP"){a(t.dropAnimating);return}a(t.userCancel)},[a,t.dropAnimating,t.userCancel]),f=ne(function(){l.current&&a(t.resting)},[a,t.resting]),p=me(function(){return{dragging:o,dropping:s,resting:f}},[o,s,f]);return p}var nl=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function Qt(e){return e instanceof nl(e).HTMLElement}function xp(e,r){var t="["+jr.contextId+'="'+e+'"]',n=_o(document.querySelectorAll(t));if(!n.length)return null;var l=kr(n,function(a){return a.getAttribute(jr.draggableId)===r});return!l||!Qt(l)?null:l}function Dp(e){var r=xe({}),t=xe(null),n=xe(null),l=xe(!1),a=ne(function(d,g){var v={id:d,focus:g};return r.current[d]=v,function(){var S=r.current,b=S[d];b!==v&&delete S[d]}},[]),i=ne(function(d){var g=xp(e,d);g&&g!==document.activeElement&&g.focus()},[e]),o=ne(function(d,g){t.current===d&&(t.current=g)},[]),s=ne(function(){n.current||l.current&&(n.current=requestAnimationFrame(function(){n.current=null;var d=t.current;d&&i(d)}))},[i]),f=ne(function(d){t.current=null;var g=document.activeElement;g&&g.getAttribute(jr.draggableId)===d&&(t.current=d)},[]);er(function(){return l.current=!0,function(){l.current=!1;var d=n.current;d&&cancelAnimationFrame(d)}},[]);var p=me(function(){return{register:a,tryRecordFocus:f,tryRestoreFocusRecorded:s,tryShiftRecord:o}},[a,f,s,o]);return p}function Sp(){var e={draggables:{},droppables:{}},r=[];function t(c){return r.push(c),function(){var g=r.indexOf(c);g!==-1&&r.splice(g,1)}}function n(c){r.length&&r.forEach(function(d){return d(c)})}function l(c){return e.draggables[c]||null}function a(c){var d=l(c);return d||Z(!1),d}var i={register:function(d){e.draggables[d.descriptor.id]=d,n({type:"ADDITION",value:d})},update:function(d,g){var v=e.draggables[g.descriptor.id];v&&v.uniqueId===d.uniqueId&&(delete e.draggables[g.descriptor.id],e.draggables[d.descriptor.id]=d)},unregister:function(d){var g=d.descriptor.id,v=l(g);v&&d.uniqueId===v.uniqueId&&(delete e.draggables[g],n({type:"REMOVAL",value:d}))},getById:a,findById:l,exists:function(d){return!!l(d)},getAllByType:function(d){return Ft(e.draggables).filter(function(g){return g.descriptor.type===d})}};function o(c){return e.droppables[c]||null}function s(c){var d=o(c);return d||Z(!1),d}var f={register:function(d){e.droppables[d.descriptor.id]=d},unregister:function(d){var g=o(d.descriptor.id);g&&d.uniqueId===g.uniqueId&&delete e.droppables[d.descriptor.id]},getById:s,findById:o,exists:function(d){return!!o(d)},getAllByType:function(d){return Ft(e.droppables).filter(function(g){return g.descriptor.type===d})}};function p(){e.draggables={},e.droppables={},r.length=0}return{draggable:i,droppable:f,subscribe:t,clean:p}}function Cp(){var e=me(Sp,[]);return Ae(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}var fa=ye.createContext(null),Ht=function(){var e=document.body;return e||Z(!1),e},_p={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},Ip=function(r){return"rbd-announcement-"+r};function Ep(e){var r=me(function(){return Ip(e)},[e]),t=xe(null);Ae(function(){var a=document.createElement("div");return t.current=a,a.id=r,a.setAttribute("aria-live","assertive"),a.setAttribute("aria-atomic","true"),ee(a.style,_p),Ht().appendChild(a),function(){setTimeout(function(){var s=Ht();s.contains(a)&&s.removeChild(a),a===t.current&&(t.current=null)})}},[r]);var n=ne(function(l){var a=t.current;if(a){a.textContent=l;return}},[]);return n}var Ap=0,kp={separator:"::"};function pa(e,r){return r===void 0&&(r=kp),me(function(){return""+e+r.separator+Ap++},[r.separator,e])}function Tp(e){var r=e.contextId,t=e.uniqueId;return"rbd-hidden-text-"+r+"-"+t}function Rp(e){var r=e.contextId,t=e.text,n=pa("hidden-text",{separator:"-"}),l=me(function(){return Tp({contextId:r,uniqueId:n})},[n,r]);return Ae(function(){var i=document.createElement("div");return i.id=l,i.textContent=t,i.style.display="none",Ht().appendChild(i),function(){var s=Ht();s.contains(i)&&s.removeChild(i)}},[l,t]),l}var en=ye.createContext(null);function al(e){var r=xe(e);return Ae(function(){r.current=e}),r}function Pp(){var e=null;function r(){return!!e}function t(i){return i===e}function n(i){e&&Z(!1);var o={abandon:i};return e=o,o}function l(){e||Z(!1),e=null}function a(){e&&(e.abandon(),l())}return{isClaimed:r,isActive:t,claim:n,release:l,tryAbandon:a}}var Bp=9,Mp=13,va=27,il=32,Np=33,Op=34,Lp=35,Fp=36,zp=37,Hp=38,Gp=39,Wp=40,Et,$p=(Et={},Et[Mp]=!0,Et[Bp]=!0,Et),ol=function(e){$p[e.keyCode]&&e.preventDefault()},rn=function(){var e="visibilitychange";if(typeof document>"u")return e;var r=[e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],t=kr(r,function(n){return"on"+n in document});return t||e}(),ll=0,ii=5;function Up(e,r){return Math.abs(r.x-e.x)>=ii||Math.abs(r.y-e.y)>=ii}var oi={type:"IDLE"};function qp(e){var r=e.cancel,t=e.completed,n=e.getPhase,l=e.setPhase;return[{eventName:"mousemove",fn:function(i){var o=i.button,s=i.clientX,f=i.clientY;if(o===ll){var p={x:s,y:f},c=n();if(c.type==="DRAGGING"){i.preventDefault(),c.actions.move(p);return}c.type!=="PENDING"&&Z(!1);var d=c.point;if(Up(d,p)){i.preventDefault();var g=c.actions.fluidLift(p);l({type:"DRAGGING",actions:g})}}}},{eventName:"mouseup",fn:function(i){var o=n();if(o.type!=="DRAGGING"){r();return}i.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:function(i){n().type==="DRAGGING"&&i.preventDefault(),r()}},{eventName:"keydown",fn:function(i){var o=n();if(o.type==="PENDING"){r();return}if(i.keyCode===va){i.preventDefault(),r();return}ol(i)}},{eventName:"resize",fn:r},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){n().type==="PENDING"&&r()}},{eventName:"webkitmouseforcedown",fn:function(i){var o=n();if(o.type==="IDLE"&&Z(!1),o.actions.shouldRespectForcePress()){r();return}i.preventDefault()}},{eventName:rn,fn:r}]}function Vp(e){var r=xe(oi),t=xe(_r),n=me(function(){return{eventName:"mousedown",fn:function(c){if(!c.defaultPrevented&&c.button===ll&&!(c.ctrlKey||c.metaKey||c.shiftKey||c.altKey)){var d=e.findClosestDraggableId(c);if(d){var g=e.tryGetLock(d,i,{sourceEvent:c});if(g){c.preventDefault();var v={x:c.clientX,y:c.clientY};t.current(),f(g,v)}}}}}},[e]),l=me(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(c){if(!c.defaultPrevented){var d=e.findClosestDraggableId(c);if(d){var g=e.findOptionsForDraggable(d);g&&(g.shouldRespectForcePress||e.canGetLock(d)&&c.preventDefault())}}}}},[e]),a=ne(function(){var c={passive:!1,capture:!0};t.current=ir(window,[l,n],c)},[l,n]),i=ne(function(){var p=r.current;p.type!=="IDLE"&&(r.current=oi,t.current(),a())},[a]),o=ne(function(){var p=r.current;i(),p.type==="DRAGGING"&&p.actions.cancel({shouldBlockNextClick:!0}),p.type==="PENDING"&&p.actions.abort()},[i]),s=ne(function(){var c={capture:!0,passive:!1},d=qp({cancel:o,completed:i,getPhase:function(){return r.current},setPhase:function(v){r.current=v}});t.current=ir(window,d,c)},[o,i]),f=ne(function(c,d){r.current.type!=="IDLE"&&Z(!1),r.current={type:"PENDING",point:d,actions:c},s()},[s]);er(function(){return a(),function(){t.current()}},[a])}var $r;function Zp(){}var jp=($r={},$r[Op]=!0,$r[Np]=!0,$r[Fp]=!0,$r[Lp]=!0,$r);function Kp(e,r){function t(){r(),e.cancel()}function n(){r(),e.drop()}return[{eventName:"keydown",fn:function(a){if(a.keyCode===va){a.preventDefault(),t();return}if(a.keyCode===il){a.preventDefault(),n();return}if(a.keyCode===Wp){a.preventDefault(),e.moveDown();return}if(a.keyCode===Hp){a.preventDefault(),e.moveUp();return}if(a.keyCode===Gp){a.preventDefault(),e.moveRight();return}if(a.keyCode===zp){a.preventDefault(),e.moveLeft();return}if(jp[a.keyCode]){a.preventDefault();return}ol(a)}},{eventName:"mousedown",fn:t},{eventName:"mouseup",fn:t},{eventName:"click",fn:t},{eventName:"touchstart",fn:t},{eventName:"resize",fn:t},{eventName:"wheel",fn:t,options:{passive:!0}},{eventName:rn,fn:t}]}function Yp(e){var r=xe(Zp),t=me(function(){return{eventName:"keydown",fn:function(a){if(a.defaultPrevented||a.keyCode!==il)return;var i=e.findClosestDraggableId(a);if(!i)return;var o=e.tryGetLock(i,p,{sourceEvent:a});if(!o)return;a.preventDefault();var s=!0,f=o.snapLift();r.current();function p(){s||Z(!1),s=!1,r.current(),n()}r.current=ir(window,Kp(f,p),{capture:!0,passive:!1})}}},[e]),n=ne(function(){var a={passive:!1,capture:!0};r.current=ir(window,[t],a)},[t]);er(function(){return n(),function(){r.current()}},[n])}var pn={type:"IDLE"},Xp=120,Jp=.15;function Qp(e){var r=e.cancel,t=e.getPhase;return[{eventName:"orientationchange",fn:r},{eventName:"resize",fn:r},{eventName:"contextmenu",fn:function(l){l.preventDefault()}},{eventName:"keydown",fn:function(l){if(t().type!=="DRAGGING"){r();return}l.keyCode===va&&l.preventDefault(),r()}},{eventName:rn,fn:r}]}function ev(e){var r=e.cancel,t=e.completed,n=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(a){var i=n();if(i.type!=="DRAGGING"){r();return}i.hasMoved=!0;var o=a.touches[0],s=o.clientX,f=o.clientY,p={x:s,y:f};a.preventDefault(),i.actions.move(p)}},{eventName:"touchend",fn:function(a){var i=n();if(i.type!=="DRAGGING"){r();return}a.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:function(a){if(n().type!=="DRAGGING"){r();return}a.preventDefault(),r()}},{eventName:"touchforcechange",fn:function(a){var i=n();i.type==="IDLE"&&Z(!1);var o=a.touches[0];if(o){var s=o.force>=Jp;if(s){var f=i.actions.shouldRespectForcePress();if(i.type==="PENDING"){f&&r();return}if(f){if(i.hasMoved){a.preventDefault();return}r();return}a.preventDefault()}}}},{eventName:rn,fn:r}]}function rv(e){var r=xe(pn),t=xe(_r),n=ne(function(){return r.current},[]),l=ne(function(g){r.current=g},[]),a=me(function(){return{eventName:"touchstart",fn:function(g){if(!g.defaultPrevented){var v=e.findClosestDraggableId(g);if(v){var D=e.tryGetLock(v,o,{sourceEvent:g});if(D){var S=g.touches[0],b=S.clientX,w=S.clientY,C={x:b,y:w};t.current(),c(D,C)}}}}}},[e]),i=ne(function(){var g={capture:!0,passive:!1};t.current=ir(window,[a],g)},[a]),o=ne(function(){var d=r.current;d.type!=="IDLE"&&(d.type==="PENDING"&&clearTimeout(d.longPressTimerId),l(pn),t.current(),i())},[i,l]),s=ne(function(){var d=r.current;o(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[o]),f=ne(function(){var g={capture:!0,passive:!1},v={cancel:s,completed:o,getPhase:n},D=ir(window,ev(v),g),S=ir(window,Qp(v),g);t.current=function(){D(),S()}},[s,n,o]),p=ne(function(){var g=n();g.type!=="PENDING"&&Z(!1);var v=g.actions.fluidLift(g.point);l({type:"DRAGGING",actions:v,hasMoved:!1})},[n,l]),c=ne(function(g,v){n().type!=="IDLE"&&Z(!1);var D=setTimeout(p,Xp);l({type:"PENDING",point:v,actions:g,longPressTimerId:D}),f()},[f,n,l,p]);er(function(){return i(),function(){t.current();var v=n();v.type==="PENDING"&&(clearTimeout(v.longPressTimerId),l(pn))}},[n,i,l]),er(function(){var g=ir(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return g},[])}var tv={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function sl(e,r){if(r==null)return!1;var t=!!tv[r.tagName.toLowerCase()];if(t)return!0;var n=r.getAttribute("contenteditable");return n==="true"||n===""?!0:r===e?!1:sl(e,r.parentElement)}function nv(e,r){var t=r.target;return Qt(t)?sl(e,t):!1}var av=function(e){return cr(e.getBoundingClientRect()).center};function iv(e){return e instanceof nl(e).Element}var ov=function(){var e="matches";if(typeof document>"u")return e;var r=[e,"msMatchesSelector","webkitMatchesSelector"],t=kr(r,function(n){return n in Element.prototype});return t||e}();function cl(e,r){return e==null?null:e[ov](r)?e:cl(e.parentElement,r)}function lv(e,r){return e.closest?e.closest(r):cl(e,r)}function sv(e){return"["+jr.contextId+'="'+e+'"]'}function cv(e,r){var t=r.target;if(!iv(t))return null;var n=sv(e),l=lv(t,n);return!l||!Qt(l)?null:l}function uv(e,r){var t=cv(e,r);return t?t.getAttribute(jr.draggableId):null}function dv(e,r){var t="["+On.contextId+'="'+e+'"]',n=_o(document.querySelectorAll(t)),l=kr(n,function(a){return a.getAttribute(On.id)===r});return!l||!Qt(l)?null:l}function fv(e){e.preventDefault()}function At(e){var r=e.expected,t=e.phase,n=e.isLockActive;return e.shouldWarn,!(!n()||r!==t)}function ul(e){var r=e.lockAPI,t=e.store,n=e.registry,l=e.draggableId;if(r.isClaimed())return!1;var a=n.draggable.findById(l);return!(!a||!a.options.isEnabled||!Qo(t.getState(),l))}function pv(e){var r=e.lockAPI,t=e.contextId,n=e.store,l=e.registry,a=e.draggableId,i=e.forceSensorStop,o=e.sourceEvent,s=ul({lockAPI:r,store:n,registry:l,draggableId:a});if(!s)return null;var f=l.draggable.getById(a),p=dv(t,f.descriptor.id);if(!p||o&&!f.options.canDragInteractiveElements&&nv(p,o))return null;var c=r.claim(i||_r),d="PRE_DRAG";function g(){return f.options.shouldRespectForcePress}function v(){return r.isActive(c)}function D(T,_){At({expected:T,phase:d,isLockActive:v,shouldWarn:!0})&&n.dispatch(_())}var S=D.bind(null,"DRAGGING");function b(T){function _(){r.release(),d="COMPLETED"}d!=="PRE_DRAG"&&(_(),d!=="PRE_DRAG"&&Z(!1)),n.dispatch(of(T.liftActionArgs)),d="DRAGGING";function M(O,z){if(z===void 0&&(z={shouldBlockNextClick:!1}),T.cleanup(),z.shouldBlockNextClick){var L=ir(window,[{eventName:"click",fn:fv,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(L)}_(),n.dispatch(Vo({reason:O}))}return ee({isActive:function(){return At({expected:"DRAGGING",phase:d,isLockActive:v,shouldWarn:!1})},shouldRespectForcePress:g,drop:function(z){return M("DROP",z)},cancel:function(z){return M("CANCEL",z)}},T.actions)}function w(T){var _=ot(function(O){S(function(){return qo({client:O})})}),M=b({liftActionArgs:{id:a,clientSelection:T,movementMode:"FLUID"},cleanup:function(){return _.cancel()},actions:{move:_}});return ee({},M,{move:_})}function C(){var T={moveUp:function(){return S(gf)},moveRight:function(){return S(mf)},moveDown:function(){return S(hf)},moveLeft:function(){return S(bf)}};return b({liftActionArgs:{id:a,clientSelection:av(p),movementMode:"SNAP"},cleanup:_r,actions:T})}function I(){var T=At({expected:"PRE_DRAG",phase:d,isLockActive:v,shouldWarn:!0});T&&r.release()}var k={isActive:function(){return At({expected:"PRE_DRAG",phase:d,isLockActive:v,shouldWarn:!1})},shouldRespectForcePress:g,fluidLift:w,snapLift:C,abort:I};return k}var vv=[Vp,Yp,rv];function gv(e){var r=e.contextId,t=e.store,n=e.registry,l=e.customSensors,a=e.enableDefaultSensors,i=[].concat(a?vv:[],l||[]),o=dr(function(){return Pp()})[0],s=ne(function(w,C){w.isDragging&&!C.isDragging&&o.tryAbandon()},[o]);er(function(){var w=t.getState(),C=t.subscribe(function(){var I=t.getState();s(w,I),w=I});return C},[o,t,s]),er(function(){return o.tryAbandon},[o.tryAbandon]);for(var f=ne(function(b){return ul({lockAPI:o,registry:n,store:t,draggableId:b})},[o,n,t]),p=ne(function(b,w,C){return pv({lockAPI:o,registry:n,contextId:r,store:t,draggableId:b,forceSensorStop:w,sourceEvent:C&&C.sourceEvent?C.sourceEvent:null})},[r,o,n,t]),c=ne(function(b){return uv(r,b)},[r]),d=ne(function(b){var w=n.draggable.findById(b);return w?w.options:null},[n.draggable]),g=ne(function(){o.isClaimed()&&(o.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(aa()))},[o,t]),v=ne(o.isClaimed,[o]),D=me(function(){return{canGetLock:f,tryGetLock:p,findClosestDraggableId:c,findOptionsForDraggable:d,tryReleaseLock:g,isLockClaimed:v}},[f,p,c,d,g,v]),S=0;S<i.length;S++)i[S](D)}var hv=function(r){return{onBeforeCapture:r.onBeforeCapture,onBeforeDragStart:r.onBeforeDragStart,onDragStart:r.onDragStart,onDragEnd:r.onDragEnd,onDragUpdate:r.onDragUpdate}};function tt(e){return e.current||Z(!1),e.current}function mv(e){var r=e.contextId,t=e.setCallbacks,n=e.sensors,l=e.nonce,a=e.dragHandleUsageInstructions,i=xe(null),o=al(e),s=ne(function(){return hv(o.current)},[o]),f=Ep(r),p=Rp({contextId:r,text:a}),c=wp(r,l),d=ne(function(O){tt(i).dispatch(O)},[]),g=me(function(){return Ba({publishWhileDragging:sf,updateDroppableScroll:uf,updateDroppableIsEnabled:df,updateDroppableIsCombineEnabled:ff,collectionStarting:cf},d)},[d]),v=Cp(),D=me(function(){return Jf(v,g)},[v,g]),S=me(function(){return gp(ee({scrollWindow:Qf,scrollDroppable:D.scrollDroppable},Ba({move:qo},d)))},[D.scrollDroppable,d]),b=Dp(r),w=me(function(){return jf({announce:f,autoScroller:S,dimensionMarshal:D,focusMarshal:b,getResponders:s,styleMarshal:c})},[f,S,D,b,s,c]);i.current=w;var C=ne(function(){var O=tt(i),z=O.getState();z.phase!=="IDLE"&&O.dispatch(aa())},[]),I=ne(function(){var O=tt(i).getState();return O.isDragging||O.phase==="DROP_ANIMATING"},[]),k=me(function(){return{isDragging:I,tryAbort:C}},[I,C]);t(k);var T=ne(function(O){return Qo(tt(i).getState(),O)},[]),_=ne(function(){return Nr(tt(i).getState())},[]),M=me(function(){return{marshal:D,focus:b,contextId:r,canLift:T,isMovementAllowed:_,dragHandleUsageInstructionsId:p,registry:v}},[r,D,p,b,T,_,v]);return gv({contextId:r,store:w,registry:v,customSensors:n,enableDefaultSensors:e.enableDefaultSensors!==!1}),Ae(function(){return C},[C]),ye.createElement(en.Provider,{value:M},ye.createElement(Xc,{context:fa,store:w},e.children))}var bv=0;function yv(){return me(function(){return""+bv++},[])}function dl(e){var r=yv(),t=e.dragHandleUsageInstructions||Rt.dragHandleUsageInstructions;return ye.createElement(Ku,null,function(n){return ye.createElement(mv,{nonce:e.nonce,contextId:r,setCallbacks:n,dragHandleUsageInstructions:t,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var fl=function(r){return function(t){return r===t}},wv=fl("scroll"),xv=fl("auto"),li=function(r,t){return t(r.overflowX)||t(r.overflowY)},Dv=function(r){var t=window.getComputedStyle(r),n={overflowX:t.overflowX,overflowY:t.overflowY};return li(n,wv)||li(n,xv)},Sv=function(){return!1},Cv=function e(r){return r==null?null:r===document.body?Sv()?r:null:r===document.documentElement?null:Dv(r)?r:e(r.parentElement)},Ln=function(e){return{x:e.scrollLeft,y:e.scrollTop}},_v=function e(r){if(!r)return!1;var t=window.getComputedStyle(r);return t.position==="fixed"?!0:e(r.parentElement)},Iv=function(e){var r=Cv(e),t=_v(e);return{closestScrollable:r,isFixedOnPage:t}},Ev=function(e){var r=e.descriptor,t=e.isEnabled,n=e.isCombineEnabled,l=e.isFixedOnPage,a=e.direction,i=e.client,o=e.page,s=e.closest,f=function(){if(!s)return null;var g=s.scrollSize,v=s.client,D=Yo({scrollHeight:g.scrollHeight,scrollWidth:g.scrollWidth,height:v.paddingBox.height,width:v.paddingBox.width});return{pageMarginBox:s.page.marginBox,frameClient:v,scrollSize:g,shouldClipSubject:s.shouldClipSubject,scroll:{initial:s.scroll,current:s.scroll,max:D,diff:{value:He,displacement:He}}}}(),p=a==="vertical"?Qn:To,c=Vr({page:o,withPlaceholder:null,axis:p,frame:f}),d={descriptor:r,isCombineEnabled:n,isFixedOnPage:l,axis:p,isEnabled:t,client:i,page:o,frame:f,subject:c};return d},Av=function(r,t){var n=wo(r);if(!t||r!==t)return n;var l=n.paddingBox.top-t.scrollTop,a=n.paddingBox.left-t.scrollLeft,i=l+t.scrollHeight,o=a+t.scrollWidth,s={top:l,right:o,bottom:i,left:a},f=jn(s,n.border),p=Kn({borderBox:f,margin:n.margin,border:n.border,padding:n.padding});return p},kv=function(e){var r=e.ref,t=e.descriptor,n=e.env,l=e.windowScroll,a=e.direction,i=e.isDropDisabled,o=e.isCombineEnabled,s=e.shouldClipSubject,f=n.closestScrollable,p=Av(r,f),c=Nt(p,l),d=function(){if(!f)return null;var v=wo(f),D={scrollHeight:f.scrollHeight,scrollWidth:f.scrollWidth};return{client:v,page:Nt(v,l),scroll:Ln(f),scrollSize:D,shouldClipSubject:s}}(),g=Ev({descriptor:t,isEnabled:!i,isCombineEnabled:o,isFixedOnPage:n.isFixedOnPage,direction:a,client:p,page:c,closest:d});return g},Tv={passive:!1},Rv={passive:!0},si=function(e){return e.shouldPublishImmediately?Tv:Rv};function Gt(e){var r=Hn(e);return r||Z(!1),r}var kt=function(r){return r&&r.env.closestScrollable||null};function Pv(e){var r=xe(null),t=Gt(en),n=pa("droppable"),l=t.registry,a=t.marshal,i=al(e),o=me(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),s=xe(o),f=me(function(){return ze(function(I,k){r.current||Z(!1);var T={x:I,y:k};a.updateDroppableScroll(o.id,T)})},[o.id,a]),p=ne(function(){var I=r.current;return!I||!I.env.closestScrollable?He:Ln(I.env.closestScrollable)},[]),c=ne(function(){var I=p();f(I.x,I.y)},[p,f]),d=me(function(){return ot(c)},[c]),g=ne(function(){var I=r.current,k=kt(I);I&&k||Z(!1);var T=I.scrollOptions;if(T.shouldPublishImmediately){c();return}d()},[d,c]),v=ne(function(I,k){r.current&&Z(!1);var T=i.current,_=T.getDroppableRef();_||Z(!1);var M=Iv(_),O={ref:_,descriptor:o,env:M,scrollOptions:k};r.current=O;var z=kv({ref:_,descriptor:o,env:M,windowScroll:I,direction:T.direction,isDropDisabled:T.isDropDisabled,isCombineEnabled:T.isCombineEnabled,shouldClipSubject:!T.ignoreContainerClipping}),L=M.closestScrollable;return L&&(L.setAttribute(ni.contextId,t.contextId),L.addEventListener("scroll",g,si(O.scrollOptions))),z},[t.contextId,o,g,i]),D=ne(function(){var I=r.current,k=kt(I);return I&&k||Z(!1),Ln(k)},[]),S=ne(function(){var I=r.current;I||Z(!1);var k=kt(I);r.current=null,k&&(d.cancel(),k.removeAttribute(ni.contextId),k.removeEventListener("scroll",g,si(I.scrollOptions)))},[g,d]),b=ne(function(I){var k=r.current;k||Z(!1);var T=kt(k);T||Z(!1),T.scrollTop+=I.y,T.scrollLeft+=I.x},[]),w=me(function(){return{getDimensionAndWatchScroll:v,getScrollWhileDragging:D,dragStopped:S,scroll:b}},[S,v,D,b]),C=me(function(){return{uniqueId:n,descriptor:o,callbacks:w}},[w,o,n]);er(function(){return s.current=C.descriptor,l.droppable.register(C),function(){r.current&&S(),l.droppable.unregister(C)}},[w,o,S,C,a,l.droppable]),er(function(){r.current&&a.updateDroppableIsEnabled(s.current.id,!e.isDropDisabled)},[e.isDropDisabled,a]),er(function(){r.current&&a.updateDroppableIsCombineEnabled(s.current.id,e.isCombineEnabled)},[e.isCombineEnabled,a])}function vn(){}var ci={width:0,height:0,margin:rd},Bv=function(r){var t=r.isAnimatingOpenOnMount,n=r.placeholder,l=r.animate;return t||l==="close"?ci:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}},Mv=function(r){var t=r.isAnimatingOpenOnMount,n=r.placeholder,l=r.animate,a=Bv({isAnimatingOpenOnMount:t,placeholder:n,animate:l});return{display:n.display,boxSizing:"border-box",width:a.width,height:a.height,marginTop:a.margin.top,marginRight:a.margin.right,marginBottom:a.margin.bottom,marginLeft:a.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:l!=="none"?at.placeholder:null}};function Nv(e){var r=xe(null),t=ne(function(){r.current&&(clearTimeout(r.current),r.current=null)},[]),n=e.animate,l=e.onTransitionEnd,a=e.onClose,i=e.contextId,o=dr(e.animate==="open"),s=o[0],f=o[1];Ae(function(){return s?n!=="open"?(t(),f(!1),vn):r.current?vn:(r.current=setTimeout(function(){r.current=null,f(!1)}),t):vn},[n,s,t]);var p=ne(function(d){d.propertyName==="height"&&(l(),n==="close"&&a())},[n,a,l]),c=Mv({isAnimatingOpenOnMount:s,animate:e.animate,placeholder:e.placeholder});return ye.createElement(e.placeholder.tagName,{style:c,"data-rbd-placeholder-context-id":i,onTransitionEnd:p,ref:e.innerRef})}var Ov=ye.memo(Nv),ga=ye.createContext(null),Lv=function(e){Vi(r,e);function r(){for(var n,l=arguments.length,a=new Array(l),i=0;i<l;i++)a[i]=arguments[i];return n=e.call.apply(e,[this].concat(a))||this,n.state={isVisible:!!n.props.on,data:n.props.on,animate:n.props.shouldAnimate&&n.props.on?"open":"none"},n.onClose=function(){n.state.animate==="close"&&n.setState({isVisible:!1})},n}r.getDerivedStateFromProps=function(l,a){return l.shouldAnimate?l.on?{isVisible:!0,data:l.on,animate:"open"}:a.isVisible?{isVisible:!0,data:a.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!l.on,data:l.on,animate:"none"}};var t=r.prototype;return t.render=function(){if(!this.state.isVisible)return null;var l={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(l)},r}(ye.PureComponent),ui={dragging:5e3,dropAnimating:4500},Fv=function(r,t){return t?at.drop(t.duration):r?at.snap:at.fluid},zv=function(r,t){return r?t?ut.opacity.drop:ut.opacity.combining:null},Hv=function(r){return r.forceShouldAnimate!=null?r.forceShouldAnimate:r.mode==="SNAP"};function Gv(e){var r=e.dimension,t=r.client,n=e.offset,l=e.combineWith,a=e.dropping,i=!!l,o=Hv(e),s=!!a,f=s?Mn.drop(n,i):Mn.moveTo(n),p={position:"fixed",top:t.marginBox.top,left:t.marginBox.left,boxSizing:"border-box",width:t.borderBox.width,height:t.borderBox.height,transition:Fv(o,a),transform:f,opacity:zv(i,s),zIndex:s?ui.dropAnimating:ui.dragging,pointerEvents:"none"};return p}function Wv(e){return{transform:Mn.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}function $v(e){return e.type==="DRAGGING"?Gv(e):Wv(e)}function Uv(e,r,t){t===void 0&&(t=He);var n=window.getComputedStyle(r),l=r.getBoundingClientRect(),a=yo(l,n),i=Nt(a,t),o={client:a,tagName:r.tagName.toLowerCase(),display:n.display},s={x:a.marginBox.width,y:a.marginBox.height},f={descriptor:e,placeholder:o,displaceBy:s,client:a,page:i};return f}function qv(e){var r=pa("draggable"),t=e.descriptor,n=e.registry,l=e.getDraggableRef,a=e.canDragInteractiveElements,i=e.shouldRespectForcePress,o=e.isEnabled,s=me(function(){return{canDragInteractiveElements:a,shouldRespectForcePress:i,isEnabled:o}},[a,o,i]),f=ne(function(g){var v=l();return v||Z(!1),Uv(t,v,g)},[t,l]),p=me(function(){return{uniqueId:r,descriptor:t,options:s,getDimension:f}},[t,f,s,r]),c=xe(p),d=xe(!0);er(function(){return n.draggable.register(c.current),function(){return n.draggable.unregister(c.current)}},[n.draggable]),er(function(){if(d.current){d.current=!1;return}var g=c.current;c.current=p,n.draggable.update(p,g)},[p,n.draggable])}function Vv(e){e.preventDefault()}function Zv(e){var r=xe(null),t=ne(function(O){r.current=O},[]),n=ne(function(){return r.current},[]),l=Gt(en),a=l.contextId,i=l.dragHandleUsageInstructionsId,o=l.registry,s=Gt(ga),f=s.type,p=s.droppableId,c=me(function(){return{id:e.draggableId,index:e.index,type:f,droppableId:p}},[e.draggableId,e.index,f,p]),d=e.children,g=e.draggableId,v=e.isEnabled,D=e.shouldRespectForcePress,S=e.canDragInteractiveElements,b=e.isClone,w=e.mapped,C=e.dropAnimationFinished;if(!b){var I=me(function(){return{descriptor:c,registry:o,getDraggableRef:n,canDragInteractiveElements:S,shouldRespectForcePress:D,isEnabled:v}},[c,o,n,S,D,v]);qv(I)}var k=me(function(){return v?{tabIndex:0,role:"button","aria-describedby":i,"data-rbd-drag-handle-draggable-id":g,"data-rbd-drag-handle-context-id":a,draggable:!1,onDragStart:Vv}:null},[a,i,g,v]),T=ne(function(O){w.type==="DRAGGING"&&w.dropping&&O.propertyName==="transform"&&C()},[C,w]),_=me(function(){var O=$v(w),z=w.type==="DRAGGING"&&w.dropping?T:null,L={innerRef:t,draggableProps:{"data-rbd-draggable-context-id":a,"data-rbd-draggable-id":g,style:O,onTransitionEnd:z},dragHandleProps:k};return L},[a,k,g,w,T,t]),M=me(function(){return{draggableId:c.id,type:c.type,source:{index:c.index,droppableId:c.droppableId}}},[c.droppableId,c.id,c.index,c.type]);return d(_,w.snapshot,M)}var pl=function(e,r){return e===r},vl=function(e){var r=e.combine,t=e.destination;return t?t.droppableId:r?r.droppableId:null},jv=function(r){return r.combine?r.combine.draggableId:null},Kv=function(r){return r.at&&r.at.type==="COMBINE"?r.at.combine.draggableId:null};function Yv(){var e=ze(function(l,a){return{x:l,y:a}}),r=ze(function(l,a,i,o,s){return{isDragging:!0,isClone:a,isDropAnimating:!!s,dropAnimation:s,mode:l,draggingOver:i,combineWith:o,combineTargetFor:null}}),t=ze(function(l,a,i,o,s,f,p){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:s,combineWith:f,mode:a,offset:l,dimension:i,forceShouldAnimate:p,snapshot:r(a,o,s,f,null)}}}),n=function(a,i){if(a.isDragging){if(a.critical.draggable.id!==i.draggableId)return null;var o=a.current.client.offset,s=a.dimensions.draggables[i.draggableId],f=Qe(a.impact),p=Kv(a.impact),c=a.forceShouldAnimate;return t(e(o.x,o.y),a.movementMode,s,i.isClone,f,p,c)}if(a.phase==="DROP_ANIMATING"){var d=a.completed;if(d.result.draggableId!==i.draggableId)return null;var g=i.isClone,v=a.dimensions.draggables[i.draggableId],D=d.result,S=D.mode,b=vl(D),w=jv(D),C=a.dropDuration,I={duration:C,curve:oa.drop,moveTo:a.newHomeClientOffset,opacity:w?ut.opacity.drop:null,scale:w?ut.scale.drop:null};return{mapped:{type:"DRAGGING",offset:a.newHomeClientOffset,dimension:v,dropping:I,draggingOver:b,combineWith:w,mode:S,forceShouldAnimate:null,snapshot:r(S,g,b,w,I)}}}return null};return n}function gl(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var Xv={mapped:{type:"SECONDARY",offset:He,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:gl(null)}};function Jv(){var e=ze(function(i,o){return{x:i,y:o}}),r=ze(gl),t=ze(function(i,o,s){return o===void 0&&(o=null),{mapped:{type:"SECONDARY",offset:i,combineTargetFor:o,shouldAnimateDisplacement:s,snapshot:r(o)}}}),n=function(o){return o?t(He,o,!0):null},l=function(o,s,f,p){var c=f.displaced.visible[o],d=!!(p.inVirtualList&&p.effected[o]),g=Yt(f),v=g&&g.draggableId===o?s:null;if(!c){if(!d)return n(v);if(f.displaced.invisible[o])return null;var D=Xr(p.displacedBy.point),S=e(D.x,D.y);return t(S,v,!0)}if(d)return n(v);var b=f.displacedBy.point,w=e(b.x,b.y);return t(w,v,c.shouldAnimate)},a=function(o,s){if(o.isDragging)return o.critical.draggable.id===s.draggableId?null:l(s.draggableId,o.critical.draggable.id,o.impact,o.afterCritical);if(o.phase==="DROP_ANIMATING"){var f=o.completed;return f.result.draggableId===s.draggableId?null:l(s.draggableId,f.result.draggableId,f.impact,f.afterCritical)}return null};return a}var Qv=function(){var r=Yv(),t=Jv(),n=function(a,i){return r(a,i)||t(a,i)||Xv};return n},eg={dropAnimationFinished:Zo},rg=mo(Qv,eg,null,{context:fa,pure:!0,areStatePropsEqual:pl})(Zv);function hl(e){var r=Gt(ga),t=r.isUsingCloneFor;return t===e.draggableId&&!e.isClone?null:ye.createElement(rg,e)}function ml(e){var r=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,t=!!e.disableInteractiveElementBlocking,n=!!e.shouldRespectForcePress;return ye.createElement(hl,ee({},e,{isClone:!1,isEnabled:r,canDragInteractiveElements:t,shouldRespectForcePress:n}))}function tg(e){var r=Hn(en);r||Z(!1);var t=r.contextId,n=r.isMovementAllowed,l=xe(null),a=xe(null),i=e.children,o=e.droppableId,s=e.type,f=e.mode,p=e.direction,c=e.ignoreContainerClipping,d=e.isDropDisabled,g=e.isCombineEnabled,v=e.snapshot,D=e.useClone,S=e.updateViewportMaxScroll,b=e.getContainerForClone,w=ne(function(){return l.current},[]),C=ne(function(L){l.current=L},[]);ne(function(){return a.current},[]);var I=ne(function(L){a.current=L},[]),k=ne(function(){n()&&S({maxScroll:Jo()})},[n,S]);Pv({droppableId:o,type:s,mode:f,direction:p,isDropDisabled:d,isCombineEnabled:g,ignoreContainerClipping:c,getDroppableRef:w});var T=ye.createElement(Lv,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(L){var U=L.onClose,W=L.data,q=L.animate;return ye.createElement(Ov,{placeholder:W,onClose:U,innerRef:I,animate:q,contextId:t,onTransitionEnd:k})}),_=me(function(){return{innerRef:C,placeholder:T,droppableProps:{"data-rbd-droppable-id":o,"data-rbd-droppable-context-id":t}}},[t,o,T,C]),M=D?D.dragging.draggableId:null,O=me(function(){return{droppableId:o,type:s,isUsingCloneFor:M}},[o,M,s]);function z(){if(!D)return null;var L=D.dragging,U=D.render,W=ye.createElement(hl,{draggableId:L.draggableId,index:L.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(q,Q){return U(q,Q,L)});return ye.createPortal(W,b())}return ye.createElement(ga.Provider,{value:O},i(_,v),z())}var gn=function(r,t){return r===t.droppable.type},di=function(r,t){return t.draggables[r.draggable.id]},ng=function(){var r={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t=ee({},r,{shouldAnimatePlaceholder:!1}),n=ze(function(i){return{draggableId:i.id,type:i.type,source:{index:i.index,droppableId:i.droppableId}}}),l=ze(function(i,o,s,f,p,c){var d=p.descriptor.id,g=p.descriptor.droppableId===i;if(g){var v=c?{render:c,dragging:n(p.descriptor)}:null,D={isDraggingOver:s,draggingOverWith:s?d:null,draggingFromThisWith:d,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!1,snapshot:D,useClone:v}}if(!o)return t;if(!f)return r;var S={isDraggingOver:s,draggingOverWith:d,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!0,snapshot:S,useClone:null}}),a=function(o,s){var f=s.droppableId,p=s.type,c=!s.isDropDisabled,d=s.renderClone;if(o.isDragging){var g=o.critical;if(!gn(p,g))return t;var v=di(g,o.dimensions),D=Qe(o.impact)===f;return l(f,c,D,D,v,d)}if(o.phase==="DROP_ANIMATING"){var S=o.completed;if(!gn(p,S.critical))return t;var b=di(S.critical,o.dimensions);return l(f,c,vl(S.result)===f,Qe(S.impact)===f,b,d)}if(o.phase==="IDLE"&&o.completed&&!o.shouldFlush){var w=o.completed;if(!gn(p,w.critical))return t;var C=Qe(w.impact)===f,I=!!(w.impact.at&&w.impact.at.type==="COMBINE"),k=w.critical.droppable.id===f;return C?I?r:t:k?r:t}return t};return a},ag={updateViewportMaxScroll:vf};function ig(){return document.body||Z(!1),document.body}var og={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:ig},ha=mo(ng,ag,null,{context:fa,pure:!0,areStatePropsEqual:pl})(tg);ha.defaultProps=og;const lg=[{value:1,label:"Dot"},{value:2,label:"Ellipse"},{value:3,label:"Line"},{value:4,label:"Square"}],sg={bloom:[{propName:"enabled",label:"Enabled",type:"boolean"},{propName:"threshold",label:"Threshold",title:"Brightness threshold to start applying effect",type:"slider",min:0,max:1,step:.05},{propName:"strength",label:"Strength",title:"Strength of the effect",type:"slider",min:0,max:2,step:.05},{propName:"radius",label:"Radius",title:"Blur radius",type:"number",step:.5}],pixel:[{propName:"enabled",label:"Enabled",type:"boolean"},{propName:"size",label:"Pixel Size",type:"number",min:1,step:1}],afterimage:[{propName:"enabled",label:"Enabled",type:"boolean"},{propName:"damp",label:"Damp",type:"slider",min:.01,max:.99,step:.01}],smaa:[{propName:"enabled",label:"Enabled",type:"boolean"}],sobel:[{propName:"enabled",label:"Enabled",type:"boolean"}],halftone:[{propName:"enabled",label:"Enabled",type:"boolean"},{propName:"greyscale",label:"Grayscale",type:"boolean"},{propName:"radius",label:"Radius",type:"number",min:1,step:.2},{propName:"scatter",label:"Scatter",type:"slider",min:0,max:5,step:.1},{propName:"shape",label:"Shape",type:"select",options:lg}],dotscreen:[{propName:"enabled",label:"Enabled",type:"boolean"},{propName:"scale",label:"Scale",type:"number",min:1,step:.5}],bokeh:[{propName:"enabled",label:"Enabled",type:"boolean"},{propName:"focus",label:"Focus",type:"number",step:.1},{propName:"aperture",label:"Aperture",type:"number",step:.01}]};function cg({target:e,index:r}){const[t,n]=bs(e.open??!1),{type:l}=e,{name:a}=Fl[l],i=()=>{e.open=!t,n()},s=h(mr,{title:"Remove",className:"closeButton",onClick:c=>{c.stopPropagation(),e.remove()},children:h(Wn,{})}),f=sg[l],p=c=>h("div",{className:`EffectController ${t?"open":""}`,...c.draggableProps,ref:c.innerRef,children:[h("div",{className:"EffectController-summary",onClick:i,children:[t?h(cs,{}):h(us,{}),h("div",{className:"EffectController-name",...c.dragHandleProps,children:a}),s]}),t&&h("div",{className:"EffectController-details",children:h(ur,{target:e.params,propList:f})})]});return h(ml,{draggableId:e.id,index:r,children:p})}const ug={propName:"enabled",label:"Enabled",type:"boolean"};function dg(){const[e,r]=br(),{passes:t}=F.postProcessing;Ae(()=>{const i=t.addEventListener("change",r);return()=>t.removeEventListener("change",i)},[]);const n=i=>void F.postProcessing.addPass(i),l=i=>{const{destination:o,source:s}=i;if(!o||o.index===s.index)return;const f=[...t],p=f.splice(s.index,1)[0];f.splice(o.index,0,p),F.postProcessing.updatePasses(f)},a=i=>h("div",{ref:i.innerRef,...i.droppableProps,children:[t.map((o,s)=>h(cg,{index:s,target:o},o.id)),i.placeholder]});return h(Ve,{disableGutters:!0,className:"PostProcessingControl SettingGroup",children:[h(ie,{children:[h("div",{children:"Post-Processing"}),h(ro,{onClick:n,options:zl,title:"Add Pass",children:h(Ut,{})})]}),h(ye.Fragment,{children:[h(ur,{target:F.postProcessing,propList:[ug]}),t.length?h(dl,{onDragEnd:l,children:h(ha,{droppableId:"postprocessing",children:a})}):"Click + to add pass"]},e)]})}const fg=[{propName:"near",label:"Near",type:"number",min:.01,step:.01,onChange:()=>F.camera.updateProjectionMatrix()},{propName:"far",label:"Far",type:"number",min:.01,step:20,onChange:()=>F.camera.updateProjectionMatrix()},{propName:"fov",label:"FOV",type:"slider",title:"Field of View",min:5,max:175,step:5,onChange:()=>F.camera.updateProjectionMatrix()},{propName:"position",label:"Position",type:"vector",title:"Where the camera is",step:.1,onChange:()=>F.camera.updateProjectionMatrix()}],pg=[{propName:"target",label:"Target",type:"vector",title:"Camera target, where the camera looks at",step:.1,onChange:()=>F.controls.update()}];function vg(){const{camera:e}=F,[r,t]=br(),n=l=>{l.stopPropagation(),["near","far","fov"].forEach(a=>e[a]=Hl[a]),e.updateProjectionMatrix(),t()};return h(Ve,{disableGutters:!0,className:"SettingGroup DisplayControl",children:[h(ie,{children:[h("div",{className:"title",children:[h(Js,{}),"Camera"]}),h(fe,{onClick:n,title:"Reset camera settings",variant:"contained",children:"Reset"})]}),h(ie,{children:[h(ur,{target:e,propList:fg},r),h(ur,{target:F.controls,propList:pg})]})]})}function gg(){const e=Be(a=>a.sidebar.modal.open),{showTimeControl:r,toggleTimeControl:t,showFrameRate:n,toggleFrameRate:l}=Be();return h(ie,{children:[h(Oc,{}),h(vg,{}),h(Fc,{}),h("span",{className:"break"}),h(fe,{variant:"contained",onClick:l,startIcon:h(lc,{}),children:n?"Hide Frame Rate":"Show Frame Rate"}),h(fe,{variant:"contained",onClick:t,startIcon:r?h(uc,{}):h(cc,{}),children:r?"Hide Time Control":"Show Time Control"}),h("span",{className:"break"}),h(fe,{variant:"contained",onClick:()=>e("background"),startIcon:h(Ji,{}),children:"Background Settings"}),h(Gc,{}),h(dg,{})]})}async function hg(e,r={}){const{GLTFExporter:t}=await Wt(()=>import("./00ebb0f9-GLTFExporter.js"),["assets/00ebb0f9-GLTFExporter.js","assets/6f5f1b8d-three.js"]),l=await new t().parseAsync(e,r);return r.binary?new Blob([l]):new Blob([JSON.stringify(l)],{type:"application/json"})}async function mg({binary:e=!1}){var s;const r=_e.getState().activeModel;if(!r)return;const{model:t}=r,n=e?"glb":"gltf",l=`${((s=r.userData)==null?void 0:s.name)??r.id}.${n}`,a=r.animation.current.chainName,i=r.animation.chain[a].clips??[],o=await hg(t,{binary:e,animations:i,onlyVisible:!0});xr.saveAs(o,l)}function bg(){const e=r=>{r.stopPropagation();const t=!!r.currentTarget.dataset.binary;mg({binary:t})};return h(Ve,{className:"SettingGroup",children:[h(ie,{children:[h("div",{children:"glTF"}),h(fe,{onClick:e,title:"Download current model as glTF",variant:"contained",children:h(Or,{})})]}),h(ie,{children:h("div",{children:[h(fe,{onClick:e,title:"Download current model as glTF",children:[h(Or,{}),"glTF"]}),h(fe,{"data-binary":!0,onClick:e,title:"Download current model as glb (binary glTF)",children:[h(Or,{}),"glb"]})]})})]})}const yg=()=>{const{activeModel:{animation:e}}=_e.getState(),{record:r}=F;e.stop(),e.addCountedEventListener("ChainFinished",()=>r.stop()),e.play(),r.start()},wg=[{propName:"fileName",label:"File Name",type:"string",fullWidth:!0},{propName:"appendDate",label:"Append Date",type:"boolean"},{propName:"frameRate",label:"Frame Rate",type:"slider",min:10,max:60,step:5}];function xg(){const[e,r]=dr(F.record.state),t=o=>{var f,p;const{action:s}=o.currentTarget.dataset;(p=(f=F.record)[s])==null||p.call(f),r(s==="stop"?"idle":F.record.state)},n=h(fe,{onClick:t,"data-action":e==="idle"?"start":"resume",title:e==="idle"?"Start recording":"Resume recording",children:h(Vt,{})}),l=h(fe,{onClick:t,"data-action":"pause",title:"Pause Recording",children:h(_s,{})}),a=h(fe,{onClick:t,"data-action":"stop",title:"Finish Recording",children:h(sc,{})}),i={idle:n,recording:h(ie,{children:[l,a]}),paused:h(ie,{children:[n,a]})};return h(ie,{children:[h("div",{children:`Status: ${Gl(e)}`}),h("div",{children:i[e]})]})}function Dg(){const{activeModel:e}=_e(),{record:r}=F,t=n=>{n.stopPropagation();const{clipDuration:l}=e.animation.current;if(l===0||l===1/0){alert("Can't record");return}yg()};return r?h(Ve,{className:"SettingGroup",children:[h(ie,{children:[h("div",{children:"Record"}),h(fe,{onClick:t,title:"Record current animation",variant:"contained",children:h(Vt,{})})]}),h(ie,{children:[h(ur,{target:r.settings,propList:wg}),h(Ve,{disableGutters:!0,className:"SettingGroup-extra",children:[h(ie,{children:"Manual Record"}),h(xg,{})]})]})]}):h(ie,{})}const Sg=[{propName:"fileName",label:"File Name",type:"string",fullWidth:!0},{propName:"noBackground",label:"Remove BG",type:"boolean"},{propName:"frameRate",label:"Frame Rate",type:"number",fullWidth:!0,min:1,max:120,step:10}],Cg=e=>{const[r,t]=e.split(","),n=r.split(";")[0].split(":")[1],l=window.atob(t),a=l.length,i=new Array(a).fill().map((s,f)=>l.charCodeAt(f)),o=new Uint8Array(i);return new Blob([o],{type:n})};function _g(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var bl={exports:{}},hn={},fi;function Tr(){return fi||(fi=1,function(e){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function t(a,i){return Object.prototype.hasOwnProperty.call(a,i)}e.assign=function(a){for(var i=Array.prototype.slice.call(arguments,1);i.length;){var o=i.shift();if(o){if(typeof o!="object")throw new TypeError(o+"must be non-object");for(var s in o)t(o,s)&&(a[s]=o[s])}}return a},e.shrinkBuf=function(a,i){return a.length===i?a:a.subarray?a.subarray(0,i):(a.length=i,a)};var n={arraySet:function(a,i,o,s,f){if(i.subarray&&a.subarray){a.set(i.subarray(o,o+s),f);return}for(var p=0;p<s;p++)a[f+p]=i[o+p]},flattenChunks:function(a){var i,o,s,f,p,c;for(s=0,i=0,o=a.length;i<o;i++)s+=a[i].length;for(c=new Uint8Array(s),f=0,i=0,o=a.length;i<o;i++)p=a[i],c.set(p,f),f+=p.length;return c}},l={arraySet:function(a,i,o,s,f){for(var p=0;p<s;p++)a[f+p]=i[o+p]},flattenChunks:function(a){return[].concat.apply([],a)}};e.setTyped=function(a){a?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,n)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,l))},e.setTyped(r)}(hn)),hn}var Ur={},sr={},Pr={},pi;function Ig(){if(pi)return Pr;pi=1;var e=Tr(),r=4,t=0,n=1,l=2;function a(x){for(var G=x.length;--G>=0;)x[G]=0}var i=0,o=1,s=2,f=3,p=258,c=29,d=256,g=d+1+c,v=30,D=19,S=2*g+1,b=15,w=16,C=7,I=256,k=16,T=17,_=18,M=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],O=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],L=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],U=512,W=new Array((g+2)*2);a(W);var q=new Array(v*2);a(q);var Q=new Array(U);a(Q);var K=new Array(p-f+1);a(K);var j=new Array(c);a(j);var H=new Array(v);a(H);function re(x,G,V,X,A){this.static_tree=x,this.extra_bits=G,this.extra_base=V,this.elems=X,this.max_length=A,this.has_stree=x&&x.length}var ve,Ie,de;function De(x,G){this.dyn_tree=x,this.max_code=0,this.stat_desc=G}function Ce(x){return x<256?Q[x]:Q[256+(x>>>7)]}function ge(x,G){x.pending_buf[x.pending++]=G&255,x.pending_buf[x.pending++]=G>>>8&255}function ce(x,G,V){x.bi_valid>w-V?(x.bi_buf|=G<<x.bi_valid&65535,ge(x,x.bi_buf),x.bi_buf=G>>w-x.bi_valid,x.bi_valid+=V-w):(x.bi_buf|=G<<x.bi_valid&65535,x.bi_valid+=V)}function be(x,G,V){ce(x,V[G*2],V[G*2+1])}function se(x,G){var V=0;do V|=x&1,x>>>=1,V<<=1;while(--G>0);return V>>>1}function ae(x){x.bi_valid===16?(ge(x,x.bi_buf),x.bi_buf=0,x.bi_valid=0):x.bi_valid>=8&&(x.pending_buf[x.pending++]=x.bi_buf&255,x.bi_buf>>=8,x.bi_valid-=8)}function ke(x,G){var V=G.dyn_tree,X=G.max_code,A=G.stat_desc.static_tree,N=G.stat_desc.has_stree,m=G.stat_desc.extra_bits,$=G.stat_desc.extra_base,le=G.stat_desc.max_length,u,P,B,y,E,R,te=0;for(y=0;y<=b;y++)x.bl_count[y]=0;for(V[x.heap[x.heap_max]*2+1]=0,u=x.heap_max+1;u<S;u++)P=x.heap[u],y=V[V[P*2+1]*2+1]+1,y>le&&(y=le,te++),V[P*2+1]=y,!(P>X)&&(x.bl_count[y]++,E=0,P>=$&&(E=m[P-$]),R=V[P*2],x.opt_len+=R*(y+E),N&&(x.static_len+=R*(A[P*2+1]+E)));if(te!==0){do{for(y=le-1;x.bl_count[y]===0;)y--;x.bl_count[y]--,x.bl_count[y+1]+=2,x.bl_count[le]--,te-=2}while(te>0);for(y=le;y!==0;y--)for(P=x.bl_count[y];P!==0;)B=x.heap[--u],!(B>X)&&(V[B*2+1]!==y&&(x.opt_len+=(y-V[B*2+1])*V[B*2],V[B*2+1]=y),P--)}}function Ne(x,G,V){var X=new Array(b+1),A=0,N,m;for(N=1;N<=b;N++)X[N]=A=A+V[N-1]<<1;for(m=0;m<=G;m++){var $=x[m*2+1];$!==0&&(x[m*2]=se(X[$]++,$))}}function oe(){var x,G,V,X,A,N=new Array(b+1);for(V=0,X=0;X<c-1;X++)for(j[X]=V,x=0;x<1<<M[X];x++)K[V++]=X;for(K[V-1]=X,A=0,X=0;X<16;X++)for(H[X]=A,x=0;x<1<<O[X];x++)Q[A++]=X;for(A>>=7;X<v;X++)for(H[X]=A<<7,x=0;x<1<<O[X]-7;x++)Q[256+A++]=X;for(G=0;G<=b;G++)N[G]=0;for(x=0;x<=143;)W[x*2+1]=8,x++,N[8]++;for(;x<=255;)W[x*2+1]=9,x++,N[9]++;for(;x<=279;)W[x*2+1]=7,x++,N[7]++;for(;x<=287;)W[x*2+1]=8,x++,N[8]++;for(Ne(W,g+1,N),x=0;x<v;x++)q[x*2+1]=5,q[x*2]=se(x,5);ve=new re(W,M,d+1,g,b),Ie=new re(q,O,0,v,b),de=new re(new Array(0),z,0,D,C)}function Ee(x){var G;for(G=0;G<g;G++)x.dyn_ltree[G*2]=0;for(G=0;G<v;G++)x.dyn_dtree[G*2]=0;for(G=0;G<D;G++)x.bl_tree[G*2]=0;x.dyn_ltree[I*2]=1,x.opt_len=x.static_len=0,x.last_lit=x.matches=0}function Ge(x){x.bi_valid>8?ge(x,x.bi_buf):x.bi_valid>0&&(x.pending_buf[x.pending++]=x.bi_buf),x.bi_buf=0,x.bi_valid=0}function We(x,G,V,X){Ge(x),X&&(ge(x,V),ge(x,~V)),e.arraySet(x.pending_buf,x.window,G,V,x.pending),x.pending+=V}function Re(x,G,V,X){var A=G*2,N=V*2;return x[A]<x[N]||x[A]===x[N]&&X[G]<=X[V]}function we(x,G,V){for(var X=x.heap[V],A=V<<1;A<=x.heap_len&&(A<x.heap_len&&Re(G,x.heap[A+1],x.heap[A],x.depth)&&A++,!Re(G,X,x.heap[A],x.depth));)x.heap[V]=x.heap[A],V=A,A<<=1;x.heap[V]=X}function ue(x,G,V){var X,A,N=0,m,$;if(x.last_lit!==0)do X=x.pending_buf[x.d_buf+N*2]<<8|x.pending_buf[x.d_buf+N*2+1],A=x.pending_buf[x.l_buf+N],N++,X===0?be(x,A,G):(m=K[A],be(x,m+d+1,G),$=M[m],$!==0&&(A-=j[m],ce(x,A,$)),X--,m=Ce(X),be(x,m,V),$=O[m],$!==0&&(X-=H[m],ce(x,X,$)));while(N<x.last_lit);be(x,I,G)}function Le(x,G){var V=G.dyn_tree,X=G.stat_desc.static_tree,A=G.stat_desc.has_stree,N=G.stat_desc.elems,m,$,le=-1,u;for(x.heap_len=0,x.heap_max=S,m=0;m<N;m++)V[m*2]!==0?(x.heap[++x.heap_len]=le=m,x.depth[m]=0):V[m*2+1]=0;for(;x.heap_len<2;)u=x.heap[++x.heap_len]=le<2?++le:0,V[u*2]=1,x.depth[u]=0,x.opt_len--,A&&(x.static_len-=X[u*2+1]);for(G.max_code=le,m=x.heap_len>>1;m>=1;m--)we(x,V,m);u=N;do m=x.heap[1],x.heap[1]=x.heap[x.heap_len--],we(x,V,1),$=x.heap[1],x.heap[--x.heap_max]=m,x.heap[--x.heap_max]=$,V[u*2]=V[m*2]+V[$*2],x.depth[u]=(x.depth[m]>=x.depth[$]?x.depth[m]:x.depth[$])+1,V[m*2+1]=V[$*2+1]=u,x.heap[1]=u++,we(x,V,1);while(x.heap_len>=2);x.heap[--x.heap_max]=x.heap[1],ke(x,G),Ne(V,le,x.bl_count)}function pr(x,G,V){var X,A=-1,N,m=G[0*2+1],$=0,le=7,u=4;for(m===0&&(le=138,u=3),G[(V+1)*2+1]=65535,X=0;X<=V;X++)N=m,m=G[(X+1)*2+1],!(++$<le&&N===m)&&($<u?x.bl_tree[N*2]+=$:N!==0?(N!==A&&x.bl_tree[N*2]++,x.bl_tree[k*2]++):$<=10?x.bl_tree[T*2]++:x.bl_tree[_*2]++,$=0,A=N,m===0?(le=138,u=3):N===m?(le=6,u=3):(le=7,u=4))}function Dr(x,G,V){var X,A=-1,N,m=G[0*2+1],$=0,le=7,u=4;for(m===0&&(le=138,u=3),X=0;X<=V;X++)if(N=m,m=G[(X+1)*2+1],!(++$<le&&N===m)){if($<u)do be(x,N,x.bl_tree);while(--$!==0);else N!==0?(N!==A&&(be(x,N,x.bl_tree),$--),be(x,k,x.bl_tree),ce(x,$-3,2)):$<=10?(be(x,T,x.bl_tree),ce(x,$-3,3)):(be(x,_,x.bl_tree),ce(x,$-11,7));$=0,A=N,m===0?(le=138,u=3):N===m?(le=6,u=3):(le=7,u=4)}}function rr(x){var G;for(pr(x,x.dyn_ltree,x.l_desc.max_code),pr(x,x.dyn_dtree,x.d_desc.max_code),Le(x,x.bl_desc),G=D-1;G>=3&&x.bl_tree[L[G]*2+1]===0;G--);return x.opt_len+=3*(G+1)+5+5+4,G}function Hr(x,G,V,X){var A;for(ce(x,G-257,5),ce(x,V-1,5),ce(x,X-4,4),A=0;A<X;A++)ce(x,x.bl_tree[L[A]*2+1],3);Dr(x,x.dyn_ltree,G-1),Dr(x,x.dyn_dtree,V-1)}function Sr(x){var G=4093624447,V;for(V=0;V<=31;V++,G>>>=1)if(G&1&&x.dyn_ltree[V*2]!==0)return t;if(x.dyn_ltree[9*2]!==0||x.dyn_ltree[10*2]!==0||x.dyn_ltree[13*2]!==0)return n;for(V=32;V<d;V++)if(x.dyn_ltree[V*2]!==0)return n;return t}var lr=!1;function Gr(x){lr||(oe(),lr=!0),x.l_desc=new De(x.dyn_ltree,ve),x.d_desc=new De(x.dyn_dtree,Ie),x.bl_desc=new De(x.bl_tree,de),x.bi_buf=0,x.bi_valid=0,Ee(x)}function Cr(x,G,V,X){ce(x,(i<<1)+(X?1:0),3),We(x,G,V,!0)}function Ze(x){ce(x,o<<1,3),be(x,I,W),ae(x)}function vr(x,G,V,X){var A,N,m=0;x.level>0?(x.strm.data_type===l&&(x.strm.data_type=Sr(x)),Le(x,x.l_desc),Le(x,x.d_desc),m=rr(x),A=x.opt_len+3+7>>>3,N=x.static_len+3+7>>>3,N<=A&&(A=N)):A=N=V+5,V+4<=A&&G!==-1?Cr(x,G,V,X):x.strategy===r||N===A?(ce(x,(o<<1)+(X?1:0),3),ue(x,W,q)):(ce(x,(s<<1)+(X?1:0),3),Hr(x,x.l_desc.max_code+1,x.d_desc.max_code+1,m+1),ue(x,x.dyn_ltree,x.dyn_dtree)),Ee(x),X&&Ge(x)}function Wr(x,G,V){return x.pending_buf[x.d_buf+x.last_lit*2]=G>>>8&255,x.pending_buf[x.d_buf+x.last_lit*2+1]=G&255,x.pending_buf[x.l_buf+x.last_lit]=V&255,x.last_lit++,G===0?x.dyn_ltree[V*2]++:(x.matches++,G--,x.dyn_ltree[(K[V]+d+1)*2]++,x.dyn_dtree[Ce(G)*2]++),x.last_lit===x.lit_bufsize-1}return Pr._tr_init=Gr,Pr._tr_stored_block=Cr,Pr._tr_flush_block=vr,Pr._tr_tally=Wr,Pr._tr_align=Ze,Pr}var mn,vi;function yl(){if(vi)return mn;vi=1;function e(r,t,n,l){for(var a=r&65535|0,i=r>>>16&65535|0,o=0;n!==0;){o=n>2e3?2e3:n,n-=o;do a=a+t[l++]|0,i=i+a|0;while(--o);a%=65521,i%=65521}return a|i<<16|0}return mn=e,mn}var bn,gi;function wl(){if(gi)return bn;gi=1;function e(){for(var n,l=[],a=0;a<256;a++){n=a;for(var i=0;i<8;i++)n=n&1?3988292384^n>>>1:n>>>1;l[a]=n}return l}var r=e();function t(n,l,a,i){var o=r,s=i+a;n^=-1;for(var f=i;f<s;f++)n=n>>>8^o[(n^l[f])&255];return n^-1}return bn=t,bn}var yn,hi;function ma(){return hi||(hi=1,yn={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),yn}var mi;function Eg(){if(mi)return sr;mi=1;var e=Tr(),r=Ig(),t=yl(),n=wl(),l=ma(),a=0,i=1,o=3,s=4,f=5,p=0,c=1,d=-2,g=-3,v=-5,D=-1,S=1,b=2,w=3,C=4,I=0,k=2,T=8,_=9,M=15,O=8,z=29,L=256,U=L+1+z,W=30,q=19,Q=2*U+1,K=15,j=3,H=258,re=H+j+1,ve=32,Ie=42,de=69,De=73,Ce=91,ge=103,ce=113,be=666,se=1,ae=2,ke=3,Ne=4,oe=3;function Ee(u,P){return u.msg=l[P],P}function Ge(u){return(u<<1)-(u>4?9:0)}function We(u){for(var P=u.length;--P>=0;)u[P]=0}function Re(u){var P=u.state,B=P.pending;B>u.avail_out&&(B=u.avail_out),B!==0&&(e.arraySet(u.output,P.pending_buf,P.pending_out,B,u.next_out),u.next_out+=B,P.pending_out+=B,u.total_out+=B,u.avail_out-=B,P.pending-=B,P.pending===0&&(P.pending_out=0))}function we(u,P){r._tr_flush_block(u,u.block_start>=0?u.block_start:-1,u.strstart-u.block_start,P),u.block_start=u.strstart,Re(u.strm)}function ue(u,P){u.pending_buf[u.pending++]=P}function Le(u,P){u.pending_buf[u.pending++]=P>>>8&255,u.pending_buf[u.pending++]=P&255}function pr(u,P,B,y){var E=u.avail_in;return E>y&&(E=y),E===0?0:(u.avail_in-=E,e.arraySet(P,u.input,u.next_in,E,B),u.state.wrap===1?u.adler=t(u.adler,P,E,B):u.state.wrap===2&&(u.adler=n(u.adler,P,E,B)),u.next_in+=E,u.total_in+=E,E)}function Dr(u,P){var B=u.max_chain_length,y=u.strstart,E,R,te=u.prev_length,Y=u.nice_match,J=u.strstart>u.w_size-re?u.strstart-(u.w_size-re):0,pe=u.window,yr=u.w_mask,Te=u.prev,he=u.strstart+H,Oe=pe[y+te-1],je=pe[y+te];u.prev_length>=u.good_match&&(B>>=2),Y>u.lookahead&&(Y=u.lookahead);do if(E=P,!(pe[E+te]!==je||pe[E+te-1]!==Oe||pe[E]!==pe[y]||pe[++E]!==pe[y+1])){y+=2,E++;do;while(pe[++y]===pe[++E]&&pe[++y]===pe[++E]&&pe[++y]===pe[++E]&&pe[++y]===pe[++E]&&pe[++y]===pe[++E]&&pe[++y]===pe[++E]&&pe[++y]===pe[++E]&&pe[++y]===pe[++E]&&y<he);if(R=H-(he-y),y=he-H,R>te){if(u.match_start=P,te=R,R>=Y)break;Oe=pe[y+te-1],je=pe[y+te]}}while((P=Te[P&yr])>J&&--B!==0);return te<=u.lookahead?te:u.lookahead}function rr(u){var P=u.w_size,B,y,E,R,te;do{if(R=u.window_size-u.lookahead-u.strstart,u.strstart>=P+(P-re)){e.arraySet(u.window,u.window,P,P,0),u.match_start-=P,u.strstart-=P,u.block_start-=P,y=u.hash_size,B=y;do E=u.head[--B],u.head[B]=E>=P?E-P:0;while(--y);y=P,B=y;do E=u.prev[--B],u.prev[B]=E>=P?E-P:0;while(--y);R+=P}if(u.strm.avail_in===0)break;if(y=pr(u.strm,u.window,u.strstart+u.lookahead,R),u.lookahead+=y,u.lookahead+u.insert>=j)for(te=u.strstart-u.insert,u.ins_h=u.window[te],u.ins_h=(u.ins_h<<u.hash_shift^u.window[te+1])&u.hash_mask;u.insert&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[te+j-1])&u.hash_mask,u.prev[te&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=te,te++,u.insert--,!(u.lookahead+u.insert<j)););}while(u.lookahead<re&&u.strm.avail_in!==0)}function Hr(u,P){var B=65535;for(B>u.pending_buf_size-5&&(B=u.pending_buf_size-5);;){if(u.lookahead<=1){if(rr(u),u.lookahead===0&&P===a)return se;if(u.lookahead===0)break}u.strstart+=u.lookahead,u.lookahead=0;var y=u.block_start+B;if((u.strstart===0||u.strstart>=y)&&(u.lookahead=u.strstart-y,u.strstart=y,we(u,!1),u.strm.avail_out===0)||u.strstart-u.block_start>=u.w_size-re&&(we(u,!1),u.strm.avail_out===0))return se}return u.insert=0,P===s?(we(u,!0),u.strm.avail_out===0?ke:Ne):(u.strstart>u.block_start&&(we(u,!1),u.strm.avail_out===0),se)}function Sr(u,P){for(var B,y;;){if(u.lookahead<re){if(rr(u),u.lookahead<re&&P===a)return se;if(u.lookahead===0)break}if(B=0,u.lookahead>=j&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+j-1])&u.hash_mask,B=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart),B!==0&&u.strstart-B<=u.w_size-re&&(u.match_length=Dr(u,B)),u.match_length>=j)if(y=r._tr_tally(u,u.strstart-u.match_start,u.match_length-j),u.lookahead-=u.match_length,u.match_length<=u.max_lazy_match&&u.lookahead>=j){u.match_length--;do u.strstart++,u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+j-1])&u.hash_mask,B=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart;while(--u.match_length!==0);u.strstart++}else u.strstart+=u.match_length,u.match_length=0,u.ins_h=u.window[u.strstart],u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+1])&u.hash_mask;else y=r._tr_tally(u,0,u.window[u.strstart]),u.lookahead--,u.strstart++;if(y&&(we(u,!1),u.strm.avail_out===0))return se}return u.insert=u.strstart<j-1?u.strstart:j-1,P===s?(we(u,!0),u.strm.avail_out===0?ke:Ne):u.last_lit&&(we(u,!1),u.strm.avail_out===0)?se:ae}function lr(u,P){for(var B,y,E;;){if(u.lookahead<re){if(rr(u),u.lookahead<re&&P===a)return se;if(u.lookahead===0)break}if(B=0,u.lookahead>=j&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+j-1])&u.hash_mask,B=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart),u.prev_length=u.match_length,u.prev_match=u.match_start,u.match_length=j-1,B!==0&&u.prev_length<u.max_lazy_match&&u.strstart-B<=u.w_size-re&&(u.match_length=Dr(u,B),u.match_length<=5&&(u.strategy===S||u.match_length===j&&u.strstart-u.match_start>4096)&&(u.match_length=j-1)),u.prev_length>=j&&u.match_length<=u.prev_length){E=u.strstart+u.lookahead-j,y=r._tr_tally(u,u.strstart-1-u.prev_match,u.prev_length-j),u.lookahead-=u.prev_length-1,u.prev_length-=2;do++u.strstart<=E&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+j-1])&u.hash_mask,B=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart);while(--u.prev_length!==0);if(u.match_available=0,u.match_length=j-1,u.strstart++,y&&(we(u,!1),u.strm.avail_out===0))return se}else if(u.match_available){if(y=r._tr_tally(u,0,u.window[u.strstart-1]),y&&we(u,!1),u.strstart++,u.lookahead--,u.strm.avail_out===0)return se}else u.match_available=1,u.strstart++,u.lookahead--}return u.match_available&&(y=r._tr_tally(u,0,u.window[u.strstart-1]),u.match_available=0),u.insert=u.strstart<j-1?u.strstart:j-1,P===s?(we(u,!0),u.strm.avail_out===0?ke:Ne):u.last_lit&&(we(u,!1),u.strm.avail_out===0)?se:ae}function Gr(u,P){for(var B,y,E,R,te=u.window;;){if(u.lookahead<=H){if(rr(u),u.lookahead<=H&&P===a)return se;if(u.lookahead===0)break}if(u.match_length=0,u.lookahead>=j&&u.strstart>0&&(E=u.strstart-1,y=te[E],y===te[++E]&&y===te[++E]&&y===te[++E])){R=u.strstart+H;do;while(y===te[++E]&&y===te[++E]&&y===te[++E]&&y===te[++E]&&y===te[++E]&&y===te[++E]&&y===te[++E]&&y===te[++E]&&E<R);u.match_length=H-(R-E),u.match_length>u.lookahead&&(u.match_length=u.lookahead)}if(u.match_length>=j?(B=r._tr_tally(u,1,u.match_length-j),u.lookahead-=u.match_length,u.strstart+=u.match_length,u.match_length=0):(B=r._tr_tally(u,0,u.window[u.strstart]),u.lookahead--,u.strstart++),B&&(we(u,!1),u.strm.avail_out===0))return se}return u.insert=0,P===s?(we(u,!0),u.strm.avail_out===0?ke:Ne):u.last_lit&&(we(u,!1),u.strm.avail_out===0)?se:ae}function Cr(u,P){for(var B;;){if(u.lookahead===0&&(rr(u),u.lookahead===0)){if(P===a)return se;break}if(u.match_length=0,B=r._tr_tally(u,0,u.window[u.strstart]),u.lookahead--,u.strstart++,B&&(we(u,!1),u.strm.avail_out===0))return se}return u.insert=0,P===s?(we(u,!0),u.strm.avail_out===0?ke:Ne):u.last_lit&&(we(u,!1),u.strm.avail_out===0)?se:ae}function Ze(u,P,B,y,E){this.good_length=u,this.max_lazy=P,this.nice_length=B,this.max_chain=y,this.func=E}var vr;vr=[new Ze(0,0,0,0,Hr),new Ze(4,4,8,4,Sr),new Ze(4,5,16,8,Sr),new Ze(4,6,32,32,Sr),new Ze(4,4,16,16,lr),new Ze(8,16,32,32,lr),new Ze(8,16,128,128,lr),new Ze(8,32,128,256,lr),new Ze(32,128,258,1024,lr),new Ze(32,258,258,4096,lr)];function Wr(u){u.window_size=2*u.w_size,We(u.head),u.max_lazy_match=vr[u.level].max_lazy,u.good_match=vr[u.level].good_length,u.nice_match=vr[u.level].nice_length,u.max_chain_length=vr[u.level].max_chain,u.strstart=0,u.block_start=0,u.lookahead=0,u.insert=0,u.match_length=u.prev_length=j-1,u.match_available=0,u.ins_h=0}function x(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=T,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new e.Buf16(Q*2),this.dyn_dtree=new e.Buf16((2*W+1)*2),this.bl_tree=new e.Buf16((2*q+1)*2),We(this.dyn_ltree),We(this.dyn_dtree),We(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new e.Buf16(K+1),this.heap=new e.Buf16(2*U+1),We(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new e.Buf16(2*U+1),We(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function G(u){var P;return!u||!u.state?Ee(u,d):(u.total_in=u.total_out=0,u.data_type=k,P=u.state,P.pending=0,P.pending_out=0,P.wrap<0&&(P.wrap=-P.wrap),P.status=P.wrap?Ie:ce,u.adler=P.wrap===2?0:1,P.last_flush=a,r._tr_init(P),p)}function V(u){var P=G(u);return P===p&&Wr(u.state),P}function X(u,P){return!u||!u.state||u.state.wrap!==2?d:(u.state.gzhead=P,p)}function A(u,P,B,y,E,R){if(!u)return d;var te=1;if(P===D&&(P=6),y<0?(te=0,y=-y):y>15&&(te=2,y-=16),E<1||E>_||B!==T||y<8||y>15||P<0||P>9||R<0||R>C)return Ee(u,d);y===8&&(y=9);var Y=new x;return u.state=Y,Y.strm=u,Y.wrap=te,Y.gzhead=null,Y.w_bits=y,Y.w_size=1<<Y.w_bits,Y.w_mask=Y.w_size-1,Y.hash_bits=E+7,Y.hash_size=1<<Y.hash_bits,Y.hash_mask=Y.hash_size-1,Y.hash_shift=~~((Y.hash_bits+j-1)/j),Y.window=new e.Buf8(Y.w_size*2),Y.head=new e.Buf16(Y.hash_size),Y.prev=new e.Buf16(Y.w_size),Y.lit_bufsize=1<<E+6,Y.pending_buf_size=Y.lit_bufsize*4,Y.pending_buf=new e.Buf8(Y.pending_buf_size),Y.d_buf=1*Y.lit_bufsize,Y.l_buf=(1+2)*Y.lit_bufsize,Y.level=P,Y.strategy=R,Y.method=B,V(u)}function N(u,P){return A(u,P,T,M,O,I)}function m(u,P){var B,y,E,R;if(!u||!u.state||P>f||P<0)return u?Ee(u,d):d;if(y=u.state,!u.output||!u.input&&u.avail_in!==0||y.status===be&&P!==s)return Ee(u,u.avail_out===0?v:d);if(y.strm=u,B=y.last_flush,y.last_flush=P,y.status===Ie)if(y.wrap===2)u.adler=0,ue(y,31),ue(y,139),ue(y,8),y.gzhead?(ue(y,(y.gzhead.text?1:0)+(y.gzhead.hcrc?2:0)+(y.gzhead.extra?4:0)+(y.gzhead.name?8:0)+(y.gzhead.comment?16:0)),ue(y,y.gzhead.time&255),ue(y,y.gzhead.time>>8&255),ue(y,y.gzhead.time>>16&255),ue(y,y.gzhead.time>>24&255),ue(y,y.level===9?2:y.strategy>=b||y.level<2?4:0),ue(y,y.gzhead.os&255),y.gzhead.extra&&y.gzhead.extra.length&&(ue(y,y.gzhead.extra.length&255),ue(y,y.gzhead.extra.length>>8&255)),y.gzhead.hcrc&&(u.adler=n(u.adler,y.pending_buf,y.pending,0)),y.gzindex=0,y.status=de):(ue(y,0),ue(y,0),ue(y,0),ue(y,0),ue(y,0),ue(y,y.level===9?2:y.strategy>=b||y.level<2?4:0),ue(y,oe),y.status=ce);else{var te=T+(y.w_bits-8<<4)<<8,Y=-1;y.strategy>=b||y.level<2?Y=0:y.level<6?Y=1:y.level===6?Y=2:Y=3,te|=Y<<6,y.strstart!==0&&(te|=ve),te+=31-te%31,y.status=ce,Le(y,te),y.strstart!==0&&(Le(y,u.adler>>>16),Le(y,u.adler&65535)),u.adler=1}if(y.status===de)if(y.gzhead.extra){for(E=y.pending;y.gzindex<(y.gzhead.extra.length&65535)&&!(y.pending===y.pending_buf_size&&(y.gzhead.hcrc&&y.pending>E&&(u.adler=n(u.adler,y.pending_buf,y.pending-E,E)),Re(u),E=y.pending,y.pending===y.pending_buf_size));)ue(y,y.gzhead.extra[y.gzindex]&255),y.gzindex++;y.gzhead.hcrc&&y.pending>E&&(u.adler=n(u.adler,y.pending_buf,y.pending-E,E)),y.gzindex===y.gzhead.extra.length&&(y.gzindex=0,y.status=De)}else y.status=De;if(y.status===De)if(y.gzhead.name){E=y.pending;do{if(y.pending===y.pending_buf_size&&(y.gzhead.hcrc&&y.pending>E&&(u.adler=n(u.adler,y.pending_buf,y.pending-E,E)),Re(u),E=y.pending,y.pending===y.pending_buf_size)){R=1;break}y.gzindex<y.gzhead.name.length?R=y.gzhead.name.charCodeAt(y.gzindex++)&255:R=0,ue(y,R)}while(R!==0);y.gzhead.hcrc&&y.pending>E&&(u.adler=n(u.adler,y.pending_buf,y.pending-E,E)),R===0&&(y.gzindex=0,y.status=Ce)}else y.status=Ce;if(y.status===Ce)if(y.gzhead.comment){E=y.pending;do{if(y.pending===y.pending_buf_size&&(y.gzhead.hcrc&&y.pending>E&&(u.adler=n(u.adler,y.pending_buf,y.pending-E,E)),Re(u),E=y.pending,y.pending===y.pending_buf_size)){R=1;break}y.gzindex<y.gzhead.comment.length?R=y.gzhead.comment.charCodeAt(y.gzindex++)&255:R=0,ue(y,R)}while(R!==0);y.gzhead.hcrc&&y.pending>E&&(u.adler=n(u.adler,y.pending_buf,y.pending-E,E)),R===0&&(y.status=ge)}else y.status=ge;if(y.status===ge&&(y.gzhead.hcrc?(y.pending+2>y.pending_buf_size&&Re(u),y.pending+2<=y.pending_buf_size&&(ue(y,u.adler&255),ue(y,u.adler>>8&255),u.adler=0,y.status=ce)):y.status=ce),y.pending!==0){if(Re(u),u.avail_out===0)return y.last_flush=-1,p}else if(u.avail_in===0&&Ge(P)<=Ge(B)&&P!==s)return Ee(u,v);if(y.status===be&&u.avail_in!==0)return Ee(u,v);if(u.avail_in!==0||y.lookahead!==0||P!==a&&y.status!==be){var J=y.strategy===b?Cr(y,P):y.strategy===w?Gr(y,P):vr[y.level].func(y,P);if((J===ke||J===Ne)&&(y.status=be),J===se||J===ke)return u.avail_out===0&&(y.last_flush=-1),p;if(J===ae&&(P===i?r._tr_align(y):P!==f&&(r._tr_stored_block(y,0,0,!1),P===o&&(We(y.head),y.lookahead===0&&(y.strstart=0,y.block_start=0,y.insert=0))),Re(u),u.avail_out===0))return y.last_flush=-1,p}return P!==s?p:y.wrap<=0?c:(y.wrap===2?(ue(y,u.adler&255),ue(y,u.adler>>8&255),ue(y,u.adler>>16&255),ue(y,u.adler>>24&255),ue(y,u.total_in&255),ue(y,u.total_in>>8&255),ue(y,u.total_in>>16&255),ue(y,u.total_in>>24&255)):(Le(y,u.adler>>>16),Le(y,u.adler&65535)),Re(u),y.wrap>0&&(y.wrap=-y.wrap),y.pending!==0?p:c)}function $(u){var P;return!u||!u.state?d:(P=u.state.status,P!==Ie&&P!==de&&P!==De&&P!==Ce&&P!==ge&&P!==ce&&P!==be?Ee(u,d):(u.state=null,P===ce?Ee(u,g):p))}function le(u,P){var B=P.length,y,E,R,te,Y,J,pe,yr;if(!u||!u.state||(y=u.state,te=y.wrap,te===2||te===1&&y.status!==Ie||y.lookahead))return d;for(te===1&&(u.adler=t(u.adler,P,B,0)),y.wrap=0,B>=y.w_size&&(te===0&&(We(y.head),y.strstart=0,y.block_start=0,y.insert=0),yr=new e.Buf8(y.w_size),e.arraySet(yr,P,B-y.w_size,y.w_size,0),P=yr,B=y.w_size),Y=u.avail_in,J=u.next_in,pe=u.input,u.avail_in=B,u.next_in=0,u.input=P,rr(y);y.lookahead>=j;){E=y.strstart,R=y.lookahead-(j-1);do y.ins_h=(y.ins_h<<y.hash_shift^y.window[E+j-1])&y.hash_mask,y.prev[E&y.w_mask]=y.head[y.ins_h],y.head[y.ins_h]=E,E++;while(--R);y.strstart=E,y.lookahead=j-1,rr(y)}return y.strstart+=y.lookahead,y.block_start=y.strstart,y.insert=y.lookahead,y.lookahead=0,y.match_length=y.prev_length=j-1,y.match_available=0,u.next_in=J,u.input=pe,u.avail_in=Y,y.wrap=te,p}return sr.deflateInit=N,sr.deflateInit2=A,sr.deflateReset=V,sr.deflateResetKeep=G,sr.deflateSetHeader=X,sr.deflate=m,sr.deflateEnd=$,sr.deflateSetDictionary=le,sr.deflateInfo="pako deflate (from Nodeca project)",sr}var Br={},bi;function xl(){if(bi)return Br;bi=1;var e=Tr(),r=!0,t=!0;try{String.fromCharCode.apply(null,[0])}catch{r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{t=!1}for(var n=new e.Buf8(256),l=0;l<256;l++)n[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;n[254]=n[254]=1,Br.string2buf=function(i){var o,s,f,p,c,d=i.length,g=0;for(p=0;p<d;p++)s=i.charCodeAt(p),(s&64512)===55296&&p+1<d&&(f=i.charCodeAt(p+1),(f&64512)===56320&&(s=65536+(s-55296<<10)+(f-56320),p++)),g+=s<128?1:s<2048?2:s<65536?3:4;for(o=new e.Buf8(g),c=0,p=0;c<g;p++)s=i.charCodeAt(p),(s&64512)===55296&&p+1<d&&(f=i.charCodeAt(p+1),(f&64512)===56320&&(s=65536+(s-55296<<10)+(f-56320),p++)),s<128?o[c++]=s:s<2048?(o[c++]=192|s>>>6,o[c++]=128|s&63):s<65536?(o[c++]=224|s>>>12,o[c++]=128|s>>>6&63,o[c++]=128|s&63):(o[c++]=240|s>>>18,o[c++]=128|s>>>12&63,o[c++]=128|s>>>6&63,o[c++]=128|s&63);return o};function a(i,o){if(o<65534&&(i.subarray&&t||!i.subarray&&r))return String.fromCharCode.apply(null,e.shrinkBuf(i,o));for(var s="",f=0;f<o;f++)s+=String.fromCharCode(i[f]);return s}return Br.buf2binstring=function(i){return a(i,i.length)},Br.binstring2buf=function(i){for(var o=new e.Buf8(i.length),s=0,f=o.length;s<f;s++)o[s]=i.charCodeAt(s);return o},Br.buf2string=function(i,o){var s,f,p,c,d=o||i.length,g=new Array(d*2);for(f=0,s=0;s<d;){if(p=i[s++],p<128){g[f++]=p;continue}if(c=n[p],c>4){g[f++]=65533,s+=c-1;continue}for(p&=c===2?31:c===3?15:7;c>1&&s<d;)p=p<<6|i[s++]&63,c--;if(c>1){g[f++]=65533;continue}p<65536?g[f++]=p:(p-=65536,g[f++]=55296|p>>10&1023,g[f++]=56320|p&1023)}return a(g,f)},Br.utf8border=function(i,o){var s;for(o=o||i.length,o>i.length&&(o=i.length),s=o-1;s>=0&&(i[s]&192)===128;)s--;return s<0||s===0?o:s+n[i[s]]>o?s:o},Br}var wn,yi;function Dl(){if(yi)return wn;yi=1;function e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return wn=e,wn}var wi;function Ag(){if(wi)return Ur;wi=1;var e=Eg(),r=Tr(),t=xl(),n=ma(),l=Dl(),a=Object.prototype.toString,i=0,o=4,s=0,f=1,p=2,c=-1,d=0,g=8;function v(w){if(!(this instanceof v))return new v(w);this.options=r.assign({level:c,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},w||{});var C=this.options;C.raw&&C.windowBits>0?C.windowBits=-C.windowBits:C.gzip&&C.windowBits>0&&C.windowBits<16&&(C.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var I=e.deflateInit2(this.strm,C.level,C.method,C.windowBits,C.memLevel,C.strategy);if(I!==s)throw new Error(n[I]);if(C.header&&e.deflateSetHeader(this.strm,C.header),C.dictionary){var k;if(typeof C.dictionary=="string"?k=t.string2buf(C.dictionary):a.call(C.dictionary)==="[object ArrayBuffer]"?k=new Uint8Array(C.dictionary):k=C.dictionary,I=e.deflateSetDictionary(this.strm,k),I!==s)throw new Error(n[I]);this._dict_set=!0}}v.prototype.push=function(w,C){var I=this.strm,k=this.options.chunkSize,T,_;if(this.ended)return!1;_=C===~~C?C:C===!0?o:i,typeof w=="string"?I.input=t.string2buf(w):a.call(w)==="[object ArrayBuffer]"?I.input=new Uint8Array(w):I.input=w,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new r.Buf8(k),I.next_out=0,I.avail_out=k),T=e.deflate(I,_),T!==f&&T!==s)return this.onEnd(T),this.ended=!0,!1;(I.avail_out===0||I.avail_in===0&&(_===o||_===p))&&(this.options.to==="string"?this.onData(t.buf2binstring(r.shrinkBuf(I.output,I.next_out))):this.onData(r.shrinkBuf(I.output,I.next_out)))}while((I.avail_in>0||I.avail_out===0)&&T!==f);return _===o?(T=e.deflateEnd(this.strm),this.onEnd(T),this.ended=!0,T===s):(_===p&&(this.onEnd(s),I.avail_out=0),!0)},v.prototype.onData=function(w){this.chunks.push(w)},v.prototype.onEnd=function(w){w===s&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg};function D(w,C){var I=new v(C);if(I.push(w,!0),I.err)throw I.msg||n[I.err];return I.result}function S(w,C){return C=C||{},C.raw=!0,D(w,C)}function b(w,C){return C=C||{},C.gzip=!0,D(w,C)}return Ur.Deflate=v,Ur.deflate=D,Ur.deflateRaw=S,Ur.gzip=b,Ur}var qr={},ar={},xn,xi;function kg(){if(xi)return xn;xi=1;var e=30,r=12;return xn=function(n,l){var a,i,o,s,f,p,c,d,g,v,D,S,b,w,C,I,k,T,_,M,O,z,L,U,W;a=n.state,i=n.next_in,U=n.input,o=i+(n.avail_in-5),s=n.next_out,W=n.output,f=s-(l-n.avail_out),p=s+(n.avail_out-257),c=a.dmax,d=a.wsize,g=a.whave,v=a.wnext,D=a.window,S=a.hold,b=a.bits,w=a.lencode,C=a.distcode,I=(1<<a.lenbits)-1,k=(1<<a.distbits)-1;e:do{b<15&&(S+=U[i++]<<b,b+=8,S+=U[i++]<<b,b+=8),T=w[S&I];r:for(;;){if(_=T>>>24,S>>>=_,b-=_,_=T>>>16&255,_===0)W[s++]=T&65535;else if(_&16){M=T&65535,_&=15,_&&(b<_&&(S+=U[i++]<<b,b+=8),M+=S&(1<<_)-1,S>>>=_,b-=_),b<15&&(S+=U[i++]<<b,b+=8,S+=U[i++]<<b,b+=8),T=C[S&k];t:for(;;){if(_=T>>>24,S>>>=_,b-=_,_=T>>>16&255,_&16){if(O=T&65535,_&=15,b<_&&(S+=U[i++]<<b,b+=8,b<_&&(S+=U[i++]<<b,b+=8)),O+=S&(1<<_)-1,O>c){n.msg="invalid distance too far back",a.mode=e;break e}if(S>>>=_,b-=_,_=s-f,O>_){if(_=O-_,_>g&&a.sane){n.msg="invalid distance too far back",a.mode=e;break e}if(z=0,L=D,v===0){if(z+=d-_,_<M){M-=_;do W[s++]=D[z++];while(--_);z=s-O,L=W}}else if(v<_){if(z+=d+v-_,_-=v,_<M){M-=_;do W[s++]=D[z++];while(--_);if(z=0,v<M){_=v,M-=_;do W[s++]=D[z++];while(--_);z=s-O,L=W}}}else if(z+=v-_,_<M){M-=_;do W[s++]=D[z++];while(--_);z=s-O,L=W}for(;M>2;)W[s++]=L[z++],W[s++]=L[z++],W[s++]=L[z++],M-=3;M&&(W[s++]=L[z++],M>1&&(W[s++]=L[z++]))}else{z=s-O;do W[s++]=W[z++],W[s++]=W[z++],W[s++]=W[z++],M-=3;while(M>2);M&&(W[s++]=W[z++],M>1&&(W[s++]=W[z++]))}}else if(_&64){n.msg="invalid distance code",a.mode=e;break e}else{T=C[(T&65535)+(S&(1<<_)-1)];continue t}break}}else if(_&64)if(_&32){a.mode=r;break e}else{n.msg="invalid literal/length code",a.mode=e;break e}else{T=w[(T&65535)+(S&(1<<_)-1)];continue r}break}}while(i<o&&s<p);M=b>>3,i-=M,b-=M<<3,S&=(1<<b)-1,n.next_in=i,n.next_out=s,n.avail_in=i<o?5+(o-i):5-(i-o),n.avail_out=s<p?257+(p-s):257-(s-p),a.hold=S,a.bits=b},xn}var Dn,Di;function Tg(){if(Di)return Dn;Di=1;var e=Tr(),r=15,t=852,n=592,l=0,a=1,i=2,o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return Dn=function(d,g,v,D,S,b,w,C){var I=C.bits,k=0,T=0,_=0,M=0,O=0,z=0,L=0,U=0,W=0,q=0,Q,K,j,H,re,ve=null,Ie=0,de,De=new e.Buf16(r+1),Ce=new e.Buf16(r+1),ge=null,ce=0,be,se,ae;for(k=0;k<=r;k++)De[k]=0;for(T=0;T<D;T++)De[g[v+T]]++;for(O=I,M=r;M>=1&&De[M]===0;M--);if(O>M&&(O=M),M===0)return S[b++]=1<<24|64<<16|0,S[b++]=1<<24|64<<16|0,C.bits=1,0;for(_=1;_<M&&De[_]===0;_++);for(O<_&&(O=_),U=1,k=1;k<=r;k++)if(U<<=1,U-=De[k],U<0)return-1;if(U>0&&(d===l||M!==1))return-1;for(Ce[1]=0,k=1;k<r;k++)Ce[k+1]=Ce[k]+De[k];for(T=0;T<D;T++)g[v+T]!==0&&(w[Ce[g[v+T]]++]=T);if(d===l?(ve=ge=w,de=19):d===a?(ve=o,Ie-=257,ge=s,ce-=257,de=256):(ve=f,ge=p,de=-1),q=0,T=0,k=_,re=b,z=O,L=0,j=-1,W=1<<O,H=W-1,d===a&&W>t||d===i&&W>n)return 1;for(;;){be=k-L,w[T]<de?(se=0,ae=w[T]):w[T]>de?(se=ge[ce+w[T]],ae=ve[Ie+w[T]]):(se=32+64,ae=0),Q=1<<k-L,K=1<<z,_=K;do K-=Q,S[re+(q>>L)+K]=be<<24|se<<16|ae|0;while(K!==0);for(Q=1<<k-1;q&Q;)Q>>=1;if(Q!==0?(q&=Q-1,q+=Q):q=0,T++,--De[k]===0){if(k===M)break;k=g[v+w[T]]}if(k>O&&(q&H)!==j){for(L===0&&(L=O),re+=_,z=k-L,U=1<<z;z+L<M&&(U-=De[z+L],!(U<=0));)z++,U<<=1;if(W+=1<<z,d===a&&W>t||d===i&&W>n)return 1;j=q&H,S[j]=O<<24|z<<16|re-b|0}}return q!==0&&(S[re+q]=k-L<<24|64<<16|0),C.bits=O,0},Dn}var Si;function Rg(){if(Si)return ar;Si=1;var e=Tr(),r=yl(),t=wl(),n=kg(),l=Tg(),a=0,i=1,o=2,s=4,f=5,p=6,c=0,d=1,g=2,v=-2,D=-3,S=-4,b=-5,w=8,C=1,I=2,k=3,T=4,_=5,M=6,O=7,z=8,L=9,U=10,W=11,q=12,Q=13,K=14,j=15,H=16,re=17,ve=18,Ie=19,de=20,De=21,Ce=22,ge=23,ce=24,be=25,se=26,ae=27,ke=28,Ne=29,oe=30,Ee=31,Ge=32,We=852,Re=592,we=15,ue=we;function Le(A){return(A>>>24&255)+(A>>>8&65280)+((A&65280)<<8)+((A&255)<<24)}function pr(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Dr(A){var N;return!A||!A.state?v:(N=A.state,A.total_in=A.total_out=N.total=0,A.msg="",N.wrap&&(A.adler=N.wrap&1),N.mode=C,N.last=0,N.havedict=0,N.dmax=32768,N.head=null,N.hold=0,N.bits=0,N.lencode=N.lendyn=new e.Buf32(We),N.distcode=N.distdyn=new e.Buf32(Re),N.sane=1,N.back=-1,c)}function rr(A){var N;return!A||!A.state?v:(N=A.state,N.wsize=0,N.whave=0,N.wnext=0,Dr(A))}function Hr(A,N){var m,$;return!A||!A.state||($=A.state,N<0?(m=0,N=-N):(m=(N>>4)+1,N<48&&(N&=15)),N&&(N<8||N>15))?v:($.window!==null&&$.wbits!==N&&($.window=null),$.wrap=m,$.wbits=N,rr(A))}function Sr(A,N){var m,$;return A?($=new pr,A.state=$,$.window=null,m=Hr(A,N),m!==c&&(A.state=null),m):v}function lr(A){return Sr(A,ue)}var Gr=!0,Cr,Ze;function vr(A){if(Gr){var N;for(Cr=new e.Buf32(512),Ze=new e.Buf32(32),N=0;N<144;)A.lens[N++]=8;for(;N<256;)A.lens[N++]=9;for(;N<280;)A.lens[N++]=7;for(;N<288;)A.lens[N++]=8;for(l(i,A.lens,0,288,Cr,0,A.work,{bits:9}),N=0;N<32;)A.lens[N++]=5;l(o,A.lens,0,32,Ze,0,A.work,{bits:5}),Gr=!1}A.lencode=Cr,A.lenbits=9,A.distcode=Ze,A.distbits=5}function Wr(A,N,m,$){var le,u=A.state;return u.window===null&&(u.wsize=1<<u.wbits,u.wnext=0,u.whave=0,u.window=new e.Buf8(u.wsize)),$>=u.wsize?(e.arraySet(u.window,N,m-u.wsize,u.wsize,0),u.wnext=0,u.whave=u.wsize):(le=u.wsize-u.wnext,le>$&&(le=$),e.arraySet(u.window,N,m-$,le,u.wnext),$-=le,$?(e.arraySet(u.window,N,m-$,$,0),u.wnext=$,u.whave=u.wsize):(u.wnext+=le,u.wnext===u.wsize&&(u.wnext=0),u.whave<u.wsize&&(u.whave+=le))),0}function x(A,N){var m,$,le,u,P,B,y,E,R,te,Y,J,pe,yr,Te=0,he,Oe,je,Ye,Dt,St,Pe,tr,$e=new e.Buf8(4),wr,gr,ya=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!A||!A.state||!A.output||!A.input&&A.avail_in!==0)return v;m=A.state,m.mode===q&&(m.mode=Q),P=A.next_out,le=A.output,y=A.avail_out,u=A.next_in,$=A.input,B=A.avail_in,E=m.hold,R=m.bits,te=B,Y=y,tr=c;e:for(;;)switch(m.mode){case C:if(m.wrap===0){m.mode=Q;break}for(;R<16;){if(B===0)break e;B--,E+=$[u++]<<R,R+=8}if(m.wrap&2&&E===35615){m.check=0,$e[0]=E&255,$e[1]=E>>>8&255,m.check=t(m.check,$e,2,0),E=0,R=0,m.mode=I;break}if(m.flags=0,m.head&&(m.head.done=!1),!(m.wrap&1)||(((E&255)<<8)+(E>>8))%31){A.msg="incorrect header check",m.mode=oe;break}if((E&15)!==w){A.msg="unknown compression method",m.mode=oe;break}if(E>>>=4,R-=4,Pe=(E&15)+8,m.wbits===0)m.wbits=Pe;else if(Pe>m.wbits){A.msg="invalid window size",m.mode=oe;break}m.dmax=1<<Pe,A.adler=m.check=1,m.mode=E&512?U:q,E=0,R=0;break;case I:for(;R<16;){if(B===0)break e;B--,E+=$[u++]<<R,R+=8}if(m.flags=E,(m.flags&255)!==w){A.msg="unknown compression method",m.mode=oe;break}if(m.flags&57344){A.msg="unknown header flags set",m.mode=oe;break}m.head&&(m.head.text=E>>8&1),m.flags&512&&($e[0]=E&255,$e[1]=E>>>8&255,m.check=t(m.check,$e,2,0)),E=0,R=0,m.mode=k;case k:for(;R<32;){if(B===0)break e;B--,E+=$[u++]<<R,R+=8}m.head&&(m.head.time=E),m.flags&512&&($e[0]=E&255,$e[1]=E>>>8&255,$e[2]=E>>>16&255,$e[3]=E>>>24&255,m.check=t(m.check,$e,4,0)),E=0,R=0,m.mode=T;case T:for(;R<16;){if(B===0)break e;B--,E+=$[u++]<<R,R+=8}m.head&&(m.head.xflags=E&255,m.head.os=E>>8),m.flags&512&&($e[0]=E&255,$e[1]=E>>>8&255,m.check=t(m.check,$e,2,0)),E=0,R=0,m.mode=_;case _:if(m.flags&1024){for(;R<16;){if(B===0)break e;B--,E+=$[u++]<<R,R+=8}m.length=E,m.head&&(m.head.extra_len=E),m.flags&512&&($e[0]=E&255,$e[1]=E>>>8&255,m.check=t(m.check,$e,2,0)),E=0,R=0}else m.head&&(m.head.extra=null);m.mode=M;case M:if(m.flags&1024&&(J=m.length,J>B&&(J=B),J&&(m.head&&(Pe=m.head.extra_len-m.length,m.head.extra||(m.head.extra=new Array(m.head.extra_len)),e.arraySet(m.head.extra,$,u,J,Pe)),m.flags&512&&(m.check=t(m.check,$,J,u)),B-=J,u+=J,m.length-=J),m.length))break e;m.length=0,m.mode=O;case O:if(m.flags&2048){if(B===0)break e;J=0;do Pe=$[u+J++],m.head&&Pe&&m.length<65536&&(m.head.name+=String.fromCharCode(Pe));while(Pe&&J<B);if(m.flags&512&&(m.check=t(m.check,$,J,u)),B-=J,u+=J,Pe)break e}else m.head&&(m.head.name=null);m.length=0,m.mode=z;case z:if(m.flags&4096){if(B===0)break e;J=0;do Pe=$[u+J++],m.head&&Pe&&m.length<65536&&(m.head.comment+=String.fromCharCode(Pe));while(Pe&&J<B);if(m.flags&512&&(m.check=t(m.check,$,J,u)),B-=J,u+=J,Pe)break e}else m.head&&(m.head.comment=null);m.mode=L;case L:if(m.flags&512){for(;R<16;){if(B===0)break e;B--,E+=$[u++]<<R,R+=8}if(E!==(m.check&65535)){A.msg="header crc mismatch",m.mode=oe;break}E=0,R=0}m.head&&(m.head.hcrc=m.flags>>9&1,m.head.done=!0),A.adler=m.check=0,m.mode=q;break;case U:for(;R<32;){if(B===0)break e;B--,E+=$[u++]<<R,R+=8}A.adler=m.check=Le(E),E=0,R=0,m.mode=W;case W:if(m.havedict===0)return A.next_out=P,A.avail_out=y,A.next_in=u,A.avail_in=B,m.hold=E,m.bits=R,g;A.adler=m.check=1,m.mode=q;case q:if(N===f||N===p)break e;case Q:if(m.last){E>>>=R&7,R-=R&7,m.mode=ae;break}for(;R<3;){if(B===0)break e;B--,E+=$[u++]<<R,R+=8}switch(m.last=E&1,E>>>=1,R-=1,E&3){case 0:m.mode=K;break;case 1:if(vr(m),m.mode=de,N===p){E>>>=2,R-=2;break e}break;case 2:m.mode=re;break;case 3:A.msg="invalid block type",m.mode=oe}E>>>=2,R-=2;break;case K:for(E>>>=R&7,R-=R&7;R<32;){if(B===0)break e;B--,E+=$[u++]<<R,R+=8}if((E&65535)!==(E>>>16^65535)){A.msg="invalid stored block lengths",m.mode=oe;break}if(m.length=E&65535,E=0,R=0,m.mode=j,N===p)break e;case j:m.mode=H;case H:if(J=m.length,J){if(J>B&&(J=B),J>y&&(J=y),J===0)break e;e.arraySet(le,$,u,J,P),B-=J,u+=J,y-=J,P+=J,m.length-=J;break}m.mode=q;break;case re:for(;R<14;){if(B===0)break e;B--,E+=$[u++]<<R,R+=8}if(m.nlen=(E&31)+257,E>>>=5,R-=5,m.ndist=(E&31)+1,E>>>=5,R-=5,m.ncode=(E&15)+4,E>>>=4,R-=4,m.nlen>286||m.ndist>30){A.msg="too many length or distance symbols",m.mode=oe;break}m.have=0,m.mode=ve;case ve:for(;m.have<m.ncode;){for(;R<3;){if(B===0)break e;B--,E+=$[u++]<<R,R+=8}m.lens[ya[m.have++]]=E&7,E>>>=3,R-=3}for(;m.have<19;)m.lens[ya[m.have++]]=0;if(m.lencode=m.lendyn,m.lenbits=7,wr={bits:m.lenbits},tr=l(a,m.lens,0,19,m.lencode,0,m.work,wr),m.lenbits=wr.bits,tr){A.msg="invalid code lengths set",m.mode=oe;break}m.have=0,m.mode=Ie;case Ie:for(;m.have<m.nlen+m.ndist;){for(;Te=m.lencode[E&(1<<m.lenbits)-1],he=Te>>>24,Oe=Te>>>16&255,je=Te&65535,!(he<=R);){if(B===0)break e;B--,E+=$[u++]<<R,R+=8}if(je<16)E>>>=he,R-=he,m.lens[m.have++]=je;else{if(je===16){for(gr=he+2;R<gr;){if(B===0)break e;B--,E+=$[u++]<<R,R+=8}if(E>>>=he,R-=he,m.have===0){A.msg="invalid bit length repeat",m.mode=oe;break}Pe=m.lens[m.have-1],J=3+(E&3),E>>>=2,R-=2}else if(je===17){for(gr=he+3;R<gr;){if(B===0)break e;B--,E+=$[u++]<<R,R+=8}E>>>=he,R-=he,Pe=0,J=3+(E&7),E>>>=3,R-=3}else{for(gr=he+7;R<gr;){if(B===0)break e;B--,E+=$[u++]<<R,R+=8}E>>>=he,R-=he,Pe=0,J=11+(E&127),E>>>=7,R-=7}if(m.have+J>m.nlen+m.ndist){A.msg="invalid bit length repeat",m.mode=oe;break}for(;J--;)m.lens[m.have++]=Pe}}if(m.mode===oe)break;if(m.lens[256]===0){A.msg="invalid code -- missing end-of-block",m.mode=oe;break}if(m.lenbits=9,wr={bits:m.lenbits},tr=l(i,m.lens,0,m.nlen,m.lencode,0,m.work,wr),m.lenbits=wr.bits,tr){A.msg="invalid literal/lengths set",m.mode=oe;break}if(m.distbits=6,m.distcode=m.distdyn,wr={bits:m.distbits},tr=l(o,m.lens,m.nlen,m.ndist,m.distcode,0,m.work,wr),m.distbits=wr.bits,tr){A.msg="invalid distances set",m.mode=oe;break}if(m.mode=de,N===p)break e;case de:m.mode=De;case De:if(B>=6&&y>=258){A.next_out=P,A.avail_out=y,A.next_in=u,A.avail_in=B,m.hold=E,m.bits=R,n(A,Y),P=A.next_out,le=A.output,y=A.avail_out,u=A.next_in,$=A.input,B=A.avail_in,E=m.hold,R=m.bits,m.mode===q&&(m.back=-1);break}for(m.back=0;Te=m.lencode[E&(1<<m.lenbits)-1],he=Te>>>24,Oe=Te>>>16&255,je=Te&65535,!(he<=R);){if(B===0)break e;B--,E+=$[u++]<<R,R+=8}if(Oe&&!(Oe&240)){for(Ye=he,Dt=Oe,St=je;Te=m.lencode[St+((E&(1<<Ye+Dt)-1)>>Ye)],he=Te>>>24,Oe=Te>>>16&255,je=Te&65535,!(Ye+he<=R);){if(B===0)break e;B--,E+=$[u++]<<R,R+=8}E>>>=Ye,R-=Ye,m.back+=Ye}if(E>>>=he,R-=he,m.back+=he,m.length=je,Oe===0){m.mode=se;break}if(Oe&32){m.back=-1,m.mode=q;break}if(Oe&64){A.msg="invalid literal/length code",m.mode=oe;break}m.extra=Oe&15,m.mode=Ce;case Ce:if(m.extra){for(gr=m.extra;R<gr;){if(B===0)break e;B--,E+=$[u++]<<R,R+=8}m.length+=E&(1<<m.extra)-1,E>>>=m.extra,R-=m.extra,m.back+=m.extra}m.was=m.length,m.mode=ge;case ge:for(;Te=m.distcode[E&(1<<m.distbits)-1],he=Te>>>24,Oe=Te>>>16&255,je=Te&65535,!(he<=R);){if(B===0)break e;B--,E+=$[u++]<<R,R+=8}if(!(Oe&240)){for(Ye=he,Dt=Oe,St=je;Te=m.distcode[St+((E&(1<<Ye+Dt)-1)>>Ye)],he=Te>>>24,Oe=Te>>>16&255,je=Te&65535,!(Ye+he<=R);){if(B===0)break e;B--,E+=$[u++]<<R,R+=8}E>>>=Ye,R-=Ye,m.back+=Ye}if(E>>>=he,R-=he,m.back+=he,Oe&64){A.msg="invalid distance code",m.mode=oe;break}m.offset=je,m.extra=Oe&15,m.mode=ce;case ce:if(m.extra){for(gr=m.extra;R<gr;){if(B===0)break e;B--,E+=$[u++]<<R,R+=8}m.offset+=E&(1<<m.extra)-1,E>>>=m.extra,R-=m.extra,m.back+=m.extra}if(m.offset>m.dmax){A.msg="invalid distance too far back",m.mode=oe;break}m.mode=be;case be:if(y===0)break e;if(J=Y-y,m.offset>J){if(J=m.offset-J,J>m.whave&&m.sane){A.msg="invalid distance too far back",m.mode=oe;break}J>m.wnext?(J-=m.wnext,pe=m.wsize-J):pe=m.wnext-J,J>m.length&&(J=m.length),yr=m.window}else yr=le,pe=P-m.offset,J=m.length;J>y&&(J=y),y-=J,m.length-=J;do le[P++]=yr[pe++];while(--J);m.length===0&&(m.mode=De);break;case se:if(y===0)break e;le[P++]=m.length,y--,m.mode=De;break;case ae:if(m.wrap){for(;R<32;){if(B===0)break e;B--,E|=$[u++]<<R,R+=8}if(Y-=y,A.total_out+=Y,m.total+=Y,Y&&(A.adler=m.check=m.flags?t(m.check,le,Y,P-Y):r(m.check,le,Y,P-Y)),Y=y,(m.flags?E:Le(E))!==m.check){A.msg="incorrect data check",m.mode=oe;break}E=0,R=0}m.mode=ke;case ke:if(m.wrap&&m.flags){for(;R<32;){if(B===0)break e;B--,E+=$[u++]<<R,R+=8}if(E!==(m.total&4294967295)){A.msg="incorrect length check",m.mode=oe;break}E=0,R=0}m.mode=Ne;case Ne:tr=d;break e;case oe:tr=D;break e;case Ee:return S;case Ge:default:return v}return A.next_out=P,A.avail_out=y,A.next_in=u,A.avail_in=B,m.hold=E,m.bits=R,(m.wsize||Y!==A.avail_out&&m.mode<oe&&(m.mode<ae||N!==s))&&Wr(A,A.output,A.next_out,Y-A.avail_out),te-=A.avail_in,Y-=A.avail_out,A.total_in+=te,A.total_out+=Y,m.total+=Y,m.wrap&&Y&&(A.adler=m.check=m.flags?t(m.check,le,Y,A.next_out-Y):r(m.check,le,Y,A.next_out-Y)),A.data_type=m.bits+(m.last?64:0)+(m.mode===q?128:0)+(m.mode===de||m.mode===j?256:0),(te===0&&Y===0||N===s)&&tr===c&&(tr=b),tr}function G(A){if(!A||!A.state)return v;var N=A.state;return N.window&&(N.window=null),A.state=null,c}function V(A,N){var m;return!A||!A.state||(m=A.state,!(m.wrap&2))?v:(m.head=N,N.done=!1,c)}function X(A,N){var m=N.length,$,le,u;return!A||!A.state||($=A.state,$.wrap!==0&&$.mode!==W)?v:$.mode===W&&(le=1,le=r(le,N,m,0),le!==$.check)?D:(u=Wr(A,N,m,m),u?($.mode=Ee,S):($.havedict=1,c))}return ar.inflateReset=rr,ar.inflateReset2=Hr,ar.inflateResetKeep=Dr,ar.inflateInit=lr,ar.inflateInit2=Sr,ar.inflate=x,ar.inflateEnd=G,ar.inflateGetHeader=V,ar.inflateSetDictionary=X,ar.inflateInfo="pako inflate (from Nodeca project)",ar}var Sn,Ci;function Sl(){return Ci||(Ci=1,Sn={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),Sn}var Cn,_i;function Pg(){if(_i)return Cn;_i=1;function e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return Cn=e,Cn}var Ii;function Bg(){if(Ii)return qr;Ii=1;var e=Rg(),r=Tr(),t=xl(),n=Sl(),l=ma(),a=Dl(),i=Pg(),o=Object.prototype.toString;function s(c){if(!(this instanceof s))return new s(c);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},c||{});var d=this.options;d.raw&&d.windowBits>=0&&d.windowBits<16&&(d.windowBits=-d.windowBits,d.windowBits===0&&(d.windowBits=-15)),d.windowBits>=0&&d.windowBits<16&&!(c&&c.windowBits)&&(d.windowBits+=32),d.windowBits>15&&d.windowBits<48&&(d.windowBits&15||(d.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var g=e.inflateInit2(this.strm,d.windowBits);if(g!==n.Z_OK)throw new Error(l[g]);if(this.header=new i,e.inflateGetHeader(this.strm,this.header),d.dictionary&&(typeof d.dictionary=="string"?d.dictionary=t.string2buf(d.dictionary):o.call(d.dictionary)==="[object ArrayBuffer]"&&(d.dictionary=new Uint8Array(d.dictionary)),d.raw&&(g=e.inflateSetDictionary(this.strm,d.dictionary),g!==n.Z_OK)))throw new Error(l[g])}s.prototype.push=function(c,d){var g=this.strm,v=this.options.chunkSize,D=this.options.dictionary,S,b,w,C,I,k=!1;if(this.ended)return!1;b=d===~~d?d:d===!0?n.Z_FINISH:n.Z_NO_FLUSH,typeof c=="string"?g.input=t.binstring2buf(c):o.call(c)==="[object ArrayBuffer]"?g.input=new Uint8Array(c):g.input=c,g.next_in=0,g.avail_in=g.input.length;do{if(g.avail_out===0&&(g.output=new r.Buf8(v),g.next_out=0,g.avail_out=v),S=e.inflate(g,n.Z_NO_FLUSH),S===n.Z_NEED_DICT&&D&&(S=e.inflateSetDictionary(this.strm,D)),S===n.Z_BUF_ERROR&&k===!0&&(S=n.Z_OK,k=!1),S!==n.Z_STREAM_END&&S!==n.Z_OK)return this.onEnd(S),this.ended=!0,!1;g.next_out&&(g.avail_out===0||S===n.Z_STREAM_END||g.avail_in===0&&(b===n.Z_FINISH||b===n.Z_SYNC_FLUSH))&&(this.options.to==="string"?(w=t.utf8border(g.output,g.next_out),C=g.next_out-w,I=t.buf2string(g.output,w),g.next_out=C,g.avail_out=v-C,C&&r.arraySet(g.output,g.output,w,C,0),this.onData(I)):this.onData(r.shrinkBuf(g.output,g.next_out))),g.avail_in===0&&g.avail_out===0&&(k=!0)}while((g.avail_in>0||g.avail_out===0)&&S!==n.Z_STREAM_END);return S===n.Z_STREAM_END&&(b=n.Z_FINISH),b===n.Z_FINISH?(S=e.inflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===n.Z_OK):(b===n.Z_SYNC_FLUSH&&(this.onEnd(n.Z_OK),g.avail_out=0),!0)},s.prototype.onData=function(c){this.chunks.push(c)},s.prototype.onEnd=function(c){c===n.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=c,this.msg=this.strm.msg};function f(c,d){var g=new s(d);if(g.push(c,!0),g.err)throw g.msg||l[g.err];return g.result}function p(c,d){return d=d||{},d.raw=!0,f(c,d)}return qr.Inflate=s,qr.inflate=f,qr.inflateRaw=p,qr.ungzip=f,qr}var _n,Ei;function Mg(){if(Ei)return _n;Ei=1;var e=Tr().assign,r=Ag(),t=Bg(),n=Sl(),l={};return e(l,r,t,n),_n=l,_n}(function(e){(function(){var r={},t;e.exports=r,typeof _g=="function"?t=Mg():t=window.pako,function(n,l){n.toRGBA8=function(a){var i=a.width,o=a.height;if(a.tabs.acTL==null)return[n.toRGBA8.decodeImage(a.data,i,o,a).buffer];var s=[];a.frames[0].data==null&&(a.frames[0].data=a.data);for(var f,p=new Uint8Array(i*o*4),c=0;c<a.frames.length;c++){var d=a.frames[c],g=d.rect.x,v=d.rect.y,D=d.rect.width,S=d.rect.height,b=n.toRGBA8.decodeImage(d.data,D,S,a);if(c==0?f=b:d.blend==0?n._copyTile(b,D,S,f,i,o,g,v,0):d.blend==1&&n._copyTile(b,D,S,f,i,o,g,v,1),s.push(f.buffer),f=f.slice(0),d.dispose!=0){if(d.dispose==1)n._copyTile(p,D,S,f,i,o,g,v,0);else if(d.dispose==2){for(var w=c-1;a.frames[w].dispose==2;)w--;f=new Uint8Array(s[w]).slice(0)}}}return s},n.toRGBA8.decodeImage=function(a,i,o,s){var f=i*o,p=n.decode._getBPP(s),c=Math.ceil(i*p/8),d=new Uint8Array(f*4),g=new Uint32Array(d.buffer),v=s.ctype,D=s.depth,S=n._bin.readUshort;if(v==6){var b=f<<2;if(D==8)for(var w=0;w<b;w++)d[w]=a[w];if(D==16)for(var w=0;w<b;w++)d[w]=a[w<<1]}else if(v==2){var C=s.tabs.tRNS,I=-1,k=-1,T=-1;if(C&&(I=C[0],k=C[1],T=C[2]),D==8)for(var w=0;w<f;w++){var _=w<<2,M=w*3;d[_]=a[M],d[_+1]=a[M+1],d[_+2]=a[M+2],d[_+3]=255,I!=-1&&a[M]==I&&a[M+1]==k&&a[M+2]==T&&(d[_+3]=0)}if(D==16)for(var w=0;w<f;w++){var _=w<<2,M=w*6;d[_]=a[M],d[_+1]=a[M+2],d[_+2]=a[M+4],d[_+3]=255,I!=-1&&S(a,M)==I&&S(a,M+2)==k&&S(a,M+4)==T&&(d[_+3]=0)}}else if(v==3){var O=s.tabs.PLTE,z=s.tabs.tRNS,L=z?z.length:0;if(D==1)for(var U=0;U<o;U++)for(var W=U*c,q=U*i,w=0;w<i;w++){var _=q+w<<2,Q=a[W+(w>>3)]>>7-((w&7)<<0)&1,K=3*Q;d[_]=O[K],d[_+1]=O[K+1],d[_+2]=O[K+2],d[_+3]=Q<L?z[Q]:255}if(D==2)for(var U=0;U<o;U++)for(var W=U*c,q=U*i,w=0;w<i;w++){var _=q+w<<2,Q=a[W+(w>>2)]>>6-((w&3)<<1)&3,K=3*Q;d[_]=O[K],d[_+1]=O[K+1],d[_+2]=O[K+2],d[_+3]=Q<L?z[Q]:255}if(D==4)for(var U=0;U<o;U++)for(var W=U*c,q=U*i,w=0;w<i;w++){var _=q+w<<2,Q=a[W+(w>>1)]>>4-((w&1)<<2)&15,K=3*Q;d[_]=O[K],d[_+1]=O[K+1],d[_+2]=O[K+2],d[_+3]=Q<L?z[Q]:255}if(D==8)for(var w=0;w<f;w++){var _=w<<2,Q=a[w],K=3*Q;d[_]=O[K],d[_+1]=O[K+1],d[_+2]=O[K+2],d[_+3]=Q<L?z[Q]:255}}else if(v==4){if(D==8)for(var w=0;w<f;w++){var _=w<<2,j=w<<1,H=a[j];d[_]=H,d[_+1]=H,d[_+2]=H,d[_+3]=a[j+1]}if(D==16)for(var w=0;w<f;w++){var _=w<<2,j=w<<2,H=a[j];d[_]=H,d[_+1]=H,d[_+2]=H,d[_+3]=a[j+2]}}else if(v==0){var I=s.tabs.tRNS?s.tabs.tRNS:-1;if(D==1)for(var w=0;w<f;w++){var H=255*(a[w>>3]>>7-(w&7)&1),re=H==I*255?0:255;g[w]=re<<24|H<<16|H<<8|H}if(D==2)for(var w=0;w<f;w++){var H=85*(a[w>>2]>>6-((w&3)<<1)&3),re=H==I*85?0:255;g[w]=re<<24|H<<16|H<<8|H}if(D==4)for(var w=0;w<f;w++){var H=17*(a[w>>1]>>4-((w&1)<<2)&15),re=H==I*17?0:255;g[w]=re<<24|H<<16|H<<8|H}if(D==8)for(var w=0;w<f;w++){var H=a[w],re=H==I?0:255;g[w]=re<<24|H<<16|H<<8|H}if(D==16)for(var w=0;w<f;w++){var H=a[w<<1],re=S(a,w<<1)==I?0:255;g[w]=re<<24|H<<16|H<<8|H}}return d},n.decode=function(a){for(var i=new Uint8Array(a),o=8,s=n._bin,f=s.readUshort,p=s.readUint,c={tabs:{},frames:[]},d=new Uint8Array(i.length),g=0,v,D=0,S=[137,80,78,71,13,10,26,10],b=0;b<8;b++)if(i[b]!=S[b])throw"The input is not a PNG file!";for(;o<i.length;){var w=s.readUint(i,o);o+=4;var C=s.readASCII(i,o,4);if(o+=4,C=="IHDR")n.decode._IHDR(i,o,c);else if(C=="IDAT"){for(var b=0;b<w;b++)d[g+b]=i[o+b];g+=w}else if(C=="acTL")c.tabs[C]={num_frames:p(i,o),num_plays:p(i,o+4)},v=new Uint8Array(i.length);else if(C=="fcTL"){if(D!=0){var I=c.frames[c.frames.length-1];I.data=n.decode._decompress(c,v.slice(0,D),I.rect.width,I.rect.height),D=0}var k={x:p(i,o+12),y:p(i,o+16),width:p(i,o+4),height:p(i,o+8)},T=f(i,o+22);T=f(i,o+20)/(T==0?100:T);var _={rect:k,delay:Math.round(T*1e3),dispose:i[o+24],blend:i[o+25]};c.frames.push(_)}else if(C=="fdAT"){for(var b=0;b<w-4;b++)v[D+b]=i[o+b+4];D+=w-4}else if(C=="pHYs")c.tabs[C]=[s.readUint(i,o),s.readUint(i,o+4),i[o+8]];else if(C=="cHRM"){c.tabs[C]=[];for(var b=0;b<8;b++)c.tabs[C].push(s.readUint(i,o+b*4))}else if(C=="tEXt"){c.tabs[C]==null&&(c.tabs[C]={});var M=s.nextZero(i,o),O=s.readASCII(i,o,M-o),z=s.readASCII(i,M+1,o+w-M-1);c.tabs[C][O]=z}else if(C=="iTXt"){c.tabs[C]==null&&(c.tabs[C]={});var M=0,L=o;M=s.nextZero(i,L);var O=s.readASCII(i,L,M-L);L=M+1,i[L],i[L+1],L+=2,M=s.nextZero(i,L),s.readASCII(i,L,M-L),L=M+1,M=s.nextZero(i,L),s.readUTF8(i,L,M-L),L=M+1;var z=s.readUTF8(i,L,w-(L-o));c.tabs[C][O]=z}else if(C=="PLTE")c.tabs[C]=s.readBytes(i,o,w);else if(C=="hIST"){var U=c.tabs.PLTE.length/3;c.tabs[C]=[];for(var b=0;b<U;b++)c.tabs[C].push(f(i,o+b*2))}else if(C=="tRNS")c.ctype==3?c.tabs[C]=s.readBytes(i,o,w):c.ctype==0?c.tabs[C]=f(i,o):c.ctype==2&&(c.tabs[C]=[f(i,o),f(i,o+2),f(i,o+4)]);else if(C=="gAMA")c.tabs[C]=s.readUint(i,o)/1e5;else if(C=="sRGB")c.tabs[C]=i[o];else if(C=="bKGD")c.ctype==0||c.ctype==4?c.tabs[C]=[f(i,o)]:c.ctype==2||c.ctype==6?c.tabs[C]=[f(i,o),f(i,o+2),f(i,o+4)]:c.ctype==3&&(c.tabs[C]=i[o]);else if(C=="IEND"){if(D!=0){var I=c.frames[c.frames.length-1];I.data=n.decode._decompress(c,v.slice(0,D),I.rect.width,I.rect.height),D=0}c.data=n.decode._decompress(c,d,c.width,c.height);break}o+=w,s.readUint(i,o),o+=4}return delete c.compress,delete c.interlace,delete c.filter,c},n.decode._decompress=function(a,i,o,s){return a.compress==0&&(i=n.decode._inflate(i)),a.interlace==0?i=n.decode._filterZero(i,a,0,o,s):a.interlace==1&&(i=n.decode._readInterlace(i,a)),i},n.decode._inflate=function(a){return l.inflate(a)},n.decode._readInterlace=function(a,i){for(var o=i.width,s=i.height,f=n.decode._getBPP(i),p=f>>3,c=Math.ceil(o*f/8),d=new Uint8Array(s*c),g=0,v=[0,0,4,0,2,0,1],D=[0,4,0,2,0,1,0],S=[8,8,8,4,4,2,2],b=[8,8,4,4,2,2,1],w=0;w<7;){for(var C=S[w],I=b[w],k=0,T=0,_=v[w];_<s;)_+=C,T++;for(var M=D[w];M<o;)M+=I,k++;var O=Math.ceil(k*f/8);n.decode._filterZero(a,i,g,k,T);for(var z=0,L=v[w];L<s;){for(var U=D[w],W=g+z*O<<3;U<o;){if(f==1){var q=a[W>>3];q=q>>7-(W&7)&1,d[L*c+(U>>3)]|=q<<7-((U&3)<<0)}if(f==2){var q=a[W>>3];q=q>>6-(W&7)&3,d[L*c+(U>>2)]|=q<<6-((U&3)<<1)}if(f==4){var q=a[W>>3];q=q>>4-(W&7)&15,d[L*c+(U>>1)]|=q<<4-((U&1)<<2)}if(f>=8)for(var Q=L*c+U*p,K=0;K<p;K++)d[Q+K]=a[(W>>3)+K];W+=f,U+=I}z++,L+=C}k*T!=0&&(g+=T*(1+O)),w=w+1}return d},n.decode._getBPP=function(a){var i=[1,null,3,1,2,null,4][a.ctype];return i*a.depth},n.decode._filterZero=function(a,i,o,s,f){var p=n.decode._getBPP(i),c=Math.ceil(s*p/8),d=n.decode._paeth;p=Math.ceil(p/8);for(var g=0;g<f;g++){var v=o+g*c,D=v+g+1,S=a[D-1];if(S==0)for(var b=0;b<c;b++)a[v+b]=a[D+b];else if(S==1){for(var b=0;b<p;b++)a[v+b]=a[D+b];for(var b=p;b<c;b++)a[v+b]=a[D+b]+a[v+b-p]&255}else if(g==0){for(var b=0;b<p;b++)a[v+b]=a[D+b];if(S==2)for(var b=p;b<c;b++)a[v+b]=a[D+b]&255;if(S==3)for(var b=p;b<c;b++)a[v+b]=a[D+b]+(a[v+b-p]>>1)&255;if(S==4)for(var b=p;b<c;b++)a[v+b]=a[D+b]+d(a[v+b-p],0,0)&255}else{if(S==2)for(var b=0;b<c;b++)a[v+b]=a[D+b]+a[v+b-c]&255;if(S==3){for(var b=0;b<p;b++)a[v+b]=a[D+b]+(a[v+b-c]>>1)&255;for(var b=p;b<c;b++)a[v+b]=a[D+b]+(a[v+b-c]+a[v+b-p]>>1)&255}if(S==4){for(var b=0;b<p;b++)a[v+b]=a[D+b]+d(0,a[v+b-c],0)&255;for(var b=p;b<c;b++)a[v+b]=a[D+b]+d(a[v+b-p],a[v+b-c],a[v+b-p-c])&255}}}return a},n.decode._paeth=function(a,i,o){var s=a+i-o,f=Math.abs(s-a),p=Math.abs(s-i),c=Math.abs(s-o);return f<=p&&f<=c?a:p<=c?i:o},n.decode._IHDR=function(a,i,o){var s=n._bin;o.width=s.readUint(a,i),i+=4,o.height=s.readUint(a,i),i+=4,o.depth=a[i],i++,o.ctype=a[i],i++,o.compress=a[i],i++,o.filter=a[i],i++,o.interlace=a[i],i++},n._bin={nextZero:function(a,i){for(;a[i]!=0;)i++;return i},readUshort:function(a,i){return a[i]<<8|a[i+1]},writeUshort:function(a,i,o){a[i]=o>>8&255,a[i+1]=o&255},readUint:function(a,i){return a[i]*(256*256*256)+(a[i+1]<<16|a[i+2]<<8|a[i+3])},writeUint:function(a,i,o){a[i]=o>>24&255,a[i+1]=o>>16&255,a[i+2]=o>>8&255,a[i+3]=o&255},readASCII:function(a,i,o){for(var s="",f=0;f<o;f++)s+=String.fromCharCode(a[i+f]);return s},writeASCII:function(a,i,o){for(var s=0;s<o.length;s++)a[i+s]=o.charCodeAt(s)},readBytes:function(a,i,o){for(var s=[],f=0;f<o;f++)s.push(a[i+f]);return s},pad:function(a){return a.length<2?"0"+a:a},readUTF8:function(a,i,o){for(var s="",f,p=0;p<o;p++)s+="%"+n._bin.pad(a[i+p].toString(16));try{f=decodeURIComponent(s)}catch{return n._bin.readASCII(a,i,o)}return f}},n._copyTile=function(a,i,o,s,f,p,c,d,g){for(var v=Math.min(i,f),D=Math.min(o,p),S=0,b=0,w=0;w<D;w++)for(var C=0;C<v;C++)if(c>=0&&d>=0?(S=w*i+C<<2,b=(d+w)*f+c+C<<2):(S=(-d+w)*i-c+C<<2,b=w*f+C<<2),g==0)s[b]=a[S],s[b+1]=a[S+1],s[b+2]=a[S+2],s[b+3]=a[S+3];else if(g==1){var I=a[S+3]*.00392156862745098,k=a[S]*I,T=a[S+1]*I,_=a[S+2]*I,M=s[b+3]*(1/255),O=s[b]*M,z=s[b+1]*M,L=s[b+2]*M,U=1-I,W=I+M*U,q=W==0?0:1/W;s[b+3]=255*W,s[b+0]=(k+O*U)*q,s[b+1]=(T+z*U)*q,s[b+2]=(_+L*U)*q}else if(g==2){var I=a[S+3],k=a[S],T=a[S+1],_=a[S+2],M=s[b+3],O=s[b],z=s[b+1],L=s[b+2];I==M&&k==O&&T==z&&_==L?(s[b]=0,s[b+1]=0,s[b+2]=0,s[b+3]=0):(s[b]=k,s[b+1]=T,s[b+2]=_,s[b+3]=I)}else if(g==3){var I=a[S+3],k=a[S],T=a[S+1],_=a[S+2],M=s[b+3],O=s[b],z=s[b+1],L=s[b+2];if(I==M&&k==O&&T==z&&_==L)continue;if(I<220&&M>20)return!1}return!0},n.encode=function(a,i,o,s,f,p){s==null&&(s=0),p==null&&(p=!1);for(var c=new Uint8Array(a[0].byteLength*a.length+100),d=[137,80,78,71,13,10,26,10],g=0;g<8;g++)c[g]=d[g];var v=8,D=n._bin,S=n.crc.crc,b=D.writeUint,w=D.writeUshort,C=D.writeASCII,I=n.encode.compressPNG(a,i,o,s,p);b(c,v,13),v+=4,C(c,v,"IHDR"),v+=4,b(c,v,i),v+=4,b(c,v,o),v+=4,c[v]=I.depth,v++,c[v]=I.ctype,v++,c[v]=0,v++,c[v]=0,v++,c[v]=0,v++,b(c,v,S(c,v-17,17)),v+=4,b(c,v,1),v+=4,C(c,v,"sRGB"),v+=4,c[v]=1,v++,b(c,v,S(c,v-5,5)),v+=4;var k=a.length>1;if(k&&(b(c,v,8),v+=4,C(c,v,"acTL"),v+=4,b(c,v,a.length),v+=4,b(c,v,0),v+=4,b(c,v,S(c,v-12,12)),v+=4),I.ctype==3){var T=I.plte.length;b(c,v,T*3),v+=4,C(c,v,"PLTE"),v+=4;for(var g=0;g<T;g++){var _=g*3,M=I.plte[g],O=M&255,z=M>>8&255,L=M>>16&255;c[v+_+0]=O,c[v+_+1]=z,c[v+_+2]=L}if(v+=T*3,b(c,v,S(c,v-T*3-4,T*3+4)),v+=4,I.gotAlpha){b(c,v,T),v+=4,C(c,v,"tRNS"),v+=4;for(var g=0;g<T;g++)c[v+g]=I.plte[g]>>24&255;v+=T,b(c,v,S(c,v-T-4,T+4)),v+=4}}for(var U=0,W=0;W<I.frames.length;W++){var q=I.frames[W];k&&(b(c,v,26),v+=4,C(c,v,"fcTL"),v+=4,b(c,v,U++),v+=4,b(c,v,q.rect.width),v+=4,b(c,v,q.rect.height),v+=4,b(c,v,q.rect.x),v+=4,b(c,v,q.rect.y),v+=4,w(c,v,f[W]),v+=2,w(c,v,1e3),v+=2,c[v]=q.dispose,v++,c[v]=q.blend,v++,b(c,v,S(c,v-30,30)),v+=4);var Q=q.cimg,T=Q.length;b(c,v,T+(W==0?0:4)),v+=4;var K=v;C(c,v,W==0?"IDAT":"fdAT"),v+=4,W!=0&&(b(c,v,U++),v+=4);for(var g=0;g<T;g++)c[v+g]=Q[g];v+=T,b(c,v,S(c,K,v-K)),v+=4}return b(c,v,0),v+=4,C(c,v,"IEND"),v+=4,b(c,v,S(c,v-4,4)),v+=4,c.buffer.slice(0,v)},n.encode.compressPNG=function(a,i,o,s,f){for(var p=n.encode.compress(a,i,o,s,!1,f),c=0;c<a.length;c++){var d=p.frames[c];d.rect.width;var g=d.rect.height,v=d.bpl,D=d.bpp,S=new Uint8Array(g*v+g);d.cimg=n.encode._filterZero(d.img,g,D,v,S)}return p},n.encode.compress=function(a,i,o,s,f,p){p==null&&(p=!1);for(var c=6,d=8,g=4,v=255,D=0;D<a.length;D++)for(var S=new Uint8Array(a[D]),b=S.length,w=0;w<b;w+=4)v&=S[w+3];var C=v!=255,I={},k=[];if(a.length!=0&&(I[0]=0,k.push(0),s!=0&&s--),s!=0){var T=n.quantize(a,s,f);a=T.bufs;for(var w=0;w<T.plte.length;w++){var _=T.plte[w].est.rgba;I[_]==null&&(I[_]=k.length,k.push(_))}}else for(var D=0;D<a.length;D++)for(var M=new Uint32Array(a[D]),b=M.length,w=0;w<b;w++){var _=M[w];if((w<i||_!=M[w-1]&&_!=M[w-i])&&I[_]==null&&(I[_]=k.length,k.push(_),k.length>=300))break}var O=C?f:!1,z=k.length;z<=256&&p==!1&&(z<=2?d=1:z<=4?d=2:z<=16?d=4:d=8,f&&(d=8),C=!0);for(var L=[],D=0;D<a.length;D++){var U=new Uint8Array(a[D]),W=new Uint32Array(U.buffer),q=0,Q=0,K=i,j=o,H=0;if(D!=0&&!O){for(var re=f||D==1||L[L.length-2].dispose==2?1:2,ve=0,Ie=1e9,de=0;de<re;de++){for(var Ne=new Uint8Array(a[D-1-de]),De=new Uint32Array(a[D-1-de]),Ce=i,ge=o,ce=-1,be=-1,se=0;se<o;se++)for(var ae=0;ae<i;ae++){var w=se*i+ae;W[w]!=De[w]&&(ae<Ce&&(Ce=ae),ae>ce&&(ce=ae),se<ge&&(ge=se),se>be&&(be=se))}var ke=ce==-1?1:(ce-Ce+1)*(be-ge+1);ke<Ie&&(Ie=ke,ve=de,ce==-1?(q=Q=0,K=j=1):(q=Ce,Q=ge,K=ce-Ce+1,j=be-ge+1))}var Ne=new Uint8Array(a[D-1-ve]);ve==1&&(L[L.length-1].dispose=2);var oe=new Uint8Array(K*j*4);new Uint32Array(oe.buffer),n._copyTile(Ne,i,o,oe,K,j,-q,-Q,0),n._copyTile(U,i,o,oe,K,j,-q,-Q,3)?(n._copyTile(U,i,o,oe,K,j,-q,-Q,2),H=1):(n._copyTile(U,i,o,oe,K,j,-q,-Q,0),H=0),U=oe,W=new Uint32Array(U.buffer)}var Ee=4*K;if(z<=256&&p==!1){Ee=Math.ceil(d*K/8);for(var oe=new Uint8Array(Ee*j),se=0;se<j;se++){var w=se*Ee,Ge=se*K;if(d==8)for(var ae=0;ae<K;ae++)oe[w+ae]=I[W[Ge+ae]];else if(d==4)for(var ae=0;ae<K;ae++)oe[w+(ae>>1)]|=I[W[Ge+ae]]<<4-(ae&1)*4;else if(d==2)for(var ae=0;ae<K;ae++)oe[w+(ae>>2)]|=I[W[Ge+ae]]<<6-(ae&3)*2;else if(d==1)for(var ae=0;ae<K;ae++)oe[w+(ae>>3)]|=I[W[Ge+ae]]<<7-(ae&7)*1}U=oe,c=3,g=1}else if(C==!1&&a.length==1){for(var oe=new Uint8Array(K*j*3),We=K*j,w=0;w<We;w++){var Re=w*3,we=w*4;oe[Re]=U[we],oe[Re+1]=U[we+1],oe[Re+2]=U[we+2]}U=oe,c=2,g=3,Ee=3*K}L.push({rect:{x:q,y:Q,width:K,height:j},img:U,bpl:Ee,bpp:g,blend:H,dispose:O?1:0})}return{ctype:c,depth:d,plte:k,gotAlpha:C,frames:L}},n.encode._filterZero=function(a,i,o,s,f){for(var p=[],c=0;c<5;c++)if(!(i*s>5e5&&(c==2||c==3||c==4))){for(var d=0;d<i;d++)n.encode._filterLine(f,a,d,s,o,c);if(p.push(l.deflate(f)),o==1)break}for(var g,v=1e9,D=0;D<p.length;D++)p[D].length<v&&(g=D,v=p[D].length);return p[g]},n.encode._filterLine=function(a,i,o,s,f,p){var c=o*s,d=c+o,g=n.decode._paeth;if(a[d]=p,d++,p==0)for(var v=0;v<s;v++)a[d+v]=i[c+v];else if(p==1){for(var v=0;v<f;v++)a[d+v]=i[c+v];for(var v=f;v<s;v++)a[d+v]=i[c+v]-i[c+v-f]+256&255}else if(o==0){for(var v=0;v<f;v++)a[d+v]=i[c+v];if(p==2)for(var v=f;v<s;v++)a[d+v]=i[c+v];if(p==3)for(var v=f;v<s;v++)a[d+v]=i[c+v]-(i[c+v-f]>>1)+256&255;if(p==4)for(var v=f;v<s;v++)a[d+v]=i[c+v]-g(i[c+v-f],0,0)+256&255}else{if(p==2)for(var v=0;v<s;v++)a[d+v]=i[c+v]+256-i[c+v-s]&255;if(p==3){for(var v=0;v<f;v++)a[d+v]=i[c+v]+256-(i[c+v-s]>>1)&255;for(var v=f;v<s;v++)a[d+v]=i[c+v]+256-(i[c+v-s]+i[c+v-f]>>1)&255}if(p==4){for(var v=0;v<f;v++)a[d+v]=i[c+v]+256-g(0,i[c+v-s],0)&255;for(var v=f;v<s;v++)a[d+v]=i[c+v]+256-g(i[c+v-f],i[c+v-s],i[c+v-f-s])&255}}},n.crc={table:function(){for(var a=new Uint32Array(256),i=0;i<256;i++){for(var o=i,s=0;s<8;s++)o&1?o=3988292384^o>>>1:o=o>>>1;a[i]=o}return a}(),update:function(a,i,o,s){for(var f=0;f<s;f++)a=n.crc.table[(a^i[o+f])&255]^a>>>8;return a},crc:function(a,i,o){return n.crc.update(4294967295,a,i,o)^4294967295}},n.quantize=function(a,i,o){for(var s=[],f=0,p=0;p<a.length;p++)s.push(n.encode.alphaMul(new Uint8Array(a[p]),o)),f+=a[p].byteLength;for(var c=new Uint8Array(f),d=new Uint32Array(c.buffer),g=0,p=0;p<s.length;p++){for(var v=s[p],D=v.length,S=0;S<D;S++)c[g+S]=v[S];g+=D}var b={i0:0,i1:c.length,bst:null,est:null,tdst:0,left:null,right:null};b.bst=n.quantize.stats(c,b.i0,b.i1),b.est=n.quantize.estats(b.bst);for(var w=[b];w.length<i;){for(var C=0,I=0,p=0;p<w.length;p++)w[p].est.L>C&&(C=w[p].est.L,I=p);if(C<.001)break;var k=w[I],T=n.quantize.splitPixels(c,d,k.i0,k.i1,k.est.e,k.est.eMq255),_={i0:k.i0,i1:T,bst:null,est:null,tdst:0,left:null,right:null};_.bst=n.quantize.stats(c,_.i0,_.i1),_.est=n.quantize.estats(_.bst);var M={i0:T,i1:k.i1,bst:null,est:null,tdst:0,left:null,right:null};M.bst={R:[],m:[],N:k.bst.N-_.bst.N};for(var p=0;p<16;p++)M.bst.R[p]=k.bst.R[p]-_.bst.R[p];for(var p=0;p<4;p++)M.bst.m[p]=k.bst.m[p]-_.bst.m[p];M.est=n.quantize.estats(M.bst),k.left=_,k.right=M,w[I]=_,w.push(M)}w.sort(function(re,ve){return ve.bst.N-re.bst.N});for(var O=0;O<s.length;O++){for(var z=n.quantize.planeDst,L=new Uint8Array(s[O].buffer),U=new Uint32Array(s[O].buffer),W=L.length,p=0;p<W;p+=4){for(var q=L[p]*.00392156862745098,Q=L[p+1]*(1/255),K=L[p+2]*(1/255),j=L[p+3]*(1/255),H=b;H.left;)H=z(H.est,q,Q,K,j)<=0?H.left:H.right;U[p>>2]=H.est.rgba}s[O]=U.buffer}return{bufs:s,plte:w}},n.quantize.getNearest=function(a,i,o,s,f){if(a.left==null)return a.tdst=n.quantize.dist(a.est.q,i,o,s,f),a;var p=n.quantize.planeDst(a.est,i,o,s,f),c=a.left,d=a.right;p>0&&(c=a.right,d=a.left);var g=n.quantize.getNearest(c,i,o,s,f);if(g.tdst<=p*p)return g;var v=n.quantize.getNearest(d,i,o,s,f);return v.tdst<g.tdst?v:g},n.quantize.planeDst=function(a,i,o,s,f){var p=a.e;return p[0]*i+p[1]*o+p[2]*s+p[3]*f-a.eMq},n.quantize.dist=function(a,i,o,s,f){var p=i-a[0],c=o-a[1],d=s-a[2],g=f-a[3];return p*p+c*c+d*d+g*g},n.quantize.splitPixels=function(a,i,o,s,f,p){var c=n.quantize.vecDot;for(s-=4;o<s;){for(;c(a,o,f)<=p;)o+=4;for(;c(a,s,f)>p;)s-=4;if(o>=s)break;var d=i[o>>2];i[o>>2]=i[s>>2],i[s>>2]=d,o+=4,s-=4}for(;c(a,o,f)>p;)o-=4;return o+4},n.quantize.vecDot=function(a,i,o){return a[i]*o[0]+a[i+1]*o[1]+a[i+2]*o[2]+a[i+3]*o[3]},n.quantize.stats=function(a,i,o){for(var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],f=[0,0,0,0],p=o-i>>2,c=i;c<o;c+=4){var d=a[c]*.00392156862745098,g=a[c+1]*(1/255),v=a[c+2]*(1/255),D=a[c+3]*(1/255);f[0]+=d,f[1]+=g,f[2]+=v,f[3]+=D,s[0]+=d*d,s[1]+=d*g,s[2]+=d*v,s[3]+=d*D,s[5]+=g*g,s[6]+=g*v,s[7]+=g*D,s[10]+=v*v,s[11]+=v*D,s[15]+=D*D}return s[4]=s[1],s[8]=s[2],s[12]=s[3],s[9]=s[6],s[13]=s[7],s[14]=s[11],{R:s,m:f,N:p}},n.quantize.estats=function(a){var i=a.R,o=a.m,s=a.N,f=o[0],p=o[1],c=o[2],d=o[3],g=s==0?0:1/s,v=[i[0]-f*f*g,i[1]-f*p*g,i[2]-f*c*g,i[3]-f*d*g,i[4]-p*f*g,i[5]-p*p*g,i[6]-p*c*g,i[7]-p*d*g,i[8]-c*f*g,i[9]-c*p*g,i[10]-c*c*g,i[11]-c*d*g,i[12]-d*f*g,i[13]-d*p*g,i[14]-d*c*g,i[15]-d*d*g],D=v,S=n.M4,b=[.5,.5,.5,.5],w=0,C=0;if(s!=0)for(var I=0;I<10&&(b=S.multVec(D,b),C=Math.sqrt(S.dot(b,b)),b=S.sml(1/C,b),!(Math.abs(C-w)<1e-9));I++)w=C;var k=[f*g,p*g,c*g,d*g],T=S.dot(S.sml(255,k),b),_=k[3]<.001?0:1/k[3];return{Cov:v,q:k,e:b,L:w,eMq255:T,eMq:S.dot(b,k),rgba:(Math.round(255*k[3])<<24|Math.round(255*k[2]*_)<<16|Math.round(255*k[1]*_)<<8|Math.round(255*k[0]*_)<<0)>>>0}},n.M4={multVec:function(a,i){return[a[0]*i[0]+a[1]*i[1]+a[2]*i[2]+a[3]*i[3],a[4]*i[0]+a[5]*i[1]+a[6]*i[2]+a[7]*i[3],a[8]*i[0]+a[9]*i[1]+a[10]*i[2]+a[11]*i[3],a[12]*i[0]+a[13]*i[1]+a[14]*i[2]+a[15]*i[3]]},dot:function(a,i){return a[0]*i[0]+a[1]*i[1]+a[2]*i[2]+a[3]*i[3]},sml:function(a,i){return[a*i[0],a*i[1],a*i[2],a*i[3]]}},n.encode.alphaMul=function(a,i){for(var o=new Uint8Array(a.length),s=a.length>>2,f=0;f<s;f++){var p=f<<2,c=a[p+3];i&&(c=c<128?0:255);var d=c*(1/255);o[p+0]=a[p+0]*d,o[p+1]=a[p+1]*d,o[p+2]=a[p+2]*d,o[p+3]=c}return o}}(r,t)})()})(bl);var Cl=bl.exports;function Ng(){const{setLoadingMsg:e}=Be(),{activeModel:r}=_e(),{screenshot:t}=F,n=async o=>{o.stopPropagation();const s=t.getFrame(),f=Cg(s);navigator.clipboard.write([new ClipboardItem({"image/png":f})])},l=()=>{if(!r){e("No model"),setTimeout(()=>e(""),2e3);return}e("Generating frames..."),setTimeout(async()=>{const o=t.getAllFrames(r);if(!o){e("Invalid animation..."),setTimeout(()=>e(""),2e3);return}e("Creating zip...");const s=t.settings.fileName||"frames",f=await Gi(o,s);e("Finished"),xr.saveAs(f,`${s}.zip`),setTimeout(()=>e(""),1e3)})},a=()=>{if(!r){e("No model"),setTimeout(()=>e(""),2e3);return}e("Generating frames..."),setTimeout(async()=>{const o=t.getAllFrames(r);if(!o){e("Invalid animation"),setTimeout(()=>e(""),2e3);return}e(`Creating gif from ${o.length} frames...`);const{frameRate:s}=t.settings,{makeGif:f}=await Wt(()=>import("./cda3c7b3-index.js"),[]),p=await f({frames:o,width:F.viewport.width,height:F.viewport.height,delay:Math.ceil(1e3/s)});e("Finished");const c=r.userData.name??r.id??"ani";xr.saveAs(p,`${c}.gif`),setTimeout(()=>e(""),1e3)})},i=()=>{if(!r){e("No model"),setTimeout(()=>e(""),2e3);return}e("Generating frames..."),setTimeout(async()=>{const o=t.getAllFramesAsArrayBuffer(r);if(!o){e("Invalid animation"),setTimeout(()=>e(""),2e3);return}e(`Creating apng from ${o.length} frames...`);const{frameRate:s}=t.settings,f=Math.ceil(1e3/s),p=Array(o.length-1).fill(f),{width:c,height:d}=F.viewport,g=Cl.encode(o,c,d,0,p),v=new Blob([g],{type:"image/apng"});e("Finished");const D=r.userData.name??r.id??"ani";xr.saveAs(v,`${D}.png`),setTimeout(()=>e(""),1e3)})};return h(Ve,{className:"SettingGroup",children:[h(ie,{children:[h("div",{children:"Screenshot/GIF/APNG"}),h(fe,{onClick:n,title:"Copy screenshot to clipboard",variant:"contained",children:h(Qs,{})})]}),h(ie,{children:[h(ur,{target:t.settings,propList:Sg}),h(fe,{onClick:l,title:"Get all frames as zip",startIcon:h(Or,{}),children:"Get All Frames"}),h(fe,{title:"Create GIF of current animation",startIcon:h(qn,{viewBox:"4 4 16 16"}),onClick:a,children:"Create GIF"}),h(fe,{onClick:i,title:"Create APNG of current animation",startIcon:h(Or,{}),children:"Create APNG"})]})]})}const{setLoadingMsg:Fe}=Be.getState(),Ai=e=>()=>{Fe("Generating frames..."),setTimeout(async()=>{const r=await e();Fe("Creating zip...");const t="frames",n=await Gi(r,t);Fe("Finished"),xr.saveAs(n,`${t}.zip`),setTimeout(()=>Fe(""),1e3)})},ki=e=>async()=>{Fe("Generating frames...");const{frameRate:r}=F.screenshot.settings;setTimeout(async()=>{const t=await e();Fe("Creating gif...");const{makeGif:n}=await Wt(()=>import("./cda3c7b3-index.js"),[]),l=await n({frames:t,width:F.viewport.width,height:F.viewport.height,delay:Math.ceil(1e3/r)});Fe("Finished"),xr.saveAs(l,"spCapture.gif"),setTimeout(()=>Fe(""),1e3)})},_l=[{value:"rotate",label:"Rotate",frames:Ai(Ti),gif:ki(Ti),clip:Og,preview:Lg},{value:"speedDraw",label:"Speed Draw",frames:Ai(Ri),gif:ki(Ri),clip:zg,preview:Hg}];async function Ti(){const{frameRate:e=30,duration:r=5}=F.userData.specialCapture??{};let t=F.scene.background;F.scene.background=null;const{sqrt:n,sin:l,cos:a,atan:i,PI:o}=Math;let{x:s,y:f,z:p}=F.camera.position;const{x:c,z:d}=F.controls.target,g=n((s-c)**2+(p-d)**2);if(g===0){Fe("Invalid camera settings"),setTimeout(()=>Fe(""),1e3);return}const v=r*e,D=2*o/v,S=p===d?o/4:i((s-c)/(p-d)),b=[];let w=S;for(let C=0;C<v;C++){F.update(1/e),s=c+g*l(w),p=d+g*a(w),F.camera.position.set(s,f,p),F.controls.update(),F.render();const I=F.canvas.toDataURL();b.push(I),w+=D}return F.scene.background=t,b}function Og(){Fe("Recording...");const{frameRate:e=30,duration:r=5}=F.userData.specialCapture??{},t=F.loop.paused,n=F.record.settings.frameRate;F.record.settings.frameRate=e;let l=0;const{sqrt:a,sin:i,cos:o,atan:s,PI:f}=Math;let{x:p,y:c,z:d}=F.camera.position;const{x:g,z:v}=F.controls.target,D=a((p-g)**2+(d-v)**2);if(D===0){Fe("Invalid camera settings"),setTimeout(()=>Fe(""),1e3);return}const S=2*f/r;let w=d===v?f/4:s((p-g)/(d-v));const C=F.addEventListener("timeUpdate",({dt:I})=>{l+=I,l>r&&(F.record.stop(),setTimeout(()=>Fe(""),1e3),F.removeEventListener("timeUpdate",C),t&&F.loop.pause(),F.record.settings.frameRate=n),p=g+D*i(w),d=v+D*o(w),F.camera.position.set(p,c,d),w+=S*I});t&&F.loop.resume(),F.record.start()}function Lg(){const{duration:e=5}=F.userData.specialCapture??{},r=F.loop.paused;let t=0;const{sqrt:n,sin:l,cos:a,atan:i,PI:o}=Math;let{x:s,y:f,z:p}=F.camera.position;const{x:c,z:d}=F.controls.target,g=n((s-c)**2+(p-d)**2);if(g===0){Fe("Invalid camera settings"),setTimeout(()=>Fe(""),1e3);return}const v=2*o/e;let S=p===d?o/4:i((s-c)/(p-d));const b=F.addEventListener("timeUpdate",({dt:w})=>{t+=w,t>e&&(F.removeEventListener("timeUpdate",b),r&&F.loop.pause()),s=c+g*l(S),p=d+g*a(S),F.camera.position.set(s,f,p),S+=v*w});r&&F.loop.resume()}const Fg=e=>{const{geometry:r}=e,{start:t,count:n}=r.groups.at(-1);return{geometry:r,count:t+n}},ba=e=>{const r=e.meshes.visible,t=e.attachment.list.flatMap(n=>n.meshes.visible);return[...r,...t].map(Fg)};async function Ri(){const e=_e.getState().activeModel,r=ba(e).sort((d,g)=>g.count-d.count),t=r.map(({count:d})=>d),n=t.map((d,g)=>t.slice(0,g+1).reduce((v,D)=>v+D,0));n.unshift(0);const l=n.at(-1),{frameRate:a=30,duration:i=5}=F.userData.specialCapture??{};let o=F.scene.background;F.scene.background=null;const s=i*a,f=[];let p=0,c=0;r.forEach(({geometry:d})=>d.drawRange.count=0);for(let d=0;d<=s;d++){e.update(1/a),c=Math.ceil(l*d/s),r[p].geometry.drawRange.count=c-n[p];const g=c-n[p+1];g>=0&&(r[p++].geometry.drawRange.count=1/0,p<r.length&&(r[p].geometry.drawRange.count=g)),F.render();const v=F.canvas.toDataURL();f.push(v)}return F.scene.background=o,f}function zg(){const e=_e.getState().activeModel;Fe("Recording...");const r=ba(e).sort((v,D)=>D.count-v.count),t=r.map(({count:v})=>v),n=t.map((v,D)=>t.slice(0,D+1).reduce((S,b)=>S+b,0));n.unshift(0);const l=n.at(-1),{frameRate:a=30,duration:i=5}=F.userData.specialCapture??{},o=F.loop.paused,s=F.record.settings.frameRate;F.record.settings.frameRate=a;let f=0,p=0;r.forEach(({geometry:v})=>v.drawRange.count=0);const{ceil:c,max:d}=Math,g=F.addEventListener("timeUpdate",({dt:v})=>{const D=c(l*v/i);p+=d(D,1),r[f].geometry.drawRange.count=p-n[f],p-n[f+1]>=0&&(r[f++].geometry.drawRange.count=1/0,f>=r.length&&(F.removeEventListener("timeUpdate",g),setTimeout(()=>{Fe(""),F.record.stop(),o&&F.loop.pause(),F.record.settings.frameRate=s},1e3)))});o&&F.loop.resume(),F.record.start()}function Hg(){const e=_e.getState().activeModel,r=ba(e).sort((d,g)=>g.count-d.count),t=r.map(({count:d})=>d),n=t.map((d,g)=>t.slice(0,g+1).reduce((v,D)=>v+D,0));n.unshift(0);const l=n.at(-1),{duration:a=5}=F.userData.specialCapture??{},i=F.loop.paused;let o=0,s=0;r.forEach(({geometry:d})=>d.drawRange.count=0);const{ceil:f,max:p}=Math,c=F.addEventListener("timeUpdate",({dt:d})=>{const g=f(l*d/a);s+=p(g,1),r[o].geometry.drawRange.count=s-n[o],s-n[o+1]>=0&&(r[o++].geometry.drawRange.count=1/0,o>=r.length&&(F.removeEventListener("timeUpdate",c),setTimeout(()=>{i&&F.loop.pause()},1e3)))});i&&F.loop.resume()}const Gg=[{propName:"program",label:"Program",type:"select",options:_l},{propName:"frameRate",label:"Frame Rate",type:"slider",min:10,max:60,step:10},{propName:"duration",label:"Duration (s)",type:"number",min:1,max:60,step:.5}];function Wg(){const e=r=>{var l,a;const{type:t}=r.currentTarget.dataset,{program:n="rotate"}=F.userData.specialCapture??{};(a=(l=_l.find(i=>i.value===n))==null?void 0:l[t])==null||a.call(l)};return h(Ve,{className:"SpecialCapture SettingGroup",children:[h(ie,{children:h("div",{children:"Special Capture"})}),h(ie,{children:[h(ur,{target:F.userData.specialCapture,propList:Gg}),h("div",{className:"SpecialCapture-actions",children:[h(fe,{"data-type":"preview",onClick:e,title:"Preview",startIcon:h(Un,{}),children:"Preview"}),h(fe,{"data-type":"frames",onClick:e,title:"Get all frames as zip",startIcon:h(Or,{}),children:"Get Frames"}),h(fe,{"data-type":"gif",onClick:e,title:"Download as GIF",startIcon:h(qn,{}),children:"Get GIF"}),F.record&&h(fe,{"data-type":"clip",onClick:e,startIcon:h(Vt,{}),title:"Record Clip",children:"Get Clip"})]})]})]})}function $g(){return h(ie,{children:[h(eo,{}),h("span",{className:"break"}),h(Dg,{}),h(Ng,{}),h("span",{className:"break"}),h(Wg,{}),h("span",{className:"break"}),h(bg,{})]})}function Ug(e,r){return new Promise(function(t,n){let l=new XMLHttpRequest;l.open(e,r),l.onload=function(){this.status>=200&&this.status<300?t(l.response):n({status:this.status,statusText:l.statusText})},l.onerror=function(){n({status:this.status,statusText:l.statusText})},l.send()})}const qg=e=>Ug("GET",e),Vg=async e=>{const r=`https://api.github.com/repos/dgk3593/dl-model/contents/public/fbx/${e}`,t=await qg(r);return JSON.parse(t).map(l=>l.name)},Zg=async e=>await(await fetch(e)).arrayBuffer(),jg=async e=>{const t=(await Vg(e)).map(l=>{const a=`https://dgk3593.github.io/dl-model/fbx/${e}/${l}`,i=Zg(a);return{name:l,data:i}}),n=await Wl(t);xr.saveAs(n,`${e}.zip`)},Kg=()=>{const{activeModel:e}=_e.getState(),{setLoadingMsg:r}=Be.getState(),{screenshot:t}=F;if(!e){r("No model"),setTimeout(()=>r(""),2e3);return}r("Generating frames..."),setTimeout(async()=>{const n=t.getAllFrames(e);if(!n){r("Invalid animation"),setTimeout(()=>r(""),2e3);return}r(`Creating gif from ${n.length} frames...`);const{frameRate:l}=t.settings,{makeGif:a}=await Wt(()=>import("./cda3c7b3-index.js"),[]),i=await a({frames:n,width:F.viewport.width,height:F.viewport.height,delay:Math.ceil(1e3/l)});r("Finished");const o=e.userData.name??e.id??"ani";xr.saveAs(i,`${o}.gif`),setTimeout(()=>r(""),1e3)})},Yg=()=>{const{activeModel:e}=_e.getState(),{setLoadingMsg:r}=Be.getState(),{screenshot:t}=F;if(!e){r("No model"),setTimeout(()=>r(""),2e3);return}r("Generating frames..."),setTimeout(async()=>{const n=t.getAllFramesAsArrayBuffer(e);if(!n){r("Invalid animation"),setTimeout(()=>r(""),2e3);return}r(`Creating apng from ${n.length} frames...`);const{frameRate:l}=t.settings,a=Math.ceil(1e3/l),i=Array(n.length-1).fill(a),{width:o,height:s}=F.viewport,f=Cl.encode(n,o,s,0,i),p=new Blob([f],{type:"image/apng"});r("Finished");const c=e.userData.name??e.id??"ani";xr.saveAs(p,`${c}.png`),setTimeout(()=>r(""),1e3)})};window.quickApng=Yg;function Xg(){const{activeModel:e}=_e(),{record:r,screenshot:t}=F,n=Be(o=>o.sidebar.modal.open),l=o=>{o.stopPropagation(),t.downloadFrame()},a=o=>{o.stopPropagation();const{clipDuration:s}=e.animation.current;if(s===0||s===1/0){alert("Can't record");return}const{animation:f}=e;f.stop(),f.addCountedEventListener("ChainFinished",()=>r.stop()),f.play(),r.start()},i=()=>jg(e.id);return h("div",{className:"QuickAction",children:[h(mr,{title:"Change Background",onClick:()=>n("background"),children:h(Ji,{})}),h(mr,{title:"Get Screenshot",onClick:l,children:h(Xs,{})}),h(mr,{title:"Create GIF",onClick:Kg,children:h(qn,{fontSize:"large"})}),r&&h(mr,{title:"Record Current Animation",onClick:a,children:h(Vt,{})}),h(mr,{title:"Download Current Model",onClick:i,children:h(Or,{})})]})}const Jg=["Model","Scene","Export"].map(e=>({name:e})),Qg={Model:Bc,Scene:gg,Export:$g};function eh(){const{tab:e,setTab:r}=Be(l=>l.sidebar.settings),t=(l,a)=>r(a),n=Qg[e];return h(ie,{children:[h(Xg,{}),h(As,{value:e,tabs:Jg,onChange:t}),h(n,{}),h("span",{className:"bottom-space"})]})}function rh(){var f;const{target:e,setTarget:r}=zr();if(!e)return null;const{inputTarget:t}=$t(),{loadState:n}=Kr(),l=e==null?void 0:e.id,[a,i]=dr((f=e==null?void 0:e.userData)==null?void 0:f.name);Ae(()=>{var p;i((p=e==null?void 0:e.userData)==null?void 0:p.name),!(a||!e)&&zi(l).then(c=>{i(c.name),e.userData.name=c.name})},[e]);const o=a??l;return e&&h("div",{className:"ChainMaker-target",children:["Target",h(fe,{onClick:async()=>{var d;const p=await t();if(!p)return;const c=p[0];n((d=c.userData)==null?void 0:d.aniSelectState),r(c)},title:"Click to change",children:[h(qi,{modelId:l,alt:o}),h("span",{className:"name",children:o})]})]})}function th({target:e}){var s;const{toggle:r}=zr(),{inputAni:t}=$t(),{activeModel:n}=_e(),l=((s=e==null?void 0:e.userData)==null?void 0:s.chain)??[],a=()=>{const f=Wi(l);e==null||e.animation.addChain(f)},i=async()=>{var v;const f=await t();if(!f)return;const[p,c,d]=f,g=zn(p,c);(v=e.userData)==null||v.chain.push(...g),e.userData.aniSelectState=d},o=()=>{var f;r(),Kr.getState().loadState((f=n==null?void 0:n.userData)==null?void 0:f.aniSelectState)};return h("div",{className:"ChainMaker-header",children:[h("div",{className:"ChainMaker-title",children:[h(Is,{disabled:!e,children:[h(fe,{variant:"contained",title:"Play All",onClick:a,children:h(Un,{})}),h(fe,{variant:"contained",title:"Add",onClick:i,children:h(Ut,{})})]}),"ChainMaker"]}),h(rh,{}),h(qt,{onClick:o,color:"white",title:"Close Chain Maker"})]})}function nh({ani:e}){const[r,t]=dr({timeScale:e.timeScale,reps:e.reps}),n=l=>{const{name:a,value:i}=l.target,o=a==="reps"?parseInt(i):parseFloat(i),s=isNaN(o)?1:o;e[a]=s,t(f=>({...f,[a]:s}))};return h("div",{className:"ChainAni-advanced",children:[h(Pt,{onChange:n,label:"Speed",size:"small",margin:"dense",variant:"filled",inputProps:{type:"number",step:.25,name:"timeScale"},value:r.timeScale}),h(Pt,{onChange:n,label:"Repetitions",size:"small",margin:"dense",variant:"filled",inputProps:{type:"number",name:"reps"},value:r.reps})]})}const ah={type:"number",min:0,max:100,step:.25};function Pi({value:e,label:r,onChange:t,index:n}){return h(Pt,{className:"SetNumbers-number",onChange:a=>{const i=a.currentTarget.getAttribute("index"),o=parseFloat(a.currentTarget.value);t(o,i)},value:e,label:r,size:"small",margin:"dense",variant:"outlined",inputProps:{...ah,index:n}})}const ih=({value:e,onChange:r,reset:t})=>h("div",{className:"SetNumbers",children:[h(Pi,{value:e[0],label:"Start (%)",onChange:r,index:"0"}),h(Pi,{value:e[1],label:"End (%)",onChange:r,index:"1"}),h(mr,{onClick:t,title:"Reset",children:h(Ys,{})})]});function oh({ani:e}){const[r,t]=dr(e.duration??[0,100]),n=o=>{t(o),e.duration=o},l=(o,s)=>{const f=[...r];f[s]=o,n(f)},a=(o,s)=>n(s),i=()=>n([0,100]);return h(Ve,{disableGutters:!0,className:"ChainAni-duration",children:[h(ie,{children:" Duration"}),h(ie,{children:[h(ih,{value:r,onChange:l,reset:i}),h("div",{className:"duration-slider",children:h(Es,{size:"small",value:r,onChange:a})})]})]})}const In=1024,Mr=64;function lh({index:e,part:r}){var I;const{activeModel:t}=_e(),n=(I=t==null?void 0:t.face)==null?void 0:I[`${r}List`];if(!n)return h(ie,{children:"N/A"});const l=t.userData[`${r}Uv`]??vs(n);if(t.userData[`${r}Uv`]=l,!l[e-1])return h(ie,{children:"N/A"});const a=gs(t.id),[i,o]=l[0].u,[s,f]=l[0].v,p=o-i,c=f-s,d=p*In,g=c*In,v=d/Mr,D=In/v,S=g/v,b={width:Mr,height:S,position:"relative"},w={content:'""',position:"absolute",backgroundImage:`url(${a})`,backgroundSize:`${D}px ${D}px`,width:Mr,height:S};return h("div",{style:b,children:h(Yr,{sx:(({u:k,v:T})=>{const _=k[1]-k[0]!==p,M=k[0],O=T[0],z=M*D,L=O*D,U=_?(Mr-S)/2:0;return _?{width:S,height:Mr,"&::after":{...w,width:S,height:Mr,backgroundPosition:`left -${z}px bottom -${L}px`,transform:`rotate(90deg) translate(-${U}px, -${U}px)`,position:"absolute"}}:{width:Mr,height:S,position:"relative","&::after":{...w,backgroundPosition:`left -${z}px bottom -${L}px`}}})(l[e-1])})})}const sh=({part:e,...r})=>e==="eye"?h(hs,{...r}):h(ms,{...r});function Bi({part:e,index:r,...t}){var a;const{target:n}=zr(),l=n==null?void 0:n.face;switch(l==null?void 0:l.type){case"uv":return h("div",{...t,"data-part":e,children:r?h(sh,{part:e,texture:l[`${e}Texture`],index:r}):h(ie,{children:"Set"})});case"meshes":return!((a=l==null?void 0:l[`${e}List`])!=null&&a.length)?h("div",{style:{cursor:"default"},children:"N/A"}):h("div",{...t,"data-part":e,children:r?h(lh,{part:e,index:r}):h(ie,{children:"Set"})});default:return h(ie,{})}}const ch={type:"number",min:0,max:100,step:1},uh={marginTop:"0.2rem"};function dh({details:e,onUpdate:r,onRemove:t}){const{id:n,time:l,eyeIdx:a,mouthIdx:i}=e,[o,s]=dr(l),{inputEye:f,inputMouth:p}=$t(),c=()=>t(n),d=v=>{const D=parseFloat(v.target.value);s(D);const S={...e,time:D};r(S)},g=async v=>{const{part:D}=v.currentTarget.dataset,S=D==="eye"?await f():await p();if(!S)return;const b=S[0]?S[0]:void 0,w={...e,[`${D}Idx`]:b};r(w)};return h(ie,{children:[h("div",{onClick:c,children:h(Wn,{})}),h(Pt,{onChange:d,inputProps:ch,value:o,margin:"dense",size:"small",variant:"standard",sx:uh}),h(Bi,{part:"eye",index:a,"data-id":n,onClick:g}),h(Bi,{part:"mouth",index:i,"data-id":n,onClick:g})]})}function fh({ani:e}){const{target:r}=zr(),{aniAction:t}=e,n=[],l=[];t.forEach(d=>{const{time:g,["face.eyeIdx"]:v,["face.mouthIdx"]:D,...S}=d;(v||D)&&n.push({id:wa(),time:g,eyeIdx:v,mouthIdx:D}),Object.keys(S).length&&l.push({time:g,...S})});const[a,i]=dr(n),o=d=>{const g=d.map(({time:w})=>w),v=l.map(({time:w})=>w),b=[...new Set([...g,...v])].sort((w,C)=>w-C).map(w=>{const C=d.find(M=>M.time===w),{eyeIdx:I,mouthIdx:k}=C,_={...l.find(M=>M.time===w),time:w};return I&&(_["face.eyeIdx"]=I),k&&(_["face.mouthIdx"]=k),_});e.aniAction=b,i(d)},s=d=>{const{id:g}=d,v=a.map(D=>D.id===g?d:D);o(v)},f=d=>{const g=a.filter(v=>v.id!==d);i(g),o(g)},p=()=>i(d=>[...d,{id:wa()}]),c=a.map(d=>h(dh,{details:d,onUpdate:s,onRemove:f},d.id));return r.face&&h(Ve,{disableGutters:!0,className:"ChainAni-face",children:[h(ie,{children:"Facial Expression"}),h("div",{className:"ChainAniFace",children:[(a==null?void 0:a.length)>0&&h(ie,{children:[h("div",{}),h("div",{children:"Time (%)"}),h("div",{children:"Eye"}),h("div",{children:"Mouth"}),c]}),h("div",{onClick:p,children:h(Ut,{})})]})]})}const ph=({onClick:e})=>h(mr,{onClick:e,title:"Play",children:h(Un,{})});function vh({target:e,ani:r,index:t}){const{chain:n}=e.userData,l=o=>{o.stopPropagation(),n.remove(r)},a=o=>{o.stopPropagation();const s=Wi([r]);e==null||e.animation.addChain(s)},i=o=>h(Ve,{className:"ChainAni",...o.draggableProps,ref:o.innerRef,children:[h(ie,{children:[h(ph,{onClick:a}),h("div",{...o.dragHandleProps,className:"ChainAni-name",children:r.name}),h(qt,{onClick:l,title:"Delete"})]}),h(ie,{children:[h(nh,{ani:r}),h(oh,{ani:r}),h(fh,{ani:r})]})]});return h(ml,{draggableId:r.id,index:t,children:i})}function gh({target:e}){var i;if(!((i=e==null?void 0:e.userData)!=null&&i.chain))return null;const[r,t]=br(),n=e.userData.chain;return Ae(()=>{const o=n.addEventListener("change",t);return()=>n.removeEventListener("change",o)},[]),h(dl,{onDragEnd:o=>{const{destination:s,source:f}=o;if(!s||s.index===f.index)return;const p=[...n],c=p.splice(f.index,1)[0];p.splice(s.index,0,c),n.length=0,n.push(...p)},children:h(ha,{droppableId:"chainList",children:o=>h("div",{ref:o.innerRef,...o.droppableProps,children:[n.map((s,f)=>h(vh,{target:e,index:f,ani:s},s.id)),o.placeholder]},r)})})}function hh(){const{activeModel:e}=_e(),{target:r,setTarget:t}=zr();return Ae(()=>{if(!r)return;const n=r.addEventListener("dispose",()=>t(e));return()=>r.removeEventListener("dispose",n)},[r]),Ae(()=>{r&&F.loadedModel.includes(r)||t(e)},[r,e]),h("div",{className:"ChainMaker",children:[h(th,{target:r}),h(gh,{target:r})]},r==null?void 0:r.uniqueId)}const mh={sx:Rn.paper};function bh({open:e}){const r=Be(l=>l.sidebar.toggle),t=zr(l=>l.open),n=h(Yr,{sx:Rn.sidebarHeader,children:[vc,pc,h(qt,{color:"white",onClick:r,title:"Close Sidebar"})]});return h(Xi,{className:"Sidebar",open:e,onClose:r,variant:"persistent",sx:Rn.sidebar,PaperProps:mh,children:[n,t?h(hh,{}):h(eh,{}),h(hc,{})]})}const Mi="23rem",Ni={dock:{width:Mi},Paper:{width:Mi,border:"unset",scrollbarWidth:"thin",scrollbarColor:"rgba(128, 0, 0, 0.8) rgba(255, 255, 255, 0.3)","&::-webkit-scrollbar":{width:"4px",backgroundColor:"rgba(128, 0, 0, 0.3)"},"&::-webkit-scrollbar-thumb":{width:"4px",backgroundColor:"rgba(128, 0, 0, 0.8)",borderRadius:"2px"}}};function yh(){const{mode:e,handleSelect:r,close:t}=Be(l=>l.dock),n=Li[e]??Yr;return e&&h(Xi,{className:"Dock",sx:Ni.dock,open:!!e,variant:"persistent",anchor:"right",PaperProps:{sx:Ni.Paper},children:[h(qt,{onClick:t,title:"Close Dock"}),h(Fn,{fallback:h(Gn,{}),children:h(n,{compact:!0,onSelect:r})})]})}function wh(){const{Component:e,props:r={},close:t,onClose:n}=$t();return h($i,{open:!!e,closeModal:n??t,children:h(Fn,{fallback:h(Gn,{}),children:h(e,{...r})})})}const Il=["chara-regular","chara-allies","chara-enemies","dragon-regular","dragon-special","weapon-regular","weapon-special","weapon-extra","boss-archdemon","boss-agito","boss-raid","boss-void","boss-others","model-unlisted"],El=["ani-home","ani-quest","ani-weapon","ani-gun","ani-genericSkill","ani-uniqueSkill","ani-uniqueCombo","ani-uniqueFS","ani-uniqueVictory","ani-uniqueOther","ani-misc","ani-extra"],Al=["background-image","background-skybox","model-texture"],xh=[...Il,...El,...Al],Dh=Object.freeze(Object.defineProperty({__proto__:null,all:xh,animation:El,model:Il,others:Al},Symbol.toStringTag,{value:"Module"})),En=e=>$l(Dh[e]??[]),An=fs.getState().set,kn=!!indexedDB,Sh=async()=>{const e=En("others"),r=En("model"),t=En("animation"),n=await e;An(n);const l=await r;An(l);const a=kn&&Ul(l),i=await t;An(i),kn&&Ms(i),await ql,await a,kn&&await Vl(),console.info("Data Load Complete")};function rm(){const e=Be(s=>s.sidebar),r=Be(s=>s.setLoadingMsg),t=Zl(),{activeModel:n,setActiveModel:l}=_e(),{setSource:a,setSourceName:i}=Kr(s=>s.personalAni),o=Ui("(min-width:640px)");return Ae(()=>{t&&r("Loading"),l(F.model[0]);const s=F.model.addEventListener("change",()=>{F.model.includes(n)||l(F.model[0])});return Sh(),window.addEventListener("unload",()=>indexedDB==null?void 0:indexedDB.deleteDatabase("model-viewer")),r(""),()=>F.model.removeEventListener("change",s)},[]),Ae(()=>{n&&(i(n==null?void 0:n.userData.name),a(n==null?void 0:n.id))},[n]),h(ie,{children:[h("button",{title:"Settings",className:"sidebar-toggle",onClick:e.toggle,children:h(tc,{})}),h(wh,{}),h(bh,{open:e.open}),o&&h(yh,{})]})}export{rm as default};
